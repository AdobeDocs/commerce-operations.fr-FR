---
title: Notes de mise à jour d’Adobe Commerce 2.4.7
description: Découvrez les nouvelles fonctionnalités, les améliorations, les correctifs et les problèmes connus de la version 2.4.7 d’Adobe Commerce.
exl-id: 6ceb1d6d-5076-49a1-925f-913aa3598c90
source-git-commit: a29a6255e9cb6736bc59c69c16f83c0807712fcf
workflow-type: tm+mt
source-wordcount: '20161'
ht-degree: 0%

---


# Notes de mise à jour d’Adobe Commerce 2.4.7

Adobe Commerce 2.4.7 introduit la prise en charge de PHP 8.3. Il introduit des centaines de correctifs et d’améliorations de qualité. Les dépendances du compositeur principal et les bibliothèques tierces ont été mises à niveau vers les dernières versions disponibles. Cette version comprend des améliorations importantes des performances, notamment un chargement plus rapide des pages de liste de produits pour les produits complexes avec de nombreuses options et améliorations pour la gestion de l’indexeur. Cette version augmente la couverture GraphQL pour les attributs personnalisés et les caches de résolveur GraphQL. Elle introduit également la prise en charge des services FedEx et UPS récemment mis à jour.

{{bics}}

## Autres informations de mise à jour

Bien que le code pour ces fonctionnalités soit fourni avec les versions du code principal d’Adobe Commerce, plusieurs de ces projets (par exemple, B2B et Studio Progressive Web Application (PWA)) sont également publiés indépendamment. Les correctifs de bugs pour ces projets sont documentés dans les informations de mise à jour distinctes spécifiques au projet disponibles dans la documentation de chaque projet.

## Points forts d’Adobe Commerce 2.4.7

Recherchez les points forts suivants dans cette version.

### Améliorations de la sécurité

Cette version comprend les mêmes correctifs de sécurité et améliorations de la sécurité de la plateforme que ceux inclus dans Adobe Commerce 2.4.6-p5, 2.4.5-p7 et 2.4.4-p8. Voir [Bulletin de la sécurité d&#39;Adobe](https://helpx.adobe.com/security/products/magento/apsb24-18.html) pour consulter la dernière discussion sur ces problèmes résolus.

Aucune attaque confirmée liée à ces problèmes ne s’est produite à ce jour. Cependant, certaines vulnérabilités peuvent potentiellement être exploitées pour accéder aux informations sur les clients ou prendre le contrôle de sessions d’administration. La plupart de ces problèmes nécessitent qu’un attaquant obtienne d’abord l’accès à l’administrateur. Par conséquent, nous vous rappelons de prendre toutes les mesures nécessaires pour protéger votre administrateur, y compris, mais sans s’y limiter, les mesures suivantes :

* PLACER SUR LA LISTE AUTORISÉE IP en cours de traitement
* [Authentification à deux facteurs](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
* Utilisation d&#39;un VPN
* Utilisation d’un emplacement unique plutôt que `/admin`
* Bonne hygiène des mots de passe

#### Améliorations de la sécurité supplémentaires

Les améliorations apportées à la sécurité dans cette version améliorent la conformité aux dernières bonnes pratiques de sécurité.

* **Modification du comportement des clés de cache non générées**:

   * Les clés de cache non générées pour les blocs incluent désormais des préfixes qui diffèrent des préfixes des clés générées automatiquement. (Les clés de cache non générées sont des clés définies à l’aide de la syntaxe de directive du modèle ou de `setCacheKey` ou `setData` méthodes.)
   * Les clés de cache non générées pour les blocs ne doivent désormais contenir que des lettres, des chiffres, des tirets (-) et des traits de soulignement (_).  <!-- AC-9831 -->

* **Limitations du nombre de codes de coupon générés automatiquement**. Commerce limite désormais le nombre de codes coupon générés automatiquement. La valeur maximale par défaut est de 250 000. Les commerçants peuvent utiliser le nouveau **[!UICONTROL Code Quantity Limit]** option de configuration (**[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL Customers]** > **[!UICONTROL Promotions]**) pour éviter de surcharger le système avec de nombreux coupons. <!-- AC-8753 -->

* **Optimisation du processus de génération d’URL d’administration par défaut**. La génération de l’URL d’administration par défaut a été optimisée pour accroître le caractère aléatoire, ce qui rend les URL générées moins prévisibles. <!-- AC-9028 -->

* **Ajout de la prise en charge de l’intégrité des sous-ressources (SRI)** pour se conformer aux exigences PCI 4.0 en matière de vérification de l&#39;intégrité des scripts sur les pages de paiement. La prise en charge de l’intégrité des sous-ressources (SRI) fournit des hachages d’intégrité pour toutes les ressources JavaScript résidant dans le système de fichiers local. La fonction SRI par défaut est implémentée uniquement sur les pages de paiement pour les zones Admin et Storefront. Cependant, les commerçants peuvent étendre la configuration par défaut à d’autres pages. Voir [Intégrité des sous-ressources](https://developer.adobe.com/commerce/php/development/security/subresource-integrity/) dans le _Guide du développeur PHP Commerce_.<!--AC-1153-->

* **Modifications apportées à la politique de sécurité du contenu (CSP)**—Mises à jour et améliorations de la configuration des politiques de sécurité du contenu (CSP) Adobe Commerce pour se conformer aux exigences PCI 4.0. Pour plus d’informations, voir [Politiques de sécurité du contenu](https://developer.adobe.com/commerce/php/development/security/content-security-policies/) dans le _Guide du développeur PHP Commerce_. <!--AC-11513-->

   * La configuration CSP par défaut pour les pages de paiement pour les zones Commerce Admin et Storefront est désormais `restrict` mode. Pour toutes les autres pages, la configuration par défaut est `report-only` mode.  Dans les versions antérieures à la version 2.4.7, CSP était configuré dans `report-only` mode pour toutes les pages.

   * Ajout d’un fournisseur à usage unique pour permettre l’exécution de scripts intégrés dans une CSP. Le fournisseur de valeur à usage unique facilite la génération de chaînes à usage unique pour chaque requête. Les chaînes sont ensuite jointes à l’en-tête CSP.

   * Ajout d’options permettant de configurer des URI personnalisés pour signaler des violations de CSP pour la page Créer une commande dans l’administration et la page Passage en caisse dans le storefront. Vous pouvez ajouter la configuration à partir de l’Administration ou en ajoutant l’URI au `config.xml` fichier .

     >[!NOTE]
     >
     >Mise à jour de la configuration de la CSP sur `restrict` Le mode peut bloquer les scripts intégrés existants sur les pages de paiement dans Admin et storefront, ce qui entraîne l’erreur de navigateur suivante lorsqu’une page se charge : `Refused to execute inline script because it violates the following Content Security Policy directive: "script-src`. Corrigez ces erreurs en mettant à jour la configuration de la liste autorisée pour autoriser les scripts requis. Voir [Résolution des problèmes](https://developer.adobe.com/commerce/php/development/security/content-security-policies/#troubleshooting) dans le _Guide du développeur PHP Commerce_.

* Un nouveau paramètre de configuration du cache de pages entières peut contribuer à atténuer les risques associés au protocole HTTP `{BASE-URL}/page_cache/block/esi` point d’entrée. Ce point d’entrée prend en charge des fragments de contenu chargés dynamiquement et sans restriction à partir des descripteurs de disposition et des structures de bloc Commerce. Le nouveau **[!UICONTROL Handles params size]** le paramètre de configuration définit la valeur de l’objet de ce point d’entrée `handles` paramètre , qui détermine le nombre maximal autorisé de descripteurs par API. La valeur par défaut de cette propriété est 100. Les commerçants peuvent modifier cette valeur à partir de l’Administration (**[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL System]** > **[!UICONTROL Full Page Cache]** > **[!UICONTROL Handles params size]**). Voir [Configuration de l’application Commerce pour utiliser le vernis](https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cache/configure-varnish-commerce.html). <!-- AC-9113 -->

* **Limitation de taux native pour les informations de paiement transmises par le biais des API REST et GraphQL**. Les commerçants peuvent maintenant [configurer la limitation de débit](https://experienceleague.adobe.com/en/docs/commerce-admin/config/sales/sales#rate-limiting) pour les informations de paiement transmises à l’aide de REST et de GraphQL. Cette couche de protection supplémentaire permet de prévenir les attaques par carte et de réduire potentiellement le volume d’attaques par carte qui testent plusieurs numéros de carte de crédit à la fois. Il s’agit d’une modification du comportement par défaut d’un point d’entrée REST existant. Voir [Limitation de débit](https://developer.adobe.com/commerce/webapi/get-started/rate-limiting/).

* Le comportement par défaut de [isEmailAvailable](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/queries/is-email-available/) la requête GraphQL et le ([V1/customers/isEmailAvailable](https://adobe-commerce.redoc.ly/2.4.7-admin/tag/customersisEmailAvailable/#operation/PostV1CustomersIsEmailAvailable)) Le point d’entrée REST a changé. Par défaut, les API renvoient désormais toujours `true`. Les commerçants peuvent activer le comportement d’origine en définissant *[Activer la connexion au passage en caisse des invités](https://experienceleague.adobe.com/en/docs/commerce-admin/config/sales/checkout)* dans Admin to `yes`, mais cela peut exposer les informations du client à des utilisateurs non authentifiés.

### Améliorations de Platform

Les mises à niveau de Platform pour cette version améliorent la conformité aux dernières bonnes pratiques de sécurité.

Adobe Commerce 2.4.7 comprend les mises à niveau de plateforme suivantes :

* **Compatibilité PHP 8.3**. Cette version introduit la prise en charge de PHP 8.3. Commerce prend désormais en charge PHP 8.3 et 8.2. PHP 8.2 sera pris en charge jusqu’à sa date de fin de service (EOS) en décembre 2025. Après décembre 2025, tous les commerçants exécutant des déploiements 2.4.7 doivent migrer vers PHP 8.3. <!-- AC-8988 -->

Adobe Commerce 2.4.7 est toujours compatible avec PHP 8.1, mais uniquement à des fins de mise à niveau. PHP 8.1 n&#39;est pas pris en charge et n&#39;est pas recommandé. Le code principal Adobe Commerce 2.4.7, toutes les extensions groupées, toutes les extensions appartenant à l&#39;Adobe et les services SaaS sont compatibles avec PHP 8.3. <!-- AC-9668 -->

* **Prise en charge de RabbitMQ 3.13**. Cette version est compatible avec la dernière version de RabbitMQ 3.13. La compatibilité reste avec RabbitMQ 3.11 et 3.12, qui est pris en charge respectivement jusqu’en août 2024 et en décembre 2024, mais l’Adobe recommandé est d’utiliser Adobe Commerce 2.4.7 uniquement avec RabbitMQ 3.13. <!-- AC-9659 -->

* **Compositeur 2.7.x**. La compatibilité avec Composer 2.2.x reste. <!-- AC-9663 -->

* **Prise en charge du cache de vernis 7.4**. Cette version est compatible avec la dernière version de Varnish Cache 7.4. La compatibilité reste avec les versions 6.0.x et 7.2.x, mais nous avons recommandé d’utiliser Adobe Commerce 2.4.7 uniquement avec Varnish Cache version 7.4 ou version 6.0 LTS. <!-- AC-9662 -->

* **Elasticsearch 8.11** compatibilité <!-- AC-9661 -->

* Prise en charge d’Opensearch 2.12 et d’OpenSearch 1.3 <!-- AC-9659 -->

* **Redis 7.2** <!-- AC-10811 -->

* Le `extjs` la bibliothèque a été remplacée par la dernière version de `jsTree`. <!-- AC-9320 -->

* `jquery/fileUpload` La bibliothèque a été supprimée. <!-- AC-10569 -->

Toutes les bibliothèques JavaScript et les dépendances NPM dans le code principal Adobe Commerce ont été mises à jour vers les dernières versions disponibles. Toutes les dépendances de la bibliothèque Laminas ont été mises à jour vers la dernière version compatible avec PHP 8.3. <!-- AC-9667 9665 -->

#### Mises à niveau supplémentaires

* **Prise en charge de plusieurs coupons par commande**. Les commerçants peuvent maintenant [configuration du nombre maximal de coupons](https://experienceleague.adobe.com/en/docs/commerce-admin/config/sales/sales#multicoupon-settings) qui peut être appliqué par commande avec le nouveau **[!UICONTROL Maximum number of coupons per order]** option de configuration. Cette valeur est définie sur 1 par défaut. Vous pouvez désormais utiliser [REST](https://developer.adobe.com/commerce/webapi/rest/modules/multicoupon/) ou [GraphQL](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/apply-coupons/) pour appliquer plusieurs coupons à un panier.

* La passerelle d’API XML UPS Commerce a été migrée vers la nouvelle [API REST UPS Commerce](https://experienceleague.adobe.com/en/docs/commerce-admin/stores-sales/delivery/shipping-carriers/ups) pour prendre en charge les mises à jour apportées à leurs [Modèle de sécurité des API](https://developer.ups.com/oauth-developer-guide). (UPS met en œuvre un modèle de sécurité OAuth 2.0 (jetons du porteur) pour toutes les API .) Toutes les API XML UPS de Commerce précédentes ont été supprimées de la base de code d’Adobe Commerce 2.4.7. <!-- AC-8918 -->

* Adobe Commerce [intégration](https://experienceleague.adobe.com/en/docs/commerce-admin/stores-sales/delivery/shipping-carriers/fedex) avec FedEx a été migré des anciens services Web WSDL FedEx vers les dernières API RESTful FedEx. Le service de suivi, de validation d&#39;adresse et de validation des codes postaux de FedEx Web Services WSDLS sera retiré en mai 2024. <!-- AC-1470 -->

* Ajout de la prise en charge de la nouvelle méthode d’expédition USPS Ground Advantage. Il s&#39;agit d&#39;une intégration prête à l&#39;emploi avec la nouvelle méthode d&#39;expédition d&#39;USPS, USPS Ground Advantage, publiée en juillet 2023. Cette nouvelle intégration peut être utilisée pour récupérer les tarifs d&#39;expédition et planifier les livraisons et les retours via le service d&#39;expédition USPS. La méthode d&#39;expédition USPS Ground Advantage remplace ces méthodes d&#39;expédition, qui ont été abandonnées lorsque la méthode d&#39;expédition USPS Ground Advantage a été lancée :

   * USPS Retail Ground
   * Service De Package De Première Classe
   * Sélection de parcelle de terrain <!-- AC-9182 -->

* Les modules d’expédition Temando ont été supprimés de la base de code de Commerce principale. Cette fonctionnalité a été abandonnée dans Adobe Commerce 2.4.4. <!-- AC-8130 -->

### Améliorations des performances et de l’évolutivité

Commerce 2.4.7 comprend les améliorations suivantes en termes de performances et d’évolutivité :

* Les commerçants d’entreprise peuvent désormais configurer jusqu’à **un million de règles de prix de panier actives, basées sur des coupons** dans Adobe Commerce sans dégradation significative des performances des opérations de panier et de passage en caisse. <!-- ACPT-1198 -->

* **Gestion améliorée de l’indexeur**. Le nouveau `indexer:set-status` prend en charge la gestion dynamique du statut de l’indexeur. Les utilisateurs administrateurs peuvent utiliser cette commande pour modifier le statut de l’indexeur en . `suspended`, `invalid`, ou `valid`. Cette fonctionnalité est particulièrement utile pour gérer les performances du système lors d’opérations en bloc étendues, telles que les importations ou les mises à jour de produits, en permettant de contrôler le moment où les indexeurs sont automatiquement déclenchés par les tâches cron du système. Voir [Gestion des indexeurs](https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cli/manage-indexers.html).

* **Page de liste de produits pour les produits complexes avec de nombreuses options**. Le temps de chargement s’est amélioré pour les pages de liste de produits qui incluent des produits complexes avec plus de 100 options. Les performances des requêtes GraphQL pour répertorier les produits par catégorie ont également été améliorées. <!-- ACPT-1683 -->

* **Format JSON désormais pris en charge pour le REST [API d’importation](https://developer.adobe.com/commerce/webapi/rest/modules/import/)**. Les commerçants peuvent désormais importer jusqu’à 100 000 enregistrements par minute dans Adobe Commerce au format JSON. <!-- ACPT-943 -->

* **Améliorations des performances des règles de vente**. Amélioration des performances des déploiements d’entreprise avec de nombreuses règles de vente actives (environ 100 000). Les déploiements d’entreprise qui implémentent fortement des promotions déploient souvent de nombreuses règles de panier actives. Ces types de déploiements d’entreprise exécutant Commerce 2.4.7 ne verront aucune dégradation des performances liée au nombre de règles de prix de panier configurées lors des opérations de passage en caisse. <!-- ACPT-1198 -->

* **Des opérations d’enregistrement plus rapides des configurations au niveau du magasin pour les déploiements avec de nombreux magasins**. L’enregistrement des paramètres de configuration dans des déploiements avec plus de 500 magasins peut prendre du temps. Le nouveau [Configuration Async](../../../performance/configuration.md#asynchronous-configuration-save) Le module permet des opérations d’enregistrement de configuration asynchrones en exécutant une tâche cron qui utilise un client pour traiter l’opération d’enregistrement dans une file d’attente de messages. AsyncConfig est désactivé par défaut.

* **Génération plus rapide du cache de configuration pour les configurations volumineuses**. Le `bin/magento cache:clean config` La commande préchauffe désormais le cache de configuration lorsque ce dernier est activé. Cela réduit le temps d’arrêt nécessaire à la génération du cache de configuration pour les configurations volumineuses. Les opérations d’enregistrement de la configuration ne nettoient plus le `config_scopes` cache avant d’écrire des données dans le cache, ce qui réduit également le temps pendant lequel les autres requêtes sont verrouillées pendant l’écriture des données de configuration.

### Serveur d’applications GraphQL

[Serveur d’applications GraphQL](../../../performance/application-server.md) permet à Adobe Commerce de conserver l’état des requêtes d’API Commerce GraphQL et élimine la nécessité de procéder à un amorçage, ce qui se traduit par un débit plus élevé, une latence plus faible et une utilisation efficace des ressources pour toutes les API GraphQL. En partageant l’état de l’application entre les processus, les requêtes d’API GraphQL deviennent beaucoup plus efficaces et les réponses de l’API GraphQL sont en moyenne 30 % plus rapides.<!-- ACPT-27 -->

GraphQL Application Server est disponible uniquement pour Adobe Commerce. Il n’est pas disponible pour le Magento Open Source. Vous devez [envoyer un support technique Adobe Commerce](https://experienceleague.adobe.com/en/docs/commerce-knowledge-base/kb/help-center-guide/magento-help-center-user-guide) ticket pour activer GraphQL Application Server sur les projets Pro.

>[!NOTE]
>
>GraphQL Application Server n’est actuellement pas compatible avec [[!DNL Amazon Simple Storage Service (AWS S3)]](https://aws.amazon.com/s3/). Adobe Commerce sur les clients d’infrastructure cloud qui utilisent actuellement [!DNL AWS S3] pour [stockage à distance](../../../configuration/remote-storage/cloud-support.md) Impossible d’utiliser le serveur d’applications GraphQL avant la publication d’un correctif plus tard en 2024 par Adobe.<!-- ACPT-1840 -->

### Métapaquet d’extension Adobe Commerce

Cette version introduit le métapaquet Extension Adobe Commerce v2.0.0, qui regroupe automatiquement certaines extensions Adobe Commerce avec cette version de base. Les versions de ces extensions incluses dans ce métapaquet sont installées lorsque `composer update` est exécuté, ce qui simplifie le processus de mise à niveau de ces extensions lors de la mise à niveau vers la dernière version de base. Ces extensions gèrent des plannings de publication indépendants.

Le métapaquet Extension d’Adobe Commerce pour Adobe Commerce 2.4.7 comprend les extensions suivantes :

* [SDK de l’interface utilisateur d’administration Adobe Commerce](https://developer.adobe.com/commerce/extensibility/admin-ui-sdk/)
* [Intégration d’Adobe Commerce avec Adobe IMS](https://experienceleague.adobe.com/docs/commerce-admin/start/admin/ims/adobe-ims-integration-overview.html)
* [Événements d’Adobe I/O pour Adobe Commerce](https://developer.adobe.com/commerce/extensibility/events/)
* [Adobe Stock](https://experienceleague.adobe.com/docs/commerce-admin/content-design/media/adobe-stock/adobe-stock.html)
* [Braintree](https://experienceleague.adobe.com/docs/commerce-admin/stores-sales/payments/braintree.html)
* [Services de paiement](https://experienceleague.adobe.com/docs/commerce-merchant-services/payment-services/guide-overview.html)

Les futures versions de ce métapaquet d’extension peuvent contenir des extensions supplémentaires.

### Webhooks Adobe Commerce

Les webhooks Commerce (v1.2.0 ) permettent aux développeurs de configurer une logique synchrone pour exécuter des appels vers des systèmes externes lorsqu’un événement Adobe Commerce se déclenche. Les appels synchrones sont requis lorsque Commerce doit immédiatement calculer ou valider une valeur telle qu’un total de commande, une taxe ou un paiement à l’aide d’un point d’entrée tiers, puis réécrire le résultat dans Adobe Commerce.

Les Webhooks Commerce sont désormais installés par défaut. Voir [Présentation des Webhooks Adobe Commerce](https://developer.adobe.com/commerce/extensibility/webhooks/)

### Adobe Stock

Le package Adobe Stock (`adobe-stock-integration`) est désormais inclus dans le méta-package Extensions de Commerce (`extensions-metapackage`) pour prendre en charge des mises à jour plus fréquentes. <!-- CABPI-630 -->

### B2B

>[!NOTE]
>
>La version 2.4.7 est compatible avec la version 1.4.2 de B2B. Cependant, Adobe recommande aux clients d’attendre la prochaine version B2B 1.5.0 GA avant de procéder à la mise à niveau, qui inclut la prise en charge de PHP 8.3. Voir [Notes de mise à jour B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### Braintree

* **[!DNL Vaulted PayPal]et [!DNL Pay Later] Modifications**—Les clients connectés qui ont précédemment mis en chambre forte/stocké leur compte PayPal ont la possibilité de payer avec :
   * [!DNL Pay Now] (sans avoir à se connecter à leur [!DNL PayPal] compte, l&#39;utilisateur peut payer avec sa carte par défaut)
   * Payer avec une source de financement différente
   * Payer avec un compte différent
   * [!DNL PayPal Pay Later] ou [!DNL PayPal Credit] bouton

* **Prise en charge de 3DS pour[!DNL Google Pay]**—Prise en charge de la vérification 3DS pour [!DNL Google Pay] cartes sans jeton. Voir la [Documentation du Braintree](https://developer.paypal.com/braintree/docs/guides/3d-secure/client-side/android/v3#using-3d-secure-with-google-pay) pour plus d’informations.

* **[!DNL Vault Apple Pay Payments]**—Autoriser les clients connectés à mettre en coffre/stocker leurs [!DNL Apple Pay] paiements sur leur compte de magasin Commerce à utiliser pour les transactions futures. Cela réduit le nombre d’étapes de passage en caisse et crée une expérience de passage en caisse plus rapide pour le client récurrent.

* **[!DNL Vault Google Pay Payments]**—Autoriser les clients connectés à mettre en coffre/stocker leurs [!DNL Google Pay] paiements sur leur compte de magasin Commerce à utiliser pour les transactions futures. Cela réduit le nombre d’étapes de passage en caisse et crée une expérience de passage en caisse plus rapide pour le client récurrent.

* **[!DNL Vault Venmo Payments]**—Autoriser les clients connectés à mettre en coffre/stocker leurs [!DNL Venmo] comptes à leur compte de magasin Commerce à utiliser pour les transactions futures. Cela réduit le nombre d’étapes de passage en caisse et crée une expérience de passage en caisse plus rapide pour le client récurrent.

* **[!DNL Vault ACH Payments]**—Autoriser les clients connectés à mettre en chambre forte/stocker leurs paiements ACH sur leur compte de magasin Commerce à utiliser pour les transactions futures. Cela réduit le nombre d’étapes de passage en caisse et crée une expérience de passage en caisse plus rapide pour le client récurrent.

* **[!UICONTROL Express Payment]boutons en haut du passage en caisse**—Pour accélérer le passage en caisse, nous avons introduit [!DNL Express Payment] options au début du passage en caisse. Les clients peuvent désormais payer par [!DNL PayPal], [!DNL PayPal Pay Later], [!DNL Apple Pay], et [!DNL Google Pay Express] paiements.

* **[!DNL Braintree]Notes de mise à jour et liens d’assistance dans la configuration d’administration**—Les commerçants peuvent désormais accéder directement à l’assistance du Braintree et aux notes de mise à jour en ligne depuis Commerce Admin.

* **Prise en charge de GraphQL pour tous [!DNL Braintree] modes de paiement sauf[!DNL Venmo]**: d’autres configurations sont exposées dans l’API GraphQL. Cela s’avère particulièrement utile pour les applications découplées.

* **[!DNL Vaulting]zone paiements en compte**—Les clients connectés peuvent désormais [coffre/magasin](https://experienceleague.adobe.com/en/docs/commerce-admin/stores-sales/payments/braintree#step-3-complete-the-advanced-settings) nouvelles cartes de crédit/débit et [!DNL PayPal] comptes dans la zone Compte client . Auparavant, les clients ne pouvaient mettre leurs paiements en chambre forte ou en magasin que lorsqu’ils les enregistraient pour une utilisation ultérieure lors de l’exécution d’une transaction lors du passage en caisse. Désormais, ils peuvent mettre en chambre forte les nouvelles cartes de crédit/débit et les nouveaux comptes PayPal sans avoir à créer de transaction.

* **Transactions sans frottement**—Les transactions sans frottement accélèrent le processus de paiement en réduisant le nombre de clics/étapes des clients pour effectuer une transaction par carte de crédit/débit en ligne. Auparavant (lorsque 3DS était activé), chaque client était confronté à des défis 3DS. Grâce à la nouvelle fonctionnalité Transactions sans frottement, les clients ne sont sollicités pour la 3DS que lorsque la banque le demande. Cela réduit l’abandon de panier, augmente les taux de conversion et entraîne une augmentation des ventes.

* **Litige webhooks**: lorsqu’un client conteste une transaction en Braintree, le statut du litige est désormais transmis à Commerce. Elle peut faire l’objet d’une recherche dans le fichier **[!UICONTROL Sales]** > **[!UICONTROL Order]** grille et attaché à chaque commande.

### Intégration de Commerce à Adobe IMS

Le package d’intégration Adobe IMS (`adobe-commerce/adobe-ims-metapackage`) est désormais inclus dans le méta-package Extensions de Commerce (`extensions-metapackage`) pour prendre en charge des mises à jour plus fréquentes. <!-- CABPI-630 -->

### GraphQL

Commerce 2.4.7 comprend des fonctionnalités améliorées de mise en cache du GraphQL, la prise en charge du schéma GraphQL pour les attributs personnalisés, la prise en charge de l’annulation de commande découplée et une mise en cache améliorée du résolveur.

* **Gestion des paniers plus flexible**. Le `clearCart` mutation efface désormais le contenu d’un panier spécifié en une seule action. Il remplace le `clearCustomerCart` la mutation, qui a été abandonnée. <!-- LYNX-254 -->

* **Améliorations apportées à la création de mutations de panier**. Le `createGuestCart` une mutation a été ajoutée pour remplacer l’obsolète `createEmptyCart` mutation. Auparavant, si vous utilisiez `createEmptyCart`, vous n’avez pas pu déterminer si le panier était pour un invité ou un client connecté. <!-- LYNX-224 -->

* **Les éléments de commande incluent désormais des images de produit.**. `OrderItemInterface` expose les images des produits, ce qui permet de les associer aux produits commandés et de les charger plus efficacement.  [GitHub-32369](https://github.com/magento/magento2/issues/32369) <!-- AC-7918 -->

* **Prise en charge étendue de la mise en cache du résolveur**. Les résolveurs de requêtes GraphQL suivants peuvent désormais être mis en cache dans le cache des résultats du résolveur GraphQL, ce qui améliore les performances lorsque les requêtes sont envoyées avec des requêtes de POST :

   * `Magento\CustomerGraphQl\Model\Resolver\Customer::resolve`
   * `Magento\CustomerGraphQl\Model\Resolver\CustomerAddress::resolve`
   * `Magento\CustomerGraphQl\Model\Resolver\IsSubscribed::resolve` <!-- B2B-2658 -->
   * `Magento\CatalogGraphQl\Model\Resolver\Product\MediaGallery::resolve` <!-- B2B-2677 -->

* **Prise en charge de l’annulation de la commande**. Le [cancelOrder](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/cancel-order/) La mutation permet à un client d&#39;annuler une commande, en transmettant son identifiant et un motif d&#39;annulation. <!-- LYNX-197 -->

   * Le nouveau `order_cancellation_enabled` et `order_cancellation_reasons.description` champs de réponse dans le `storeConfig`
query prend en charge les demandes d’annulation de commande initiées par l’utilisateur. Voir [Requête sur la configuration d’annulation de commande d’un magasin](https://developer-stage.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/#query-a-stores-order-cancellation-configuration)

* **Prise en charge améliorée des attributs personnalisés**. La prise en charge des attributs personnalisés GraphQL a été améliorée par l’enrichissement des données API afin de prendre en charge tous les types d’attributs. Le schéma Attributs EAV GraphQL prend désormais en charge l’extension des attributs du client et des objets d’adresse du client dans l’administration et leur récupération à l’aide de GraphQL. Les domaines spécifiques d&#39;amélioration comprennent : <!-- LYNX-61 110-->

   * extension/ajout de la prise en charge des attributs personnalisés à des zones spécifiques telles que l’adresse du client
   * ajout de la mise en cache pour les attributs personnalisés
   * prise en charge améliorée des attributs personnalisés existants pour les produits

* **Les fonctionnalités de mise en cache GraphQL améliorées améliorent la vitesse de chargement des pages**. Une fonctionnalité de mise en cache a été ajoutée à ces requêtes, ce qui accélère le temps de chargement des pages pour la plupart des pages du PWA :

   * [`availableStores`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/)
   * [`countries`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/countries/) et [pays](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/country/)
   * [`storeConfig`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/)
   * [`currency`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/currency/)
   * [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql-api/index.html#query-customAttributeMetadata)

* **Amélioration des performances de l’analyseur GraphQL**. Les performances de l’analyseur GraphQL ont été améliorées en réduisant le nombre d’appels de la méthode d’analyse par requête. Il est maintenant appelé une fois. Auparavant, l’analyseur était appelé au moins trois fois.

#### Nouveaux champs pour les mutations existantes

* Ajout de `quickorder_active` champ vers le [storeConfig](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) et [availableStores](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/) requêtes. Ce champ indique si la fonction de commande rapide est activée.

* Ajout des champs suivants au `setBillingAddressOnCart` et `setShippingAddressesOnCart` mutations :

   * `fax`
   * `middlename`
   * `prefix`
   * `suffix`

#### Nouvelles requêtes et mutations

* [`attributeForms`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-form/) requête<!-- LYNX-151 -->
* [`attributesList`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-list/) requête<!-- LYNX-150 -->
* [`guestOrder`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/queries/guest-order/) requête
* [`guestOrderByToken`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/queries/guest-order-by-token/) requête
* [`recaptchaFormConfig`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/recaptcha-form-config/) requête
* [`cancelOrder`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/cancel-order/) mutation<!-- LYNX-172 -->
* [`customAttributeMetadataV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata-v2/) requête
* [`applyCouponsToCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/apply-coupons/) mutation
* [`clearCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/clear-cart/) mutation
* [`confirmEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/confirm-email/) mutation
* [`createGuestCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/create-guest-cart/) mutation
* [`estimateShippingMethods`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/estimate-shipping-methods/) mutation
* [`estimateTotals`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/estimate-totals/) mutation
* [`removeCouponsFromCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/remove-coupons/) mutation

#### Requêtes et mutations obsolètes

* `clearCustomerCart` mutation<!-- LYNX-254 -->
* [`createEmptyCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/create-empty-cart/) mutation<!-- LYNX-224 -->
* [`attributesMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-metadata/) requête
* [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata/) requête

### Inventory management

Inventory management (v1.2.7) fournit des outils de gestion de l’inventaire des produits. Cette fonctionnalité développée par la communauté est fournie avec Adobe Commerce et le code principal du Magento Open Source.

### Paiements

* La prise en charge de GraphQL a été ajoutée pour les opérations de base pour tous les modes de paiement, à l’exception de Venmo. Les nouveaux points d’entrée GraphQL pour les services de paiement sont décrits à la section [Passage en caisse](https://developer.adobe.com/commerce/webapi/graphql/schema/checkout/). <!-- BUNDLE-3326 -->

* La chambre forte des cartes de crédit a été améliorée pour tous les modes de paiement, sauf pour Venmo. Les acheteurs peuvent désormais archiver leurs paiements CCA et les afficher ou les supprimer de leur page de compte. Les commerçants peuvent activer et désactiver chaque paiement en chambre forte de l&#39;administrateur. <!-- BUNDLE-3324 -->

* Le workflow de paiement comprend désormais une section de paiement express qui fournit PayPal, Google Pay et Apple Pay **[!UICONTROL Express]** boutons. <!-- BUNDLE-3322 -->

[Options de paiement](https://experienceleague.adobe.com/docs/commerce-merchant-services/payment-services/payments-checkout/payments-options.html) introduit des méthodes de paiement prises en charge.

### PWA Studio

PWA Studio v14.0 est compatible avec Adobe Commerce 2.4.7. Il comprend plusieurs améliorations pour améliorer l’accessibilité. Pour plus d’informations sur les correctifs, voir [Versions de PWA Studio](https://github.com/magento/pwa-studio/releases). Voir [Compatibilité des versions](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) pour obtenir la liste des versions de PWA Studio et de leurs versions Adobe Commerce principales compatibles.

### Framework d’API web

**Utilisation de plusieurs coupons par panier**

Les nouveaux points d’entrée REST prennent en charge l’affichage, l’ajout et la suppression de plusieurs coupons associés à un panier.

>[!NOTE]
>
>Pour la première fois, plusieurs itinéraires de point d’entrée REST contiennent la chaîne . `V2` au lieu de `V1`. Par exemple : `GET /rest/default/V2/carts/{cartId}/coupons`. Pour les commerçants Commerce, ces points d’entrée sont destinés à remplacer le `V1` versions des points d’entrée. Ces points d’entrée ne sont disponibles que dans Adobe Commerce.<!-- LYNX-208 -->

Renvoyer tous les codes de coupon associés à un panier :

`GET  /rest/{store_code}/V2/carts/{cartId}/coupons`
`GET  /rest/{store_code}/V2/carts/mine/coupons`

Ajoutez un code de coupon à un panier :

`POST /rest/{store_code}/V2/carts/{cartId}/coupons/{couponCode}`
`POST /rest/{store_code}/V2/carts/mine/coupons/{couponCode}`

Remplacer les codes de coupon dans un panier :

`PUT /rest/{store_code}/V2/carts/{cartId}/coupons`
`PUT /rest/{store_code}/V2/carts/mine/coupons`

Supprimer les codes de coupon d’un panier :

`POST /rest/{store_code}/V2/carts/{cartId}/coupons/deleteByCodes`
`POST /rest/{store_code}/V2/carts/mine/coupons/deleteByCodes`

**Points d’entrée supplémentaires**
Cette version introduit deux nouveaux points d’entrée REST qui offrent une solution pour une limitation de l’API REST `GET` et `POST V1/products/attributes` points d’entrée. Ces points d’entrée renvoient la même valeur pour l’ `is_filterable` pour les deux `Filterable(with results)` et `Filterable(no results)` options du **[!UICONTROL Use in Layered Navigation]** option. (La `is_filterable` la propriété d’attribut est de type . `Boolean`, qui n’autorise pas à définir cette propriété sur `Filterable(no results)`.)

Deux nouveaux points d’entrée REST ont été implémentés comme solution :

* `PUT /V1/products/attributes/{attributeCode}/is-filterable/{isFilterable}`. Paramètres de chemin : `attributeCode` (`String`) et `isFilterable` (`int` valeurs : 0 est Non ; 1 est `Filterable (with results)`; 2 est `Filterable (no results)`).
* `GET /V1/products/attributes/{attributeCode}/is-filterable`. Paramètres de chemin : `attributeCode` (`String`).<!-- ACP2E-2275 -->

## Problèmes résolus

Nous avons corrigé des centaines de problèmes dans le code principal d’Adobe Commerce 2.4.7. Un sous-ensemble des problèmes résolus inclus dans cette version est décrit ci-dessous. Les correctifs inclus dans les versions précédentes de Commerce 2.4.7 bêta sont également décrits.

### Installation, mise à niveau, déploiement

<!-- AC-10396 -->

* La manipulation inutile du cache a été supprimée du processus de configuration. Auparavant, Commerce écrivait inutilement sa configuration sur le disque lorsque `bin/magento setup:db-data:upgrade` ou `bin/magento setup:upgrade` a été exécuté, ce qui provoquait des problèmes avec les modules som lors de la configuration. [GitHub-38124](https://github.com/magento/magento2/issues/38124)

<!-- ACP2E-1675 -->

* Les problèmes de déploiement dus à une mémoire insuffisante et à des tables volumineuses ont été résolus. Le `bin/magento  setup:upgrade` La commande n’échoue plus en raison d’erreurs de dépassement de mémoire liées à des tables MySQL volumineuses.

<!-- ACP2E-2198 -->

* `bin/magento setup:install` se termine maintenant avec succès après `app/etc/config.php` a été supprimé. Auparavant, le fichier manquant n’était pas régénéré lors de l’installation et Commerce a généré une erreur. [GitHub-37805](https://github.com/magento/magento2/issues/37805)

<!-- AC-8381 -->

* `bin/magento setup:upgrade` a été restructuré pour s&#39;exécuter correctement lors de l&#39;installation d&#39;un nouveau module qui installe les tables et les associés `mview` indexeurs. [GitHub-37304](https://github.com/magento/magento2/issues/37304)

<!-- ACP2E-1882 -->

* La restauration de la base de données n’échoue plus en raison d’une erreur de délimiteur. Auparavant, Commerce générait cette erreur lorsque `bin/magento setup:rollback --db` a été exécuté : `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1505 -->

* Le `bin/magento setup:upgrade` La commande n&#39;échoue plus avec ce type d&#39;erreur liée à la limite de mémoire MySQL : `PHP Fatal error:  Allowed memory size of 4294967296 bytes exhausted (tried to allocate 20480 bytes)`. La migration d’attributs à sélection multiple a été optimisée pour consommer moins de mémoire pendant `setup:upgrade`.

<!-- ACP2E-1751 -->

* La génération d’une sauvegarde de base de données fonctionne désormais comme prévu à partir de l’Admin et de la ligne de commande. Auparavant, Adobe Commerce générait cette erreur : `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1604 -->

* En cours `setup:config:set` sans spécifier le `--lock-db-prefix` Le paramètre n’efface plus la valeur actuelle de `env.php` fichier .

<!-- ACP2E-1498 -->

* La configuration du vernis a été mise à jour afin d’empêcher les utilisateurs invités d’accéder au contenu mis en cache associé à d’autres groupes de clients.

<!-- AC-7113 -->

* Les acheteurs peuvent désormais passer une commande dans un déploiement qui implémente la base de données fractionnée lorsque **[!UICONTROL Checkout Async]** est activé. Auparavant, Adobe Commerce générait cette erreur : `An error occurred on the server. Please try to place the order again`.

<!-- https://github.com/magento/magento2/pull/33092 -->

* `bin/magento setup:upgrade` se termine maintenant correctement lors de l&#39;installation d&#39;un nouveau module qui installe les tables et les associés `mview` indexeurs.

<!-- ENGCOM-9243 -->

* `bin/magento setup:upgrade` affiche désormais un message d’erreur plus informatif lorsqu’une rubrique de file d’attente de messages n’inclut pas de nom de rubrique. [GitHub-34246](https://github.com/magento/magento2/issues/34246)

<!-- https://github.com/magento/magento2/pull/36239 -->

* `bin/magento setup:upgrade` affiche désormais un message d’erreur plus informatif lorsque les fichiers XML fusionnés ne sont pas valides. Le message d’erreur contient désormais le nom du fichier.

### Interface utilisateur d’administration

<!-- AC-10998 -->

* Les graphiques sont désormais désactivés par défaut dans le tableau de bord. [GitHub-38430](https://github.com/magento/magento2/issues/38430)

<!-- AC-9423 -->

* Le menu Admin Ventes affiche désormais correctement les sous-menus. Auparavant, le saut de colonne ne fonctionnait pas correctement et certains sous-menus n’étaient pas affichés. [GitHub-37812](https://github.com/magento/magento2/issues/37812)

<!-- AC-3122 -->

* **[!UICONTROL Select]** Les options de menu déroulant sont désormais visibles dans Admin **[!UICONTROL Content]** > **[!UICONTROL Pages]** lorsque plusieurs pages sont sélectionnées dans la grille. [GitHub-35386](https://github.com/magento/magento2/issues/35386)

<!-- AC-9209 -->

* Correction du chemin à la valeur par défaut de `system/dashboard/enable_charts` dans les paramètres de configuration. Les graphiques s’affichent désormais comme prévu dans l’interface d’administration. [GitHub-37668](https://github.com/magento/magento2/issues/37668)

<!-- AC-9632 -->

* Correction du problème d’affichage des grilles client de l’administrateur. Auparavant, les colonnes de la grille n’étaient pas entièrement contenues dans la page affichée.

<!-- AC-2916 -->

* Les couleurs de survol sont désormais appliquées comme prévu sur les lignes des grilles statiques d’administration. [GitHub-35358](https://github.com/magento/magento2/issues/35358)

<!-- AC-7551 -->

* Le workflow de passage en caisse n’affiche plus d’avertissement lorsqu’un acheteur saisit un code postal pour la Grèce qui ne contient pas d’espace vide. [GitHub-36676](https://github.com/magento/magento2/issues/36676)

<!-- AC-9357 -->

* L’administrateur `It's time to change your password` Le lien redirige désormais vers la page Modifier le mot de passe administrateur comme prévu. [GitHub-37902](https://github.com/magento/magento2/issues/37902)

<!-- ACP2E-2460 -->

* Les titres des sous-menus indiquent désormais des frères, quel que soit le niveau d’accès attribué à l’utilisateur. Auparavant, ces informations étaient masquées pour les utilisateurs administrateurs disposant d’un accès limité, même s’il existait plusieurs groupes frères pour le sous-menu.

<!-- AC-9164 -->

* Les suffixes de titre de page sont désormais inclus dans les deux `title` et la `meta title` pour les pages de produits. [GitHub-37680](https://github.com/magento/magento2/issues/37680)

<!-- ACP2E-2023 -->

* La condition de statut du stock de produits est désormais correctement appliquée pour les règles de produits associés.

<!-- ACP2E-2083 -->

* Le **[!UICONTROL Login as Customer]** s’affiche désormais correctement sur les appareils mobiles.

<!-- ACP2E-2146 -->

* Adobe Commerce n’affiche plus l’administrateur **[!UICONTROL Add new customer group]** si l’utilisateur administrateur connecté ne dispose pas de l’autorisation nécessaire pour ajouter un nouveau groupe de clients.

<!-- ACP2E-2286 -->

* Un utilisateur administrateur disposant d’autorisations restreintes peut désormais enregistrer un produit enfant dont le produit parent est affecté à une portée différente. Auparavant, Commerce invalidait le cache d’un produit parent qui n’était pas affecté à la portée dans laquelle le produit enfant a été modifié.

<!-- ACP2E-2042 -->

* Les utilisateurs administrateurs peuvent désormais basculer entre les vues de filtre Administrateur sans que les données d’affichage ne soient endommagées ou perdues. [GitHub-37529](https://github.com/magento/magento2/issues/37529)

<!-- ACP2E-2068 -->

* La grille de commandes archivée est désormais mise à jour de manière asynchrone avec les nouveaux statuts de commande comme prévu. Une approche basée sur les événements de la mise à jour du statut des commandes dans la grille d&#39;archivage permet d&#39;obtenir un statut précis des commandes, y compris les remboursements post-avoirs.

<!-- ACP2E-2049 -->

* Le menu déroulant Actions de la grille d’administration peut désormais pointer comme prévu sur un lien sélectionné pour **[!UICONTROL Content]** > **[!UICONTROL Pages]** (et les catalogues partagés dans le module B2B). Auparavant, ce menu était principalement masqué et les utilisateurs administrateurs devaient faire défiler l’écran pour afficher les options. [GitHub-36710](https://github.com/magento/magento2/issues/36710)

### Analytics

<!-- ACP2E-2266 -->

* Page des détails du produit `meta itemprop="image"` et `meta itemprop="description"` les propriétés sont désormais disponibles pour l’image principale du produit. [GitHub-37497](https://github.com/magento/magento2/issues/37497)

<!-- ACP2E-2314 -->

* La section Rapport de la grille Produits dans le panier affiche désormais le prix correct du produit lorsque **[!UICONTROL Catalog Price Scope]** est défini sur **[!UICONTROL Website]**. Auparavant, le prix du produit s’affichait sur zéro lorsque le produit était affecté à un site web autre que le site web par défaut.

<!-- AC-9275 -->

* Les rapports de chiffre d’affaires s’affichent désormais comme prévu dans le portail Google Analytics (GA4) . [GitHub-37605](https://github.com/magento/magento2/issues/37605)

<!-- ACP2E-1880 -->

* `price` et `quantity` Les valeurs de la couche de données du Gestionnaire de balises de Google sont désormais envoyées sous forme de valeurs numériques aux Google Analytics, comme prévu. Auparavant, ces valeurs étaient envoyées sous forme de chaînes.

<!-- ACP2E-2030 -->

* Les erreurs dans la gestion des données d’en-tête lors de l’envoi des données de déploiement au module New Relic ont été résolues.

<!-- ACP2E-1833 -->

* Les balises Google Analytics 3 sont désormais déclenchées comme prévu lorsque les balises Google Analytics 4 sont désactivées.

### Bannière

<!-- ACP2E-1818 -->

* Refactorisation du chargement du contenu des bannières pour supprimer les requêtes de base de données excessives, ce qui entraîne une amélioration des temps de chargement du panier.

### Lots de produits

<!-- ACP2E-1464 -->

* Le nombre de produits de la catégorie prend désormais correctement en compte les produits groupés lorsque **[!UICONTROL Display Out Of Stock*]** est activé.

<!-- AC-8966 -->

* Le `customerCart` la requête renvoie désormais toutes les remises appliquées sur les produits groupés comme prévu. Auparavant, le total des remises appliquées à un produit groupé était renvoyé en tant que zéro.

<!-- ACP2E-2618 -->

* Les pages Détails du produit affichent désormais le prix correct pour les produits groupés pour lesquels une remise de 100 % a été appliquée. Auparavant, Commerce n’appliquait pas de remise de 100 % aux prix des produits groupés.

<!-- ACP2E-2377 -->

* Les règles de prix de panier sont désormais appliquées aux lots de produits au lieu de chaque produit enfant pour les produits groupés à prix dynamiques.

<!-- ACP2E-1650 -->

* Correction d’une erreur qui se produisait lorsque vous utilisiez le `POST V1/shipment` Point d’entrée pour créer une expédition contenant un produit groupé. Le point d’entrée ajoute désormais les éléments comme prévu et ne renvoie plus cette erreur : `The shipment couldn't be saved`.

<!-- ACP2E-1926 -->

* Vous pouvez désormais enregistrer une mise à jour planifiée d’un produit groupé qui comprend un produit simple avec une mise à jour planifiée indéfinie. Lorsque l’instantané du bundle de produits est créé, les produits liés sont désormais capturés par ID, ID d’entité et également par SKU. Auparavant, la version d’origine du produit simple était vérifiée lorsque la mise à jour planifiée du produit groupé était enregistrée au lieu de la version actuelle du produit simple.

<!-- ACP2E-1650 -->

* Vous pouvez désormais utiliser le `GET V1/shipment/` Itinéraire d’API pour créer une expédition avec un produit groupé lorsque le produit a le **[!UICONTROL together]** type d&#39;expédition défini. Les produits groupés sont désormais également validés en fonction de leur propriété de type d’expédition.

<!-- ACP2E-2038 -->

* Les acheteurs peuvent désormais modifier la quantité d’un produit groupé dans leur panier. Auparavant, Adobe Commerce ne gérait pas les valeurs nulles pour `ItemId` lorsque les produits ont été modifiés dans le panier storefront et ont affiché une erreur. [GitHub-37696](https://github.com/magento/magento2/issues/37696)

<!-- ACP2E-1801 -->

* Les produits groupés peuvent désormais être ajoutés à une commande d’administration à l’aide de SKU qui contiennent une barre oblique (`/`). Auparavant, les utilisateurs administrateurs ne pouvaient pas utiliser cette méthode pour ajouter des produits à une commande administrateur et Commerce a généré une erreur JavaScript.

<!-- ACP2E-1799 -->

* Les utilisateurs administrateurs peuvent désormais définir des valeurs décimales par défaut pour les options de lot nouvellement ajoutées lorsque **[!UICONTROL Qty Uses Decimal]** est activé pour le produit simple correspondant. Auparavant, les valeurs décimales ne pouvaient être définies que pour les sélections enregistrées.

<!-- ACP2E-1347 -->

* Performances optimisées pour l’enregistrement de produits groupés avec un grand nombre d’options

<!-- ACP2E-1478 -->

* Les produits groupés sont désormais correctement importés sans dupliquer les SKU dans les options de produit. Auparavant, Adobe Commerce créait plusieurs SKU en double dans les options de produit lorsque vous importiez des produits groupés avec des entrées en double.

<!-- ACP2E-1388 -->

* Le prix du bundle est désormais correctement calculé lorsque l’un des produits du bundle est en rupture de stock. Auparavant, si un produit faisant partie du lot était en rupture de stock, il était retiré du calcul du prix.

<!-- ACP2E-1503 -->

* Les produits groupés s’affichent désormais comme étant en rupture de stock lorsque le dernier de leurs produits enfants requis est acheté. Auparavant, les produits groupés étaient affichés comme étant en stock sur le storefront lorsque leurs produits simples étaient en rupture de stock.

<!-- ACP2E-1443 -->

* Problèmes de performances lors de l’ajout au panier de produits groupés avec des options non requises à l’aide de `addBundleProductsToCart` la mutation a été résolue.

<!-- ACP2E-1264 -->

* Le `categoryList` la requête renvoie désormais toutes les options de lot comme prévu lorsque la variable **[!UICONTROL Show out-of-stock products]** Le paramètre de configuration est activé. Auparavant, les options en rupture de stock n’étaient pas incluses dans la réponse à la requête.

<!-- ACP2E-1345 -->

* Offre groupée de produits créée avec `POST V1/products` réussir lorsque la portée du prix du catalogue est définie sur `website`. Auparavant, une violation de contrainte d’intégrité se produisait. [GitHub-35595](https://github.com/magento/magento2/issues/35595)

### Cache

<!-- AC-11411 -->

* Les catégories sont désormais visibles pour les acheteurs des magasins où le cache est défini sur Fast CDN (**[!UICONTROL Caching Application=Fastly CDN]**). Cela affectait à la fois les clients invités et les clients enregistrés.

<!-- ACP2E-2070 -->

* Les cookies de mise en cache après connexion sont désormais les mêmes après la navigation sur le site web. Auparavant, le contrôleur de connexion envoyait un cookie de mise en cache incorrect et les pages pouvaient avoir été mises en cache plusieurs fois.

<!-- ACP2E-1840 -->

* Les réponses des opérations de GraphQL GET sur les pages CMS contenant des blocs CMS sont désormais effacées comme prévu dans le cache Fastly. Les mises à jour planifiées suivantes affichent désormais un contenu de mise à jour précis pour ces pages.

<!-- ACP2E-1524 -->

* Le cache de page est maintenant effacé comme prévu pour un produit parent lorsque l’un de ses produits enfants a été enregistré à partir de l’administration. Une vérification du plug-in a été introduite pour atteindre l’invalidation du cache pour les variantes configurables, similaires à d’autres types de produits, quel que soit l’état de l’indexeur (planifié ou en temps réel). Auparavant, les prix n’étaient pas correctement mis à jour sur le storefront après la mise à jour d’une variation configurable à partir de l’administrateur.

<!-- ACP2E-1454 -->

* Ajout d’un mécanisme de mise en cache pour les informations d’identification AWS. Un fournisseur d’informations d’identification utilise désormais le cache de Commerce pour mettre en cache les informations d’identification récupérées d’AWS pour la configuration EC2.

<!-- AC-7639 -->

* Le plug-in dont l’objectif est d’ajouter la balise de cache configurable lorsqu’un produit simple associé à un produit configurable est enregistré fonctionne désormais comme prévu. Toutes les balises de cache configurables pertinentes sont supprimées comme prévu lorsqu’un produit simple est mis à jour par `POST V1/products`. Auparavant, tous les prix n’étaient pas mis à jour sur le storefront et les caches devaient être effacés manuellement. [GitHub-36726](https://github.com/magento/magento2/issues/36726)

### Panier et passage en caisse

<!-- ACP2E-2658 -->

* Commerce optimise désormais les performances en ne chargeant pas les données de devis spécifiques à l’utilisateur lors de la génération de pages pouvant être mises en cache en entier, telles que les pages de détails du produit (PDP) et les pages CMS lorsque le panier persistant est activé. Auparavant, le système chargeait inutilement les données de session et de devis spécifiques à l’utilisateur ou à l’utilisatrice lors de la génération de ces pages, ce qui affectait les performances.

<!-- ACP2E-2684 -->

* Les attributs personnalisés des adresses sont désormais enregistrés comme prévu dans la base de données. Auparavant, les valeurs d’attribut enregistrées dans la base de données étaient précédées d’un code d’attribut.

<!-- ACP2E-2517 -->

* La génération du texte de filtre des règles de panier pour les attributs de produit a été améliorée. Les produits individuels ne sont plus chargés plusieurs fois.

<!-- AC-8920 -->

* Adobe Commerce affiche désormais un message d’erreur informatif lorsqu’une erreur se produit lors du passage en caisse et ne renvoie plus l’acheteur à une étape de passage en caisse précédente. Auparavant, l’acheteur était renvoyé à la page d’expédition.

<!-- ACP2E-2520 -->

* Le `cart` la requête ne renvoie plus le mode d’expédition et l’adresse des paniers virtuels. Auparavant, lorsqu’un panier contenait à la fois des produits physiques et virtuels et que tous les produits physiques étaient supprimés, la réponse à la requête de panier continuait à inclure les informations d’expédition.

<!-- ACP2E-2267 -->

* Commerce affiche désormais des messages informatifs lorsqu’une action d’ajout au panier est déclenchée. Auparavant, le `The requested qty is not available` n’était pas toujours affiché comme nécessaire sur le storefront.

<!-- ACP2E-2166 -->

* Les temps de chargement des pages de passage en caisse ont été améliorés pour les clients avec des carnets d’adresses volumineux. Commerce traite désormais uniquement le nombre d’adresses client spécifiées dans le **[!UICONTROL Customer Addresses Limit]** paramètre . Auparavant, Commerce chargeait l’intégralité du carnet d’adresses.

<!-- ACP2E-2174 -->

* La quantité de produit peut désormais être modifiée dans le panier comme prévu pour les articles en stock lorsqu’un article est en rupture de stock. Auparavant, les acheteurs ne pouvaient pas modifier la quantité de produit d’un article lorsqu’il était en rupture de stock.

<!-- ACP2E-2269 -->

* Le `AdvancedSalesRule` le filtre d’attribut de produit fonctionne désormais correctement avec le type principal d’attribut décimal. Par conséquent, le panier est régi par `Coupon Type` définir sur **[!UICONTROL No Coupon]** travaillez maintenant comme prévu.

<!-- ACP2E-2376 -->

* Le montant total d’une remise panier complète est désormais appliqué comme prévu aux paniers contenant à la fois des produits groupés et configurables.

<!-- ACP2E-2092 -->

* Les cookies de la section client respectent désormais le paramètre de domaine du cookie. Auparavant, le mini panier ne se mettait pas à jour comme prévu dans les magasins contenant des sous-domaines, même si la session était partagée.

<!-- AC-9340 -->

* L’envoi d’une commande à plusieurs adresses ne déclenche plus d’erreur lors du traitement de l’ID de région.

<!-- AC-8853 -->

* Les montants de remise fixe appliqués au niveau du panier sont désormais corrects.[GitHub-37496](https://github.com/magento/magento2/issues/37496)

<!-- AC-2044 -->

* Les coupons sont désormais appliqués avec succès à une commande lorsqu’un acheteur applique le coupon après avoir sélectionné la méthode d’expédition à taux forfaitaire dans laquelle une règle de prix de panier avec la méthode d’expédition définie comme condition s’applique. Auparavant, la page du panier affichait l’erreur Coupon non valide et le coupon n’était pas appliqué. [GitHub-34866](https://github.com/magento/magento2/issues/34866)

<!-- AC-8596 -->

* Le **[!UICONTROL My billing and shipping address are the same]** La case à cocher reste désormais cochée par défaut lorsqu’un acheteur utilise la saisie semi-automatique de Chrome pour renseigner son adresse de livraison, puis clique **Suivant** avant le rechargement du bloc méthodes d’expédition . [GitHub-33725](https://github.com/magento/magento2/issues/33725)

<!-- ACP2E-2005 -->

* Le `applied_rule_ids` valeur dans l’ `quote_item` Le tableau contient désormais une liste correcte des ID de règle appliqués. Auparavant, cette valeur contenait uniquement l’ID de la dernière règle appliquée.

<!-- ACP2E-2025 -->

* Les données du mini-panier et du client dans le stockage local se réinitialisent désormais lorsqu’une session est supprimée du serveur. Auparavant, ces données s’affichaient toujours lorsque le fichier de session était supprimé.

<!-- ACP2E-1763 -->

* Les paniers distincts ne sont plus fusionnés par erreur à partir de l’administration lorsque le panier persistant est activé.

<!-- ACP2E-1988 -->

* L’adresse de livraison par défaut dans l’étape de passage en caisse n’est plus renseignée avec l’adresse de prélèvement en magasin sélectionnée précédemment.

<!-- ACP2E-1614 -->

* Les produits du panier ne sont plus exclus des listes de produits associés et de montée en gamme une fois le cache vidé.

<!-- ACP2E-1580 -->

* L’estimateur de taxe et d’expédition du panier reflète désormais précisément la configuration de destination par défaut. Auparavant, lorsque vous configuriez les paramètres de calcul de destination de taxe par défaut et que vous spécifiiez l’état/la région et le code postal, seule la valeur ZIP s’affichait dans le panier sous **[!UICONTROL Estimate Tax and Shipping]**. Cela est dû au fait qu’Adobe Commerce a défini l’ID de région sur non défini avant d’appeler l’instruction conditionnelle qui a défini l’ID de région par défaut à partir de l’administrateur.

<!-- ACP2E-1547 -->

* Adobe Commerce ne renvoie plus cette erreur lors du passage en caisse lorsque le panier persistant est activé : `Invalid state change requested`. Auparavant, lorsque cette erreur était générée, plusieurs commandes avec la même `quote_id` ont été créés occasionnellement.

<!-- ACP2E-1456 -->

* Le mini panier affiche désormais les prix des lots qui reflètent les paramètres de configuration des taxes du panier. Auparavant, le mini panier incluait toujours les taxes dans les prix des produits groupés.

<!-- ACP2E-1414 -->

* Les performances des règles de segment client qui reposent sur des paniers actifs ont été améliorées, ce qui a réduit le temps nécessaire à l’ajout d’un produit au panier.

<!-- AC-7503 -->

* L’estimation de l’expédition fournie à partir de la page de panier est désormais exacte. `collectShippingRates` est maintenant défini une seule fois. Auparavant, l’estimation d’expédition était dupliquée. [GitHub-36648](https://github.com/magento/magento2/issues/36648)

<!-- ACP2E-1417 -->

* Le `cart` la requête ne renvoie plus d’erreur lorsqu’un produit du panier spécifié est en rupture de stock. Auparavant, les acheteurs qui utilisaient cette requête pour effectuer un achat ne pouvaient pas terminer leur achat lorsqu’un article était en rupture de stock et leur page de passage en caisse était vierge.

<!-- ACP2E-1459 -->

* Requêtes d’API invitées à `POST V1/guest-carts/<cartId>/shipping-information` ne plus renvoyer de `cancel` statut si la page se recharge lors de la connexion dans un environnement mobile. Auparavant, Adobe Commerce générait une erreur 500 et consignait cette exception : `TypeError: Argument 2 passed to Magento\CustomerCustomAttributes\Model\Plugin\ProcessCustomerShippingAddressCustomAttributes::beforeSaveAddressInformation() must be of the type string, null given`.

<!-- AC-7886 -->

* L’éligibilité à la livraison gratuite est désormais calculée comme prévu lorsque la **[!UICONTROL Subtotal (Excl. Tax)]** La condition pour les règles de panier est appliquée. [GitHub-36760](https://github.com/magento/magento2/issues/36760)

<!-- AC-6672 -->

* Le `cart` La requête renvoie désormais la tarification de niveau correcte pour un produit. [GitHub-29655](https://github.com/magento/magento2/issues/29655)

<!-- ACP2E-1162 -->

* Des messages d’erreur informatifs ont été ajoutés à la page de passage en caisse pour guider les acheteurs lorsque l’application d’un bon sur la page d’expédition entre en conflit avec la méthode d’expédition sélectionnée. Auparavant, un message demandait aux acheteurs de revenir à la page précédente.

<!-- ENGCOM-8387 -->

* La fenêtre contextuelle d’authentification est désormais initialisée uniquement lorsqu’elle est nécessaire et non lorsque le passage en caisse des invités est activé. Il est maintenant initialisé lorsque l’acheteur invité tente de passer en caisse et que la caisse des invités est désactivée. [GitHub-30672](https://github.com/magento/magento2/issues/30672)

### Règle de prix du panier

<!-- AC-2054 -->

* La condition de sous-sélection de produit de la règle de prix du panier inclut désormais le `total (incl.tax)` comme prévu. [GitHub-34871](https://github.com/magento/magento2/issues/34871)

<!-- ACP2E-2029 -->

* Le `If an item is FOUND/NOT FOUND in the cart with ALL/ANY of these conditions true` la condition de règle de prix de catalogue fonctionne désormais correctement avec les attributs de catégorie et de SKU. Auparavant, cette condition n’était pas correctement appliquée dans la logique de coupon de prix de panier et des coupons non valides étaient appliqués aux commandes. [GitHub-37660](https://github.com/magento/magento2/issues/37660)

<!-- ACP2E-1932 -->

* Vous pouvez désormais enregistrer une nouvelle règle de prix de panier avec le `Magento_OfflineShipping` extension désactivée. Auparavant, Adobe Commerce générait cette erreur : `report.ERROR: Warning: Undefined array key "simple_free_shipping"`. [GitHub-37580](https://github.com/magento/magento2/issues/37580)

<!-- ACP2E-1516 -->

* Les règles de prix de panier sont désormais appliquées comme prévu lorsqu’une règle de prix de panier liée à une méthode d’expédition est configurée pour le magasin et que cette méthode d’expédition est remplacée par une autre lors de la vérification. Auparavant, le `applied_rule_ids` la valeur n’a jamais été modifiée dans `sales_order_item` et la règle de prix de panier n’a pas été appliquée à la commande.

### Catalogue

<!-- AC-10746 -->

* En cours `bin/magento cache:clean` ou `bin/magento cache:flush` ne vide plus l’intégralité du cache intégré ou du cache de vernis pleine page, sauf indication contraire. [GitHub-38301](https://github.com/magento/magento2/issues/38301)

<!-- ACP2E-2257 -->

* Les commerçants peuvent désormais utiliser le carrousel de produit pour créer des blocs CMS lorsque `catalog_product_price dimensions-mode` est défini sur `website`. Auparavant, Commerce n’enregistrait pas le bloc et générait cette erreur SQL : `report.CRITICAL: PDOException: SQLSTATE[42S02]: Base table or view not found: 1146 Table`.

<!-- AC-6847 -->

* Commerce n’affiche plus les images en double lorsque la couleur du produit est modifiée sur une page des détails du produit.  [GitHub-36243](https://github.com/magento/magento2/issues/36243)

<!-- ACP2E-2504 -->

* Optimisation de l’algorithme de synchronisation des valeurs spécifiques au site web après l’ajout d’une nouvelle boutique ou la modification d’une boutique existante dans des environnements multi-boutiques volumineux.

<!-- ACP2E-2631 -->

* Le processus de nettoyage des fichiers image mis en cache a été amélioré afin d’éviter la création de répertoires masqués dans le `pub/media/catalog/product` dossier. Auparavant, les répertoires masqués entraînaient des problèmes d’espace disque lors des opérations de nettoyage. L’opération a pu être arrêtée, ce qui a laissé des répertoires masqués temporaires qui n’ont jamais été supprimés.

<!-- AC-10316 -->

* Les prix des produits groupés sont désormais calculés correctement et un problème lié à l’ordre des opérations lors du calcul des prix a été résolu. [GitHub-35665](https://github.com/magento/magento2/issues/35665)

<!-- AC-6996 -->

* Une clause inutile a été supprimée de `catalog_product_price` requêtes d&#39;index, ce qui a amélioré les performances de cet indexeur sur les magasins avec des catalogues volumineux. [GitHub-32382](https://github.com/magento/magento2/issues/32382)

<!-- ACP2E-2522 -->

* Commerce n’insère plus de texte de description du produit dans la page des détails du produit **[!UICONTROL Meta Description]** lorsque ce champ n’a pas été renseigné. Auparavant, lorsqu’une description de produit contenait du code de HTML généré par Page Builder ou un autre éditeur de HTMLS, le HTML s’affichait dans les métadonnées **[!UICONTROL Description]** et vous ne pouvez pas laisser ce champ vide.

<!-- ACP2E-2308 -->

* Les options de produit configurables sur les pages PDP de produit configurables ne sont plus affectées par les autres options de produit configurables sur la page. Auparavant, les produits configurables avec des attributs de liste déroulante ne déclenchaient plus d’exception lorsqu’un carrousel de produit était présent sur la page des détails du produit. Les options de produit configurables n’étaient pas sélectionnables lorsque d’autres produits configurables avec des options de nuancier étaient présents sur la page.

<!-- ACP2E-2260 -->

* Les informations sur les produits récemment consultés s’affichent désormais conformément à la configuration de l’affichage du magasin. Auparavant, les données de produit récemment consultées n’étaient pas mises à jour par vue de magasin, y compris le nom et la langue préférée.

<!-- ACP2E-2296 -->

* Les vidéos Vimeo s’affichent désormais comme prévu sur les pages de produits en mode mobile dans les navigateurs web Chromium.

<!-- ACP2E-1959 -->

* Le `bin/magento catalog:images:resize` génère désormais correctement les images de produit pour les produits qui sont affectés à un site web personnalisé avec un thème personnalisé.

<!-- ACP2E-1982 -->

* Métadonnées avec `NULL` ou `NOT NULL` les valeurs sont désormais enregistrées pour le magasin par défaut en fonction des **Utiliser la valeur par défaut** case à cocher prévue. Auparavant, les métadonnées avec `NULL` La valeur n’a pas été enregistrée lorsque cette case a été décochée.

<!-- ACP2E-2093 -->

* Les commerçants peuvent désormais supprimer une image existante de la page des détails du produit, puis charger une nouvelle image portant le même nom. Auparavant, dans ces circonstances, la page produit du storefront n’affichait pas l’image correcte.

<!-- ACP2E-2128 -->

* Le `productDetail` la requête renvoie désormais le nom du produit au lieu de la valeur null lorsque l’image du produit `alt` L’attribut est défini comme vide.

<!-- ACP2E-2215 -->

* Les commandes qui comprennent à la fois des produits téléchargeables et physiques comprennent désormais des liens de travail vers le produit téléchargeable dès que la commande est terminée. Auparavant, les liens vers des produits téléchargeables n’étaient pas disponibles tant que les produits physiques de la même commande n’avaient pas été expédiés.

<!-- ACP2E-2343 -->

* Les réécritures d’URL sont désormais mises à jour lorsqu’une catégorie est déplacée d’un magasin/d’une catégorie racine vers un autre magasin/une autre catégorie racine. Les entrées de base de données obsolètes sont désormais supprimées lorsque les sous-catégories sont transférées vers de nouvelles catégories parentes. La base de données comprend désormais uniquement les entrées pertinentes. Auparavant, le `url_path` n’a pas été mis à jour avec l’ID de magasin approprié.

<!-- ACP2E-2152 -->

* LE RESTE `V1/products/<sku>/media` Le point d’entrée peut désormais traiter le chargement simultané de plusieurs images multimédia. Auparavant, lors du traitement simultané de plusieurs demandes, des données incohérentes étaient créées et Commerce générait une erreur lorsque ces données étaient enregistrées dans la base de données.

<!-- ACP2E-2259 -->

* Les bannières de segment client se comportent désormais comme prévu lorsqu’un acheteur qui utilise un compte client nouvellement créé se déconnecte. Auparavant, les bannières créées pour le segment client connecté s’affichaient même après la fin de la session de compte (c’est-à-dire lorsque l’acheteur enregistré s’était déconnecté).

<!-- ACP2E-2219 -->

* Les performances de réindexation partielle des indexeurs de catégories de produits et de catégories de produits ont été améliorées. Auparavant, le `indexer_update_all_views` la tâche cron a exécuté plusieurs réindexeurs par produit ou catégorie unique.

<!-- ACP2E-2043 -->

* Lorsque le statut du stock de produits est automatiquement mis à jour vers en rupture de stock en fonction de la configuration du stock (quantité), le statut du stock est ensuite mis à jour vers en stock lorsque la quantité de stock est mise à jour. Auparavant, le `stock_status_changed_auto` Le paramètre a été ignoré lorsque la configuration de stock d’un produit a été mise à jour sur en stock.

<!-- AC-8904 -->

* Le tri de la barre d’outils fonctionne désormais comme prévu sur les pages de recherche lorsque **[!UICONTROL Remember Category Pagination]** Le paramètre est activé. [GitHub-33220](https://github.com/magento/magento2/issues/33220)

<!-- ACP2E-1640 -->

* Les attributs à sélection multiple sont désormais enregistrés comme prévu lorsque **[!UICONTROL Use Default Value]** la case dans l’étendue store-view est cochée. Auparavant, cette case à cocher n’était pas cochée lorsque le produit était modifié et que la valeur par défaut était enregistrée.

<!-- ACP2E-1878 -->

* Les utilisateurs administrateurs disposant d’un accès limité au site web peuvent désormais ajouter des images à un produit qui relève de leur portée. Si l’utilisateur administrateur ne dispose pas des droits d’accès au produit, Commerce affiche un message d’information. Auparavant, les utilisateurs administrateurs disposant d’un accès limité au site web ne pouvaient pas ajouter d’images aux produits auxquels ils avaient accès.

<!-- ACP2E-1956 -->

* Défini par l’utilisateur `special_from_date`, `special_to_date`, `news_from_date`, et `news_to_date` les valeurs ne sont pas remplacées lorsqu’un produit est modifié dans la portée de la vue du magasin.

<!-- AC-6761 -->

* Commerce affiche désormais le nom correct après le tri des produits par nom dans Admin > **[!UICONTROL Category]** > **[!UICONTROL Products in category]** dans les déploiements multimagasin où les noms de produit varient selon le magasin. [GitHub-36208](https://github.com/magento/magento2/issues/36208)

<!-- ACP2E-1975 -->

* Le `addProductsToCart` La mutation renvoie désormais des options personnalisables avec des données . Auparavant, elle renvoyait uniquement les options personnalisables vides. [GitHub-37599](https://github.com/magento/magento2/issues/37599)

<!-- ACP2E-1859 -->

* La position du produit et la sélection de l’ID s’affichent désormais correctement lorsqu’un utilisateur administrateur ajoute un nouveau produit à une catégorie après avoir effacé le cache mais sans recharger la page de catégorie. Auparavant, la position et la sélection du produit ne correspondaient pas et s’affichaient incorrectement.

<!-- ACP2E-1779 -->

* Les commerçants peuvent désormais mettre à jour la date ou l’heure de début d’une modification planifiée pour un produit téléchargeable. Auparavant, Adobe Commerce générait cette erreur lors de la mise à jour de la date ou de l’heure de début future du produit téléchargeable : `The downloadable link isn't related to the product. Verify the link and try again`.

<!-- ACP2E-1943 -->

* Le statut du produit en retard s’affiche désormais correctement sur le storefront. Auparavant, les produits disponibles à l&#39;expédition étaient incorrectement identifiés comme en reliquat.

<!-- ACP2E-1948 -->

* L’accès aux produits téléchargeables à partir de l’administrateur n’entraîne plus d’erreur lorsque l’utilisateur administrateur modifie la vue du magasin, la faisant passer de la vue utilisée lors de la création du produit à une autre vue. Les prix des produits sont désormais convertis avec succès en prix flottant lorsqu’un utilisateur administrateur change l’affichage du magasin de toutes les vues de magasin à l’affichage du magasin par défaut. Auparavant, Adobe Commerce générait une erreur. [GitHub-37519](https://github.com/magento/magento2/issues/37519)

<!-- ACP2E-1994 -->

* Les produits exportés ont désormais le bon `manage_stock` valeur lorsque l’option `use_config_manage_stock` valeur égale à `1`. Auparavant, cette valeur par défaut était incorrecte.

<!-- ACP2E-1479 -->

* Adobe Commerce n’affiche plus de message d’avertissement lorsque vous enregistrez un produit qui a été créé avec des options personnalisées après la suppression de son image.

<!-- ACP2E-1419 -->

* Les images miniatures des produits s’affichent désormais comme prévu dans l’e-mail d’alerte de stock de produits envoyé lorsqu’un produit est de nouveau en stock. Auparavant, cette image n’était pas affichée dans le courrier électronique d’alerte

<!-- AC-3003 -->

* Nombre de produits dans l’arborescence des catégories (Admin) **[!UICONTROL Catalog]** > **[!UICONTROL Category]**) est désormais précis. Auparavant, le nombre de produits de la catégorie ne pouvait pas être récupéré à partir du . `catalog_category_product_index` tableau. La faute de frappe qui a déclenché ce bogue a été corrigée. [GitHub-35417](https://github.com/magento/magento2/issues/35417)

<!-- ACP2E-1239 -->

* L’image principale du produit sur la page de détails du produit ne se déplace plus visiblement vers le bas lors du chargement de la page lorsque `product_image_white_borders` dans le thème `view.xml` est désactivé. Auparavant, l’image du produit se déplaçait visiblement vers le bas lors du chargement de la page en raison de paramètres de hauteur incorrects dans Fotorama JS.

<!-- ACP2E-1361 -->

* Les clients sont désormais informés des baisses de prix des produits lorsque le client est abonné aux alertes de baisse de prix. Auparavant, les notifications de baisse des prix n’étaient pas toujours envoyées en raison de la mise en cache au niveau de l’application.

<!-- ACP2E-1422 -->

* La validation côté serveur a été ajoutée au processus de création des attributs de produit par le biais de l’API web. Vous ne pouvez pas activer le **[!UICONTROL Use in Layered Navigation Catalog]** champ lorsque le **[!UICONTROL Catalog Input Type for Store Owner]** la valeur du champ est `Text Field`, `Text Area`, `Text Editor`, `Date`, ou `Date and Time`. Auparavant, les produits étaient omis des catégories et des résultats de recherche.

<!-- ACP2E-1413 -->

* La page de catégorie se recharge désormais avec la pagination appropriée une fois qu’un acheteur a ouvert la page, a modifié la pagination, accède à une page de produit, puis revient à la page de catégorie. [GitHub-36563](https://github.com/magento/magento2/issues/36563)

<!-- ACP2E-1334 -->

* Les produits simples en rupture de stock qui sont des options pour un produit configurable s’affichent désormais comme désactivés sur le storefront lorsque **[!UICONTROL Display Out of Stock Products]** est défini sur **Oui**. Auparavant, toutes les options s’affichaient comme disponibles, malgré leur statut et leur disponibilité réelle.

<!-- ACP2E-1384 -->

* La mise à jour de l’attribut de portée du site web dans une vue de magasin spécifique ne remplace plus la valeur de cet attribut dans la portée globale. Auparavant, l’importation de prix de produit lorsque plusieurs lignes étaient disponibles avec le même SKU et `store_view_code` générait des prix inexacts pour les portées d’affichage par défaut et Toutes les boutiques.

<!-- ACP2E-1632 -->

* Les commerçants peuvent désormais ajouter une image de GIF à la galerie d’images d’un produit à partir de l’administrateur. Auparavant, Adobe Commerce affichait cette erreur : `imagecolorsforindex(): Argument #2 ($color) is out of range`.

<!-- ACP2E-1709 -->

* Des vérifications ont été ajoutées pour gérer les erreurs résultant de clés de tableau non définies. Auparavant, une erreur s’était produite lors de la génération de la liste autorisée du schéma déclaratif.

<!-- ACP2E-1749 -->

* Adobe Commerce renvoie désormais un résultat valide pour la date personnalisée `01/01/1970`. Auparavant, l’attribut personnalisé renvoyait cette erreur : `Invalid input datetime format of value '1/01/1970`. [GitHub-37274](https://github.com/magento/magento2/issues/37274)

<!-- AC-6507 -->

* `routes` les requêtes qui utilisent des fragments renvoient désormais les informations de catégorie attendues. Auparavant, une erreur de serveur interne se produisait sur la page de catégorie. [GitHub-35906](https://github.com/magento/magento2/issues/35906)

<!-- ACP2E-1772 -->

* Problèmes liés à `cataloginventory_stock` le processus de réindexation partielle a été résolu et les performances de l’indexeur ont été améliorées. Auparavant, les catégories de stock et de produit n’étaient pas mises à jour avec précision.

<!-- AC-8226 -->

* Adobe Commerce génère désormais une redirection 301 pour un produit lorsque la catégorie à laquelle il appartient a été déplacée vers un nouveau parent. [GitHub-37039](https://github.com/magento/magento2/issues/37039)

### Règles de catalogue

<!-- ACP2E-1834 -->

* Les règles de catalogue sont désormais correctement indexées lorsqu’elles sont activées par la mise à jour planifiée. Par conséquent, les prix actualisés sont désormais correctement générés et indexés. Auparavant, lorsque deux règles de catalogue étaient disponibles et qu’une règle était activée après la première règle avant que l’opération d’indexation de la première règle de catalogue ne soit terminée, les prix de remise de la règle de catalogue n’étaient pas générés pour la seconde règle de catalogue.

<!-- ACP2E-1579 -->

* Les règles de catalogue sont désormais appliquées comme prévu dans un environnement multi-sites web.

### Produits configurables

<!-- ACP2E-1881 -->

* Les commerçants peuvent maintenant sélectionner **[!UICONTROL Skip quantity at this time]** et **[!UICONTROL Skip image uploading at this time]** lors de la configuration d’un produit configurable sans affecter la source des produits simples associés. Précédemment, en sélectionnant  **[!UICONTROL Skip quantity at this time]** ont entraîné la disparition de sources de produits.

<!-- AC-7099 -->

* Le **[!UICONTROL As low as]** le libellé n’est plus affiché pour un prix de produit configurable lorsque toutes les options ont le même prix.

<!-- ACP2E-2464 -->

* Les utilisateurs administrateurs disposant d’autorisations de site web peuvent désormais enregistrer un produit enfant qui fait partie d’un produit configurable dans un autre contexte de magasin. Les processus de réindexation ignorent désormais ce type de produit configurable.

<!-- ACP2E-2003 -->

* Les produits configurables avec deux produits enfants ne sont plus marqués comme en rupture de stock lorsqu’un produit enfant est désactivé par une mise à jour planifiée.

<!-- AC-8060 -->

* Les performances des opérations d’enregistrement pour les produits configurables avec plusieurs options ont été améliorées. Auparavant, les expirations de délai pouvaient se produire pendant les opérations d’enregistrement du produit. [GitHub-36928](https://github.com/magento/magento2/issues/36928)

<!-- ACP2E-1764 -->

* L’affichage en storefront des prix des produits configurables change désormais comme prévu lorsqu’un acheteur sélectionne une option de produit. [GitHub-37378](https://github.com/magento/magento2/issues/37378)

### Coupons

<!-- ACP2E-2495 -->

* Les codes promotionnels avec un nombre limité d’utilisations par client peuvent désormais être utilisés une seconde fois lorsque la commande pour laquelle ils étaient utilisés précédemment échoue. Auparavant, le code promotion n’était pas publié lorsque la commande précédente était annulée.

<!-- ACP2E-2428 -->

* Les codes promotionnels contenant des espaces ne sont plus invalidés. Auparavant, si un code de coupon contenait un espace (avant ou après le code réel), la validation échouait. [GitHub-38048](https://github.com/magento/magento2/issues/38048)

<!-- ACP2E-1551 -->

* Les acheteurs peuvent désormais utiliser deux codes de coupon générés automatiquement distincts qui ont été générés par la même règle de prix de panier. Le `Uses per Coupon` le champ est désormais activé lorsque le type de coupon sélectionné est `Auto` (similaire pour le type de coupon =`Specific Coupon`) . Cela permet à l’acheteur d’appliquer plusieurs codes de coupon au même prix de panier si les codes sont différents.

<!-- ACP2E-1496 -->

* La valeur du coupon à usage unique d’un acheteur est désormais restaurée comme prévu lorsque la commande à laquelle elle a été appliquée est annulée.

<!-- ACP2E-1195 -->

* Le `GET V1/coupons/<couponId>` Le point d’entrée renvoie désormais la réponse attendue complète pour les coupons créés manuellement, comme pour les coupons générés automatiquement. Auparavant, certains champs étaient omis (par exemple, `usage_limit`, `usage_per_customer`, et `created_at`).

### cron

<!-- ACP2E-2457 -->

* Le `aggregate_sales_report_bestsellers_data` La tâche cron ne crée plus de très grandes tables MySQL temporaires et se termine désormais correctement. Cette tâche cron insère désormais des données par magasin, et non pour tous les magasins en même temps. Auparavant, cette tâche cron pouvait entraîner : `No space left on device` erreurs.

<!-- ACP2E-2427 -->

* Nombre d’enregistrements en attente dans le `cron_schedule` Le tableau a été réduit en empêchant les tâches cron d’essayer d’acquérir des verrous de tâches cron inutiles. Auparavant, les tâches cron essayaient d’acquérir des verrous lorsqu’il était trop tard pour exécuter la tâche. Traitements cron dans `cron_schedule` n’ont pas été marqués comme manqués, même s’ils avaient déjà dépassé leur heure prévue. Commerce a également affiché cette erreur à plusieurs reprises dans le journal des erreurs : `report.WARNING: Could not acquire lock for cron job: indexer_update_all_views`.

<!-- AC-9207 -->

* Correction de l’erreur fatale diviser par zéro dans les expressions cron. [GitHub-37804](https://github.com/magento/magento2/issues/37804)

<!-- ACP2E-1792 -->

* Le `sales_clean_quotes` le processus cron a été optimisé pour s’exécuter plus rapidement en ajoutant un index composite sur . `store_id` et `updated_at columns` dans le tableau des guillemets. Cette modification améliore les performances de la tâche cron lors du traitement de nombreux devis.

<!-- AC-7987 -->

* Les utilisateurs administrateurs peuvent désormais afficher la tâche `bin/magento cron:run` Le processus est en cours d’exécution. Le titre du processus en cours d’exécution répertorie désormais les noms des groupes et des tâches. [GitHub-34321](https://github.com/magento/magento2/issues/34321)

### Client

<!-- AC-6748 -->

* Adobe Commerce affiche désormais le **[!UICONTROL Date of Birth]**, **[!UICONTROL Tax/VAT Number]**, **[!UICONTROL Gender]**, **[!UICONTROL Telephone]**, **[!UICONTROL Company]**, et **[!UICONTROL Fax]** champs de la page modifier le client en fonction des paramètres de configuration. [GitHub-36196](https://github.com/magento/magento2/issues/36196)

### Segments clients

<!-- ACP2E-2471 -->

* Les conditions de segment client chargent désormais tous les clients correspondants comme prévu. Auparavant, la liste des clients et clientes correspondant au segment client ne contenait pas tous les clients et clientes correspondants.

### VAE

<!-- ACP2E-2222 -->

* L’indexeur EAV ne nécessite plus la suppression des entités non visibles pendant le traitement par lots. Par défaut, l’indexeur ne regroupe plus de produits non visibles et les performances de l’indexeur se sont améliorées.

### E-mail

<!-- ACP2E-2125 -->

* Les e-mails contenant des signes diacritiques ou des accents (c’est-à-dire des e-mails utf8) sont désormais pris en charge pour les clients et les sociétés, ainsi que pour le passage de commandes par des invités et des clients enregistrés. Auparavant, Commerce n’enregistrait pas les enregistrements de clients contenant des signes diacritiques et affichait cette erreur : `Something went wrong while saving the customer`.

<!-- ACP2E-2503 -->

* Les noms des expéditeurs d’e-mails ne peuvent plus contenir de deux-points. Une nouvelle règle de validation empêche désormais l’enregistrement des noms d’expéditeur qui contiennent les deux-points dans la section Stocker les adresses électroniques de l’administrateur **[!UICONTROL Stores]** > **[!UICONTROL General]**. Auparavant, les commerçants pouvaient enregistrer un nom d’expéditeur qui contenait un caractère deux-points, ce qui entraînait des erreurs de serveur de messagerie.

<!-- ACP2E-2018 -->

* Les options d’image ne s’affichent plus comme balises de HTML dans les e-mails des clients de retour (modèle par défaut) pour les produits avec des options d’image personnalisées.

<!-- ACP2E-1529 -->

* Les détails de l’administrateur d’entreprise sont désormais enregistrés comme prévu et les administrateurs sont correctement redirigés, lorsque les e-mails d’affectation d’administrateur d’entreprise contiennent un `CMS Block URL` variable.

<!-- AC-2903 -->

* Les adresses e-mail des clients peuvent désormais inclure des signes diacritiques. Auparavant, la validation front-end interdisait la création d’un utilisateur avec des signes diacritiques dans son adresse e-mail. [GitHub-12075](https://github.com/magento/magento2/issues/12075)

<!-- ACP2E-1682 -->

* Les e-mails d’alerte de stock et de prix sont désormais traduits en fonction de la langue configurée pour la vue de magasin par défaut du site web. Auparavant, ces e-mails n’étaient pas traduits.

<!-- ACP2E-1571 -->

* `POST V1/order/notify-orders-are-ready-for-pickup` envoie désormais un e-mail pour avertir les clients qu’une commande est prête à être récupérée uniquement lorsque la commande est prête. L’e-mail n’est désormais déclenché que lorsque la demande a été honorée sans exception.

### Framework

<!-- AC-10873 -->

* Amélioration du débogage en ajoutant le `UNCACHEABLE` lorsqu’un en-tête HTTP avec vernis est en cours d’utilisation. Auparavant, uniquement `HIT` ou `MISS` valeurs générées. [GitHub-37912](https://github.com/magento/magento2/issues/37912)

<!-- AC-10884 -->

* Ajout de code pour prendre en charge la gestion par défaut de la compression Varnish. [GitHub-38309](https://github.com/magento/magento2/issues/38309)

<!-- AC-8502 -->

* Le `bin/magento varnish:vcl:generate` La commande comprend désormais une `input-file argument`. Cela prend en charge l’ajout d’un VCL personnalisé à un référentiel Git, par rapport à la racine de Commerce. [GitHub-37363](https://github.com/magento/magento2/issues/37363)

<!-- AC-10739 -->

* La prise en charge de Varnish 4.x et 5.x a été supprimée de la base de code. [GitHub-38304](https://github.com/magento/magento2/issues/38304)

<!-- AC-8023 -->

* `phpcodesniffer-composer-installer` dans `composer.json` a été mis à niveau vers la version 1.0.0. [GitHub-36913](https://github.com/magento/magento2/issues/36913)

<!-- AC-10858 -->

* Caractères non conformes [RFC3986](https://www.rfc-editor.org/rfc/rfc3986.html) ont été supprimés de la base de code. [GitHub-38355](https://github.com/magento/magento2/issues/38355)

<!-- AC-10692 -->

* Correction d’une balise de document PHP incorrecte dans le `Magento\Reports\Block\Adminhtml\Shopcart\Product\Grid` classe. [GitHub-38186](https://github.com/magento/magento2/issues/38186)

<!-- AC-10865 -->

* Code refactorisé dans toute la base de code créée lors de l’utilisation du codage qui imposait que toute section de cache incluse dans le `app/etc/env.php` Le fichier doit inclure une section frontale. Cette refactorisation résout les problèmes potentiels lors de la mise à niveau des déploiements Commerce antérieurs à la version 2.4.4. [GitHub-38363](https://github.com/magento/magento2/issues/38363)

<!-- AC-8005 -->

* Clarification du message d’erreur associé à `StockItemValidator.php` lorsqu’un ID de stock avec une valeur de 0 est fourni lors d’un appel API. [GitHub-31107](https://github.com/magento/magento2/issues/31107)

<!-- AC-10583 -->

* Ajout d’un tableau vide par défaut à `$tagGenerators` dans `CompositeTagGenerator` pour éviter les erreurs lors de la compilation de l’injection de dépendance. Auparavant, en exécutant la `bin/magento setup:upgrade` commande lorsque la `Magento_DirectoryGraphQl` et `Magento_StoreGraphQl` Les modules ont été désactivés, ce qui a provoqué une erreur. [GitHub-38165](https://github.com/magento/magento2/issues/38165)

<!-- AC-9232 -->

* L’inutilisé `AlgorithmProviderFactory` La classe a été supprimée, ainsi que les dépendances de cette classe dans les classes , notamment `JweAlgorithmManagerFactory.php`, `JweContentAlgorithmManagerFactory.php`, et `JwsAlgorithmManagerFactory`. [GitHub-37783](https://github.com/magento/magento2/issues/37783)

<!-- AC-9776 -->

* Le `var/log/system.log` le fichier ne contient plus `main.INFO error` messages. Le journal des entrées de menu a été déplacé du niveau INFO vers DEBUG. Auparavant, le `var/log/system.log` Le fichier a été inondé de messages comme celui-ci : `Add of item with id Magento_Theme::design_config was processed … `.

<!-- AC-8809 -->

* Le préchargement des redis n’échoue plus lorsque `exec()` renvoie false. La vérification a été ajoutée au processus de préchargement pour éviter `array_combine` de la réception `false` comme deuxième argument. Par conséquent, le préchargement continue de s’exécuter lorsque `exec()` renvoie `false`. [GitHub-37509](https://github.com/magento/magento2/issues/37509)

<!-- AC-8220 -->

* A refactorisé le `Magento_CatalogWidget` module à remplacer `$block` fonctions d’échappement avec `$escaper` fonctions d’échappement. [GitHub-37107](https://github.com/magento/magento2/issues/37107)

<!-- AC-9336 -->

* `Swaziland` a été mis à jour vers `Eswatini` dans toute la base de code. [GitHub-37873](https://github.com/magento/magento2/issues/37873)

<!-- ACP2E-2638 -->

* Ajout de la nouvelle monnaie nicaraguayenne (NIO) à la liste des monnaies disponibles.

<!-- AC-10591 -->

* A modifié le nom de `reponseBody` variable en `responseBody` dans `app/code/Magento/CatalogRule/Controller/Adminhtml/Promo/Catalog/NewConditionHtml.php`.[GitHub-38093](https://github.com/magento/magento2/issues/38093)

<!-- AC-9221 -->

* Correction des erreurs d&#39;arrondi du sous-total qui se produisaient dans les transactions pour les produits pour lesquels la quantité décimale a été activée. [GitHub-37817](https://github.com/magento/magento2/issues/37817)

<!-- ACP2E-2127 -->

* Le filtre de date de la grille de clients d’administration fonctionne désormais comme prévu en fonction du paramètre régional spécifié.

<!-- AC-9027 -->

* Le `bin/magento setup:upgrade` la commande n’échoue plus en raison de la `$schemaPatch` type de données de variable. Auparavant, la valeur de chaîne était transmise à . `get_class` qui a provoqué l&#39;erreur. [GitHub-37545](https://github.com/magento/magento2/issues/37545)

<!-- ACP2E-2485 -->

* Échecs de lecture de base de données critique lorsque `synchronous_replication` est activé pour que les connexions esclaves sur Adobe Commerce Cloud ne se produisent plus.

<!-- ACP2E-2345 -->

* La connexion à la base de données MySQL est maintenant restaurée si la connexion expire au cours d’une transaction lorsque vous définissez `max_messages = 0` pour le consommateur. Auparavant, la connexion était interrompue.

<!-- ACP2E-2121 -->

* Le `magento/module-release-notification` le module principal a été marqué comme obsolète dans le code 2.4-develop avec ce commentaire : `Starting from Magento 2.4.7,  Magento_ReleaseNotification module is deprecated in favor of another in-product messaging mechanism`.

<!-- AC-9388 -->

* La génération du code de proxy génère désormais des fichiers proxy et d’usine comme prévu pour les déploiements s’exécutant en mode production. [GitHub-35252](https://github.com/magento/magento2/issues/35252)

<!-- AC-1477 -->

* L&#39;état indien du Ladakh est maintenant listé comme une option dans l&#39;adresse de l&#39;administrateur **[!UICONTROL State]** menus déroulants. [GitHub-33698](https://github.com/magento/magento2/issues/33698)

<!-- AC-8388 -->

* L’indicateur de compte à rebours des événements s’affiche désormais comme prévu sur la page de catégorie.

<!-- AC-8369 8368 8365 8317 8351 8357 8377 8357 8351 8323-->

* L&#39;interdit `@author` La balise a été supprimée de la base de code, y compris les modules suivants : `Magento_user-variable-wee`, `Magento_Catalog`, et `Magento_Customer`, `Magento_Wishlist`, `Magento_Review` `Tax`, et dans l’ensemble du framework. [GitHub-37245](https://github.com/magento/magento2/issues/37245), [GitHub-37246](https://github.com/magento/magento2/issues/37246), [GitHub-37249](https://github.com/magento/magento2/issues/37249), [GitHub-37263](https://github.com/magento/magento2/issues/37263)

<!-- AC-9489 -->

* Le sérialiseur JSON dans `User` Le module a été remplacé par un nouveau sérialiseur plus précis (`JsonHexTag`). Auparavant, Commerce se bloquait parfois lors de l’utilisation de données sérialisées par le sérialiseur standard lorsqu’elles contenaient des éléments sans échappement. [GitHub-31377](https://github.com/magento/magento2/issues/31377)

<!-- ACP2E-2138 -->

* Les erreurs de pipeline rompues ne se produisent plus lors de l’exécution d’une réindexation complète (`bin/magento indexer:reindex`). Les connexions AMPQ sont désormais fermées avant que le gestionnaire de processus ne crée des processus.

<!-- ACP2E-2244 -->

* Le programme de validation des messages de la file d’attente valide désormais le sous-type de tous les éléments du tableau. Auparavant, Commerce avait généré une exception.

<!-- ACP2E-2066 -->

* Configuration de la connexion à la file d’attente par rubrique dans `app/etc/env.php` fonctionne désormais correctement. Auparavant, la file d’attente d’alerte de produit ne se générait pas correctement lorsqu’une nouvelle file d’attente de messages était créée avec un échange personnalisé. Si la connexion de file d’attente pour une rubrique a été configurée dans `app/etc/env.php` avec un échange personnalisé, une nouvelle liaison a été créée pour toutes les rubriques avec cet échange personnalisé. Les commerçants ne pouvaient pas traiter les alertes de produits.

<!-- ACP2E-2144 -->

* Formats temporels marqués d’un  `/* mariadb-5.3 */` le commentaire ne provoque plus d’erreurs pendant `bin/magento setup:install` lors de la mise à niveau du serveur MariaDB vers la version 10.5.1 ou ultérieure.

<!-- ACP2E-2147 -->

* Le pilote AwsS3 fonctionne maintenant comme prévu pour remplacer l&#39;implémentation de base du stockage de fichiers par défaut. Auparavant, les données pouvaient être endommagées lorsque ce pilote était configuré pour le stockage de fichiers. [GitHub-37844](https://github.com/magento/magento2/issues/37844)

<!-- ACP2E-1999 -->

* `bin/magento config:show` et `set` commandes qui utilisent `$_ENV` les variables prennent désormais en charge l’utilisation de codes de site web et de magasin qui contiennent des caractères camelcase ou majuscules.

<!-- AC-8923 -->

* Classes ajoutées avec `!important` comme utilisé dans Tailwind 3 pour la prise en charge de la disposition CSS. [GitHub-37568](https://github.com/magento/magento2/issues/37568)

<!-- AC-9115 -->

* Un manquant `jQuery` une dépendance a été ajoutée à . `trim-input.js` fichier . [GitHub-37683](https://github.com/magento/magento2/issues/37683)

<!-- AC-9387 -->

* Les détails spécifiques à l’événement sont désormais transmis en tant que deuxième attribut (`context`) du `log` méthode. [GitHub-37879](https://github.com/magento/magento2/issues/37879)

<!-- AC-9109 -->

* Les valeurs de format ont été ajoutées aux images du catalogue et les scripts inutiles ont été supprimés de la structure de l’interface utilisateur. [GitHub-37691](https://github.com/magento/magento2/issues/37691)

<!-- AC-9188 -->

* Les messages d’erreur révisés déclenchés par une configuration XML non valide seront plus informatifs. [GitHub-37788](https://github.com/magento/magento2/issues/37788)

<!-- AC-9335 8817-->

* Code obsolète refactorisé lié à la création de propriétés dynamiques dans toute la base de code.

<!-- AC-7009 -->

* Les performances des indexeurs pour les grands magasins avec des bases de données de produits extrêmement actives se sont améliorées. Les indexeurs indexent désormais les dernières informations sur les produits une fois pour chaque index plutôt que plusieurs fois. Auparavant, les produits disparaissaient du site web et les données des produits pouvaient être obsolètes sur le site web. [GitHub-30012](https://github.com/magento/magento2/issues/30012)

<!-- ACP2E-1971 -->

* `mview_state` le statut d&#39;enregistrement indique désormais précisément l&#39;état en fonction de l&#39;activité du journal des modifications lorsqu&#39;une connexion à la base de données esclave est disponible. Auparavant, ces enregistrements étaient conservés dans un `waiting` état dans les déploiements cloud même lorsqu’il n’y avait aucune nouvelle entrée dans le journal des modifications.

<!-- ACP2E-2022 -->

* Prise en charge ajoutée pour le `precision` option de format monétaire pour préserver la parité des fonctionnalités avec l’élément obsolète `ZendCurrency` classe.

<!-- AC-8854 -->

* Les messages de cookie ont été convertis en attributs observables et les développeurs peuvent désormais manipuler l’état, ce qui peut potentiellement déclencher des modifications de l’interface utilisateur. Auparavant, les cookies étaient en lecture seule et ne pouvaient pas être manipulés. [GitHub-37308](https://github.com/magento/magento2/issues/37308)

<!-- AC-6325 -->

* Les utilisateurs administrateurs peuvent désormais générer une facture lorsque leur instance Commerce est connectée au stockage S3. Auparavant, Commerce affichait cette erreur : `Cannot create image resource. File not found`. [GitHub-35706](https://github.com/magento/magento2/issues/35706)

<!-- AC-6906 -->

* Adobe Commerce consigne désormais un message d’exception comme prévu lorsque la validation du numéro de TVA par le service de validation VIES échoue. [GitHub-36065](https://github.com/magento/magento2/issues/36065)

<!-- AC-8146 -->

* Le `Administrators` Le nom a été supprimé de la requête utilisée pour récupérer un rôle d’administrateur lors de la création du rôle d’administrateur. [GitHub-36998](https://github.com/magento/magento2/issues/36998)

<!-- AC-8607 -->

* Le `bin/magento setup:config:set` la commande n’échoue plus lorsqu’un nom d’utilisateur de base de données non valide est inclus dans `app/etc/env.php` fichier . [GitHub-37409](https://github.com/magento/magento2/issues/37409)

<!-- AC-8595 -->

* Le tri par colonne sur les mots réservés dans un composant par défaut de l’interface utilisateur d’administration n’entraîne plus d’erreur SQL dans `var/log/exception.log`. [GitHub-37423](https://github.com/magento/magento2/issues/37423)

<!-- AC-8562 -->

* Ajouté `AddDataForCostaRica.php` fournir des informations d&#39;État au Costa Rica. [GitHub-37382](https://github.com/magento/magento2/issues/37382).

<!-- AC-8577 -->

* Amélioration du message d’erreur pour le scénario où l’utilisateur ou l’utilisatrice tente d’accéder à une URL non valide à partir de l’administrateur. [GitHub-35682](https://github.com/magento/magento2/issues/35682).

<!-- ACP2E-1841 -->

* `Param $options[`position`]` pour les symboles de devise fonctionne désormais comme prévu et prend en charge la personnalisation de la position du symbole de devise. Auparavant, après la migration de Zend Framework 1, le `toCurrency` méthode ignorée `position` paramètre . Ce problème survenait dans l’interface d’administration.

<!-- AC-8817 -->

* Code obsolète refactorisé lié à la création de propriétés dynamiques dans toute la base de code.

<!-- AC-8154 -->

* Les formats de style personnalisés créés en étendant l’éditeur TinyMCE dans les versions d’Adobe Commerce et de Magento Open Source antérieures à la version 2.4.6 sont désormais disponibles dans le Créateur de page comme prévu `text` type de contenu. Auparavant, le format de style personnalisé était ignoré et seuls les formats par défaut étaient chargés après la mise à niveau vers Adobe Commerce 2.4.6-p1. [GitHub-36950](https://github.com/magento/magento2/issues/36950)

<!-- AC-8576 -->

* Ajout de la note d’information suivante à la `quote.php` fichier : `Important: This method also copies customer data to quote and removes quote addresses`. [GitHub-37400](https://github.com/magento/magento2/issues/37400)

<!-- ACP2E-1973 -->

* L&#39;instanciation du fournisseur de verrous passe maintenant par `\Magento\Framework\Lock\Proxy` classe. Le fournisseur de verrous est désormais configuré avec la variable `lock` configuration d’à l’aide de `app/etc/env.php` fichier .

<!-- ACP2E-1492 -->

* Le mutex a été implémenté pour les commandes afin d’empêcher les conditions de concurrence lors de la mise à jour par des requêtes simultanées. Auparavant, les requêtes simultanées (conditions de concurrence) pour les annulations de commande entraînaient des entrées dupliquées dans le `inventory_reservation` tableau.

<!-- ACP2E-1381 -->

* Le `populateWithArray` La fonction transforme désormais correctement les propriétés d’objet en casse de serpent, ce qui la rend compatible avec le `AbstractModel` getters et setters. Auparavant, la mise en forme de la casse de serpent était incorrecte lorsque le nom de l’attribut de données contenait plusieurs lettres majuscules à la suite.

<!-- ACP2E-1522 -->

* La valeur d’incrémentation automatique dans `catalog_product_entity_varchar` Le tableau s’incrémente désormais correctement après l’enregistrement d’un produit. Auparavant, cette valeur augmentait de dix.

<!-- ACP2E-1701 -->

* Adobe Commerce ne renvoie plus cette exception de système de fichiers lorsque vous tentez de vider le cache JavaScript/CSS : `No such file or directory`.

<!-- ACP2E-1358 -->

* La valeur de `value_id` dans `customer_entity_int` est désormais incrémenté correctement. Une requête de mise à jour est exécutée à la place de `insert on duplicate key update` lors de la mise à jour d’une entité qui incorpore ces attributs. Par conséquent, les colonnes d’incrémentation automatique utilisées dans le modèle EAV augmentent désormais de manière linéaire. Auparavant, le processus d’incrémentation automatique pour les valeurs ignorées des colonnes en raison de l’échec des requêtes d’insertion. [GitHub-28387](https://github.com/magento/magento2/issues/28387)

<!-- AC-8462 -->

* Suppression des espaces inutiles de `id` attributs qui ne le nécessitent pas. (Ce bogue a été introduit par un changement de code dans Adobe Commerce 2.4.6.)

<!-- AC-7923 -->

* Les codes de magasin n’apparaissent plus dans l’URL du magasin lorsque celui-ci est en mode magasin unique. [GitHub-36831](https://github.com/magento/magento2/issues/36831)

<!-- AC-7988 -->

* Des mises à jour mineures ont été apportées à `around` modules externes. [GitHub-31443](https://github.com/magento/magento2/issues/31443)

<!-- AC-7989 -->

* Les nuanciers `Helper` a été restructuré pour supprimer les alias d’importation trompeurs. [GitHub-31373](https://github.com/magento/magento2/issues/31373)

<!-- AC-8708 -->

* Les utilisateurs administrateurs peuvent désormais supprimer ou renommer un `sitemap.xml` fichier comme prévu. Auparavant, un utilisateur administrateur pouvait supprimer le fichier de l’administrateur, mais il est resté dans le système de fichiers. [GitHub-37468](https://github.com/magento/magento2/issues/37468)

<!-- ACP2E-1747 -->

* Les coupons ne sont plus marqués comme utilisés lorsque le paiement échoue pour la commande à laquelle ils ont été appliqués. Les messages de la file d’attente sont désormais traités dans l’ordre dans lequel ils sont publiés lorsque le client est démarré. Auparavant, le premier message était extrait de la file d’attente pour simplement vérifier si les messages étaient placés en file d’attente. Il était ensuite rejeté, ce qui entraînait le dernier traitement du premier message.

<!-- ACP2E-1627 -->

* Adobe Commerce ne renvoie plus d’exception dans le fichier journal lorsqu’un utilisateur tente d’imprimer une étiquette d’expédition. Auparavant, si une extension modifiait les en-têtes de réponse contenant une pièce jointe, le système générait une exception dans le fichier journal.

<!-- AC-7986 -->

* La prise en charge d’autres classes de HTML a été ajoutée à . `elements.xsd`. [GitHub-36891](https://github.com/magento/magento2/issues/36891)

### Correctifs généraux

<!-- AC-10591 -->

* A modifié le nom de `reponseBody` variable en `responseBody` dans `app/code/Magento/CatalogRule/Controller/Adminhtml/Promo/Catalog/NewConditionHtml.php`.[GitHub-38093](https://github.com/magento/magento2/issues/38093)

<!-- ACP2E-2647 -->

* La planification des mises à jour de produit n’efface plus les données d’attribut à sélection multiple. Auparavant, lorsqu’une mise à jour était planifiée pour un produit, les données d’attribut à sélection multiple du produit étaient effacées par erreur. [GitHub-37675](https://github.com/magento/magento2/issues/37675)

<!-- AC-2904 -->

* L’enregistrement d’un produit avec une portée de magasin autre que celle par défaut n’entraîne plus l’extension de la portée du magasin d’attributs inchangés lors du chargement avec `ProductRepository`. [GitHub-8897](https://github.com/magento/magento2/issues/8897)

<!-- ACP2E-2132 -->

* Les acheteurs peuvent désormais accéder aux pages configurées en tant que nœuds de hiérarchie lorsque les restrictions d’accès sont activées. Auparavant, une boucle de redirection infinie s’était produite et le navigateur a généré cette erreur : `ERR_TOO_MANY_REDIRECTS`.

<!-- ACP2E-2404 -->

* Des messages d’erreur informatifs ont été ajoutés à la validation des champs personnalisés sur les pages de détails du produit. [GitHub-38006](https://github.com/magento/magento2/issues/38006)

<!-- ACP2E-2511 -->

* Les caractères spéciaux peuvent désormais être utilisés dans les champs de nom. Auparavant, l’esperluette (&amp;) était limitée dans le programme de validation des noms, ce qui bloquait les opérations d’ajout ou de modification des clients lorsque le nom du client contenait une esperluette. [GitHub-38080](https://github.com/magento/magento2/issues/38080)

<!-- ACP2E-2469 -->

* Les utilisateurs administrateurs disposant d’un accès restreint à un magasin spécifique peuvent désormais utiliser une action de mise à jour en masse pour mettre à jour les révisions de produits. Auparavant, Commerce avait généré l’exception suivante : `report.CRITICAL: TypeError: array_intersect(): Argument #1 ($array) must be of type array, null given in app/code/Magento/AdminGws/Model/Models.php:439`.

<!-- AC-8600 -->

* La fonctionnalité Afficher le mot de passe de la page de connexion de storefront affiche désormais les mots de passe comme prévu. Auparavant, les mots de passe n’étaient pas affichés. [GitHub-37432](https://github.com/magento/magento2/issues/37432)

<!-- ACP2E-2062 -->

* La liste de comparaison des produits est désormais toujours spécifique aux sites web pour les acheteurs invités et ne contient pas de produits qui ont été ajoutés à partir des autres sites web, y compris les produits qui ont été affectés aux deux sites web.

<!-- ACP2E-2087 -->

* Les blocs de contenu CMS contenant des émoticônes ne sont plus tronqués après l’émoticône lors de l’enregistrement dans la base de données. Auparavant, le contenu était tronqué après l’émoticône, car la configuration de base de données par défaut ne prenait pas en charge les caractères à quatre octets.

<!-- ACP2E-2154 -->

* La règle de produit associée **Est l&#39;un de** La condition fonctionne désormais correctement lorsqu’elle est configurée avec le **Produits à faire correspondre** paramètre . Auparavant, cette règle n’identifiait aucun produit.

<!-- ACP2E-2164 -->

* La grille de pages CMS filtre désormais les pages en fonction de la vue de magasin affectée à l’utilisateur administrateur. Auparavant, la portée du rôle n’était pas appliquée.

<!-- AC-8823 -->

* Les mots de passe s’affichent désormais comme prévu lorsque le **[!UICONTROL Show Password]** la case à cocher sur la page de connexion est active.

<!-- ACP2E-2037 -->

* L’attribut système Jeton de réinitialisation de mot de passe de l’entité client (`rp_token`La validation a été supprimée de la validation des attributs lors de la création du compte client et la validation des diacritiques est incluse uniquement dans l’e-mail du client qui en résulte. Auparavant, Commerce n’enregistrait pas l’enregistrement du client et affichait cette erreur : `Something went wrong while saving the customer`.

<!-- AC-8826 -->

* Vous pouvez désormais enregistrer les modifications apportées à la grille Pages d’administration et Bloc après la suppression d’une colonne. [GitHub-37525](https://github.com/magento/magento2/issues/37525)

<!-- ACP2E-1933 -->

* Les administrateurs de l’entreprise peuvent désormais ajouter des utilisateurs de l’entreprise depuis le storefront. Auparavant, Commerce consignait cette erreur lorsque l’utilisateur administrateur tentait d’ajouter un nouvel utilisateur : `report.CRITICAL: Error: Call to a member function __toArray() on null in app/code/Magento/LoginAsCustomerLogging/Observer/LogSaveCustomerObserver.php:123`.

<!-- ACP2E-1972 -->

* Les clients peuvent désormais se connecter avec un nouveau mot de passe depuis un appareil après avoir réinitialisé leur mot de passe sur un autre appareil.

<!-- ACP2E-1609 -->

* Adresse du client administrateur **État/Province** Le champ conserve désormais la dernière valeur enregistrée comme prévu. Auparavant, lorsque vous supprimiez la valeur de ce champ, Commerce continuait à afficher la valeur supprimée dans le **État/Province** champ . [GitHub-36846](https://github.com/magento/magento2/issues/36846)

<!-- ACP2E-1796 -->

* Adobe Commerce ne renvoie plus d’erreur de violation de contrainte lorsque vous désélectionnez une page CMS pour la première fois, puis sélectionnez-la.

<!-- ACP2E-1639 -->

* Une racine de site web de hiérarchie est désormais correctement affectée à une page CMS nouvellement créée. Auparavant, la sélection de la racine du site web de hiérarchie ne correspondait pas sur les pages CMS nouvellement créées.

<!-- ACP2E-1508 -->

* Les erreurs ne se produisent plus lors des demandes de flux RSS pour les catégories lorsque **[!UICONTROL RSS Feed Top Level Category]** est activé. Auparavant, la navigation dans la page de catégorie des flux RSS entraînait des Elasticsearch `CRITICAL` erreurs dans les fichiers journaux lorsque **[!UICONTROL RSS Feed Top Level Category]** a été activé.

<!-- ACP2E-1490 -->

* La valeur correcte est maintenant enregistrée pour . `gws_store_groups` lorsque l’étendue du rôle est modifiée lors de la création du rôle utilisateur. Auparavant, lorsque l’étendue du rôle était sélectionnée comme `All`, le `gws_store_groups` La valeur a été enregistrée comme nulle lors de la création de l’utilisateur mais pas lors de la modification du rôle. En outre, si la portée du rôle a été sélectionnée comme `Custom`, puis le `gws_store_groups` La valeur a toujours été enregistrée comme nulle.

<!-- ACP2E-1446 -->

* Vous pouvez désormais accéder à la page Réinitialiser le mot de passe en cliquant sur le lien Réinitialiser le mot de passe administrateur sur la page Connexion administrateur lorsque **[!UICONTROL Add Store Code to Urls]** Le paramètre est activé. Le lien Mot de passe réinitialisé par l’administrateur ouvrait précédemment la page de connexion ou la page 404.

<!-- ACP2E-1274 -->

* La période du tableau de bord des statistiques d’administration est désormais calculée en fonction du fuseau horaire défini dans les paramètres de configuration, puis converti en UTC afin de récupérer les données de la base de données.

<!-- ACP2E-1665 -->

* Le filtre de hiérarchie CMS fonctionne comme prévu après avoir filtré une vue de magasin, puis cliqué sur **[!UICONTROL Save]** on Admin **[!UICONTROL Content]** > **[!UICONTROL Hierarchy]**. Précédemment, en cliquant sur **[!UICONTROL Save]** actualise la page, mais le contexte est perdu et la vue de magasin sélectionnée n’est plus affichée.

<!-- ACP2E-1631 -->

* Cliquer sur le **[!UICONTROL Send invitation]** bouton (Admin **[!UICONTROL Marketing]** > **[!UICONTROL Private sales]** > **[!UICONTROL Invitation]**) envoie maintenant une demande de POST avec la clé de formulaire et envoie l’invitation avec succès. Auparavant, lorsque vous cliquiez sur ce bouton, ni la méthode de POST HTTP ni la clé de formulaire n’étaient présentes.

<!-- ACP2E-1608 -->

* Les fichiers à zéro octet peuvent désormais être copiés dans le stockage distant avec AWS S3.

<!-- AC-7402 -->

* Les utilisateurs administrateurs peuvent désormais ajouter une nouvelle adresse de client à partir de l’administration lorsque ce client a été créé pour un autre site web dont l’ID de magasin ne correspond pas à l’ID du site web. Auparavant, Adobe Commerce affichait ce message pop-up : `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- AC-8247 -->

* La page de l’éditeur de blocs CMS affiche désormais le widget approprié `block_id` valeur. [GitHub-29644](https://github.com/magento/magento2/issues/29644)

### Cartes-cadeaux et emballage

<!-- AC-7372 -->

* Les commerçants ne peuvent plus créer de carte cadeau avec une valeur négative.

<!-- ACP2E-1890 1806-->

* Le `setGiftOptionsOnCart` mutation supprime désormais l’emballage-cadeau d’une commande comme prévu. La valeur de `gift_wrapping_id` n’est plus défini au niveau du panier. Auparavant, le `gift_wrapping_id` a été mis à jour à sa valeur précédente après le passage de la commande même lorsque cette valeur n’était pas définie au niveau du panier.

<!-- ACP2E-1866 -->

* Les comptes de cartes-cadeaux restent maintenant actifs comme prévu lorsque le remboursement partiel d&#39;un produit simple est traité à partir de la commande à laquelle la carte a été appliquée. Auparavant, le compte de carte cadeau était supprimé.

<!-- ACP2E-1805 -->

* Le `setGiftOptionsOnCart` mutation met désormais à jour la base de données lors de la suppression d’un message cadeau du panier. Auparavant, les détails du message n’étaient pas mis à jour dans la base de données et le message cadeau n’était pas supprimé du panier.

<!-- ACP2E-1741 -->

* Le registre des cadeaux `Event Information` Le libellé est maintenant traduit comme prévu.

<!-- ACP2E-1586 -->

* Les sous-totaux sont désormais correctement calculés pour les montants de carte cadeau personnalisée.

<!-- ACP2E-1350 -->

* Les cartes-cadeaux sont désormais correctement appliquées lors du passage en caisse avec plusieurs adresses. Auparavant, les montants des cartes-cadeaux étaient appliqués de manière incorrecte pour les envois multi-adresses, ce qui entraînait des montants de cartes-cadeaux non valides.

<!-- ACP2E-1341 -->

* L’émulation commence désormais pendant `send()` appelle une fois l’émulation terminée pendant l’ `getInfoBlockHtml()` et aucune erreur n’est consignée. Auparavant, le `system.log` le fichier a été inondé avec cette erreur : `main.ERROR: Environment emulation nesting is not allowed`. [GitHub-35603](https://github.com/magento/magento2/issues/35603)

<!-- ACP2E-1612 -->

* Vous pouvez désormais utiliser le `updateCartItems` mutation pour mettre à jour une carte cadeau dans un panier. Auparavant, seul le montant de la carte pouvait être mis à jour dans le panier par cette mutation.

<!-- ACP2E-1669 -->

* L’emballage du cadeau est désormais inclus comme prévu dans un devis basé sur des paniers fusionnés. Auparavant, les messages cadeaux étaient fusionnés avec succès, mais pas les sélections d’habillage.

<!-- AC-7530 -->

* Le `addProductsToCart` mutation ajoute désormais une carte cadeau à un panier. Auparavant, cette requête attendait le nom du destinataire de la carte cadeau, mais le nom de l’expéditeur était renvoyé à la place. Adobe Commerce a généré cette erreur : `Please specify a recipient name`. [GitHub-36665](https://github.com/magento/magento2/issues/36665)


### Google Tag Manager

<!-- ACP2E-1520 -->

* Le module Google Tag envoie désormais les données correctes vers la couche de données. Auparavant, les données des impressions de page n’étaient pas transmises à la couche de données.

### GraphQL

<!-- AC-8964 -->

* Le `getCustomerWishlist` la requête ne génère plus d’erreur de serveur interne lors de l’interrogation de listes contenant des produits configurables.

<!-- AC-8966 -->

* Le `customerCart` la requête renvoie désormais toutes les remises appliquées sur les produits groupés comme prévu. Auparavant, le total des remises appliquées à un produit groupé était renvoyé en tant que zéro.

<!-- AC-8964 -->

* Le `getCustomerWishlist` la requête ne génère plus d’erreur de serveur interne lors de l’interrogation de listes contenant des produits configurables.

<!-- AC-9147 -->

* La déclaration de la `is_subscribed` l’indicateur , son résolveur, le cache et les tests associés ont été déplacés du . `CustomerGraphQl` module au `NewsletterGraphQl` module.

<!-- AC-9362 -->

* Le `addProductsToCart` la mutation ne signale plus d’erreurs sans rapport dans `user_errors`. Auparavant, les erreurs liées au panier étaient incluses dans `user_errors` ainsi que les erreurs d’opération attendues. [GitHub-37908](https://github.com/magento/magento2/issues/37908)

<!-- ACP2E-2119 -->

* Le `products` le filtre de produit de requête peut désormais renvoyer des résultats de correspondance partielle ainsi que des correspondances complètes. Le nouveau `match_type` L’attribut (PARTIAL, FULL) prend en charge la spécification du type de correspondance. Auparavant, la requête renvoyait uniquement les correspondances complètes.

<!-- ACP2E-2155 -->

* Mutex a été ajouté à `addConfigurableProductsToCart` requête pour empêcher les conditions de concurrence lors d’une mise à jour par des requêtes simultanées. Auparavant, lorsqu’un commerçant envoyait deux demandes parallèles pour ajouter le même produit configurable à un panier, deux articles distincts avec le même SKU de produit étaient ajoutés. [GitHub-37847](https://github.com/magento/magento2/issues/37847)

<!-- ACP2E-2201 -->

* L’agrégation de produits dans les réponses GraphQL inclut désormais des valeurs non nulles pour les attributs lorsque **[!UICONTROL Use in Layered Navigation]** est défini sur **[!UICONTROL Filterable (no results)]**. Auparavant, seules les valeurs non nulles étaient renvoyées.

<!-- ACP2E-2141 -->

* Amélioration des performances du `setShippingAddressForEstimate` recherchez les opérations liées au panier qui impliquent des attributs de produit personnalisés. Auparavant, la requête chargeait tous les attributs de produit lorsque les paramètres étaient envoyés en tant que variables.

<!-- ACP2E-2255 -->

* Le `products` requête `ConfigurableProduct.configurable_options` Le champ renvoie désormais uniquement les valeurs qui ont au moins un produit activé. Auparavant, ce champ renvoyait des produits simples désactivés.

<!-- ACP2E-2151 -->

* Amélioration des performances du `GetCategories query` en réduisant le nombre de requêtes SQL inutiles qu’il génère.

<!-- AC-8623 -->

* La gestion des erreurs d’adresse pour les composants de bibliothèque GraphQL fonctionne désormais comme prévu.

<!-- AC-9058 -->

* Le `products` la requête renvoie désormais tous les détails de tarification storefront pertinents lorsque la tarification dynamique est définie sur non et que des remises sont appliquées. Auparavant, la fourchette de prix des produits n’était pas renvoyée. [GitHub-35649](https://github.com/magento/magento2/issues/35649)

<!-- ACP2E-1744 -->

* Les noms des transactions GraphQL incluent désormais uniquement les noms des requêtes de niveau supérieur dans les journaux New Relic. Auparavant, les noms de transaction incluaient également des noms de requête secondaires.

<!-- AC-8623 -->

* La gestion des erreurs d’adresse pour les composants de bibliothèque GraphQL fonctionne désormais comme prévu.

<!-- AC-7430 -->

* Lorsque le paramètre Visibilité d’un produit est défini sur `Catalog`, `products` les requêtes sur ce produit résolvent désormais correctement le paramètre . Auparavant, tout filtre fourni était basculé sur la `Visibility: Catalog` paramètre . [GitHub-36591](https://github.com/magento/magento2/issues/36591)

<!-- ACP2E-1769 -->

* Le `customer` la requête renvoie désormais une valeur `product_sale_price` champ qui inclut la taxe sur les commandes lorsque le prix du produit a été configuré pour inclure la taxe. [GitHub-36946](https://github.com/magento/magento2/issues/36946)

<!-- ACP2E-1584 -->

* Attributs de produit de type `DateTime` à présent, mappez à . `FilterRangeTypeInput` filtrer dans les requêtes de produits. Auparavant, ces attributs étaient mappés à . `FilterMatchTypeInput`. Suite à cette modification, les requêtes filtrent sur `DateTime` attributs requis `from` et `to` valeurs au lieu de valeurs correspondantes.

<!-- ACP2E-1552 -->

* Le `customer` La requête renvoie désormais uniquement les avis clients liés à une vue de magasin spécifique comme prévu lorsqu’elle est filtrée par ID de magasin.

<!-- AC-7544 -->

* Le `categories` la requête ne renvoie plus d’erreur lorsque `items.redirect_code` la valeur de réponse contient une valeur nulle. [GitHub-36675](https://github.com/magento/magento2/issues/36675)

<!-- ACP2E-1465 -->

* Les produits liés aux règles se chargent désormais comme prévu dans les réponses de GraphQL après un nettoyage complet du cache. Auparavant, les attributs EAV du produit responsables des correspondances basées sur des règles n’étaient pas chargés pour l’entité demandée, bien qu’ils aient été chargés après le rechargement de la page du produit storefront.

<!-- ACP2E-1486 -->

* Le `changeCustomerPassword` la mutation déclenche désormais l’e-mail comme prévu après la réinitialisation réussie d’un mot de passe.

<!-- ACP2E-1494 -->

* `urlResolver` et `route` les requêtes renvoient désormais un résultat lorsque `Target Path` de réécriture d’URL est une URL absolue. Auparavant, le `urlResolver` La requête a renvoyé la valeur NULL lorsque vous l’avez utilisée pour récupérer les données de redirection.

<!-- AC-7979 -->

* Le `products` la requête renvoie désormais les libellés corrects lorsqu’il existe plusieurs vues de magasin. [GitHub-29635](https://github.com/magento/magento2/issues/29635)

<!-- ACP2E-1315 -->

* Le `categoryList` la requête renvoie désormais une valeur renseignée `product` de la section `options` bloquer les produits enfants des produits groupés comme prévu. Auparavant, aucune information sur les produits enfants du lot n’était renvoyée.

<!-- AC-7114 -->

* Le `route` la requête renvoie désormais des itinéraires pour les catégories et les produits comme prévu sans erreur de serveur interne. [GitHub-36544](https://github.com/magento/magento2/issues/36544)

<!-- ACP2E-1652 -->

* Le `products` la requête récupère maintenant . `url_key` valeurs lorsque plusieurs catégories sont sélectionnées.

<!-- LYNX-1716-->

* `product` les requêtes renvoient désormais des agrégations uniquement pour les produits affectés au catalogue partagé spécifié. Auparavant, les données d’agrégation pour les produits non affectés à un catalogue partagé s’affichaient dans une navigation superposée.

<!-- AC-6680 -->

* Le `OptionValueProvider` classe `get()` La méthode renvoie désormais une valeur d’option d’attribut en fonction de la valeur donnée `option_id` comme prévu. Auparavant, il renvoyait une erreur. [GitHub-35910](https://github.com/magento/magento2/issues/35910)

<!-- AC-6745 -->

* Le `products` La requête renvoie désormais toutes les agrégations (filtres) disponibles et leurs libellés correctement traduits. Auparavant, les libellés d’agrégation des prix et des catégories n’étaient pas traduits comme prévu. [GitHub-36140](https://github.com/magento/magento2/issues/36140)

<!-- AC-6666 -->

* Vous pouvez désormais utiliser un fragment `ProductCard` lors de l’interrogation `related_products`, `upsell_products`, et `crosssell_products` le `ProductInterface`. [GitHub-29769](https://github.com/magento/magento2/issues/29769)

<!-- AC-7014 -->

* Le `products` la requête renvoie désormais les produits associés, de montée en gamme et de vente croisée dans l’ordre dans lequel ils ont été enregistrés. [GitHub-36461](https://github.com/magento/magento2/issues/36461)

<!-- AC-8573 -->

* Les requêtes GraphQL renvoient désormais les données des produits associés, triées par position. [GitHub-33010](https://github.com/magento/magento2/issues/33010)

<!-- AC-8542 -->

* `category_url_path` a été ajouté à `ProductAttributeFilterInput`, qui prend en charge la demande de tous les produits d’une catégorie dans une seule requête. [GitHub-32460](https://github.com/magento/magento2/issues/32460)

<!-- AC-821 -->

* Correction d’une erreur dans laquelle la méthode qui définit le magasin actuel dans une mutation GraphQL exécutée avant la méthode qui gère la validation. [GitHub-31336](https://github.com/magento/magento2/issues/31336)

### Image

<!-- ACP2E-1353 -->

* Le formulaire de chargement de l’icône d’administration prend désormais en charge `.ico` types de fichiers. [GitHub-34858](https://github.com/magento/magento2/issues/34858)

### Importer/exporter

<!-- ACP2E-2261 -->

* Le processus d’importation de produit analyse désormais les valeurs avec le séparateur correct. Auparavant, le processus d’importation utilisait l’opérateur de barre verticale (« | ») pour analyser les valeurs à sélection multiple jusqu’à ce que le séparateur de valeurs déterminé ne soit pas égal à la valeur par défaut. Le processus d’importation a ensuite échoué.

<!-- ACP2E-2490 -->

* Les redirections 301 sont désormais automatiquement créées lorsque `URL Key` les valeurs sont mises à jour par l’importation d’un fichier CSV.

<!-- ACP2E-2129 -->

* Les taux de la table d’expédition sont désormais mis à jour comme prévu dans le fichier CSV d’importation des taux de la table. Le fichier de chargement du taux de table est temporairement stocké jusqu&#39;à l&#39;exécution de la tâche cron du processeur de configuration asynchrone. Cette tâche cron récupère le nouvel emplacement du fichier et le traite en conséquence. Auparavant, les taux de mise à jour des tableaux n&#39;étaient pas mis à jour comme prévu, car le processeur asynchrone recherchait le fichier au mauvais emplacement.

<!-- ACP2E-2298 -->

* La grille Exporter les fichiers affiche désormais tous les fichiers exportés, quel que soit l’horodatage. Auparavant, la grille n’affichait pas tous les fichiers exportés qui avaient la même date et heure. [GitHub-36951](https://github.com/magento/magento2/issues/36951)

<!-- ACP2E-2028 -->

* Les produits dotés d’options personnalisables peuvent désormais être importés. Auparavant, les données d’options étaient perdues lors de l’importation. [GitHub-37598](https://github.com/magento/magento2/issues/37598)

<!-- ACP2E-2214 -->

* Les caractères spéciaux dans les fichiers CSV exportés sont désormais représentés comme prévu dans Excel. [GitHub-37921](https://github.com/magento/magento2/issues/37921)

<!-- ACP2E-2301 -->

* Importer des sources de stock et des adresses client à l’aide de **[!UICONTROL Customers and Addresses (single file)]**  L’option est maintenant terminée.

<!-- ACP2E-1930 -->

* L’importation du produit n’échoue plus en raison d’un manque de mémoire. Auparavant, l&#39;importation d&#39;un nombre illimité de produits dans une base de données contenant déjà environ dix millions de produits échouait en raison d&#39;un manque de mémoire.

<!-- AC-9116 -->

* Les contrôles de validation interrompent désormais le processus d’importation comme prévu lorsqu’il n’existe aucune donnée valide à importer et Commerce affiche désormais cette erreur : `There are no valid rows to import`. Auparavant, la validation réussissait dans ces conditions, mais le processus d’importation échouait avec ce message : `entity values are mixed`. [GitHub-32905](https://github.com/magento/magento2/issues/32905)

<!-- ACP2E-1754 -->

* L’importation de clés d’URL avec le même produit ne remplace ou ne supprime plus les clés d’affichage de magasin par défaut existantes. Les réécritures d’URL ne sont désormais régénérées pour les vues de magasin que lorsqu’elles ne sont pas remplacées `url_key` valeur. Auparavant, l’importation de réécritures d’URL avec la même clé URL remplaçait la clé d’URL d’affichage de magasin par défaut existante. (`key_store` Les réécritures d’URL ont été supprimées, mais la réécriture d’URL au niveau d’affichage Boutique par défaut pour le produit était toujours définie sur `key_store`.)

<!-- ACP2E-1875 -->

* Le nombre de produits ne change plus de manière inattendue lors de l’importation. Le vidage du cache est désormais reporté après le processus d’importation.

<!-- ACP2E-1813 -->

* Le statut des actions d’importation planifiées représente désormais précisément la réussite ou l’échec de l’opération d’importation. Auparavant, toutes les actions étaient enregistrées comme réussies.

<!-- AC-7039 -->

* Commerce prend désormais en compte les **[!UICONTROL Disable Automatic Group Change Based on VAT ID]** paramètre lors de l’import des enregistrements client. Auparavant, le `disable_auto_group_change` La valeur dans les fichiers d’importation a été ignorée. [GitHub-36409](https://github.com/magento/magento2/issues/36409)

<!-- AC-965 -->

* `Magento\Framework\Convert\Excel` gère désormais correctement les nombres précédés d’un espace. Le fichier XML Excel code désormais les champs sous la forme d’un `String`. Auparavant, le rédacteur Excel codait ces valeurs comme suit : `number`, ce qui entraînait des fichiers non valides. [GitHub-33422](https://github.com/magento/magento2/issues/33422)

<!-- ACP2E-1641 -->

* Les commerçants peuvent désormais spécifier le paramètre régional dans lequel les données d’importation sont présentées et la manière dont les validateurs de données doivent analyser ces données. Si aucune valeur de paramètre régional n’est spécifiée, Adobe Commerce utilise le paramètre régional de configuration par défaut (et non la vue de magasin par défaut) pour analyser les données. Dans les processus d’administration, d’importation et d’exportation continuent d’utiliser les paramètres régionaux de l’interface utilisateur d’administration pour importer, analyser et formater les données, respectivement.

<!-- ACP2E-1847 -->

* Importer des produits avec `country_of_manufacture` les attributs créés par un utilisateur administrateur avec un paramètre régional différent de celui de l’utilisateur administrateur qui importe les produits ne renvoient plus d’erreur de validation. Auparavant, cette opération d’importation pouvait entraîner une erreur de validation sur le `country_of_manufacture` attribut.

<!-- ACP2E-1981 -->

* Les données sources de stocks sont désormais importées par le processus d’importation du magasin. Commerce affiche désormais un message de notification complet une fois le processus d’importation terminé. Auparavant, le message de notification était manquant.

<!-- ACP2E-1889 -->

* L’invalidation de l’indexeur redondant a été supprimée lorsque les indexeurs sont en mode planifié.

<!-- ACP2E-1994 -->

* Les produits exportés ont désormais le bon `manage_stock` valeur lorsque l’option `use_config_manage_stock` valeur égale à `1`. Auparavant, cette valeur par défaut était incorrecte.

<!-- ACP2E-1620 -->

* Adobe Commerce affiche désormais un message d’erreur informatif dans la grille d’importation planifiée lorsqu’une image n’est pas importée correctement au cours d’une opération d’importation planifiée. Auparavant, aucun message d’erreur ne s’affichait.

<!-- ACP2E-1565 -->

* Le processus d’importation du produit n’est plus interrompu lorsque les images du produit sont manquantes. Auparavant, lorsqu’une image de produit était manquante lors de l’importation d’un service tiers à l’aide d’un fichier CSV, Adobe Commerce affichait cette erreur : `Maximum error count has been reached or a system error is occurred!`.

<!-- ACP2E-1476 -->

* Les performances de l’exportation des clients à partir de la grille des clients ont été améliorées dans les déploiements où le B2B est activé.

<!-- ACP2E-1391 -->

* Le processus d’importation de produit ne renvoie plus d’erreur de validation lorsqu’une valeur d’attribut dans `configurable_variations` La colonne contient une virgule.

<!-- ACP2E-1377 -->

* Le décodage a été exclu du processus d’exportation. Le texte du fichier d’exportation CSV reste inchangé après l’importation. Par conséquent, la description ne change pas après la réimportation. Auparavant, les balises de HTML étaient supprimées dans l’éditeur Page Builder après l’exportation et l’importation du produit.

<!-- ACP2E-1451 -->

* Les configurations non par défaut (site web ou étendue de magasin) ajoutées en tant que variables d’environnement n’interrompent plus la `app:config:import` processus avec une erreur de récursivité.

<!-- ACP2E-1569 -->

* Les indexeurs de catalogue et de prix en mode Mise à jour lors de l’enregistrement ne sont plus invalidés après l’importation. Auparavant, la version du document de l&#39;indexeur Elasticsearch était modifiée lors de l&#39;importation de produits nouveaux et existants.

<!-- ACP2E-1482 -->

* Les rapports de produit sont désormais exportés vers `var` répertoire. Auparavant, ces rapports étaient exportés vers le répertoire racine du document, qui est un répertoire en lecture seule dans les instances cloud.

<!-- ACP2E-1736 -->

* Les champs d’adresse client à sélection multiple vides n’interrompent ni n’arrêtent le processus d’exportation.

### Index

<!-- AC-10911 -->

* Amélioration des performances du `catalogrule_product` indexer lorsqu’aucune règle de catalogue n’est définie. [GitHub-34784](https://github.com/magento/magento2/issues/34784)

<!-- ACP2E-2204 -->

* Les problèmes liés aux performances de l&#39;indexeur des prix ont été résolus. Les performances de l’indexeur ne se dégradent plus progressivement. L&#39;indexeur a été refactorisé pour augmenter la vitesse de traitement de l&#39;indexeur en modifiant la façon dont les tables temporaires sont créées. Ces tables temporaires sont maintenant recréées au lieu d’être traitées par des instructions de DELETE plus longues.

<!-- ACP2E-2033 -->

* Les performances de l’indexeur de prix ont été améliorées. Une indication d’index a été ajoutée à l’indexeur de prix pour améliorer les temps d’exécution des requêtes MySQL déclenchées lors de l’indexation.

<!-- AC-9223 -->

* Tous les indexeurs utilisent désormais les mêmes couleurs pour représenter leur état. [GitHub-34648](https://github.com/magento/magento2/issues/34648)

<!-- ACP2E-1697 -->

* Les performances de l’indexeur de produit de règles de catalogue dans les déploiements où les règles ne sont pas affectées à tous les sites web ont été améliorées.

<!-- ACP2E-1401 -->

* Création d’un type de produit personnalisé lorsque les indexeurs sont définis sur **[!UICONTROL Update on schedule]** n’entraîne plus la mise à jour de l’index. `cron` tâche à échouer. [GitHub-36471](https://github.com/magento/magento2/issues/36471)

<!-- ACP2E-1574 -->

* Les problèmes d’affichage de la page des détails du produit storefront qui étaient dus à l’indexation des autorisations du catalogue ont été résolus. Auparavant, Adobe Commerce effaçait d’abord la table d’index, puis la réindexait pendant une période complète `catalogpermissions_product` ou `catalogpermissions_category` processus d’indexation. Les autorisations de catalogue ne fonctionnaient pas comme prévu sur le storefront jusqu’à ce que la réindexation soit terminée.

<!-- AC-6816 -->

* `bin/magento indexer:reindex customer_grid` n’échoue plus avec une erreur MySQL lorsque la grille client inclut des attributs client personnalisés nouvellement créés. [GitHub-36233](https://github.com/magento/magento2/issues/36233)

<!-- AC-8076 -->

* La modification du mode d’indexeur pour plusieurs indexeurs (c’est-à-dire un changement de mode d’indexeur à action en masse) ne modifie désormais le mode d’un indexeur que lorsque le mode actuel diffère de celui appliqué. Cela améliore les performances en empêchant les déplacements inutiles vers la base de données. [GitHub-36823](https://github.com/magento/magento2/issues/36823)

### Infrastructure

<!-- AC-10866 -->

* A ajouté un manquant `return` instruction au contrôleur d&#39;activation de l&#39;utilisation par l&#39;administrateur. Auparavant, il n’existait aucun `return` et le contrôleur dans `FrontendController` La classe n’a pas été traitée correctement. [GitHub-31374](https://github.com/magento/magento2/issues/31374)

<!-- AC-9390 -->

* MySQL remplacé `CREATE TEMPORARY TABLE ... LIKE` avec refactorisé `CREATE TEMPORARY TABLE` pour la conformité avec MySQL 8.x. [GitHub-37926](https://github.com/magento/magento2/issues/37926)

<!-- ACP2E-1462 -->

* Adobe Commerce n’inclut plus le chemin d’accès complet à la racine du serveur dans le message d’erreur qu’il affiche lorsqu’une requête HTTP incorrecte a été envoyée au serveur. Seules les chaînes sont désormais transmises au `explode` méthode comme deuxième argument.

<!-- AC-8384 -->

* `restricted_classes.php` a remplacé `Zend_Validate_File_Upload`. Auparavant, le programme de validation se bloquait lors du chargement d’un fichier d’importation dont la taille était supérieure à la valeur configurée dans `php.ini `. [GitHub-37281](https://github.com/magento/magento2/issues/37281)

<!-- ACP2E-1146 -->

* Les options d’attribut fournies par le modèle de source de données et installées à l’aide du correctif de données de configuration (généralement à partir de modules tiers) peuvent désormais être utilisées avec les règles de segment client. Auparavant, cette combinaison ne renvoyait pas la liste des clients qui correspondaient au segment configuré.

<!-- AC-7093 -->

* Le moteur de modèle d’e-mail peut désormais traiter correctement certaines directives imbriquées (par exemple, `{{if}}{{depend}}...{{/depend}}{{/if}}`). [GitHub-36438](https://github.com/magento/magento2/issues/36438)

<!-- AC-7920 -->

* `product` Les requêtes avec des données d’agrégation renvoient désormais les valeurs de libellé correctes pour les attributs de produit de type booléen. [GitHub-29123](https://github.com/magento/magento2/issues/29123)

<!-- https://github.com/magento/magento2/pull/29173 -->

* Les fichiers CSS ne sont plus corrompus lors de la fusion `var/tmp` et `pub/static` se trouvent sur différents systèmes de fichiers et **[!UICONTROL CSS Merging Enabled]** est activé. Des fichiers temporaires ont été créés dans le même répertoire statique que le fichier cible pour s’assurer que les deux fichiers se trouvent sur le même système de fichiers. Par conséquent, l’appel pour le renommer est atomique. [GitHub-29172](https://github.com/magento/magento2/issues/29172)

<!-- https://github.com/magento/magento2/pull/36769 -->

* Correction d&#39;une erreur potentielle lors de l&#39;appel d&#39;une fonction membre `getId()` le `int`, qui déclenchait parfois une exception lorsqu’un client était affiché dans l’interface d’administration.

<!-- https://github.com/magento/magento2/pull/34092 -->

* Les vérifications de type sont désormais appliquées pour le type de tableau dans le processeur de configuration du thème de conception. [GitHub-34440](https://github.com/magento/magento2/issues/34440)

### Inventory management

<!-- ACP2E-1883 -->

* Les produits repassent désormais automatiquement au statut En stock après une note de crédit qui inclut un retour de la quantité de produit. Auparavant, si un produit était en rupture de stock, mais qu&#39;un avoir renvoyait du stock de ce produit, les commerçants devaient modifier manuellement le statut du stock du produit.

<!-- ACP2E-2123 -->

* Amélioration des performances de l’indexeur d’inventaire en mode asynchrone en supprimant les requêtes redondantes pour réindexer les éléments sources par défaut.

<!-- AC-7023 -->

* Correction de problèmes liés à l’indexeur d’inventaire qui affectaient la précision de l’inventaire du stock de storefront des produits configurables. [GitHub-36421](https://github.com/magento/magento2/issues/36421)

<!-- ACP2E-2082 -->

* Mise à jour des articles d&#39;origine de stock via REST `V1/inventory/source-items` fonctionne désormais plus rapidement. L’appel ne déclenche plus de réindexation ou d’opération de nettoyage du cache sur les produits d’inventaire inchangés.

<!-- ACP2E-1842 -->

* REST `V1/products/<sku>` déclenche désormais une réindexation automatique des stocks lors de la mise à jour de l’état des stocks d’un produit. Auparavant, une réindexation de stock n’était pas déclenchée pour le produit mis à jour.

<!-- ACP2E-1653 -->

* Le statut du stock de produits configurables est désormais mis à jour sur le storefront comme prévu lorsque les produits enfants sont mis à jour par `V1/inventory/source-items`.

<!-- ACP2E-2114 -->

* Le `POST <store_code>/V1/inventory/source-items` L’appel REST valide désormais la payload pour les espaces blancs dans les éléments sources d’inventaire renvoyés et envoie un message d’erreur sur la validation, le cas échéant.

<!-- ACP2E-2072 -->

* Les commerçants peuvent désormais avertir les acheteurs qu’une commande est prête à être retirée lorsque **[!UICONTROL No Manage Stock]** paramètre est activé pour un produit. Auparavant, lorsque ce paramètre était activé, Commerce affichait le message d’erreur suivant : `Your order is not ready for pickup`.

<!-- ACP2E-2227 -->

* Les commerçants peuvent désormais créer un avoir pour les commandes à partir desquelles un produit simple associé à un produit configurable a été supprimé. Auparavant, les commerçants ne pouvaient pas créer l’avoir, et Commerce a lancé une `TypeError` exception.

<!-- ACP2E-2310 -->

* Le nombre de sources de grille d’administration renvoie désormais des enregistrements valides après l’application d’un filtre. Auparavant, le `getSourcesCount` La méthode renvoie toujours le nombre total de sources après l’application d’un filtre.

<!-- ACP2E-1364 -->

* La page Catégorie ne redirige plus vers le tableau de bord d’administration lorsque vous triez des produits à l’aide de l’option « Déplacer les produits en rupture de stock vers le bas ». Le problème a été résolu en plaçant l&#39;instruction de jointure SQL dans l&#39;instruction conditionnelle uniquement après s&#39;être assuré qu&#39;elle n&#39;est pas déjà incluse. Auparavant, la page était redirigée vers le tableau de bord d’administration avec le message :`Invalid security or form key. Please refresh the page`.

<!-- ACP2E-1488 -->

* `AUTO_INCREMENT` du `inventory_source_item` le tableau n’est plus augmenté à chaque `UPDATE` opération. Auparavant, chaque mise à jour augmentait la `AUTO_INCREMENT` de ce tableau, qui a finalement provoqué la `AUTO_INCREMENT` valeur à être hors plage lors de l’ajout d’un nouvel enregistrement au `inventory_source_item table`. Par conséquent, les utilisateurs administrateurs ont reçu l’erreur suivante lorsqu’ils ont essayé de créer un nouveau produit à partir de l’administrateur : `Numeric value out of range...`.

<!-- ACP2E-1378 -->

* Les utilisateurs administrateurs peuvent désormais ajouter un produit à un panier client à partir de l’administration pour une portée d’affichage de magasin particulière avec Inventory management. Auparavant, l’ID de stock n’était pas déterminé correctement et les utilisateurs administrateurs ne pouvaient pas ajouter le produit au panier.

<!-- ACP2E-1399 -->

* La synchronisation entre l&#39;inventaire et le catalogue ne repose plus sur **[!UICONTROL Synchronize with Catalog]** paramètre de configuration. Auparavant, les produits n’étaient correctement synchronisés que lorsque ce paramètre était activé.

<!-- ACP2E-1382 -->

* Adobe Commerce ne renvoie plus d’erreur après le rechargement de la page lorsqu’un acheteur déduit une quantité de produit d’une commande qui se situe dans la plage de produits disponibles lors de la sélection de la source d’expédition.

<!-- ACP2E-1259 -->

* Le statut du stock de produits configurables est désormais correctement mis à jour lorsqu’un produit configurable et ses produits enfants `Stock Availability` la valeur est mise à jour par une mise à jour du stock en masse. Auparavant, vous ne pouviez pas remettre en stock par mise à jour en masse un produit configurable et ses produits enfants.

<!-- ACP2E-2096 -->

* Le type de données pour les sources non par défaut a été mis à jour vers . `DECIMAL (12, 4)` pour prendre en charge jusqu’à huit chiffres entiers, ce qui correspond à la même limite implémentée pour le stock par défaut. Cette valeur est désormais synchronisée avec les pages Admin Ajouter et modifier des produits , qui prennent en charge la validation des entrées jusqu’à huit chiffres pour tous les types de sources d’inventaire. Auparavant, l’entrée pour la variable **[!UICONTROL Quantity]** Le champ (pour les sources non par défaut) était pris en charge jusqu’à six chiffres uniquement.

<!-- ACP2E-2054 -->

* Les origines par défaut et non par défaut affichent désormais les informations correctes pour la quantité vendable du produit lorsqu&#39;une origine non par défaut commandée auprès du storefront est traitée pour expédition. Auparavant, Adobe Commerce affichait un statut de stock incorrect pour les sources de produits.

<!-- ACP2E-1950 -->

* `\Magento\Catalog\Model\Product::getIsSalable()` renvoie désormais le statut du stock en fonction de la portée définie dans l’objet de produit (`\Magento\Catalog\Model\Product::getStoreId()`). Auparavant, `getIsSalable()` a renvoyé l’état du stock en fonction de la portée actuelle, quel que soit l’objet du produit.

### Journalisation

<!-- ACP2E-1788 -->

* Mise à jour du format date et heure dans la fonction Rapports système afin d’inclure les enregistrements des fichiers journaux dans les rapports.

<!-- ACP2E-1385 -->

* Les utilisateurs administrateurs peuvent désormais consulter les journaux des actions en bloc créées par les intégrations dans la section Journal des actions en bloc de l’administrateur.

### Login

<!-- ACP2E-1521 -->

* La réinitialisation d’un mot de passe dans un navigateur et la connexion ultérieure via un autre navigateur n’entraînent plus d’exception. [GitHub-36447](https://github.com/magento/magento2/issues/36447)

<!-- ACP2E-1332 -->

* Les clients sont désormais redirigés vers la page de connexion après l’activation d’un compte comme prévu. Auparavant, les clients étaient automatiquement connectés.

### Galerie de médias

<!-- ACP2E-2568 -->

* Les commerçants peuvent désormais charger des images portant le même nom mais avec des majuscules et des minuscules différentes dans la Galerie de médias. Auparavant, les noms de fichiers image n’étaient pas sensibles à la casse dans Page Builder et les fichiers portant des noms autres que la casse étaient remplacés dans le stockage de médias Commerce hébergé sur des systèmes de fichiers sensibles à la casse.

### Newsletter

<!-- AC-10806 -->

* Commerce vérifie désormais si la fonctionnalité d’abonnement à la newsletter est activée avant d’accepter de nouveaux abonnés à une newsletter. [GitHub-33040](https://github.com/magento/magento2/issues/33040)

### Commandes

<!-- AC-8857 -->

* Les produits déplacés du panier Admin vers la liste des articles à commander sont désormais supprimés du panier comme prévu. [GitHub-37538](https://github.com/magento/magento2/issues/37538)

<!-- ACP2E-2535 -->

* Les commerçants peuvent maintenant créer des avoirs comme prévu pour le retour partiel des commandes qui ont été payées en partie par points de récompense. Auparavant, lorsqu&#39;un commerçant créait un retour partiel, le statut de la commande était incorrectement identifié comme fermé, et la page de commande Admin n&#39;affichait pas les options d&#39;avoir.

<!-- ACP2E-2632 -->

* La rotation du journal des actions d’administration fonctionne désormais comme prévu lorsque la fréquence d’archivage du journal de rotation est définie sur des intervalles hebdomadaires ou mensuels. Auparavant, lorsque des intervalles hebdomadaires ou mensuels étaient définis, les journaux n’étaient pas pivotés.

<!-- ACP2E-2583 -->

* Commerce applique désormais le montant de remise correct aux commandes partiellement annulées. Auparavant, le montant de la remise était calculé dans le `base_discount_cancelled` La colonne n’a pas été correctement calculée lorsqu’un ordre a été modifié. La prise en charge des valeurs négatives a été ajoutée aux factures pour les commandes avec remise.

<!-- ACP2E-2585 -->

* LE RESTE `V1/orders` Le point d’entrée applique désormais les cartes-cadeaux comme prévu lors de l’importation de commandes. Auparavant, les modifications apportées aux attributs d’extension de carte cadeau dans ce point d’entrée n’étaient pas enregistrées.

<!-- ACP2E-2412 -->

* Commerce trie désormais les attributs d’adresse client personnalisés en fonction de l’ordre de tri fourni lorsque l’utilisateur administrateur a créé la commande dans l’Administration.

<!-- ACP2E-2400 -->

* La page Admin - Grille des commandes client se charge désormais comme prévu lorsqu’un commerçant lance une recherche à partir de cette page. Auparavant, lorsqu’un commerçant tentait de rechercher des commandes dans cette table, la page se figeait et Commerce affichait une `Request-URI Too Long` erreur dans la console du navigateur.

<!-- ACP2E-2294 -->

* Le statut de la commande est désormais marqué comme terminé plutôt que terminé lorsque le montant total de la commande a été remboursé avec un crédit en magasin et un mode de paiement supplémentaire. Auparavant, le statut de la commande était marqué comme terminé, car le montant remboursé était incorrectement calculé.

<!-- ACP2E-2213 -->

* Amélioration des performances du `OrderRepository::get()` en réduisant le nombre de fois où il charge une commande depuis la base de données. Auparavant, cette méthode chargeait une commande plusieurs fois. [GitHub-36636](https://github.com/magento/magento2/issues/36636)

<!-- ACP2E-1918 -->

* Les commerçants peuvent désormais générer des avoirs pour les commandes contenant certains articles dont le total est égal à zéro lorsque d&#39;autres articles de commande peuvent être remboursés. Auparavant, les commerçants ne pouvaient pas effectuer plusieurs remboursements lorsqu’un client bénéficiait d’une remise de 100 % sur certains articles de la commande.

<!-- AC-8254 -->

* Les liens entre les produits enfants et parents sont désormais affichés sur la page de commande lors de la réorganisation du produit enfant à partir de l’administrateur. [GitHub-37028](https://github.com/magento/magento2/issues/37028)

<!-- AC-1756 -->

* La section d&#39;en-tête de la page de commande contient désormais les informations attendues sur la facture, l&#39;avoir et l&#39;expédition envoyés. [GitHub-27474](https://github.com/magento/magento2/issues/27474)

<!-- AC-7632 -->

* Les avoirs pour les commandes qui ne contiennent qu&#39;un seul produit configurable sont désormais générés correctement. Auparavant, le `isLast()` fonction non renvoyée `true` comme prévu. [GitHub-36722](https://github.com/magento/magento2/issues/36722)

<!-- ACP2E-1961 -->

* Amélioration des performances du `aggregate_sales_report_bestsellers_data` traitement cron en optimisant la requête de données principale.

<!-- ACP2E-1962 -->

* Adobe Commerce ne renvoie plus d’erreur lors de la création d’un avoir avec remboursement hors ligne à un solde client lorsque l’utilisateur administrateur n’a pas l’autorisation d’accéder au site web du client. Auparavant, Adobe Commerce générait cette erreur : `More permissions are needed to view this item`et l&#39;utilisateur administrateur n&#39;a pas pu créer de remboursement de crédit de magasin.

<!-- ACP2E-1714 -->

* Le statut de la commande est désormais correct lorsqu’un remboursement partiel a été effectué pour une commande contenant des produits groupés. Auparavant, le statut de la commande était indiqué comme terminée après l’émission d’un remboursement partiel, même si la commande restante n’était pas terminée. [GitHub-37377](https://github.com/magento/magento2/issues/37377)

<!-- ACP2E-1514 -->

* Les acheteurs ne peuvent plus commander un produit à l’aide d’un prix personnalisé lorsqu’une commande est générée pour la première fois à partir de l’administrateur à l’aide du prix personnalisé unique. Auparavant, si une commande contenait un article avec des prix personnalisés, ce prix personnalisé était appliqué aux autres commandes passées avec la fonctionnalité de réorganisation.

<!-- ACP2E-1421 -->

* Les acheteurs ne peuvent plus enregistrer des statuts de commande incorrects sur la page de commande. Le statut de la commande passe de Terminé à Traitement lorsqu&#39;un article est expédié. Auparavant, Adobe Commerce ne vérifiait pas le statut de la commande avant de l’enregistrer une fois qu’un acheteur avait saisi un commentaire. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1387 -->

* Adobe Commerce ne renvoie plus d’erreur sur la page de retour de commande du storefront lorsque le produit configurable renvoyé a été supprimé. Auparavant, Adobe Commerce consignait cette erreur : `report.CRITICAL: Error: Call to a member function getShipmentType() on null in magento2ee/app/code/Magento/Rma/view/frontend/templates/return/create.phtml:52`.

<!-- ACP2E-1367 -->

* La grille des commandes client est désormais synchronisée de manière asynchrone avec toutes les commandes comme prévu. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1197 -->

* La fonctionnalité de filtrage par date d’achat de la section Commandes client de la page Commandes fonctionne désormais comme prévu. Auparavant, une erreur JavaScript se produisait lorsque la logique de conversion de fuseau horaire générait une erreur lorsque le même fuseau horaire était fourni à la méthode .

<!-- ACP2E-1294 -->

* Le tableau de bord Adobe Commerce affiche désormais les statistiques correctes des commandes au premier chargement. Auparavant, le tableau de bord affichait des informations de commande incorrectes, mais affichait les informations correctes une fois la période mise à jour.

<!-- ACP2E-1762 -->

* Les utilisateurs administrateurs sont désormais redirigés comme prévu vers la page de commande après avoir sélectionné une vue de magasin lors de la création d’une commande auprès de l’administrateur.

<!-- ACP2E-1418 -->

* Le `GET V1/orders/<OrderID>` Le point d’entrée renvoie désormais des informations sur les produits configurables et simples dans la commande, quel que soit l’état de stock des produits simples. Les utilisateurs administrateurs peuvent passer des commandes maintenant uniquement si les articles sélectionnés (produits) sont en stock ou vendables. Auparavant, cette API renvoyait uniquement des informations sur les produits qui étaient en stock.

<!-- AC-7901 -->

* La page avoir ne se bloque plus lorsque la livraison gratuite est activée lorsque le prix d&#39;expédition inclut la taxe et que les calculs de taxe sont appliqués après les remises. Auparavant, Adobe Commerce a lancé une `Division by zero` exception. [GitHub-36800](https://github.com/magento/magento2/issues/36800)

<!-- AC-1342 -->

* Utilisation de `rest/V1/orders/{id}/comments` Le point d’entrée pour publier un commentaire sur une commande sans fournir de statut de commande n’affecte plus l’affichage de la commande. Auparavant, le statut de la commande était consigné comme NUL dans le `sales_order` et `sales_order_grid` et que la page Mes commandes ou la grille de commandes de l’administrateur n’affichaient pas la commande. [GitHub-34180](https://github.com/magento/magento2/issues/34180)

<!-- ACP2E-1597 -->

* Les factures, les livraisons et les avoirs peuvent désormais être replacés de l&#39;archive avec leurs commandes associées lorsque les ID qu&#39;ils incluent diffèrent des ID de commande. Auparavant, si une commande était déplacée vers l&#39;archive, puis restaurée, les enregistrements de facture, d&#39;expédition et d&#39;avoir étaient absents de cette commande si les numéros d&#39;identification ne correspondaient pas. [GitHub-36847](https://github.com/magento/magento2/issues/36847)

### Page Builder

<!-- AC-8777 -->

* Les images conservent désormais les proportions correctes lorsqu’elles sont redimensionnées dans Page Builder. [GitHub-37493](https://github.com/magento/magento2/issues/37493)

<!-- AC-10919 -->

* Page Builder affiche désormais les messages d’erreur nécessaires lorsque vous essayez de charger une image dont la taille est supérieure à la taille de fichier maximale spécifiée. Auparavant, Commerce affichait un message d’alerte contextuel pour les fichiers image chargés dont la taille était inférieure au maximum spécifié.

<!-- ACP2E-1992 -->

* Les curseurs de produit de page CMS incluent désormais les produits parents de tous les produits enfants qui ont été sélectionnés pour inclusion dans le curseur. Auparavant, les produits parents étaient exclus du curseur.

<!-- ACP2E-2115 -->

* Le contenu converti par HTML s’affiche désormais dans les modèles d’e-mail comme prévu lorsque `Magento_AsyncConfig` Le module est désactivé. Auparavant, les modèles d’e-mail contenaient uniquement du HTML brut.

<!-- AC-9128 -->

* Les performances des opérations d’enregistrement de Page Builder dans le navigateur Chrome ont été améliorées.

<!-- ACP2E-1954 -->

* Vous pouvez désormais utiliser l’option Page Builder dans Admin > **[!UICONTROL Content]** > **[!UICONTROL Pages]** pour insérer du texte copié dans tous les styles à l’aide du `text` élément . Auparavant, Page Builder affichait uniquement du texte brut et n’enregistrait pas les styles.

<!-- ACP2E-1646 -->

* Les erreurs CORS n’apparaissent plus lors de la modification du contenu du produit avec Page Builder lorsque l’utilisateur administrateur dispose d’une liste de contrôle d’accès spécifique. L’utilisateur administrateur peut désormais enregistrer le produit. Auparavant, Page Builder n’enregistrait pas le produit et le processus d’enregistrement était bloqué.

<!-- ACP2E-1852 -->

* Des informations précises sur la taille du fichier sont désormais incluses dans l’aperçu d’image pour les images chargées dans Page Builder.

<!-- ACP2E-2016 -->

* Les éléments de page Page Builder s’affichent désormais à une vitesse acceptable dans le navigateur Chrome (v112). Auparavant, l’enregistrement du contenu avec Page Builder s’exécutant dans le navigateur Chrome était lent, et Commerce a consigné cette erreur dans la console du navigateur : `[ERROR] Page Builder was rendering for 5 seconds without releasing locks`.

<!-- ACP2E-1654 -->

* La lecture automatique de l’élément vidéo Page Builder fonctionne désormais comme prévu sur les navigateurs Safari mobiles sur iOS lorsque l’élément est directement lié à un fichier vidéo distant. Auparavant, aucune image d’aperçu ne s’affichait.

<!-- ACP2E-1974 -->

* Page Builder fonctionne désormais comme prévu dans le navigateur Chrome. Auparavant, les modifications de contenu apportées dans ce navigateur n’étaient pas toujours enregistrées.

<!-- ACP2E-2086 -->

* Le chargement d’une page d’édition de produit Admin sur un produit ne génère plus de `Uncaught TypeError` Erreur JavaScript.

<!-- ACP2E-1886 -->

* Les images chargées par le biais de l’éditeur Page Builder sont désormais balisées selon leur utilisation sur . **[!UICONTROL Content]** > **[!UICONTROL Media Gallery]**. Auparavant, ces images étaient marquées comme **non utilisé nulle part** dans la Galerie de médias.

<!-- ACP2E-1564 -->

* L’ajout d’un produit à un panier à partir du carrousel Page Builder ne duplique plus la quantité d’articles des pages avec deux widgets différents affichant les mêmes produits.

<!-- ACP2E-1542 -->

* Page Builder n’ajoute plus le `tabindex` Attribut de HTML aux balises de lien hypertexte `a` lorsque vous modifiez un lien hypertexte, enregistrez un modèle.

<!-- ACP2E-1444 -->

* Le widget de produits et l’aperçu de Page Builder gèrent désormais correctement les caractères spéciaux de HTML. Auparavant, le widget de produit n’affichait pas correctement les SKU qui contenaient le `&` caractère.

<!-- ACP2E-1441 -->

* Le contenu de l’élément de texte Page Builder est désormais mis à jour comme prévu lorsque vous sélectionnez et mettez à jour le bloc de contenu complet en mode Aperçu.

<!-- ACP2E-1362 -->

* La copie et le collage de texte d’un éditeur de texte Page Builder vers un autre fonctionnent désormais comme prévu. Auparavant, la page dans laquelle vous tentiez de coller du texte ne pouvait pas être enregistrée et Adobe Commerce affichait cette erreur de console : `[ERROR] Page Builder was rendering for 5 seconds without releasing locks.`.

<!-- ACP2E-1568 -->

* Page Builder `column-block` Le type de contenu créé dans les anciennes versions de Page Builder s’affiche désormais correctement.

<!-- ACP2E-1234 -->

* Le filtrage de la description des métadonnées du produit lors de la création du produit à partir de l’administration a été amélioré. Auparavant, si Page Builder était activé, la description des métadonnées du produit était générée en fonction de la valeur par défaut` {{name}} {{description}}` masque. Le masque de méta-description de produit par défaut est désormais composé des éléments suivants : `{{name}}`. [GitHub-36107](https://github.com/magento/magento2/issues/36107)

<!-- ACP2E-1758 -->

* L’ajout d’un bloc dynamique sans contenu ne déclenche plus d’erreur.

### Paiement

<!-- ACP2E-2533 -->

* Commerce gère désormais correctement les erreurs 502 provenant de PayPal en empêchant la création de commandes lorsque cette erreur se produit. Auparavant, les commandes étaient toujours créées malgré une erreur 502 de PayPal, ce qui entraînait des incohérences entre les enregistrements Commerce et ceux de PayPal.

<!-- AC-9142 -->

* Les transactions de paiement PayPal Express incluent désormais les SKU de produits enfants et les titres de produits complets. Le `Magento/Paypal/Model/Cart.php` Le fichier collecte désormais les SKU de produit enfants avec leur titre de produit parent afin d’identifier le titre du produit avec le SKU enfant. [GitHub-36808](https://github.com/magento/magento2/issues/36808)

<!-- ACP2E-1964 -->

* Le **[!UICONTROL Card Security Code Does Not Match]** Le paramètre de configuration est maintenant traité comme prévu pendant le processus de paiement de Payflow Pro. Auparavant, ce processus d’évaluation n’était jamais terminé, ce qui bloquait le passage en caisse.

<!-- ACP2E-1215 -->

* L’option Mode de paiement Vault n’apparaît plus dans le workflow de passage en caisse administrateur lorsque l’acheteur ne dispose pas d’un jeton de coffre. [GitHub-36273](https://github.com/magento/magento2/issues/36273)

<!-- ACP2E-1303 -->

* Le **[!UICONTROL Venmo]** Le bouton peut maintenant être masqué lorsque les boutons PayPal sont activés. Auparavant, le **[!UICONTROL Venmo]** le bouton n’a pas pu être supprimé du panier, du mini panier, des détails du produit ou des pages de passage en caisse.

<!-- BUNDLE-3313 -->

* Les acheteurs peuvent désormais sélectionner un mode d’expédition lors de l’application du code de coupon lors du passage en caisse. Auparavant, dans ces conditions, Commerce générait une erreur et affectait des frais d’expédition forfaitaires à la commande.

<!-- BUNDLE-3310 -->

* Les problèmes liés au traitement en storefront des méthodes de paiement de crédit PayPal et PayPal ont été résolus.

<!-- BUNDLE-3273 -->

* Correction de problèmes liés aux URL de secours pour les commandes payées avec par les paiements Idéal lorsque le paiement local est activé.

<!-- BUNDLE-3253 -->

* Les acheteurs ne peuvent plus créer de commande PayPal sans ajouter de nom.

#### Braintree

<!-- AC-2901 -->

* Les informations de paiement par Braintree sont désormais enregistrées par magasin. Les acheteurs ne voient désormais que les informations de carte qui ont été enregistrées dans le magasin dans lequel ils font leurs achats. Auparavant, les acheteurs pouvaient voir les informations de carte stockées de tous les magasins lors du passage en caisse. [GitHub-34253](https://github.com/magento/magento2/issues/34253)

<!-- BUNDLE-3304 -->

* Les acheteurs peuvent désormais vérifier une commande envoyée à plusieurs adresses à l’aide d’un mode de paiement par Braintree lorsque le coffre pour les paiements par carte est désactivé. [GitHub-37615](https://github.com/magento/magento2/issues/37615)

<!-- BUNDLE-3244 -->

* Les commandes partiellement facturées sont désormais capturées comme prévu dans le compte correct dans les déploiements où les commerçants ont deux ID de compte marchand différents pour la même devise dans leur compte de Braintree.

<!-- BUNDLE-3250 -->

* Adobe Commerce ne renvoie plus d’erreur lors de la création d’une seconde facture partielle pour une commande payée par Braintree lorsque **[!UICONTROL Enable Vault for Card Payments]** est activé. Auparavant, lorsqu’un commerçant tentait de créer une seconde facture, Adobe Commerce générait cette erreur : `Your payment could not be taken. Please try again or use a different payment method. Payment method token is invalid`.

<!-- ACP2E-1229 -->

* L’option Mode de paiement du coffre de Braintree n’est plus automatiquement désélectionnée dans le workflow de passage en caisse lorsqu’un acheteur met à jour son adresse de facturation. Auparavant, le mode de paiement était désélectionné lorsque l’acheteur désélectionnait le **[!UICONTROL My billing and shipping address are the same]** Bouton.

<!-- BUNDLE-3248 -->

* Correction de problèmes liés à l&#39;extraction avec PayPal par Braintree après la mise à niveau à partir d&#39;Adobe Commerce 2.4.5-p2. [GitHub-37242](https://github.com/magento/magento2/issues/37242)

<!-- BUNDLE-3257 -->

* Les numéros de téléphone sont désormais rendus comme prévu avec les adresses dans les champs d’adresse d’expédition contextuelle modale Google Pay . Auparavant, les numéros de téléphone étaient manquants.

<!-- BUNDLE-3228 -->

* Les commandes sont désormais passées avec Braintree lorsque la réponse du Braintree inclut une valeur vide pour `threeDSecureInfo/eciFlag`. Auparavant, une erreur PHP se produisait lors du passage en caisse lorsque cette valeur était vide.

<!-- BUNDLE-3243 -->

* Adobe Commerce ne renvoie plus d’erreur lorsqu’un acheteur applique un coupon sur la page de révision de la commande lors du passage en caisse avec Google Pay à partir du mini panier. Auparavant, les acheteurs étaient redirigés vers une page 404.

<!-- BUNDLE-3245 -->

* Les acheteurs peuvent désormais passer en caisse à l’aide de Braintree Payments et d’Adobe Commerce 2.4.6 avec ReCAPTCHA v2 ou v3 invisible. [GitHub-37241](https://github.com/magento/magento2/issues/37241)

<!-- BUNDLE-3241 -->

* Les acheteurs ne peuvent plus cliquer sur le **[!UICONTROL PayPal]** pour acheter un produit configurable sans sélectionner au préalable les options requises. Auparavant, les acheteurs pouvaient cliquer sur le lien **[!UICONTROL PayPal]** et ont ensuite été redirigés vers la page produit avec une erreur :

<!-- BUNDLE-3148 -->

* Le **[!UICONTROL PayPal]** Le bouton s’affiche désormais comme prévu sur les pages panier et mini panier . Auparavant, ce bouton n’était pas affiché sur la page du panier et était dupliqué sur la page du mini panier.

### Performances

<!-- AC-9753 -->

* Plusieurs clics dans le **Ventes** > **Commandes** le menu déroulant action en masse de la page ne génère plus de requêtes de POST multiples.  [GitHub-37997](https://github.com/magento/magento2/issues/37997)

<!-- AC-10944 -->

* Uniquement `200` ou `404` Les réponses sont mises en cache lorsqu’un acheteur accède à une page qui déclenche une redirection 301, sauf si l’en-tête Contrôle du cache de la page contient . `private `. Auparavant, un état HTTP 200 avec `private` dans l’en-tête Cache-Control a été mis en cache et un statut HTTP 301 a été mis en cache sauf s’il contenait `private` dans son en-tête Cache-Control. [GitHub-36492](https://github.com/magento/magento2/issues/36492)

<!-- AC-9302 -->

* A supprimé les inutilisés `Magento\Catalog\Controller\Adminhtml\Product\Initialization\Helper` de `Magento\Catalog\Model\ProductRepository`. Auparavant, `ProductRepository` a chargé cet helper , qui est un `Adminhtml` contrôleur. [GitHub-37864](https://github.com/magento/magento2/issues/37864)

<!-- AC-9127 -->

* Amélioration des performances de la vitesse de chargement des pages lorsque de nombreuses options sont ajoutées aux produits groupés. [GitHub-29409](https://github.com/magento/magento2/issues/29409)

<!-- ACP2E-2069 -->

* Processus d’affectation de produits à des catégories à partir du **[!UICONTROL Products in Category]** a été optimisé. Le **[!UICONTROL Assign]** et **[!UICONTROL Remove]** boutons dans **[!UICONTROL Add Product by SKU]** Les onglets sont maintenant désactivés jusqu’à ce que les produits soient entièrement chargés dans la grille. Auparavant, les utilisateurs administrateurs ne pouvaient pas ajouter de produits par SKU dans les catalogues contenant des millions de produits enregistrés.

<!-- ACP2E-2098 -->

* Les performances du `addProductToCart` La mutation lors de l’exécution avec de nombreux attributs de produit personnalisés a été améliorée. Auparavant, lorsque cette mutation était exécutée avec de nombreux attributs de produit ( environ 1 000), Commerce tentait de charger tous les attributs de produit.

<!-- ACP2E-1965 -->

* Les problèmes de performances lors du chargement des attributs de produit utilisés par les règles de panier ont été résolus. Seuls les attributs de produit pour les règles de panier actives sont désormais chargés.

<!-- ACP2E-1864 -->

* Le `bin/magento setup:perf:generate-fixtures setup/performance-toolkit/profiles/ee/small.xml` La commande s’exécute désormais correctement lorsqu’elle est exécutée plusieurs fois. Auparavant, il générait cette erreur lorsqu’il était exécuté plusieurs fois : `Coupon with the same code already exists`.

### Promotion

<!-- ACP2E-1290 -->

* Les effets de la **[!UICONTROL Fixed amount discount for whole cart]** règle de prix, lorsqu’elle est appliquée avec **[!UICONTROL Apply to shipping amount]** La règle est désormais répartie proportionnellement, comme prévu, entre les produits et les montants d’expédition. Auparavant, les calculs de remise étaient incorrects.

<!-- ACP2E-1300 -->

* Le **[!UICONTROL Discard Subsequent Rules]** Le paramètre est maintenant appliqué comme prévu. Lorsque ce paramètre est activé, les autres règles de priorité faible ne peuvent être appliquées qu’à un autre produit. [GitHub-35707](https://github.com/magento/magento2/issues/35707)

### reCAPTCHA

<!-- ACP2E-2509 -->

* reCAPTCHA v3 invisible fonctionne désormais comme prévu pour la page de passage en caisse **[!UICONTROL Sign in]** Bouton. Auparavant, les acheteurs ne pouvaient pas se connecter et Commerce générait des erreurs JavaScript.

<!-- ACP2E-1539 -->

* Le reCAPTCHA Google du workflow de passage en caisse fonctionne désormais comme prévu pour les chèques, les mandats et les modes de paiement personnalisés.

<!-- ACP2E-1311 -->

* Les formulaires Adobe Commerce ne peuvent plus être envoyés avant le chargement de la case à cocher Google ReCAPTCHA .

<!-- ACP2E-1338 -->

* Le widget reCAPTCHA précède désormais le **[!UICONTROL Place Order]** sur la page de paiement. Auparavant, le widget était affiché en haut de la page.

### Rapports

<!-- ACP2E-1541 -->

* Le rapport Commandes (**[!UICONTROL REPORTS]** > **[!UICONTROL Sales]** > **[!UICONTROL Orders]**) inclut désormais des valeurs de commande correctes lorsque les commandes sont générées par des magasins qui utilisent des devises autres que celles par défaut. Auparavant, ce rapport incluait des valeurs incorrectes. [GitHub-36742](https://github.com/magento/magento2/issues/36742)

<!-- ACP2E-1477 -->

* Les informations trompeuses figurant dans le formulaire de rapport de commande client ont été révisées pour plus de clarté.

<!-- ACP2E-1435 -->

* Les utilisateurs administrateurs peuvent désormais rechercher des enregistrements avec des e-mails contenant `+` (plus) signe à partir de la page Rapport sur les paniers abandonnés. [GitHub-36560](https://github.com/magento/magento2/issues/36560)

<!-- AC-7394 -->

* Les noms des transactions GraphQL s’affichent désormais correctement une fois que New Relic est désactivé par Commerce Admin. [GitHub-36112](https://github.com/magento/magento2/issues/36112)

### Reviews

<!-- ACP2E-1998 -->

* Les acheteurs ne peuvent plus envoyer rapidement des révisions de produit en double lorsque le reCAPTCHA v3 invisible est activé.

### Récompenses

<!-- ACP2E-2099 -->

* Les e-mails d’expiration de points de récompense ne sont plus envoyés après l’expiration des points. Le `magento_reward_balance_warning_notification` et `magento_reward_expire_points` les tâches cron ont été restructurées pour accroître la flexibilité et la capacité d&#39;envoi des emails. Auparavant, les commerçants ne pouvaient pas envoyer beaucoup d’e-mails générés par ces tâches cron en peu de temps. Cela aurait pu entraîner des retards dans la diffusion des notifications urgentes.

<!-- ACP2E-2283 -->

* Les points de récompense expirés sont désormais soustraits du solde actuel des points de récompense d’un acheteur comme prévu.

<!-- ACP2E-1473 -->

* La notification par e-mail de mise à jour du solde des points de récompense prend désormais en compte le contexte actuel du magasin. Auparavant, le solde des points de récompense mettait à jour les paramètres de configuration des e-mails utilisés pour le magasin par défaut.

<!-- ACP2E-1329 -->

* Les points de récompense peuvent désormais être remboursés après la création d&#39;un avoir. Auparavant, les commerçants ne pouvaient pas rembourser les points de récompense après la création d&#39;un avoir, et le statut de la commande restait `Completed`, pas `Closed`.

### RMA

<!-- ACP2E-2246 -->

* LE RESTE `POST /V1/returns` La demande crée désormais une RAM par produit. Auparavant, cette requête pouvait contourner la validation et renvoyer plusieurs RMA par produit.

<!-- ACP2E-2450 -->

* Les attributs RMA sont désormais automatiquement ajoutés au formulaire EAV par défaut lorsque le **[!UICONTROL Show on Storefront]** Attribut RMA défini sur **non**. Auparavant, la fenêtre contextuelle Détails de l’élément RMA était vide lorsqu’un attribut de retour personnalisé était créé et la **[!UICONTROL Show on Storefront]** Attribut RMA défini sur **non**.

<!-- ACP2E-2211 -->

* La valeur de **[!UICONTROL Enable RMA]** l’attribut correspond désormais à la valeur spécifiée dans la configuration lorsque **[!UICONTROL Use Config]** la case à cocher de la page de modification du produit est activée.

<!-- ACP2E-1230 -->

* Le **[!UICONTROL Enable RMA]** L’attribut au niveau du produit individuel respecte désormais la configuration des paramètres RMA du magasin. Auparavant, ce paramètre était désactivé par défaut lorsque vous ajoutiez un produit, quels que soient les paramètres de configuration du magasin.

### Rechercher {#search-heading}

<!-- ACP2E-2272 -->

* Les suggestions de recherche de saisie automatique sur le mini front de recherche de l’en-tête fonctionnent désormais comme prévu. Auparavant, la saisie automatique ne remplissait pas ce champ lorsque cette fonctionnalité était activée. [GitHub-37557](https://github.com/magento/magento2/issues/37557)

<!-- ACP2E-2101 -->

* Les performances des requêtes effectuées à partir de la barre de recherche d’administration ont été améliorées par l’ajout d’un indexeur. Auparavant, plus le paramètre était grand `search_query` , plus la requête a mis de temps à se terminer.

<!-- ACP2E-2279 -->

* Le tri alphabétique des produits par nom fonctionne désormais correctement pour les noms contenant des caractères turcs.

<!-- ACP2E-1854 -->

* Le **[!UICONTROL Use in Search Results Layered Navigation]** la propriété d’attribut de produit s’affiche désormais uniquement lorsque **[!UICONTROL Use in Search]** paramètre est défini sur **[!UICONTROL Yes]**.

<!-- ACP2E-1870 -->

* Le prix de la recherche avancée et les filtres SKU fonctionnent désormais correctement lorsqu’ils sont appliqués ensemble dans une recherche avancée. [GitHub-37581](https://github.com/magento/magento2/issues/37581)

<!-- ACP2E-1787 -->

* Les champs de recherche vides ne sont plus recherchés. Cela permet de réduire la taille du `search_query` tableau. Auparavant, les requêtes incorrectes ou les requêtes sur des champs de recherche vides renvoyaient un jeu de données volumineux, ce qui augmentait la taille du . `search_query` et ont entraîné des problèmes avec `/tmp`.

<!-- ACP2E-1916 -->

* Les filtres Storefront fonctionnent désormais comme prévu lors du tri des entrées de catalogue avec des attributs personnalisés de liste déroulante.

<!-- ACP2E-1499 -->

* Les résultats de recherche affichent désormais les résultats pertinents en fonction du poids de recherche des attributs comme prévu.

<!-- AC-7505 -->

* Texte informatif sous le `Search Weight` de l’attribut `Storefront Properties` champ de saisie sur Admin **[!UICONTROL Stores]** > **[!UICONTROL Attributes]** > **[!UICONTROL Product]** décrit maintenant les valeurs possibles. [GitHub-36646](https://github.com/magento/magento2/issues/36675)

### Expédition

<!-- ACP2E-2515 -->

* Les règles de prix de panier fonctionnent désormais comme prévu lorsqu’un produit groupé est ajouté au panier lorsque les attributs de prix dynamiques sont désactivés. La livraison gratuite et le taux de table correct sont appliqués, que l’attribut dynamique soit activé ou désactivé. Auparavant, la livraison gratuite n’était pas appliquée comme prévu.

<!-- AC-9729 -->

* Commerce passe désormais à une nouvelle page d’expédition comme prévu après la création d’une expédition partielle pour une commande. Auparavant, après avoir créé une expédition partielle, Commerce ne créait pas de page d’expédition complète pour les produits restants de la commande. [GitHub-38063](https://github.com/magento/magento2/issues/38063)

<!-- AC-8795 -->

* Le montant total pour l&#39;expédition d&#39;une commande vers plusieurs adresses est désormais correctement calculé. Auparavant, lorsqu’un devis contenait plusieurs adresses de livraison, le collecteur total mettait à jour le montant de livraison pour l’adresse indiquée dans `$quote->getShippingAddress()` au lieu de le passer `$shippingAssignment` comme prévu. [GitHub-37283](https://github.com/magento/magento2/issues/37283)

<!-- ACP2E-2459 -->

* Commerce ne renvoie plus d’exception lors du passage en caisse avec plusieurs adresses d’expédition lorsque l’utilisateur administrateur a utilisé la fonctionnalité de connexion en tant que client.

<!-- ACP2E-2258 -->

* Les produits sont désormais correctement répertoriés dans la grille Produits de la page Créer des packages lorsque vous ajoutez des produits à un package après la création de l’étiquette d’expédition.

<!-- ACP2E-2044 -->

* Le `cart` la requête renvoie désormais les remises sur les livraisons discrètes sous la forme de remises sur les livraisons distinctes avec des étiquettes de remise uniques. Le nouveau `applied_to` la propriété de remise prend en charge la différenciation entre les remises appliquées à un article du panier. Auparavant, toutes les remises d’expédition étaient combinées en un seul code en dur **[!UICONTROL Shipping Discount]** valeur.

<!-- ACP2E-1826 -->

* Lorsqu’un utilisateur administrateur crée une nouvelle commande, les adresses de facturation et de livraison de la commande initiale renseignent automatiquement les champs pertinents lorsque l’utilisateur administrateur clique sur la commande **[!UICONTROL Reorder]** bouton (Admin **[!UICONTROL Sales]** > **[!UICONTROL Orders]** > **[!UICONTROL View]** ). Si les mêmes adresses sont enregistrées dans le carnet d&#39;adresses de l&#39;acheteur, la commande de nouveau contiendra toujours une version mise à jour de ces adresses. Auparavant, le champ Adresse d’expédition était prérempli avec les données mises à jour, mais pas le champ Adresse de facturation.

<!-- AC-7003 -->

* Le **[!UICONTROL Shipping Policy]** La zone de texte est désormais visible dans la portée d’affichage Admin Store lorsque **[!UICONTROL Apply custom Shipping Policy]** est activé et une politique d’expédition personnalisée est disponible. [GitHub-36425](https://github.com/magento/magento2/issues/36425)

<!-- AC-7550 -->

* Le `cart` la requête renvoie désormais une valeur `selected_shipping_method` valeur correspondant à l’une des `available_shipping_methods` codes de porteuse et de méthode. Auparavant, lorsque l&#39;un des modes d&#39;expédition sélectionnés contenait un trait de soulignement, ces codes transporteur/méthode ne correspondaient pas. [GitHub-36606](https://github.com/magento/magento2/issues/36606)

<!-- AC-2556 -->

* Le `setShippingAddressesOnCart` la mutation ne renvoie plus d’erreur lorsque la deuxième valeur du tableau de rue est nulle. Auparavant, cette exception était générée : `The address failed to save. Verify the address and try again`. [GitHub-35160](https://github.com/magento/magento2/issues/35160)

### Plan du site

<!-- AC-2465 -->

* Le plan de site XML fonctionne désormais comme prévu dans un déploiement à plusieurs étages. Auparavant, les plans de site ne contenaient pas les pages par défaut attribuées pour chaque magasin. [GitHub-35001](https://github.com/magento/magento2/issues/35001)

<!-- AC-2267 -->

* Les commerçants peuvent désormais créer et enregistrer un produit sur leur site web `id != 1` et le mode magasin unique est activé. Auparavant, l’action d’enregistrement échouait avec le message suivant : `SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails`. [GitHub-35009](https://github.com/magento/magento2/issues/35009)

### Évaluation

<!-- ACP2E-2665 -->

* Les mises à jour intermédiaires des règles de vente ne sont plus dupliquées dans le tableau de bord intermédiaire.

<!-- ACP2E-2173 -->

* Les produits groupés sont désormais correctement mis à jour si un acheteur les ajoute à son panier lorsqu’une mise à jour de planification est en cours. Auparavant, si un produit groupé avec des options était ajouté au panier lorsqu’une tâche de planification était en cours, Commerce générait l’exception suivante : `Some of the products below do not have all the required options. Please select all required options`.

<!-- ACP2E-2252 -->

* Les mises à jour de planification conservent désormais les prix corrects pour les options de bundle. Auparavant, ces prix étaient remplacés par zéro pour des vues de site web ou de magasin spécifiques.

<!-- ACP2E-2150 -->

* La mise à jour d&#39;une mise à jour planifiée ne supprime plus la version précédente de l&#39;élément échelonné si aucune date de fin n&#39;est spécifiée. Auparavant, lorsqu’un élément intermédiaire était mis à jour, la version restaurée de l’élément était supprimée si aucune date de fin n’était spécifiée. Commerce n’a pas généré d’erreur ni averti les utilisateurs administrateurs avant la suppression.

<!-- ACP2E-1923 -->

* Les valeurs des libellés d’affichage des magasins ne sont plus effacées après une mise à jour planifiée des règles de prix de panier. Auparavant, ces libellés étaient effacés même s’ils n’étaient pas spécifiés dans la mise à jour.

<!-- ACP2E-1803 -->

* Les aperçus d’évaluation du contenu fonctionnent désormais correctement pour les pages liées. Auparavant, vous ne pouviez pas accéder aux pages liées dans l’aperçu de l’évaluation, mais étiez redirigé incorrectement vers les pages du storefront.

<!-- ACP2E-1876 -->

* La modification d’une mise à jour d’évaluation n’entraîne plus la suppression des mises à jour planifiées affectées à une date ultérieure.

<!-- ACP2E-1501 -->

* Les erreurs JavaScript ne se produisent plus lorsque vous ajoutez ou modifiez des mises à jour planifiées pour les catégories lorsque les Expériences de contenu Google Analytics sont activées.

<!-- ACP2E-1344 -->

* Les commerçants peuvent désormais enregistrer une mise à jour de planning existante pour une catégorie après l’avoir consultée ou modifiée. Auparavant, Adobe Commerce générait une erreur dans `system.log`.

<!-- ACP2E-1596 -->

* Les liens téléchargeables sont désormais conservés comme prévu lorsqu’une mise à jour planifiée est appliquée alors que les produits précédemment ajoutés se trouvent dans le panier. Auparavant, les liens téléchargeables disparaissaient de la page Mon compte (Mes produits téléchargeables) du client et de la page d&#39;affichage des commandes de l&#39;administrateur.

<!-- ACP2E-1458 -->

* Les produits sont désormais visibles sur le storefront comme prévu après l’application d’une mise à jour d’évaluation qui active le produit. Auparavant, le produit était activé dans l’administration, mais n’était pas visible dans la catégorie storefront lorsque le mode indexeur de l’inventaire du catalogue était défini sur Mise à jour selon le calendrier. Une réindexation complète a résolu le problème.

<!-- ACP2E-1647 -->

* Le `staging.synchronize_entity_period` file d’attente des clients dans `magento_bulk` le tableau n’augmente plus lorsqu’il n’y a aucune mise à jour intermédiaire à traiter. Auparavant, lorsque `cron` a été configuré pour s’exécuter toutes les minutes, un nouvel enregistrement associé au `staging.synchronize_entity_period` le consommateur était ajouté à ce tableau toutes les minutes.

<!-- ACP2E-1415 -->

* Adobe Commerce ne renvoie plus d’erreur SQL lorsque vous créez une modification de planification pour un produit lors de l’enregistrement d’un autre produit. Auparavant, Adobe Commerce affichait cette erreur : `The product with the SKU "%1" couldn't be added to the current update`.

### Règles de Target

<!-- ACP2E-1438 -->

* Les règles Target fonctionnent désormais correctement avec différentes vues de magasin. Auparavant, des problèmes liés au cache des règles de produits associés empêchaient l’affichage des produits recommandés dans les déploiements multi-magasin.

### Taxe

<!-- ACP2E-2651 -->

* Les factures affichent désormais le sous-total correct lorsque les taxes sont configurées et que FPT est activé.

<!-- ACP2E-2245 -->

* Commerce affiche désormais la valeur correcte pour le **[!UICONTROL Regular Price]** valeur lorsqu’une option personnalisée est sélectionnée pour un produit qui comporte un **[!UICONTROL Special Price]** valeur lorsque **[!UICONTROL Price Display Settings]** est défini sur inclure la taxe.

<!-- ACP2E-2303 -->

* La taxe est désormais incluse comme prévu dans le prix d’expédition du workflow de passage en caisse, tel que spécifié par les paramètres de configuration.

<!-- AC-9758 -->

* Le `cart` requête `applied_taxes` la valeur de réponse inclut désormais toutes les règles fiscales individuelles comme prévu. Auparavant, elle renvoyait la valeur fiscale totale lorsque plusieurs règles fiscales étaient configurées.

<!-- ACP2E-2247 -->

* Icône Réduire/Développer pour le **[!UICONTROL Additional Settings]** lors de la création de la règle de taxe, fonctionne désormais comme prévu. Auparavant, seule l’icône Développer fonctionnait. [GitHub-37922](https://github.com/magento/magento2/issues/37922)

<!-- ACP2E-1527 -->

* Vous pouvez désormais modifier la valeur du pays et de la région du taux de taxe à partir de la page de modification de la règle de taxe comme prévu. Auparavant, les modifications apportées à partir de cette page n’étaient pas enregistrées.

<!-- ACP2E-1143 -->

* Le montant de taxe dans la zone d’estimation du panier est maintenant actualisé comme prévu lorsque le mode d’expédition est mis à jour. Auparavant, le taux de taxe n’était pas mis à jour après le changement de pays d’un acheteur lors du passage en caisse.

<!-- AC-8227 -->

* Le `tax class` La valeur pour les produits simples nouvellement créés est désormais définie sur la valeur du produit parent lors de la création de nouvelles variantes d’un produit configurable existant dans la portée Vue du magasin. Auparavant, cette valeur était définie sur aucune. En conséquence, aucune taxe n&#39;a été ajoutée à ces produits dans le panier et les clients ont été sous-facturés. [GitHub-37180](https://github.com/magento/magento2/issues/37180)

### Test

<!-- ACP2E-2501 -->

* Amélioration du `AdminCreateOrderWithVirtualProductFromDefaultSourceWithBackorders` test pour éliminer les échecs causés par l’achèvement prématuré du champ e-mail.

<!-- AC-10863 -->

* `StorefrontVerifyProductAfterPartialReindexOnSeveralWebsitesTest` a été restructuré pour améliorer la fiabilité. [GitHub-38359](https://github.com/magento/magento2/issues/38359)

<!-- ACP2E-2501 -->

* Correction de `AdminSimpleProductwithTextandVisualSwatch` testez-les en introduisant une étape supplémentaire qui définit explicitement les attributs à utiliser dans la recherche.

<!-- AC-9194 -->

* Erreur de frappe corrigée dans le `SortbyTest` test unitaire. [GitHub-37792](https://github.com/magento/magento2/issues/37792)

<!-- AC-9035 -->

* Suppression des références à des classes inexistantes dans les tests unitaires. [GitHub-37636](https://github.com/magento/magento2/issues/37636)

<!-- ACP2E-2604 -->

* Amélioration du `AdminCreateOrderWithVirtualProductFromDefaultSourceWithBackorders` test pour éliminer les échecs causés par l’achèvement prématuré du champ e-mail.

<!-- ACP2E-2202 -->

* Refactorisé `Magento\GraphQl\Catalog\ProductSearchTest::testFilterProductsBySingleCategoryId` test pour gérer l’ordre aléatoire des catégories dans `products` réponses aux requêtes.

<!-- AC-7098 -->

* Problèmes de performances des baies volumineuses dans `TableNameSniff` ont été résolus.

<!-- ACP2E-1690 -->

* Les tests d’intégration de la fonctionnalité de modification du registre des cadeaux ne dépendent plus des ID d’entité existants. Toutes les données requises sont désormais obtenues par le biais d&#39;appareils. Auparavant, `\Magento\GiftRegistry\Controller\Index\EditPostTest` a échoué.

<!-- ACP2E-1748 -->

* `CollectionTest::testGetDateRangeFirstPart()` prend désormais en compte l’heure d’été.

<!-- ACP2E-1824 -->

* Avis d’obsolescence fixe pour `StorefrontDeleteItemFromRequisitionListPrintView`.

### Framework de l’interface utilisateur

<!-- AC-9604 -->

* Le téléchargeur d’images fonctionne désormais comme prévu dans les lignes dynamiques. Les images sont désormais correctement chargées lorsqu’elles sont envoyées sous la forme d’un tableau multinational. [GitHub-37957](https://github.com/magento/magento2/issues/37957)

<!-- AC-10877 -->

* Les styles de chargement de fichier ne sont plus dupliqués dans le thème Luma. [GitHub-32373](https://github.com/magento/magento2/issues/32373)

<!-- AC-9984 -->

* Les champs Rue du formulaire de modification d’adresse du compte client de champ Rue sont désormais correctement enregistrés. Ces champs sont désormais triés correctement selon les clés données dans le formulaire. [GitHub-37973](https://github.com/magento/magento2/issues/37973)

<!-- AC-9107 -->

* Correction du comportement du curseur dans le registre des cadeaux **[!UICONTROL Message]** champ de texte.

<!-- AC-3001 -->

* Les valeurs du décalage de mise en page cumulé (CLS) ont été améliorées pour les pages de détails du produit. (Cette mesure quantifie la stabilité visuelle des mises en page.)[GitHub-35410](https://github.com/magento/magento2/issues/35410)

<!-- AC-10567 -->

* Amélioration de la messagerie des erreurs qui se produisent pendant le rendu du modèle. Commerce affiche désormais un message informatif. Auparavant, Commerce affichait des fuites de HTML lorsqu’une erreur PHP se produisait.

<!-- ACP2E-2595 -->

* Attributs client personnalisés (type `File attached`) fonctionne désormais correctement avec les images qui ont été supprimées, puis téléchargées. Auparavant, les attributs personnalisés chargés, puis supprimés et chargés à nouveau ne pouvaient pas être enregistrés à partir du storefront.

<!-- AC-9125 -->

* Correction d&#39;une erreur de syntaxe dans le fichier de modèle de calendrier. [GitHub-37725](https://github.com/magento/magento2/issues/37725)

<!-- AC-6445 -->

* Les utilisateurs administrateurs peuvent désormais modifier le logo du storefront lorsque le mode magasin unique est activé. Auparavant, Commerce affichait le logo de secours par défaut. [GitHub-35952](https://github.com/magento/magento2/issues/35952)

<!-- ACP2E-2045 -->

* Les valeurs de configuration des mixins ne sont plus vides et les mixins jQuery fonctionnent désormais quelle que soit la position de chargement. Auparavant, les mixins jQuery n’étaient pas chargés de manière cohérente dans les navigateurs.

<!-- AC-8823 -->

* Les mots de passe s’affichent désormais comme prévu lorsque le **[!UICONTROL Show Password]** la case à cocher sur la page de connexion est active.

<!-- ACP2E-2034 -->

* Adobe Commerce affiche désormais des prix corrects pour les produits groupés fixes avec des prix spéciaux.

<!-- AC-8285 -->

* Mise à jour du lien vers la page de liste Problèmes GitHub dans le fichier de modèle de pied de page du storefront. [GitHub-37214](https://github.com/magento/magento2/issues/37214)

<!-- AC-6282 -->

* Le widget Récemment consultés affiche désormais le montant correct de taxe dans les prix de produits groupés. [GitHub-35881](https://github.com/magento/magento2/issues/35881)

<!-- AC-6636 -->

* Les utilisateurs administrateurs peuvent désormais glisser-déposer les options personnalisables créées pour le produit simple comme prévu. [GitHub-36051](https://github.com/magento/magento2/issues/36051)

<!-- AC-8345 -->

* L’ordre des types d’attributs de liste déroulante de produit correspond désormais à l’ordre des images sur la page de produit configurable. [GitHub-37285](https://github.com/magento/magento2/issues/37285)

<!-- ACP2E-1969 -->

* Les messages système se chargent désormais plus rapidement. Seuls les messages affichés sont chargés. Auparavant, tous les messages étaient chargés à partir de la base de données, ce qui prenait du temps.

<!-- ACP2E-1804 -->

* Suppression du nœud de chemin de navigation en définissant `remove=true` par le biais de la mise en page XML n’entraîne plus la suppression du titre de la page sur la page de catégorie. Auparavant, la suppression des chemins de navigation de cette manière supprimait le titre de la page de la page de catégorie.

<!-- ACP2E-1717 -->

* Le formulaire d’enregistrement des clients se charge désormais comme prévu lorsqu’il inclut des attributs client à sélection multiple. Auparavant, Adobe Commerce a généré cette exception : `[2023-03-05T05:57:40.032602+00:00] report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- ACP2E-1602 -->

* Les messages de bienvenue contenant des guillemets simples sont désormais correctement rendus sur le storefront, sans erreur de console. Auparavant, si un message de bienvenue contenait un guillemet simple, le message de bienvenue n’était pas chargé pendant le rendu du storefront. Adobe Commerce affichait également les erreurs de la console.

<!-- ACP2E-1369 -->

* Adobe Commerce ne renvoie plus d’erreur lorsque vous tentez de modifier rapidement l’affichage entre l’historique des commentaires et les retours dans la page de commande d’administration. Auparavant, Adobe Commerce affichait cette erreur générique : `A technical problem with the server created an error`.

<!-- ACP2E-1374 -->

* Les utilisateurs administrateurs disposant d’autorisations limitées à un site web peuvent désormais mettre à jour les attributs de produit spécifiques au site web en définissant sur une `all stores view` portée.

<!-- ACP2E-1648 -->

* Le widget de la loupe se charge désormais comme prévu sur la page du produit.

<!-- ACP2E-1216 -->

* Les options personnalisables multi-lignes sont désormais correctement rendues dans les documents de PDF de facture, d&#39;expédition et d&#39;avoir. Auparavant, le texte multiligne était précédé d’un saut de page inattendu et, si le texte dépassait la page, le texte était tronqué.

<!-- AC-7402 -->

* Les utilisateurs administrateurs peuvent désormais ajouter une nouvelle adresse de client à partir de l’administration lorsque ce client a été créé pour un autre site web dont l’ID de magasin ne correspond pas à l’ID du site web. Auparavant, Adobe Commerce affichait ce message pop-up : `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- ACP2E-1529 -->

* Les détails de l’administrateur d’entreprise sont désormais enregistrés comme prévu et les administrateurs sont correctement redirigés, lorsque les e-mails d’affectation d’administrateur d’entreprise contiennent un `CMS Block URL` variable.

<!-- ACP2E-1775 -->

* Les messages d’erreur associés à l’envoi de commentaires sur la page des détails de la commande sont désormais plus informatifs. Auparavant, lorsqu’un acheteur cliquait **[!UICONTROL Submit comment]** sans modifier le statut de la commande ni saisir de texte dans la zone de commentaire, Adobe Commerce a affiché le message suivant : `The comment is missing. Enter and try again`.

<!-- ACP2E-1659 -->

* L’icône de calendrier s’affiche désormais comme prévu dans les champs de période de l’administrateur **[!UICONTROL Marketing]** > **[!UICONTROL Cart Price Rules]** après la sélection d’une date pour un champ. Auparavant, après avoir sélectionné une date pour un champ, l’icône de calendrier n’était plus affichée sur les autres champs et le texte d’espace réservé Adobe Commerce s’affichait. [GitHub-36499](https://github.com/magento/magento2/issues/36499)

<!-- ACP2E-1717 -->

* Les formulaires d’enregistrement de clients qui comprennent des champs à sélection multiple se chargent désormais correctement. Auparavant, ce formulaire ne se chargeait pas lorsqu’il contenait des champs à sélection multiple, et l’erreur suivante était déclenchée : `report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- AC-7092 -->

* Cliquez sur une miniature vidéo en mode plein écran de la galerie de produits pour afficher la vidéo comme prévu. Auparavant, la vidéo ne s’affichait pas et la console du navigateur affichait une erreur JavaScript. [GitHub-36456](https://github.com/magento/magento2/issues/36456)

<!-- AC-7806 -->

* Ajout d’une variable à la ligne de copyright qui est automatiquement mise à jour chaque année. [GitHub-36776](https://github.com/magento/magento2/issues/36776)

<!-- AC-8441 -->

* Le curseur d’image de la page de produit fonctionne désormais comme prévu dans la vue mobile. Auparavant, seule la première image s’affichait correctement. [GitHub-37232](https://github.com/magento/magento2/issues/37232)

### Réécritures d’URL

<!-- AC-8039 -->

* Le `crossorigin` attribut a été ajouté à `linkTypes` pour `HEAD` éléments.[GitHub-32509](https://github.com/magento/magento2/issues/32509)

<!-- ACP2E-2549 -->

* Les réécritures d’URL sont désormais générées en fonction de la configuration de visibilité au niveau du magasin dans les déploiements multi-magasin. Auparavant, les réécritures d’URL n’étaient pas générées pour les magasins non par défaut lorsque la visibilité du produit était définie sur **non visible** dans la portée de magasin par défaut.

<!-- AC-10464 -->

* `Category::getUrl()` ne récupère plus de redirection 301. [GitHub-38152](https://github.com/magento/magento2/issues/38152)

<!-- ACP2E-2629 -->

* Commerce ne génère plus de réécritures d’URL de produit pour les catégories racine et les produits définis sur **[!UICONTROL Not Visible Individually]** dans les configurations multi-magasin lors de la génération de réécritures d’URL manquantes pour les magasins personnalisés.

<!-- ACP2E-2481 -->

* Les balises d’URL canoniques reflètent désormais les modifications attendues après la mise à jour de la propriété Clé d’URL de catégorie. Auparavant, l’URL de catégorie obsolète était utilisée, ce qui déclenchait immédiatement la redirection vers la nouvelle URL.

<!-- AC-6728 -->

* Les réécritures d’URL de produit de catégorie sont désormais générées comme prévu pour toutes les vues de magasin lorsqu’un produit est ajouté à une catégorie. [GitHub-32910](https://github.com/magento/magento2/issues/32910)

<!-- ACP2E-1783 -->

* Commerce ne renvoie plus d’erreur lorsque vous essayez de créer une redirection 301/302 pour une URL de produit lorsque **Générer des réécritures d’URL de catégorie/produit** est activé. Lorsqu’un produit est créé et affecté à une catégorie, des réécritures d’URL automatisées sont créées : une pour l’URL directe et une pour le produit via le chemin d’accès à la catégorie. Lorsqu’une nouvelle réécriture d’URL de produit est créée, les corrélations entre le produit, la catégorie et le magasin sont vérifiées. Ce contrôle est désormais basé sur les propriétés d’entité corrélées (catégorie et produit). Auparavant, cette vérification était effectuée sur les réécritures d’URL préexistantes.

<!-- ACP2E-1737 -->

* Les réécritures d’URL de catégorie sont désormais générées pour toutes les vues de magasin lorsqu’une nouvelle catégorie est importée à partir d’un fichier CSV.

<!-- ACP2E-1700 -->

* Les configurations du suffixe d’URL de produit et du suffixe d’URL de catégorie correspondent désormais aux suffixes dans le `url_rewrite` tableau. Auparavant, les conditions de concurrence lors de la mise à jour des configurations de suffixes d’URL étaient définies, et les suffixes d’URL configurés et `url_rewrite` le tableau ne correspond pas.

<!-- ACP2E-1703 -->

* Adobe Commerce effectue désormais le rendu de l’arborescence des catégories à tous les niveaux lors de la création de réécritures d’URL de catégorie. Auparavant, seuls les trois premiers niveaux de catégories s’affichaient. [GitHub-36973](https://github.com/magento/magento2/issues/36973)

<!-- ACP2E-1644 -->

* Les pages CMS nouvellement créées avec un nœud enfant sont désormais incluses dans la grille de filtre marketing (**[!UICONTROL Marketing]** > **[!UICONTROL URL rewrites]**). Auparavant, les réécritures d’URL n’étaient pas créées pour ces pages CMS.

<!-- ACP2E-1737 -->

* Les réécritures d’URL de catégorie sont désormais présentes dans le fichier CSV lors de l’importation d’une nouvelle catégorie.

<!-- ACP2E-1668 -->

* Les pages CMS multi-magasin sans réécriture d’URL sont désormais transférées comme prévu. Auparavant, les pages CMS multi-magasin demandées sans réécriture d’URL étaient redirigées vers la page d’accueil de la boutique, mais les pages CMS d’origine n’étaient pas redirigées.

### Marchandiseur visuel

<!-- ACP2E-1363 -->

* Vous pouvez désormais utiliser le `Categories` attribut pour les règles du marchandiseur visuel. Auparavant, Adobe Commerce a généré cette exception : `Something went wrong while saving the category`.

### Framework d’API web

<!-- AC-6980 -->

* Commerce n’affiche plus de `Integration not secure` avertissement dans Admin **[!UICONTROL System]** > **[!UICONTROL Extensions]** > **[!UICONTROL Integrations]** lorsque le **[!UICONTROL Callback URL]** et **[!UICONTROL Identity link URL]** champs vides. [GitHub-36407](https://github.com/magento/magento2/issues/36407)

<!-- ACP2E-2483 -->

* Ajout de `taxes`, `itemized_taxes`, et `additional_itemized_taxes` attributs d’extension à  `Magento\Sales\Api\Data\OrderInterface`. Ces attributs vous permettent d’enregistrer les taxes appliquées avec les appels REST de commande.

<!-- ACP2E-2610 -->

* L’API REST Prix de niveau prend désormais en charge les quantités décimales. Auparavant, cette API n’autorisait pas les quantités décimales même lorsque la variable **[!UICONTROL Use Decimal Quantity]** Le paramètre a été activé.

<!-- AC-8998 -->

* LE RESTE `V1/orders/{id}/comments` Le point d’entrée ne modifie plus le statut d’une commande lors de la tentative d’ajout d’un commentaire au statut d’une commande en attente. Il renvoie désormais une erreur informative. Auparavant, ce point d’entrée modifiait le statut de commande lors de l’ajout d’un commentaire.

<!-- ACP2E-2275 -->

* API REST `GET` et `POST V1/products/attributes` le point d’entrée ne renvoie plus la même valeur pour le . `is_filterable` attribut pour les deux `Filterable(with results)` et `Filterable(no results)` options du **[!UICONTROL Use in Layered Navigation]** option. Auparavant, ce point d’entrée renvoyait la même valeur, car la variable `is_filterable` la propriété d’attribut était de type . `Boolean`, qui n’autorisait pas la définition de cette propriété sur `Filterable(no results)`. [GitHub-37979](https://github.com/magento/magento2/issues/37979)

<!-- AC-9117 -->

* Les disparus `media_gallery_entries` Le champ a été ajouté au REST. `V1/configurable-products/sku/children` point d’entrée. Auparavant, cette fonction ne contenait pas le code nécessaire pour stocker et afficher `media_gallery_entries`. [GitHub-37607](https://github.com/magento/magento2/issues/37607)

<!-- ACP2E-1986 -->

* LE RESTE `V1/carts/mine/estimate-shipping-methods` La méthode valide désormais tous les niveaux de données de champ de payload et renvoie un code HTTP 400 pour les données non valides. Auparavant, seul le premier niveau de payload de l’API était validé, et si des données non valides étaient renvoyées dans des niveaux non validés de la payload, Commerce renvoyait un code d’état 500.

<!-- ACP2E-2053 -->

* Les opérations d’API REST en bloc asynchrones pour mettre à jour les produits avec des prix de niveau et différents jeux d’attributs se terminent désormais correctement. Auparavant, les produits avec des jeux d’attributs différents ne pouvaient pas être mis à jour de cette manière et Commerce affichait cette erreur : `The product was unable to be saved. Please try again`.

<!-- AC-7002 -->

* Le `POST /V1/products/tier-prices` le point d’entrée renvoie désormais un message d’erreur plus informatif lorsqu’un nom de groupe de clients non valide est utilisé lors de la création du prix de niveau . Auparavant, Adobe Commerce renvoyait une erreur de ce type : `Notice: Undefined index: XXXXX in ~/public_html/vendor/magento/module-catalog/Model/Product/Price/Validation/TierPriceValidator.php on line 474"`. [GitHub-36431](https://github.com/magento/magento2/issues/36431)

<!-- ACP2E-1776 -->

* Vous pouvez désormais exécuter une requête d’API en bloc asynchrone autorisée pour créer des clients avec un ID de groupe autre que celui par défaut. Auparavant, ces requêtes réinitialisaient l’ID de groupe à la valeur par défaut.

<!-- ACP2E-1543 -->

* Les clients créés à l’aide de l’API Bulk reçoivent désormais les e-mails d’enregistrement des clients dans la langue configurée sur leur site web. Auparavant, tous les e-mails étaient envoyés aux paramètres régionaux par défaut, et non aux paramètres régionaux du site web auquel le client est affecté.

<!-- ACP2E-1339 AC-7577-->

* Le `POST V1/guest-carts` l’appel n’envoie plus de commandes d’invités lorsque **[!UICONTROL Allow Guest Checkout]** est désactivé.

<!-- ACP2E-1336 -->

* Vous pouvez désormais ouvrir une commande à partir de l’administrateur avec le statut `Received` quand `AsyncOrder` n’est pas activé. Auparavant, vous ne pouviez pas ouvrir la page des détails de la commande à partir de l’Administration lorsque le statut de la commande était modifié par . `POST V1/orders`.

<!-- ACP2E-1526 -->

* Adobe Commerce renvoie désormais avec succès le . `content` attribut (code image base64) dans `GET V1/products/sku/media` Réponses de l’API des médias du produit. Le `content` l’attribut n’apparaissait pas auparavant dans la réponse.

### Liste de souhaits

<!-- ACP2E-1784 -->

* Commerce affiche désormais un message indiquant qu’un article a déjà été ajouté à une liste de souhaits lorsqu’un acheteur tente d’ajouter le même article à une liste de souhaits plusieurs fois. Auparavant, dans ces conditions, Commerce augmentait la quantité de produits figurant sur la liste de souhaits.

<!-- AC-8610 -->

* Adobe Commerce ajoute désormais à la liste de souhaits les produits avec les fichiers d’option personnalisables chargés requis. Auparavant, Commerce ajoutait deux produits à la liste de souhaits, et non un seul. [GitHub-37437](https://github.com/magento/magento2/issues/37437)


## Configuration requise

Notre pile technologique est construite sur PHP et MySQL. Pour plus d’informations, voir [Configuration requise](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## Instructions d’installation et de mise à niveau

Vous pouvez installer Adobe Commerce 2.4.7 en utilisant [Compositeur](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html).
