---
title: Notes de mise à jour d’Adobe Commerce 2.4.5
description: Découvrez les nouvelles fonctionnalités, les améliorations, les correctifs de bogues et les problèmes connus de la version 2.4.5 d’Adobe Commerce.
exl-id: fafcd266-fb69-450f-8c4f-047109ba8b50
source-git-commit: b6f082a40e03e099c1d29431f9cab96d3db718de
workflow-type: tm+mt
source-wordcount: '9380'
ht-degree: 0%

---

# Notes de mise à jour d’Adobe Commerce 2.4.5

Adobe Commerce apporte des améliorations à la qualité de la plateforme, aux méthodes de paiement, aux performances de mise en cache de GraphQL et à l’accessibilité. Il comprend des mises à jour des modules Google intégrés et de l’outil de compatibilité de mise à niveau et introduit la prise en charge de la fonction de recherche en direct B2B.

Cette version comprend plus de 400 correctifs de qualité et améliorations.

{{bics}}

## Autres informations de mise à jour

Bien que le code de ces fonctionnalités soit fourni avec des versions trimestrielles du code de base d’Adobe Commerce, plusieurs de ces projets (par exemple, B2B, Page Builder et Progressive Web Application (PWA) Studio) sont également publiés indépendamment. Les correctifs de bogues pour ces projets sont documentés dans les informations de mise à jour distinctes et spécifiques au projet disponibles dans la documentation de chaque projet.

### Correctifs inclus dans cette version

Adobe Commerce 2.4.5 comprend la résolution de tous les problèmes résolus par les correctifs suivants, qui ont été fournis pour Adobe Commerce :

* `Braintree_disabled_partial_capture_for_applepay_googlepay.zip`. Ce correctif résout l’impossibilité pour les utilisateurs de créer des factures partielles lors de l’utilisation d’Apple Pay ou de Google Pay-through Braintree comme mode de paiement. Voir l’article [Adobe Commerce 2.4.4 : impossible de créer des factures partielles](https://support.magento.com/hc/en-us/articles/4487952754957-Adobe-Commerce-2-4-4-Unable-to-create-partial-invoices) de la base de connaissances.

* `AC-2655_2.4.4.patch.zip`. Ce correctif résout un problème en raison duquel les acheteurs ne peuvent pas ajouter un produit à leur panier lorsque l’option Autoriser les pays n’est pas sélectionnée. Voir l’article [ Utilisateurs ne pouvant pas ajouter de produit au panier si rien n’est sélectionné dans l’article Autoriser les pays](https://support.magento.com/hc/en-us/articles/5377681213325-Users-not-able-to-add-product-to-cart-if-nothing-selected-in-Allow-Countries) de la base de connaissances.

## Mise en évidence d’Adobe Commerce 2.4.5

Recherchez les points forts suivants dans cette version.

### Amélioration de la sécurité

Cette version comprend 20 correctifs de sécurité et améliorations de la sécurité de la plateforme. Ce correctif de sécurité a été rétroporté à Adobe Commerce 2.4.3-p3 et Adobe Commerce 2.3.7-p4.

Aucune attaque confirmée liée à ces problèmes n&#39;a été survenue à ce jour. Cependant, certaines vulnérabilités peuvent être exploitées pour accéder aux informations sur les clients ou prendre le contrôle des sessions d’administrateur. La plupart de ces problèmes nécessitent qu’un attaquant obtienne d’abord l’accès à l’administrateur. Par conséquent, nous vous rappelons de prendre toutes les mesures nécessaires pour protéger votre administrateur, y compris, mais sans s’y limiter, les actions suivantes :

* PLACE SUR LA LISTE AUTORISÉE IP
* [Authentification à deux facteurs](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)
* Utilisation d&#39;un VPN
* Utilisation d’un emplacement unique plutôt que `/admin`
* Bonne hygiène des mots de passe

Voir le [Bulletin de sécurité des Adobes](https://helpx.adobe.com/security/products/magento/apsb22-38.html) pour consulter la dernière discussion sur ces problèmes résolus.

#### Améliorations supplémentaires de la sécurité

Les améliorations de la sécurité de cette version améliorent la conformité aux dernières bonnes pratiques en matière de sécurité, notamment :

* La prise en charge de reCAPTCHA a été ajoutée aux formulaires Partage de listes de souhaits, Créer un compte client et Carte cadeau. <!-- AC-1144-->

* Des ressources ACL ont été ajoutées à l’inventaire. <!-- AC-1622-->

* La sécurité du modèle d’inventaire a été améliorée.

* Le filtre `MaliciousCode` a été mis à niveau pour utiliser la bibliothèque `HtmlPurifier`. <!-- AC-1498-->

### Améliorations de la plateforme

* **Déploiements sur site Adobe Commerce** : Adobe Commerce 2.4.5 a été testé et confirmé comme compatible avec Elasticsearch 7.17 (~7.17.0 avec contrainte). Les vendeurs hébergeant Adobe Commerce sur site peuvent utiliser Elasticsearch ou OpenSearch 1.2. <!-- AC-2425-->

* **Déploiements hébergés dans le cloud Adobe Commerce** : Elasticsearch 7.11 ou version ultérieure n’est pas pris en charge sur les déploiements hébergés dans le cloud Adobe Commerce 2.4.5. OpenSearch est le moteur de recherche par défaut pour les déploiements cloud Adobe Commerce 2.4.5.

Adobe Commerce 2.4.5 prend désormais en charge

* Compositeur 2.2 <!-- AC-2033-->

* TinyMCE (5.10.2). Les versions antérieures de TinyMCE (v5.9.2 ou antérieure) autorisaient l’exécution arbitraire de JavaScript lorsqu’une URL spécialement conçue ou une image avec une URL spécialement conçue était mise à jour. <!-- AC-2039 1784 1789-->

* jQueryUI (1.13.1) <!-- AC-2544-->

* `PHPStan` (^1.5.7 avec contrainte) [GitHub-35315](https://github.com/magento/magento2/issues/35315)<!-- AC-2876-->

Le schéma d&#39;intégration DHL a été mis à jour de la version v6.0 vers la version 6.2. Cette mise à niveau n’entraînera pas de changement de comportement du produit.  <!-- AC-3022-->

Les bibliothèques JavaScript obsolètes ont été mises à jour vers leurs dernières versions et les dépendances obsolètes ont été supprimées. Ces modifications sont rétrocompatibles. <!-- AC-2036-->

#### Mises à jour des dépendances du compositeur

<!-- AC-2876 2744 2912 2577-->

Les dépendances du compositeur suivantes ont été mises à jour avec contrainte vers les versions les plus récentes :

* `colinmollenhour/credis` (1.13.0) ? <!-- AC-2732-->
* `guzzlehttp/guzzle` (^7.4.2)
* `laminas/laminas-captcha` (mise à jour avec une contrainte ^2.12) <!-- AC-2625-->
* `laminas/laminas-db`   (^2.15.0)
* `laminas/laminas-di` (^3.7.0)
* `laminas/laminas-escaper` (~2.10.0)
* `laminas/laminas-eventmanager` (^3.5.0)
* `laminas/laminas-feed`   (^2.17.0)
* `laminas/laminas-mail` (^2.16.0)
* `laminas/laminas-mvc` (^3.3.3)
* `laminas/laminas-server` (^2.11.1)
* `laminas/laminas-servicemanager` (^3.11.0)
* `laminas/laminas-validator` (^2.17.0)
* `league/fly` (2.4.3) <!-- AC-2744-->
* `monolog/monolog` (^2.5)
* `phpmd/phpmd`   (^2.12.0)
* `phpstan/phpstan` (^1.5.7)
* `phpunit/phpunit` (~9.5.20)
* `php-cs-fixer` (^3.4.0) <!-- AC-2259-->
* `webonyx/graphql-php` (14.11.6)

Les dépendances `laminas/laminas-session`, `laminas/laminas-text` et `laminas/laminas-view` ont été supprimées. <!-- AC-2598-->

#### Autres mises à niveau et remplacements

* Le schéma d&#39;intégration DHL a été mis à jour de la v6.0 vers la v6.2. <!-- AC-3022-->

* L&#39;URL de passerelle par défaut pour l&#39;expédition USPS a été mise à jour afin d&#39;utiliser `https` au lieu de `http`. <!-- AC-2426-->

* La bibliothèque `Froogaloop` a été remplacée par la bibliothèque `Player.js` Vimeo (2.16.4). <!-- AC-2527 2262-->

* La bibliothèque `grunt-eslint` (NPM) a été mise à niveau vers la dernière version. <!-- AC-2700-->

* Les bibliothèques `jQuery Storage` ont été remplacées par `julien-maurel/js-storage`. <!-- AC-2627-->

* Les outils d’analyse de code statique `php-cs-fixer` et `phpcs` sont désormais compatibles avec PHP 8.x. <!-- AC-2259-->

* `glob.js` dépendance (mise à niveau avec contrainte vers ~7.2.0) <!-- AC-2547-->

* `serve-static.js` dépendance (mise à niveau avec contrainte ~1.14.2) <!-- AC-2548-->

* `underscore.js` dependency (NPM) (1.14.2) <!-- AC-2546 2549-->

* `moment-timezone-with-data.js` (0.5.34) <!-- AC-2545-->

* La bibliothèque `jquery/jquery-cookie` a été remplacée par `js-cookie/js-cookie`. <!-- AC-2626-->

* Les bibliothèques `jarallax.js` et `jaralax-video.js` ont été mises à jour afin d&#39;utiliser la dernière version de l&#39;API REST Vimeo. <!-- AC-2590-->

### Améliorations des performances et de l’évolutivité

#### Optimisation de l&#39;indexeur de prix

Les performances de l’index de Principal ont été améliorées en réduisant le nombre d’index principaux de 3 à 1 pour la table `catalog_product_index_price_tmp`. Cette amélioration a réduit le nombre d’enregistrements créés dans l’index de prix en réduisant la multiplication des eSKU résultant de catalogues partagés. Le temps d’indexation a été considérablement réduit. <!-- MCP-653 MC-43342-->

### Mises à jour de l’accessibilité

Cette version s’est concentrée sur la création d’une expérience de storefront sur Venia (PWA) plus perceptible, exploitable, compréhensible et robuste. Ces améliorations incluent :

* Les informations récapitulatives des résultats de la recherche sont désormais annoncées aux utilisateurs de lecteurs d’écran.
* Les lecteurs d’écran sont désormais informés lorsqu’une nouvelle page vue se charge
* Amélioration de l’accessibilité du contraste et du clavier

### Adobe Sign

Les vendeurs peuvent désormais permettre aux clients de signer électroniquement des contrats personnalisés, tels que des documents de garantie, des contrats d’achat et des conditions générales, lors du passage en caisse d’Adobe Commerce.

### Intégration d’Adobe Commerce avec Adobe IMS

Les marchands Adobe Commerce qui disposent d’un Adobe ID et souhaitent une connexion simplifiée à Adobe Commerce et aux produits d’entreprise Adobe peuvent intégrer l’authentification Commerce au workflow d’authentification Adobe IMS. Une fois cette intégration activée pour votre boutique Commerce, chaque utilisateur administrateur doit utiliser ses informations d’identification d’Adobe (et non ses informations d’identification Commerce) pour se connecter.  Voir [Présentation de l’intégration d’Adobe Identity Management Service (IMS)](https://experienceleague.adobe.com/docs/commerce-admin/start/admin/ims/adobe-ims-integration-overview.html).

### Changements de marque et de style

L’administrateur a été mis à jour pour s’aligner sur la stratégie de marque de l’Adobe. Les modifications affectent les en-têtes, les pieds de page, les mises à jour des couleurs de la grille de données et les éléments de navigation.

### B2B

Nous avons optimisé les données de base de données normalisées nécessaires à la mise en oeuvre de la fonctionnalité Catalogues partagés . Cette réduction de la multiplication des eSKU entraîne une amélioration des performances, car moins de lignes de base de données doivent être stockées. Auparavant, Adobe Commerce dupliquait chaque SKU du catalogue pour chaque catalogue partagé. Adobe Commerce crée désormais des eSKU uniques pour les personnes directement affectées à un catalogue partagé.

L’activation de la nouvelle option de configuration **Enabled Shared Catalog direct product price assigning** améliore également les performances de l’indexeur de prix du produit. <!-- MCP-946-->

Cette version comprend plusieurs correctifs de bogues. Voir les [notes de mise à jour B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### Google Analytics

Google a mis à jour les mécanismes de suivi et d’intégration d’AdWords et d’Analytics dans les applications web grâce à l’intégration à GTag. Cette intégration de la fonctionnalité Google dans les pages de site web permet d’effectuer le suivi et de gérer du contenu par le biais des services Google. Adobe Commerce comporte un ensemble de modules intégrés, notamment Google AdWords, Analytics, Optimizer et TagManager, qui tirent parti de l’ancienne API pour l’intégration aux services Google.  Dans cette version, nous avons réimplémenté cette intégration en utilisant l’approche GTag. &#x200B; Voir [Migration de analytics.js vers gtag.js (Universal Analytics)](https://developers.google.com/analytics/devguides/migration/ua/analyticsjs-to-gtagjs).

### GraphQL

Les performances de GraphQL améliorées incluent :

* Les développeurs et les administrateurs peuvent reconstruire plus rapidement le schéma GraphQL de storefront unifié lors du déploiement ou lors de la modification des attributs en production. Les acheteurs bénéficient également de vitesses de chargement de page beaucoup plus rapides lorsque le schéma GraphQL doit être reconstruit pour une raison quelconque.

* Ajout de la possibilité d’utiliser la date/l’heure d’expiration du jeton d’autorisation via l’utilisation de JSON Web Tokens (JWT) dans l’API GraphQL.

* La commande `bin/magento config:set graphql/session/disable 1` permet aux commerçants de désactiver complètement la création de cookies de session pour toutes les opérations GraphQL. Par défaut, Adobe Commerce crée ces cookies et s’appuie sur ces cookies pour les autoriser, ce qui affecte les performances. À l’avenir, nous vous recommandons d’utiliser des jetons comme seule forme d’autorisation pour les requêtes GraphQL. Il est déconseillé d’utiliser des cookies de session seuls ou conjointement avec des jetons d’autorisation. Voir [GraphQL Authorization](https://devdocs.magento.com/guides/v2.4/graphql/authorization-tokens.html). <!-- B2B-2204 -->

* Les cookies de session sont désormais lancés dans les opérations GraphQL à l’aide de proxies de classe uniquement si nécessaire. <!-- B2B-2217 -->

* L’utilisation de la session a été supprimée des processeurs d’en-tête `http` dans GraphQL tels que magasin, client ou devise. <!-- B2B-2224 -->

Pour plus d’informations sur ces améliorations, consultez le [Guide du développeur de GraphQL](https://devdocs.magento.com/guides/v2.4/graphql/) .

### Inventaire

La sécurité du modèle d’inventaire a été améliorée.

### Recherche en direct

Cette version introduit la prise en charge des groupes de clients B2B et de la tarification personnalisée. La recherche en direct respecte désormais l’attribution des produits aux groupes de clients et la tarification définie pour un groupe de clients/catalogue partagé spécifique.

### Page Builder

Le créateur de pages v.1.7.2 est compatible avec Adobe Commerce 2.4.5.

La mise en page des colonnes du Créateur de pages comprend les améliorations suivantes : <!-- PB-547-->

* Les colonnes sont désormais exposées, ce qui permet aux utilisateurs de contrôler les paramètres des colonnes sur le storefront.

* Le redimensionnement des colonnes prend désormais en charge l’encapsulation déclenchée par les actions de l’utilisateur.

### Paiements

Apple Pay est désormais disponible pour tous les vendeurs exécutant des déploiements avec les services de paiement activés. Ce mode de paiement ne nécessite pas que les acheteurs saisissent les détails de leur carte de crédit ou de débit. Le paiement Apple est disponible sur la page des détails du produit, le mini-panier, le panier et le workflow de passage en caisse. Les vendeurs peuvent activer cette fonctionnalité.

#### PayPal

* Les commerçants d&#39;Espagne et d&#39;Italie peuvent désormais proposer un paiement PayPal plus tard aux acheteurs.  <!-- AC-2521-->

* Des aperçus des boutons PayPal, Crédit et Payer plus tard sont désormais disponibles dans l’administration pour les pages de passage en caisse, de mini-panier, de panier et de produit. Les aperçus indiquent à quoi ressembleront ces boutons lorsqu’ils seront activés et rendus sur le storefront.

#### Braintree

* Braintree a interrompu l’intégration de la protection anti-fraude KOUNT. Il a été supprimé du code base Adobe Commerce.

* L’option **Toujours demander 3DS** a été ajoutée à l’administrateur.

### PWA Studio

PWA Studio v.12.5.x est compatible avec Adobe Commerce 2.4.5.

Les nouvelles fonctionnalités de cette version sont les suivantes :

* Les données de comportement des acheteurs sont collectées sur le storefront de PWA Studio pour les services d’analyse web.  Les vendeurs peuvent désormais s’abonner et étendre ces événements selon leurs besoins.

* Les vendeurs peuvent désormais sélectionner un service à déployer dans l’Admin (Gestionnaire de balises de Google).

Pour plus d’informations sur les améliorations et les correctifs, voir [Versions de PWA Studio](https://github.com/magento/pwa-studio/releases). Voir [Compatibilité des versions](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) pour obtenir la liste des versions de PWA Studio et de leurs versions principales Adobe Commerce compatibles.

### Outil de compatibilité de mise à niveau

Les améliorations incluent :

* La validation de la signature de méthode identifie désormais les modifications incompatibles au sein d’une méthode ou d’une signature de constructeur. <!-- AC-2632-->

* La validation des schémas de base de données identifie désormais les modifications et les incompatibilités des schémas. <!-- AC-58-->

* La validation de la configuration d’ID vérifie désormais les références aux classes principales non-API supprimées ou obsolètes dans `di.xml` et les préférences des classes et interfaces principales.  <!-- AC-438-->

* UCT identifie désormais les obsolescences du code et fournit des recommandations spécifiques pour résoudre chaque problème.  <!-- AC-3147-->

## Problèmes résolus

Nous avons corrigé des centaines de problèmes dans le code principal Adobe Commerce 2.4.5.

### Installation, mise à niveau, déploiement

<!-- ACP2E-49-->

* Vous pouvez désormais renommer un patch de données et ajouter l’ancien nom de classe en tant qu’alias dans la table de base de données `patch_list`. Adobe Commerce vérifie désormais si des alias de correctif de données existaient déjà dans la base de données avant d’appliquer le correctif. Auparavant, Adobe Commerce envoyait une erreur dans ces conditions.

<!-- AC-3036-->

* Adobe Commerce ne renvoie plus d’exception lorsque vous tentez de remplacer l’URL d’administration par une URL personnalisée de la part de l’administrateur. Auparavant, après avoir modifié l’URL d’administration, vous ne pouviez pas vous connecter. [GitHub-35416](https://github.com/magento/magento2/issues/35416)

<!-- AC-1480-->

* Les commerçants peuvent désormais mettre à niveau avec succès depuis un déploiement Adobe Commerce 2.4.2 avec Klarna vers Adobe Commerce 2.4.3. [GitHub-33760](https://github.com/magento/magento2/issues/33760)

<!-- AC-2905-->

* Le chemin d’accès à Adobe Commerce Analytics n’est plus codé en dur. Auparavant, ce chemin d’accès codé en dur entraînait des conflits lorsque plusieurs instances Adobe Commerce étaient installées sur un seul serveur. [GitHub-29373](https://github.com/magento/magento2/issues/29373)

### Accessibilité

<!-- AC-2786-->

* Le bouton **Shopping bag** fournit désormais une indication programmatique ou textuelle de son état. Les utilisateurs de lecteurs d’écran sont informés que le fait de cliquer sur ce bouton développera un autre contenu, ou que le contenu associé est développé ou réduit. Auparavant, ce bouton ne fournissait pas d’indication programmatique ou textuelle de son état.

<!-- AC-2496-->

* Informations de paiement Les éléments textuels ou les images de texte de l’option de carte de crédit respectent désormais le rapport de contraste colorimétrique minimal requis de WCAG 2.0 de 4,5:1 pour le texte standard de 18 pt (24 px) ou 14 pt (19 px) s’ils sont codés en gras. Auparavant, ils ne correspondaient pas au rapport de contraste attendu.

<!-- AC-2483-->

* **Carnet d’adresses** > **Communication** > **Informations sur le compte** Les indicateurs de focus personnalisés fournissent désormais un rapport de contraste d’au moins 3:1 par rapport à la couleur d’arrière-plan.

<!-- AC-2486-->

* Le texte des boutons **Filtrer** et **Trier** satisfait désormais au rapport de contraste des couleurs minimal requis de WCAG 2.0 de 4,5:1 pour le texte standard de 18 pt (24 px) ou 14 pt (19 px) s’il est codé. Auparavant, les boutons de navigation des carrousels ne remplissaient pas ces exigences de contraste minimum.

<!-- AC-2499-->

* Les lecteurs d’écran annoncent le mot &quot;Venia&quot; une seule fois lorsque vous accédez aux en-têtes et pieds de page Venia. Auparavant, le même mot était annoncé deux fois consécutivement.

<!-- AC-2585-->

* Les boutons qui déclenchent des listes déroulantes fournissent désormais des informations aux lecteurs d’écran qui indiquent leur état développé ou réduit et leurs noms accessibles.

<!-- AC-2482-->

* Les utilisateurs de lecteurs d’écran sont informés lorsqu’une nouvelle page vue est affichée. Auparavant, le changement de titre n’était pas annoncé lorsqu’un titre de page était modifié.

### Adobe Stock

<!-- AC-2926-->

* Les utilisateurs peuvent désormais se déconnecter d’Adobe Stock.

### Lot de produits

<!-- ACP2E-465-->

* Vous pouvez désormais utiliser le point d’entrée `PUT /V1/products` pour mettre à jour les attributs de prix de produit pour un site web spécifique. Auparavant, si certains attributs de produit étaient remplacés pour une vue de magasin spécifique, vous ne pouviez pas mettre à jour un attribut de prix pour ce produit dans la même vue de magasin.

<!-- ACP2E-780-->

* Adobe Commerce calcule désormais correctement le total du panier d’un produit en regroupement lorsque la règle Sous-sélection de produit est appliquée.

### Cache

<!-- ACP2E-684-->

* Le cache de la page entière n’est plus affiché comme désactivé dans l’administrateur lorsque le cache Adobe Commerce est vidé et que `use_stale_cache` est activé.

<!-- AC-2410-->

* Les marqueurs de déploiement New Relic fonctionnent désormais comme prévu lorsque le cache est vidé. [GitHub-32649](https://github.com/magento/magento2/issues/32649)

### Panier et passage en caisse

<!-- ACP2E-455-->

* La fenêtre contextuelle de recherche d’adresses à l’étape de facturation du workflow de passage en caisse ne provoque plus d’erreurs DOM.

<!-- ACP2E-368-->

* La mutation `addProductsToCart` fonctionne désormais correctement avec plusieurs produits. Auparavant, cette requête renvoyait le premier produit avec un sous-total précis, mais renvoyait un sous-total de 0 pour les autres produits.

<!-- ACP2E-245-->

* Les exceptions d’autorisation sont désormais gérées pour les produits à accès limité qui sont ajoutés par SKU. Les acheteurs reçoivent maintenant un message approprié sur le storefront et le champ quantité de la table des erreurs est désactivé. Auparavant, Adobe Commerce lançait une exception de ce type : `There has been an error processing your request`.

<!-- ACP2E-148-->

* La requête SQL mise à jour affectait les guillemets après la désactivation d’une règle de prix de panier a été optimisée afin d’éviter de verrouiller l’intégralité du tableau de guillemets.

<!-- ACP2E-98-->

* Les acheteurs disposant d’un partage de compte global ne sont plus tenus de se reconnecter à un site web secondaire dans un déploiement multisite lorsque l’extraction d’invités est désactivée. Les données client sont désormais chargées lorsque l’acheteur accède au sous-domaine. Le nouvel acheteur n’est plus invité à se reconnecter et le contenu précédent du panier s’affiche.

<!-- ACP2E-94-->

* Les valeurs du menu déroulant des adresses du workflow de passage en caisse ne changent plus pour les éléments restants d’un guillemet lorsqu’un seul élément d’adresse de quantité est supprimé dans un passage en caisse à plusieurs adresses. Auparavant, lorsqu’un produit était supprimé d’un guillemet lors du passage en caisse à plusieurs adresses, la valeur de la liste déroulante des adresses était remplacée par valeur par défaut pour tous les produits.

<!-- ACP2E-42-->

* La requête `cart` ne renvoie plus de réponses nulles lorsqu’un produit est en rupture de stock. Un nouvel élément `errors` contenant le message d’erreur a été introduit dans la réponse. Auparavant, lorsque vous exécutiez une requête avec un produit en rupture de stock, Adobe Commerce affichait une valeur `null` sous la section `items` de la réponse. Voir [requête au panier](https://devdocs.magento.com/guides/v2.4/graphql/queries/cart.html).

<!-- ACP2E-38-->

* Les méthodes d’expédition sont désormais disponibles comme prévu lorsqu’un acheteur invité crée un compte après avoir ajouté un produit à son panier avant de passer en caisse. Auparavant, lorsqu’un invité ajoutait un produit dans le panier avant de créer un compte, aucune méthode de livraison n’était disponible pendant le passage en caisse. Après avoir ajouté d’autres produits au panier, les méthodes d’expédition sont devenues disponibles.

<!-- AC-2564-->

* Les acheteurs peuvent désormais ajouter des produits à leur panier lorsqu’aucune option du champ **Autoriser les pays** n’a été sélectionnée.

<!-- AC-2622-->

* Le contenu du panier et l’état de connexion sont désormais rechargés comme prévu après l’expiration d’une session lorsque l’option **Activer la persistance** est définie sur **Oui**. [GitHub-35182](https://github.com/magento/magento2/issues/35182)

<!-- AC-428-->

* Les sous-totaux du mini panier sont désormais mis à jour correctement lorsqu’un acheteur navigue de la page d’expédition vers la page du panier dans le workflow de passage en caisse pour une commande avec plusieurs adresses d’expédition. Auparavant, le sous-total était doublé.

<!-- AC-2619-->

* Le mini-panier affiche désormais les produits précédemment ajoutés après un délai d’expiration de session lorsque l’option **Activer la persistance** est activée. [GitHub-35183](https://github.com/magento/magento2/issues/35183)

<!-- ACP2E-707-->

* Les commerçants peuvent maintenant créer une note de crédit dans laquelle **Refund Shipping (Incl. Tax)** est défini sur -0.01 et peut maintenant définir ce montant sur 0. Auparavant, la note de crédit ne pouvait pas être créée dans ces conditions.

### Règle de prix du panier

<!-- ACP2E-680-->

* La portée de l’attribut `Parent Only` est désormais utilisée correctement dans la condition Règle de panier.

### Catalogue

<!-- ACP2E-758-->

* Les clés d’URL de produit restent désormais inchangées lors de la mise à jour du nom du produit via `PUT /V1/products/` pour une vue de magasin. Auparavant, une nouvelle clé d’URL était générée en fonction du nouveau nom de produit et affectée au produit, qui remplaçait la clé d’URL dans cette vue de magasin.

<!-- ACP2E-712-->

* Les produits d’optimisation basés sur des règles ne s’affichent plus deux fois sur la page de produits.

<!-- ACP2E-703-->

* L’ajout d’un produit à une catégorie à partir du widget de produit Page Builder défini sur le mode carrousel ne déclenche plus le rechargement d’une page.

<!-- ACP2E-685-->

* Les produits définis sur **Non visibles individuellement** n’apparaissent plus dans les résultats de recherche avancée du catalogue.

<!-- ACP2E-679-->

* Les attributs de lot dynamiques sont désormais correctement mis à jour sur la page Mise à jour des attributs en masse . Auparavant, l’attribut **SKU dynamique** restait défini sur **Oui** même s’il était désactivé sur la page Mise à jour en masse.

<!-- ACP2E-673-->

* Les règles du catalogue sont désormais correctement appliquées à l’aide d’indexeurs incrémentiels plutôt que d’une réindexation complète.

<!-- ACP2E-657-->

* Vous pouvez désormais basculer avec succès entre les vues de liste et de grille des listes de produits multi-pages. Auparavant, lorsque vous accédiez à la dernière page d’une vue de liste de produits multi-pages avant de passer en vue de grille, Adobe Commerce affichait cette erreur : `Unfortunately there are no products in this category on our website currently`.

<!-- ACP2E-635-->

* Les rapports Journal d’action d’administration affichent désormais les ID de produit mis à jour et les informations d’état mises à jour, comme prévu.

<!-- ACP2E-633-->

* Les déclencheurs sont désormais restaurés comme prévu vers la table `catalogrule_product_price` après une réindexation complète. Auparavant, les déclencheurs étaient supprimés de la table `catalogrule_product_price` après une réindexation complète `catalogrule_rule` ou `catalogrule_product`.

<!-- ACP2E-629-->

* Les règles de catégorie utilisées pour affecter des produits à des catégories ne changent plus de manière aléatoire.

<!-- ACP2E-522-->

* Adobe Commerce ne renvoie plus d’erreur lorsqu’une règle de catégorie affecte un produit à une catégorie qui est ensuite triée dans un déploiement multisite.

<!-- ACP2E-516-->

* Les catégories ne peuvent plus être mises à jour globalement par un administrateur disposant d’un accès limité à la portée. Auparavant, lorsque plusieurs sites web utilisaient la même catégorie mais des produits différents et qu’un administrateur autorisé limité à un magasin modifiait les produits de la catégorie, la sélection de produits était également modifiée pour d’autres magasins.

<!-- ACP2E-508-->

* La page des détails du produit affiche désormais le prix correct lorsqu’une devise autre que la devise par défaut pour un paramètre régional spécifié est utilisée. Auparavant, les nombres n’étaient pas localisés comme prévu sur le storefront.

<!-- ACP2E-468-->

* Les produits peuvent désormais être activés à l’aide d’une mise à jour planifiée.

<!-- ACP2E-392-->

* Le même message d’erreur s’affiche désormais par l’API et sur le storefront lors de la tentative de récupération des prix de niveau d’un produit avec des enregistrements en double. Auparavant, `PUT /V1/products/tier-prices` renvoyait un message d’erreur incorrect.

<!-- ACP2E-345-->

* Adobe Commerce fournit désormais des messages d’erreur de validation lorsque vous essayez d’ajouter une clé URL de produit avec un trait d’union de fin. Un texte d’info-bulle informatif est également disponible.

<!-- ACP2E-267-->

* Le nouveau champ `ConfigurableWishlistItem.configured_variant` a remplacé le champ `ConfigurableWishlistItem.child_sku`. Ce dernier champ a déclenché une erreur interne lorsqu’une liste de souhaits client contenait un produit configurable non configuré.

<!-- ACP2E-84-->

* Les réécritures d’URL sont désormais générées uniquement pour les magasins sélectionnés lors de la mise à jour des attributs en masse afin de modifier la visibilité du produit. Auparavant, la mise à jour de l’attribut de masse créait une réécriture de l’URL pour le mauvais magasin.

<!-- ACP2E-39-->

* Lorsque le paramètre `Synchronize widget products with backend storage` est activé, Adobe Commerce ajoute récemment des données de produit dans la table de base de données `catalog_product_frontend_action`. Elle inclut l’ID de client ou de visiteur lors de l’ajout d’enregistrements. La section `recently_viewed_product` de la réponse est désormais vide si l’ID de client et l’ID de visiteur sont nuls. Par conséquent, lorsque la demande Ajax `customer/section/load` est envoyée, Adobe Commerce peut correctement filtrer les produits récemment consultés en fonction de l’ID de client ou de visiteur. Auparavant, la réponse incluait toutes les données disponibles dans la table de base de données `catalog_product_frontend_action`, car il n’y avait aucun contrôle pour un ID de client ou de visiteur vide.

<!-- ACP2E-28-->

* Les règles de catégorie avec un attribut `Quantity` pour les produits configurables fonctionnent désormais correctement lors de l’implémentation de l’évaluation. Auparavant, lorsque les produits avaient des valeurs différentes pour `row_id` et `entity_id` dans la table `catalog_product_entity` en raison de mises à jour intermédiaires, la fonctionnalité de marchandisage visuel **Faire correspondre le produit par règle** ne filtrait pas correctement les produits.

<!-- ACP2E-13-->

* Les administrateurs peuvent désormais modifier les options de produit configurables dans le panier d’un acheteur à partir du panneau de diapositives d’administration. Auparavant, le panneau de diapositives ne fonctionnait pas correctement.

<!-- AC-1705-->

* Le cache de page est désormais effacé comme prévu pour le parent de produit configurable lors de l’enregistrement des modifications apportées à un produit enfant. Auparavant, comme le cache n’était pas effacé, les modifications n’étaient pas sélectionnées sur la page du produit de configuration du storefront. [GitHub-34508](https://github.com/magento/magento2/issues/34508)

<!-- AC-711-->

* Les listes de produits s’affichent désormais correctement dans l’Admin. Auparavant, la liste de produits ne s’affichait pas et Adobe Commerce affichait cette erreur : `Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "<ID>" already exists`. [GitHub-33145](https://github.com/magento/magento2/issues/33145)

<!-- AC-1214-->

* Les prix des produits sont désormais les mêmes sur la page des détails du produit et dans la recherche de storefront dans les déploiements multi-magasins après le changement de la portée du prix du catalogue de **site web** à **global**. Auparavant, la page Résultats de la recherche catalogue affichait le prix **global** et la page des détails du produit affichait le prix **site web**. [GitHub-34074](https://github.com/magento/magento2/issues/34074)

<!-- ACP2E-316-->

* La navigation par calques affiche désormais les produits dont les prix sont les plus élevés, comme prévu, lorsque le paramètre **Calcul de l’étape de navigation par prix** est défini sur **Manuel**.

<!-- ACP2E-711-->

* Vous pouvez désormais modifier la limite de produits par page affichée dans une catégorie lorsque l’option **Mémoriser la pagination des catégories** est activée. Auparavant, le cookie `form_key` et l’interface utilisateur `form_key` différaient et Adobe Commerce affichait cette erreur : `Invalid Form Key. Please refresh the page`.

<!-- ACP2E-807-->

* L’indexeur EAV traite désormais les ID de produit comme type `int` afin d’éviter d’éventuels problèmes de performances.

<!-- AC-2597-->

* Un nouveau cache de produit est désormais généré correctement après l’ajout d’une nouvelle image avec un nom contenant &quot;.&quot;  à un produit, puis enregistrez le produit et nettoyez le cache de l’image. [GitHub-32699](https://github.com/magento/magento2/issues/32699)

<!-- AC-1205-->

* Adobe Commerce affiche désormais un message d’erreur, comme prévu, lorsque vous essayez de créer un attribut à partir de la page du produit sans remplir le champ Admin . [GitHub-33099](https://github.com/magento/magento2/issues/33099)

* Les évaluations de produits sont désormais correctes sur toutes les listes de produits du catalogue lorsque la page d’accueil contient plusieurs listes de catalogues. [GitHub-33867](https://github.com/magento/magento2/issues/33867)

### Contenu CMS

<!-- ACP2E-106-->

* Les vendeurs ne peuvent plus modifier une mise à jour planifiée active à partir de la page de modification de l’entité.

<!-- ACP2E-65-->

* Un administrateur disposant d’autorisations restreintes peut désormais afficher une page CMS dans la hiérarchie CMS après une mise à jour planifiée.

### Produits configurables

<!-- ACP2E-687-->

* Adobe Commerce affiche désormais le prix correct d’un produit configurable avec une option sélectionnée après avoir modifié sa quantité sur la page des détails du produit. Auparavant, le prix était réinitialisé à la valeur initiale après modification de la quantité.

<!-- ACP2E-461-->

* La requête `products` récupère désormais les prix des produits configurables qui reflètent fidèlement le paramètre de configuration **Display Out Of Stock**. Auparavant, la requête ne renvoyait pas de prix précis.

<!-- ACP2E-412-->

* Les options configurables sont désormais liées aux produits configurables créés dans l’administrateur à l’aide de `POST /V1/configurable-products/configurable1/child`.

<!-- ACP2E-360-->

* Les attributs à sélection multiple sont désormais correctement enregistrés lors de la modification du produit. Auparavant, Adobe Commerce enregistrait l’option par défaut pour les attributs non sélectionnés ainsi que les attributs sélectionnés lors de l’enregistrement d’un produit.

<!-- ACP2E-55-->

* Adobe Commerce affiche désormais les attributs configurables comme prévu lors de la création des attributs `select` globaux via un script de correctif. Auparavant, les attributs globaux éligibles étaient masqués.

<!-- AC-2521-->

* La mutation `addConfigurableProductsToCart` peut désormais être utilisée pour ajouter des produits configurables avec des options personnalisées. Auparavant, Adobe Commerce générait cette erreur : `Magento 2.3.4 graphql Notice: Undefined index: option_value in /var/www/html/mg234/vendor/magento/module-configurable-product-graph-ql/Model/Resolver/ConfigurableCartItemOptions.php on line 62`. [GitHub-28860](https://github.com/magento/magento2/issues/28860)

<!-- ACP2E-43-->

* Adobe Commerce affiche désormais correctement l’état du stock d’un produit configurable, les configurations disponibles et le prix affiché lorsque la disponibilité d’un produit enfant configurable est modifiée par une mise à jour planifiée. Auparavant, lorsqu’un produit configurable avait deux enfants et que la disponibilité d’un produit enfant était désactivée avec une mise à jour planifiée, l’état du stock du produit parent s’affichait incorrectement sous la forme **Out of Stock** lorsque la mise à jour était active. Une fois la mise à jour terminée, le prix affiché et la disponibilité de ses configurations étaient mal calculés.

* Vous pouvez désormais réorganiser les produits configurables à l’aide d’options personnalisées facultatives. Auparavant, les tentatives de réorganisation échouaient et affichaient cette erreur : `Some of the selected options are not currently available`. [GitHub-35409](https://github.com/magento/magento2/issues/35409)

<!-- AC-959-->

* La mutation `addConfigurableProductsToCart` fonctionne désormais comme prévu avec plusieurs produits. Auparavant, des informations de produit incorrectes étaient renvoyées ou un message d’erreur non valide était renvoyé. [GitHub-30948](https://github.com/magento/magento2/issues/30948)

### Client

<!-- ACP2E-390-->

* Adobe Commerce affiche désormais correctement les attributs prédéfinis du système de contrôle d’accès selon le paramètre du site web sur le storefront. Auparavant, les attributs du client au niveau du site web activés pour un site web et désactivés pour un autre étaient affichés comme activés pour les deux sites web.

### Segment de client

<!-- ACP2E-473-->

* Les règles de produit liées spécifiques aux segments client fonctionnent désormais comme prévu. Le problème a été corrigé en appelant une méthode pour ajouter une relation visiteur-segment pour un site web spécifique. Auparavant, les segments de cette règle étaient récupérés uniquement sur la base des clients enregistrés et des sites web.

### Téléchargeable

<!-- MC-40675-->

* Vous pouvez désormais supprimer des exemples de liens et de fichiers d’un produit téléchargeable. [GitHub-31887](https://github.com/magento/magento2/issues/31887)

### Email

<!-- ACP2E-717-->

* Les emails émis par le système sont désormais envoyés avec succès aux destinataires avec &quot;.-&quot; dans leur adresse électronique.

<!-- ACP2E-184-->

* Les clients reçoivent désormais des rappels par e-mail sur leurs paniers abandonnés selon le bon calendrier. La nouvelle fonction SQL `TIMESTAMPDIFF(DAY, ,)` a remplacé la fonction `TO_DAYS()` et calcule la différence entre les horodatages sur la base de la date et de l’heure. Auparavant, les rappels par courrier électronique n’étaient pas envoyés par planification en raison d’un mauvais calcul de deux valeurs de date-time d’abandon de panier (tout fuseau horaire) et d’heure du serveur (UTC).

<!-- AC-776-->

* Adobe Commerce affiche désormais un message d’erreur sur la page Expédition lorsqu’un acheteur entre dans un format d’email non valide après que l’acheteur a cliqué sur **Passer commande**. Auparavant, le message d’erreur s’affichait sur la page Paiement. [GitHub-33590](https://github.com/magento/magento2/issues/33590

### Frameworks

<!-- ACP2E-658-->

* La commande `bin/magento setup:config:set` ne remplace plus les préfixes d’ID de cache déjà définis dans `app/etc/env.php`.

<!-- ACP2E-517-->

* La commande `bin/magento setup:static-content:deploy -s compact` inclut désormais les styles des thèmes enfants comme prévu. Auparavant, les fichiers CSS de thème n’étaient pas présents sur le storefront après le déploiement.

<!-- AC-1999-->

* Un nouveau sniff a été ajouté pour vérifier si les barres obliques de fermeture sont utilisées dans les éléments `void`.

<!-- AC-2896-->

* Adobe Commerce ne renvoie plus d’erreur SQL après avoir affecté une nouvelle source à un produit et modifié sa quantité. [GitHub-35262](https://github.com/magento/magento2/issues/35262)

<!-- AC-401-->

* L’ordre de tri des attributs fonctionne désormais comme spécifié dans le fichier `di.xml` après la mise à jour.

<!-- AC-1716-->

* La fonction `updateCartCurrency` définit désormais une chaîne au lieu d’un objet à l’intérieur de l’objet panier. Auparavant, Adobe Commerce ne chargeait pas de guillemet à l’aide de `getQuote`, car la fonction `updateCartCurrency` définissait un objet au lieu d’une chaîne dans l’objet de panier. [GitHub-34199](https://github.com/magento/magento2/issues/34199)

<!-- AC-2428-->

* Les avis d’obsolescence ne se produisent plus dans les tests unitaires en raison de`\DateTimeFormatter::formatObject()`. Cette méthode fonctionne désormais comme prévu avec les valeurs numériques pour `$format`.

<!-- AC-2893-->

* Adobe Commerce n’affiche plus d’erreur `preg_replace()` sur l’administrateur. Le troisième argument (`$subject`) est désormais de type `array|string` au lieu de `bool`.

<!-- AC-2583-->

* La méthode `isFreeShipping` renvoie désormais un entier plutôt qu’une valeur booléenne.[GitHub-35164](https://github.com/magento/magento2/issues/35164)

<!-- AC-2855-->

* Adobe Commerce ne renvoie plus l’erreur suivante lorsque vous créez un module externe pour une méthode de la classe `vendor/magento/module-backend/Model/Menu.php` : `Error: Call to undefined method ReflectionUnionType::getName()`. [GitHub-35292](https://github.com/magento/magento2/issues/35292)

<!-- AC-1518-->

* Adobe Commerce renvoie désormais une erreur 404 au lieu d’une erreur 500 lorsque vous accédez à `/checkout/sidebar/updateItemQty/?item_qty=error` sur le storefront. Auparavant, cette erreur était générée : `Warning: A non-numeric value encountered in /vendor/magento/module-checkout/Controller/Sidebar/UpdateItemQty.php on line 69`. [GitHub-34380](https://github.com/magento/magento2/issues/34380)

<!-- ACP2E-847-->

* Adobe Commerce ne déclenche plus d’erreur `trim(): Passing null to parameter #1 ($string) of type string is deprecated` lorsque la connexion AMPQ est configurée sans configuration SSL.

<!-- AC-2414-->

* Correction de la définition de la base de données `longblog` sur `long blob`. [GitHub-35108](https://github.com/magento/magento2/issues/35108)

<!-- AC-1526-->

* Le texte de masquage contenant des guillemets simples est désormais traduisible. [GitHub-34319](https://github.com/magento/magento2/issues/34319)

<!-- AC-2505-->

* Un `TypeError` dans `magento2/app/code/Magento/Security/Model/AdminSessionsManager.php` a été corrigé de `int` à `string`.  [GitHub-34415](https://github.com/magento/magento2/issues/34415)

<!-- AC-2511-->

* `.htpasswd` a été ajouté à des emplacements interdits dans le fichier de configuration `nginx`. [GitHub-35150](https://github.com/magento/magento2/issues/35150)

<!-- AC-2013-->

* Le temps de chargement des pages de liste de produits de catégorie a été amélioré en ajoutant `Magento_Ui/js/core/app` en tant que `deps` à `app/code/Magento/Ui/view/frontend/requirejs-config.js`. [GitHub-34847](https://github.com/magento/magento2/issues/34847)

<!-- AC-2101-->

* La méthode `ProductRepository.php:get` renvoie désormais les clés de cache une seule fois. Auparavant, ils étaient renvoyés deux fois. [GitHub-34958](https://github.com/magento/magento2/issues/34958)

<!-- AC-2507-->

* Ajout d’un message d’erreur à une nouvelle exception qui a été créée dans le gestionnaire d’exceptions pour les tâches cron. [GitHub-34941](https://github.com/magento/magento2/issues/34941)

<!-- AC-2247-->

* Les fichiers ReadMe pour les modules `GraphQl-GroupedProductGraphQl` ont été mis à jour. [GitHub-34951](https://github.com/magento/magento2/issues/34951)

<!-- AC-2079-->

* Les pages Commande d’impression/facture/Note de crédit du storefront n’affichent plus le logo Luma par défaut au lieu du logo spécifié pour l’affichage sur le site web. [GitHub-34942](https://github.com/magento/magento2/issues/34942)

### Correctifs généraux

<!-- AC-2883-->

* La définition de la taille de session maximale sur 0 (Admin **Magasin** > **Paramètres** > **Configuration - Avancé**) ne déconnecte plus l’administrateur. [GitHub-35312](https://github.com/magento/magento2/issues/35312)

<!-- ACP2E-675-->

* Les paramètres de configuration des attributs d’adresse du client sont désormais chargés correctement en fonction du site web auquel le client est affecté lorsque vous ajoutez une nouvelle adresse du client à partir de l’administrateur affectée à un site web autre que celui par défaut.

<!-- ACP2E-630-->

* La création de catégories est désormais bloquée pour un administrateur restreint sur la page Catégorie et la page de modification du produit. Auparavant, la création de catégories était bloquée sur la page de catégories, mais elle était toujours possible sur la page Modifier le produit .

<!-- ACP2E-448-->

* Adobe Commerce ne renvoie plus d’exception lorsque vous ajoutez un produit de bundle via le Créateur de pages.

<!-- ACP2E-427-->

* Les catégories peuvent désormais être sélectionnées dans l’arborescence des catégories en tant que condition d’un segment client.

<!-- ACP2E-381-->

* Vous pouvez désormais créer un compte client sur un appareil iOS avec l’apostrophe inclinée (’) dans le prénom, le milieu ou le nom. Auparavant, seule l’apostrophe droite était autorisée et l’utilisation de l’apostrophe inclinée par défaut iOS 11+ entraînait une erreur `Name is not valid!`.

<!-- ACP2E-378-->

* La requête `products` renvoie désormais des informations sur les produits qui reflètent précisément la configuration &quot;Afficher les produits associés&quot;. Les champs `related_products`, `upsell_products` et `crosssell_products` de l’interface du produit GraphQL sont désormais résolus conformément à la configuration Afficher les produits associés , Afficher les produits de mise à niveau et Afficher les produits de vente croisée , respectivement.

<!-- ACP2E-234-->

* L’attribut **Définir le produit comme nouveau à partir de la date** affiche désormais la date correcte lorsque l’attribut **Définir le produit comme nouveau** est défini par le biais d’une mise à jour en masse de produit. Auparavant, **Définir le produit comme nouvelle date de début** s’affichait comme **1er janvier 1970**.

<!-- ACP2E-277-->

* Les utilisateurs disposant de rôles restreints n’ont plus automatiquement accès aux nouveaux modules.

<!-- ACP2E-50-->

* Les règles Target basées sur des catégories affichent uniquement les produits de la catégorie déclarée dans la règle. Auparavant, les règles de produit connexes affichaient les produits des catégories qui étaient affectées au produit et non définies dans la règle.

<!-- ACP2E-16-->

* Les conditions de règle de produit connexes fonctionnent désormais comme prévu avec les produits qui contiennent des attributs `multiselect`.

<!-- AC-2719-->

* Les vendeurs peuvent désormais ajouter un attribut de prix de niveau (`tier_price`) aux comparaisons de produits. Auparavant, la page de comparaison des produits se bloquait lorsque le paramètre **Comparable sur le storefront** pour cet attribut était activé. [GitHub-35244](https://github.com/magento/magento2/issues/35244)

<!-- AC-2441-->

* Adobe Commerce affiche désormais un message d’erreur lorsque vous définissez un domaine de cookie non valide (**Magasin** > **Configurations** > **Web** > **Domaine de cookie des paramètres de cookie par défaut**). Auparavant, le site web s’était bloqué. [GitHub-35048](https://github.com/magento/magento2/issues/35048)

<!-- AC-2765-->

* Adobe Commerce ne renvoie plus d’erreur lorsqu’un administrateur avec des rôles définis sur un seul site web ajoute un produit aux éléments de contenu à l’aide de PageBuilder. Auparavant, Adobe Commerce renvoyait une erreur SQL.

<!-- AC-197-->

* La validation a été ajoutée à la deuxième ligne de l’adresse de rue dans les pages d’édition et d’ajout d’adresse. Les longueurs de texte minimale et maximale spécifiées dans la seconde zone sont désormais appliquées.

<!-- ACP2E-798-->

* Adobe Commerce ne renvoie plus l’erreur suivante lors de la création d’une règle de catalogue dans l’administrateur après la mise à niveau : `A technical problem with the server created an error. Try again to continue what you were doing. If the problem persists, try again later`.

<!-- AC-2445-->

* Adobe Commerce ne renvoie plus d’erreur lorsque vous activez la case à cocher **Cochez ici pour lier un flux RSS à votre liste de souhaits** avant de cliquer sur **Partager la liste**. [GitHub-34998](https://github.com/magento/magento2/issues/34998)

<!-- AC-2019-->

* Le titre de la case à cocher **Afficher le mot de passe** (formulaire d’identification du client, d’enregistrement du client, de modification du client (section de modification du mot de passe) et de nouveaux formulaires de mot de passe de l’ensemble de clients) est désormais traduisible. [GitHub-34857](https://github.com/magento/magento2/issues/34857)

<!-- ENGCOM-9062-->

* Mise à jour des libellés et des descriptions de commentaires dans `app/code/Magento/NewRelicReporting/etc/adminhtml/system.xml`. [GitHub-31947](https://github.com/magento/magento2/issues/31947)

<!-- ENGCOM-8600-->

* Suppression des fichiers `csp_whitelist.xml` inutiles. [GitHub-30607](https://github.com/magento/magento2/issues/30607)

### Cartes cadeau

<!-- AC-560-->

* Les requêtes `products` renvoient désormais correctement les données de produit qui contiennent des produits de carte-cadeau avec une clé d’URL `gift-card`.

### GraphQL

<!-- AC-2361-->

* Un attribut `price_range` manquant a été ajouté au type GraphQL `BundleItemOption`. [GitHub-35010](https://github.com/magento/magento2/issues/35010)

<!-- AC-2367-->

* La requête `products` ne renvoie plus d’attributs en tant qu’agrégation lorsque le paramètre de navigation par couches **Utiliser dans les résultats de recherche** est désactivé. [GitHub-33318](https://github.com/magento/magento2/issues/33318)

<!-- AC-1760-->

* Un champ `price_including_tax` a été ajouté à `CartItemPrices`. [GitHub-29057](https://github.com/magento/magento2/issues/29057)

<!-- AC-2520-->

* Les `new_from_data` et `new_to_datefields` de `ProductInterface` ne sont plus obsolètes. [GitHub-34783](https://github.com/magento/magento2/issues/34783)

<!-- AC-2364 1456-->

* La requête `categories` ne renvoie plus d’exception lors de la récupération d’une liste de catégories dont l’une contient une image introuvable sur le système de fichiers. Auparavant, Adobe Commerce lançait cette exception : `Category image not found`. [GitHub-34266](https://github.com/magento/magento2/issues/34266)

<!-- AC-2368-->

* La requête `products` renvoie désormais `category_uid` en tant qu’agrégation comme prévu. [GitHub-32557](https://github.com/magento/magento2/issues/32557)

<!-- AC-2373-->

* La mutation `updateCartItems` supprime désormais les produits comme prévu lorsque le stock de produit a atteint la quantité maximale de stock. [GitHub-30220](https://github.com/magento/magento2/issues/30220)

<!-- AC-2366 734 MC-42964 -->

* La requête `urlResolver` résout désormais correctement le délimiteur de chemin (/) lorsque plusieurs pages d’accueil ont le même identifiant. Auparavant, la requête ne résolvait pas le délimiteur et renvoyait la valeur null. [GitHub-33615](https://github.com/magento/magento2/issues/33615)

<!-- AC-1881-->

* Les requêtes `customer` récupèrent désormais les options de sélection multiple de produit groupées comme prévu lors de l’interrogation des commandes. [GitHub-34717](https://github.com/magento/magento2/issues/34717)

<!-- AC-1668-->

* Les sessions Adobe Commerce ne se terminent plus une fois qu’une requête GraphQL a été effectuée. Auparavant, le module externe `ClearCustomerSessionAfterRequest` déconnectait l’acheteur. [GitHub-34550](https://github.com/magento/magento2/issues/34550)

<!-- AC-818-->

* La requête `products` ne renvoie plus les valeurs `price_range` pour les produits configurables affectés par les variantes désactivées. [GitHub-33629](https://github.com/magento/magento2/issues/33629)

<!-- ACP2E-634-->

* La plage de prix de produit configurable dans les réponses de requête `products` est désormais correctement calculée lorsque le paramètre de configuration **Afficher les produits en rupture de stock** est activé. Auparavant, les options désactivées étaient prises en compte dans le calcul des prix minimum et maximum.

<!-- ACP2E-531-->

* La requête `products` renvoie désormais correctement filtré plusieurs catégories lors du tri par position.

<!-- ACP2E-499-->

* `setShippingAddressesOnCart` demandes valide désormais les identifiants de région. Auparavant, Adobe Commerce générait une erreur lorsque vous utilisiez l’identifiant de région plutôt que le code de région.

<!-- ACP2E-470-->

* Les requêtes `products` ne renvoient désormais que les catégories associées au magasin transmis dans la requête.

<!-- ACP2E-363-->

* La requête `categoryList` renvoie désormais des résultats qui reflètent la catégorie racine du magasin interrogé lorsque le magasin est spécifié dans l’en-tête. Auparavant, les catégories de la catégorie racine par défaut étaient incluses dans les résultats même si un autre magasin était spécifié dans l’en-tête.

<!-- AC-1955-->

* La requête `products` ne renvoie plus d’attributs en tant qu’agrégation lorsque le paramètre **Utiliser dans la navigation par couches des résultats de recherche** est désactivé. [GitHub-33318](https://github.com/magento/magento2/issues/33318)

<!-- AC-2365-->

* La requête `cart` renvoie désormais un seul mode de paiement pour les commandes gratuites. Auparavant, tous les modes de paiement actifs étaient renvoyés dans la réponse de requête. [GitHub-34036](https://github.com/magento/magento2/issues/34036)

<!-- AC-210-->

* Ajout d’un module externe avant l’appel `collectQuoteTotals` pour s’assurer que les crédits de magasin ne sont pas appliqués plusieurs fois.

<!-- ACP2E-636-->

* La mutation `generateCustomerTokenAsAdmin` récupère désormais les jetons client comme prévu. Auparavant, les jetons n’étaient pas renvoyés et cette erreur était renvoyée : `Customer email provided does not exist`.

<!-- AC-2371-->

* Le schéma GraphQL est désormais valide lorsqu’un attribut de produit `type` personnalisé est défini. Auparavant, le schéma n’était pas valide car l’attribut `type` sur les types de produits était remplacé par l’attribut `type` personnalisé. [GitHub-34929](https://github.com/magento/magento2/issues/34929)

<!-- AC-2797-->

* Les clients ajoutés ou mis à jour avec la mutation `createCustomer`, `createCustomerV2`, `updateCustomer` ou `updateCustomerV2` sont désormais ajoutés avec des abonnements actifs à des newsletters. Auparavant, les clients étaient désabonnés des newsletters même lorsque la requête contenait des paramètres d’entrée appropriés. [GitHub-33599](https://github.com/magento/magento2/issues/33599)

<!-- AC-1883-->

* La requête `products` pour une vue de magasin spécifique renvoie désormais uniquement les catégories qui se trouvent dans la catégorie racine du site web spécifique dans un déploiement multisite. Auparavant, la requête renvoyait des catégories issues des catégories racine d’autres sites Web. [GitHub-34570](https://github.com/magento/magento2/issues/34570)

<!-- AC-2712-->

* La requête `products` renvoie désormais uniquement la sous-catégorie de l’ID de catégorie fourni. Auparavant, toutes les catégories étaient renvoyées. [GitHub-35220](https://github.com/magento/magento2/issues/35220)

<!-- AC-2794-->

* La requête `customerOrders` répond désormais comme prévu lorsque l’objet `gift_message` est spécifié dans la réponse, mais qu’aucun message cadeau n’existe. Auparavant, la requête renvoyait ce message : `Can't load gift message for order is returned`. [GitHub-28957](https://github.com/magento/magento2/issues/28957)

<!-- AC-2515-->

* Correction d’un bogue de l’indexeur `catalog_category_product` en raison duquel la requête `products` renvoyait des catégories d’un autre magasin. [GitHub-31253](https://github.com/magento/magento2/issues/31253)

<!-- AC-2063-->

* La mutation `generateCustomerToken` crée désormais une entrée dans `customer_log` comme prévu après la génération d’un jeton client. [GitHub-33378](https://github.com/magento/magento2/issues/33378)

### Google Analytics

<!-- AC-2574 2685-->

* Le module Google Tag a été ajouté au code base, qui prend en charge la transition vers Google Analytics 4 en juillet 2023.  Vous pouvez actuellement utiliser et collecter de nouvelles données dans vos propriétés Google Universal Analytics, mais Google Universal atteindra sa fin de vie en juillet 2023. [GitHub-35204](https://github.com/magento/magento2/issues/35204), [GitHub-35376](https://github.com/magento/magento2/issues/35376)

### Image

<!-- ACP2E-71-->

* Les images sur les pages de détails du produit ne scintillent plus et les images restent centrées comme prévu. Auparavant, une fois qu’une page des détails du produit avait terminé le chargement d’une image, l’image était visiblement déplacée vers le bas.

### Import/export

<!-- ACP2E-676-->

* La position des produits associés, de vente incitative et de vente croisée dans le fichier CSV d’exportation est désormais correcte après la suppression d’un produit de vente croisée de l’administrateur avant de régénérer le fichier CSV. Auparavant, les positions sur les ventes croisées n’étaient pas recalculées après la suppression d’un produit de vente croisée et la commande de position des produits était incorrecte.

<!-- ACP2E-632-->

* Adobe Commerce recherche désormais une vue personnalisée avant de filtrer les colonnes lors de l’exportation de rapports. Auparavant, les rapports exportés ne prenaient pas en compte les vues personnalisées et les colonnes exportées étaient incorrectes.

<!-- ACP2E-502-->

* Adobe Commerce importe désormais correctement les images avec des noms de fichiers longs. Auparavant, Adobe Commerce n’importait pas l’image et envoyait cette erreur : `Imported resource (image) could not be downloaded from external resource due to timeout or access permissions in row(s):`.

<!-- ACP2E-294-->

* Les attributs d’ID de catégorie sont désormais disponibles dans les filtres d’exportation programmés.

<!-- ACP2E-59-->

* Regrouper des produits contenant un point d’interrogation (?) dans le titre de l’option peut désormais être importé avec succès en raison des améliorations apportées à query builder dans la méthode `populateExistingOptions`. Le titre de l’option s’affiche également correctement. Auparavant, après l&#39;importation initiale, les importations successives se traduisaient par un comportement corrompu et doublaient les options. Les acheteurs ne pouvaient pas non plus ajouter le produit au panier.

<!-- ACP2E-766-->

* Ajout de la validation des noms de catégorie lors de l’importation. Auparavant, Adobe Commerce ne valorisait pas les noms de catégorie, ce qui entraînait des erreurs lorsque les noms de catégorie dépassaient 255 caractères.

<!-- AC-2096-->

* Les enregistrements existants dans la table `catalog_url_rewrite_product_category` sont désormais supprimés avant d&#39;en insérer de nouveaux. Auparavant, l’erreur suivante se produisait lors de l’importation de produits multi-magasins : `SQLSTATE[23000]: Integrity constraint violation`. [GitHub-34210](https://github.com/magento/magento2/issues/34210)

### Infrastructure

<!-- ACP2E-2039-->

* Un module externe Context Menu obsolète a été supprimé de la liste des modules externes.

<!-- ACP2E-2039-->

* La logique associée à la barre d’outils de l’éditeur TinyMCE dans le module Page Builder a été mise à jour suite à l’introduction de la logique `delayedRender` pour la barre d’outils dans TinyMCE.

<!-- MC-42655-->

* Les conditions de race n’interrompent plus la création de l’écouteur d’événement `contentUpdated`. [GitHub-32068](https://github.com/magento/magento2/issues/32068)

<!-- AC-3044-->

* La fonction `getTypeID` renvoie désormais l’ID de type de produit et non l’ID de produit. [GitHub-35458](https://github.com/magento/magento2/issues/35458)

<!-- AC-2911-->

* Le curseur de l’interface utilisateur jQuery et le mappage `SelectMenu` ont été corrigés dans `vendor/magento/module-theme/view/base/requirejs-config.js`.

* Les observateurs placés sur `sales_order_state_change_before` prennent désormais en charge la récupération des données à partir de l’objet de commande. L&#39;argument `sales_order_state_change_before` `event` a été mis à jour. [GitHub-26789](https://github.com/magento/magento2/issues/26789)

<!-- AC-2239-->

* `indexer:reset` a été restructuré pour appeler `$indexer->invalidate()`. [GitHub-34988](https://github.com/magento/magento2/issues/34988)

<!-- AC-2055-->

* Vous pouvez désormais utiliser le symbole deux-points dans une valeur d’attribut `htmlClass`, qui prend en charge l’utilisation de composants supplémentaires tels que l’interface utilisateur de Tailwind. [GitHub-34430](https://github.com/magento/magento2/issues/34430)

### Journalisation

<!-- ACP2E-203-->

* Les actions du client, de l’adresse du client et de la commande sont désormais correctement consignées dans le rapport des actions d’administration. Auparavant, Adobe Commerce ne consignait pas les actions si le gestionnaire `postDispatch` n’avait pas été spécifié dans les paramètres de configuration.

### MFTF

#### Groupes d’actions

Les actions répétitives ont été remplacées par des groupes d’actions dans ces tests :

`AdminConfigurableProductChildrenOutOfStockTest` [GitHub-32378](https://github.com/magento/magento2/issues/32378)
`AdminCreateStoreViewTest` [GitHub-34631](https://github.com/magento/magento2/issues/34631)

#### Nouveaux tests

`AdminUnlockAdminUserEntityTest` [GitHub-34836](https://github.com/magento/magento2/issues/34836)

`StorefrontNewsletterSubscriptionWithEnabledNeedToConfirmConfigTest` [GitHub-33344](https://github.com/magento/magento2/issues/33344)

#### Tests restructurés

`AdminCancelTheCreatedOrderWithCashOnDeliveryPaymentMethodTest` [GitHub-33692](https://github.com/magento/magento2/issues/33692)

### Newsletter

<!-- ACP2E-35-->

* Les clients connectés ne sont plus marqués comme invités dans Admin > **Marketing** > **Abonnés à la newsletter**.

<!-- AC-2102-->

* L’adresse électronique de confirmation d’abonnement à la newsletter est désormais celle qui est correcte et spécifique au magasin dans le champ **De** si le client est affecté à un magasin autre que le magasin par défaut et qu’il est abonné ou désabonné de l’administrateur. Auparavant, le client recevait un e-mail par défaut dans l’en-tête **De**. [GitHub-34963](https://github.com/magento/magento2/issues/34963)

<!-- AC-2509-->

* L’URL de désabonnement dans le modèle d’email de newsletter fonctionne désormais comme prévu. [GitHub-33310](https://github.com/magento/magento2/issues/33310)

### Commande

<!-- ACP2E-550-->

* Vous pouvez désormais créer un client à partir d’une nouvelle commande avec des attributs de client personnalisés masqués du storefront. Auparavant, Adobe Commerce n’enregistrait pas les valeurs correctes pour l’attribut client personnalisé.

<!-- ACP2E-279-->

* Les détails du client invité sont désormais enregistrés avec succès après la modification d’une commande. Auparavant, certains détails du client étaient perdus, y compris `customer_firstname` et `customer_lastname, x_forwarded_for`.

<!-- ACP2E-92-->

* Les commerçants ne peuvent plus créer d’avoir avec une quantité totale décimale lorsque **Nombre décimal** est désactivé au niveau d’un produit ou d’un paramètre global. Auparavant, les marchands pouvaient créer un avoir pour la quantité totale décimale lorsqu’elle n’était pas applicable.

<!-- ACP2E-56-->

* Le filtrage par date fonctionne désormais correctement pour les grilles de blocage des factures, des envois, des notes de crédit, des pages CMS et CMS lorsque le fuseau horaire défini dans les préférences diffère du fuseau horaire défini sur un ordinateur local. Auparavant, la date était incorrectement analysée et les résultats filtrés incluaient des données en dehors de la période définie.

<!-- AC-1536-->

* Adobe Commerce ne modifie plus les adresses électroniques personnalisées qui sont affectées aux commandes lorsque vous modifiez l’adresse électronique principale affectée au client sur la page de modification du compte d’administrateur. Auparavant, lorsque vous aviez modifié l’adresse électronique principale d’un client, la nouvelle adresse électronique était affectée à chaque commande créée pour ce client. [GitHub-34397](https://github.com/magento/magento2/issues/34397)

<!-- AC-2664-->

* Adobe Commerce affiche désormais les enregistrements de la banque demandée sur la page de grille des notes de crédit dans les déploiements exécutant PHP 7.4. Auparavant, Adobe Commerce générait l’erreur suivante après avoir créé une note de crédit et tenté de la visualiser : `The store that was requested wasn't found. Verify the store and try again`.

<!-- AC-2442-->

* Adobe Commerce affiche désormais des notes de crédit sur la page de grille des notes de crédit pour les commandes créées à partir de vues de magasins dont le nom est précédé de chiffres. Auparavant, Adobe Commerce affichait l’erreur : `The store that was requested wasn't found. Verify the store and try again. Exception in /var/www/html/vendor/magento/module-store/Model/StoreRepository.php:75`. [GitHub-35122](https://github.com/magento/magento2/issues/35122)

<!-- ACP2E-31-->

* Adobe Commerce affiche désormais le coût de livraison gratuit (0) sur les totaux de la page des factures d’administrateur et de vitrine. Auparavant, lorsque l’expédition était égale à zéro pour une commande, Adobe Commerce n’affichait pas le montant total de l’expédition sur le total de l’expédition de la page de facture.

<!-- ACP2E-740-->

* Adobe Commerce affiche désormais l’état de commande correct lors de l’extraction lorsque le crédit de la boutique client est utilisé.

<!-- AC-1778-->

* La colonne `increment_id` de la table `sales_order` a été augmentée. Auparavant, les modules tiers qui supposaient que `sales_order.increment_id` comportait une longueur de 50 caractères, enregistraient uniquement les 32 premiers caractères d’un `increment_id`. [GitHub-34521](https://github.com/magento/magento2/issues/34521)

### Modes de paiement

<!-- ACP2E-25-->

* Les administrateurs peuvent désormais passer une commande sur l’administrateur à l’aide du mode de paiement PayPal PayflowPro. Auparavant, Adobe Commerce affichait cette erreur : `No such entity with cartId = 0`.

<!-- AC-2093-->

* La page Révision des paiements du workflow de passage en caisse affiche désormais le nom du mode de paiement correct lorsque le paiement est effectué avec Venmo, PayPal ultérieurement ou PayPal.

<!-- AC-1195-->

* La requête `cart` ne renvoie plus tous les modes de paiement actifs pour les commandes gratuites. [GitHub-34036](https://github.com/magento/magento2/issues/34036)

#### Braintree

<!-- BUNDLE-3088-->

* Les vendeurs peuvent désormais soumettre un remboursement partiel pour les commandes payées avec Apple Pay par le biais du Braintree. Ce problème était connu dans Adobe Commerce 2.4.4.

#### PayPal

<!-- ACP2E-296-->

* Adobe Commerce affiche désormais le nom du client correct dans une commande d’invité payée avec PayPal. Auparavant, le nom du client s’affichait comme invité.

<!-- AC-2606-->

* Le résolveur de la mutation createPaypalExpressToken a été mis à jour afin d’utiliser correctement la valeur spécifiée dans le champ d’entrée use_paypal_Credit. Auparavant, il tentait d’utiliser un champ `paypal_credit` non valide. [GitHub-35180](https://github.com/magento/magento2/issues/35180)

### Performances

<!-- ACP2E-474-->

* Les performances du chargement dynamique de blocs ont été améliorées. Auparavant, les segments de visiteur n’étaient pas mis en cache par site web, ce qui entraînait la création de requêtes redondantes dans la base de données pour les mêmes données.

<!-- ACP2E-52-->

* La gestion du cache des segments a été améliorée grâce à l’ajout de TTL (date d’expiration) pour les caches de données de produits configurables associés. Auparavant, ces caches n’étaient pas expulsés en raison de valeurs TTL manquantes si la stratégie d’expulsion clé Redis était configurée sur une politique d’expulsion volatile.

<!-- ACP2E-464-->

* Le nouvel attribut d’adresse client/client `Grid Filter Condition Type` contrôle la manière dont un filtre d’attribut est mis en correspondance avec les valeurs d’attribut dans la base de données. Les options incluent `Partial Match`, `Prefix Match` et `Full Match`.

<!-- AC-1136-->

* L’indexeur de texte intégral de recherche catalogue a été déplacé en dehors de la boucle stores, ce qui simplifie la réindexation. [GitHub-33984](https://github.com/magento/magento2/issues/33984)

<!-- AC-2508-->

* Correction d’un problème lié à `array_merge` dans les boucles. [GitHub-33929](https://github.com/magento/magento2/issues/33929)

### Tarifs

<!-- ACP2E-445-->

* Les attributs de prix qui n’ont pas de valeur dans la portée par défaut (mais qui sont définis au niveau de la vue de magasin) sont désormais correctement indexés. Auparavant, les expressions SQL récupérant les valeurs des attributs de prix dans la table EAV ne prenaient pas en compte le scénario dans lequel la valeur n’était pas définie dans la portée par défaut.

<!-- ACP2E-313-->

* Le prix indiqué sur la page des détails du produit est désormais le même que le prix indiqué dans le workflow de passage en caisse pour les prix de niveau qui diffèrent par la quantité sélectionnée (par exemple, un produit dont le prix est différent en achetant 2 articles et 5 articles). Auparavant, le prix de passage en caisse reflétait le prix de la plus faible quantité de produits.

### Promotions

<!-- ACP2E-690-->

* La valeur **fois utilisées** pour une remise n’est plus incrémentée deux fois lorsqu’un client invité passe une commande avec une remise et enregistre ensuite un compte.

### ReCAPTCHA

* Le bouton **Envoyer** des pages Connexion et Créer un compte est maintenant inactif jusqu’à ce que ReCaptcha soit complètement chargé.

### Autorisations de marchandisage de retour (RMA)

<!-- MC-40432-->

* Le point d’entrée `GET /V1/returnsAttributeMetadata` fonctionne désormais correctement lorsque l’identifiant de jeu d’attributs par défaut de l’entité `rma_item` diffère de l’identifiant d’installation par défaut. Auparavant, ce point de terminaison renvoyait un résultat vide si ces identifiants différaient.

<!-- ACP2E-247-->

* La case à cocher **Utiliser la valeur par défaut**, qui est utilisée pour activer la RAM sur la page de modification du produit, fonctionne désormais comme prévu pour le magasin par défaut. Auparavant, la case à cocher était décochée immédiatement après l’enregistrement du produit.

### Références

<!-- ACP2E-433-->

* Les points de récompense peuvent désormais être remboursés lorsque la fonctionnalité de crédit de magasin est désactivée.

<!-- ACP2E-757-->

* Les performances de passage en caisse ont été améliorées lorsque des points de récompense sont appliqués. Lorsque `entity` est nul, la requête de base de données ne sera pas exécutée car l’interrogation de la table `magento_reward_history` n’est pas obligatoire dans les circonstances.

<!-- ACP2E-674-->

* Les notes de crédit pour les commandes d’invités ne sont plus prises en compte pour `customer_id`, qui ignore l’interrogation de la table de base de données `magento_reward_history` pour les points de récompense. Cette modification a amélioré les performances.

### Rôles

* La page **Magasin** > **Configuration** > **Services** affiche désormais les informations d’API Web Adobe Commerce comme prévu lorsque l’accès aux ressources est défini sur **Personnalisé** dans l’onglet Ressources du rôle. [GitHub-35506](https://github.com/magento/magento2/issues/35506)

### Rechercher {#search-heading}

<!-- ACP2E-645-->

* Le filtrage des produits par échantillon de couleur sur la navigation par couches affiche l’image correcte des produits après le correctif.

<!-- ACP2E-615-->

* Les requêtes Elasticsearch fonctionnent désormais comme prévu lorsque `int` est configuré comme un attribut `type` principal pouvant faire l’objet d’une recherche. Auparavant, Adobe Commerce lançait une exception `Elasticsearch\Common\Exceptions\BadRequest400Exception`.

<!-- ACP2E-99-->

* Vous pouvez désormais utiliser des synonymes de recherche avec le paramètre **Minimum Terms to Match** dans les requêtes Elasticsearch. Auparavant, si ce paramètre était spécifié dans les paramètres et que des termes de recherche étaient ajoutés pour des mots-clés spécifiques, la recherche ne renvoyait aucun résultat.

<!-- ACP2E-72-->

* Adobe Commerce affiche désormais un nombre précis de suggestions de résultats de recherche sur le storefront dans les déploiements où les suggestions de recherche et le paramètre **Afficher le nombre de résultats pour chaque suggestion** sont activés. Auparavant, le nombre affiché en regard des mots-clés était nul.

<!-- AC-700-->

* Les produits triés par attributs personnalisés sur la page Catalogue s’affichent désormais dans l’ordre prévu. Auparavant, les produits étaient triés selon leur identifiant de valeur d’option d’attribut, qui reflète l’ordre dans lequel ils ont été ajoutés à l’attribut . [GitHub-33810](https://github.com/magento/magento2/issues/33810)

<!-- AC-645-->

* Le filtrage des produits par échantillon de couleur dans la navigation par couches affiche désormais les images de produit correctes. Auparavant, la clé de navigation par couches `PageCache` n’incluait pas de paramètres de filtre pour les produits configurables.

<!-- AC-2051-->

* Correction des erreurs PHP sur le `catalogsearch/advanced/result` et  `catalogsearch/advanced/index` pages.  Auparavant, Adobe Commerce affichait cette erreur lorsqu’un tableau était transmis dans une chaîne de recherche avancée : `Warning: trim() expects parameter 1 to be string, array given | magento/module-catalog-search`. [GitHub-33586](https://github.com/magento/magento2/issues/33586)

### Expédition

<!-- AC-2052-->

* Adobe Commerce ne renvoie plus d’erreur lors du chargement des tarifs d’expédition UPS si aucun mode d’expédition autorisé n’est sélectionné. Auparavant, lorsqu’un acheteur saisissait une adresse de livraison dans le workflow de passage en caisse dans ces conditions, aucune autre méthode de livraison n’était affichée et Adobe Commerce affichait une erreur sur le storefront. [GitHub-34411](https://github.com/magento/magento2/issues/34411)

<!-- AC-2621-->

* Les prix des produits virtuels sont désormais exclus dans le calcul du montant des frais d’expédition des taux tabulaires. Auparavant, les frais d’expédition pour ces produits n’étaient pas correctement calculés.[GitHub-35185](https://github.com/magento/magento2/issues/35185)

<!-- ACP2E-209-->

* Les taux d’expédition des taux d’expédition par table avec zéro prix s’affichent désormais correctement dans le bloc Résumé de la commande du workflow de passage en caisse pour les commandes pour lesquelles un coupon de réduction a été appliqué. Auparavant, le mode de livraison n’était pas affiché.

### Évaluation

<!-- ACP2E-404-->

* Adobe Commerce ne nettoie plus le cache de la page entière après l’application d’une mise à jour intermédiaire pour une règle de vente dans laquelle les pages mises en cache restent inchangées.

<!-- ACP2E-304-->

* Le tableau de bord intermédiaire du contenu n’affiche plus les mises à jour permanentes inactives.

<!-- ACP2E-257-->

* La modification de la date de fin d’une mise à jour intermédiaire à partir du tableau de bord intermédiaire applique désormais ces modifications à la mise à jour intermédiaire et à ses entités. (Une file d’attente a été introduite pour traiter les modifications des mises à jour intermédiaires.)

<!-- ACP2E-238-->

* Les vendeurs peuvent désormais supprimer une date de fin pour une mise à jour planifiée ou supprimer et recréer une mise à jour. Auparavant, lorsqu’une date de fin était supprimée, une entité restait planifiée pour cette période. Adobe Commerce supprime désormais la mise à jour obsolète de la restauration supprimée.

<!-- ACP2E-149-->

* Les mises à jour de planification actives d’une page CMS sont désormais visibles comme prévu dans la section Modifications planifiées de la page CMS.

<!-- ACP2E-81-->

* La valeur d’attribut `custom_design_to` est désormais mise à jour comme prévu lorsqu’une mise à jour planifiée est modifiée. Auparavant, deux mises à jour distinctes de conception de catégorie sans heure de fin étaient traitées comme une seule. Lorsque l’une des mises à jour planifiées a été supprimée alors que la première était en cours d’exécution, la valeur d’heure `custom_design_from` est devenue supérieure aux valeurs d’heure `custom_design_to` lors de la mise à jour planifiée suivante.

<!-- ACP2E-58-->

* Les données de Forms sont désormais renseignées comme prévu après la modification d’une mise à jour planifiée.

<!-- ACP2E-18-->

* Le correctif de données `vendor/magento/module-catalog-staging/Setup/Patch/Data/MigrateCatalogProducts.php` n’échoue plus lorsque la base de données inclut un produit avec des options personnalisées et que l’attribut `special_from_date` est défini.

<!-- ACP2E-741-->

* Les modifications sont désormais enregistrées lors d’une seconde mise à jour planifiée lorsque les modifications sont ajoutées par la mise à jour en cours. Auparavant, les modifications n’étaient pas enregistrées et les commerçants devaient revenir à la page et enregistrer les modifications.

<!-- ACP2E-21-->

* Le journal des actions en bloc affiche désormais des informations sur les mises à jour planifiées `to be moved` ayant échoué. Auparavant, les informations sur ces échecs étaient disponibles uniquement dans le fichier `cron.log` .

<!-- ACP2E-420-->

* Les commerçants sont désormais limités à l’utilisation de prix séparés par des virgules lors de la modification du prix d’un produit dans une mise à jour planifiée, quel que soit le paramètre régional. Auparavant, les prix contenant des virgules dans une mise à jour planifiée étaient divisés par 1 000 selon le paramètre régional.

<!-- AC-3214-->

* Les problèmes liés à l’expédition nationale de DHL dans les déploiements exécutant PHP 8.1 ont été résolus en exigeant des balises défendables pour les envois internationaux uniquement.

### Taxe

<!-- ACP2E-735-->

* La taxe sur les produits fixes (FPT) s’affiche désormais correctement pour les produits du panier. Auparavant, si plusieurs produits du panier contenaient la **taxe fixe sur les produits (FPT)** et l’option **Appliquer la taxe à FPT** étaient activées, tous les FPT étaient affectés au dernier produit du panier et réinitialisés pour d’autres produits.

<!-- ACP2E-350-->

* Le total Taxe fixe des produits (FPT) de la section Synthèse des commandes du workflow de passage en caisse est désormais correctement calculé.

<!-- ACP2E-291-->

* Adobe Commerce met à jour le prix du niveau Taxe d’exclusion pour un produit simple sur la page du produit comme prévu une fois la quantité du produit simple modifiée.

<!-- ACP2E-182-->

* La validation a été ajoutée à la page de configuration du magasin pour vérifier si le pays sélectionné dans la liste déroulante se trouve dans la liste des pays de l’UE. Le bouton **Valider le numéro de TVA** est désormais visible uniquement pour les pays de l&#39;UE. Auparavant, le bouton était visible pour tous les pays, y compris le Royaume-Uni.

<!-- ACP2E-45-->

* Le prix de niveau est maintenant correctement calculé lorsque l’option **Afficher les prix des produits dans le catalogue** est définie sur **Exclure la taxe** ou **Inclusion et exclusion de la taxe**. Auparavant, la page de détails du produit affichait les prix du niveau avec les taxes, malgré le paramètre .

<!-- AC-1925-->

* Les taxes sont désormais correctement appliquées pour les commandes à toute adresse valide dans les vitrines, en utilisant la langue portugaise. [GitHub-34271](https://github.com/magento/magento2/issues/34271)

<!-- AC-1084-->

* La requête `cart` n&#39;inclut plus la taxe lors du renvoi de `subtotal_with_discount_excluding_tax`. [GitHub-33905](https://github.com/magento/magento2/issues/33905)

<!-- ACP2E-651-->

* Les demandes d’API Web pour les données de commande (`GET /V1/orders/`) ne renvoient plus de valeurs négatives pour les totaux de ligne.

### Test

<!-- AC-2004-->

* Correction des erreurs avec `Magento.GraphQl.CatalogGraphQl.ProductSearchTest.testSearchSuggestions` lors de l’exécution avec la configuration de l’Elasticsearch AWS.

<!-- AC-1113-->

* Le test d’intégration `testCreateProductOnStoreLevel` n’entraîne plus de transaction imbriquée sur la base de données.

* L’exception suivante ne se produit plus lors de l’exécution de tests WebAPI pour la fonction Envoyer l’ami lorsque l’image du produit n’a pas été définie sur PHP 8.1 : `exception main.ERROR: /var/www/html/lib/internal/Magento/Framework/DataObject.php:131 strpos(): Passing null to parameter #1 ($haystack) of type string is deprecated`. [GitHub-34864](https://github.com/magento/magento2/issues/34864)

### Traductions et paramètres régionaux

<!-- ACP2E-537-->

* Vous pouvez désormais utiliser l’outil Traduire en ligne pour éditer le même élément plusieurs fois. Auparavant, seule la première modification effectuée à l’aide de cet outil était incluse.

<!-- ACP2E-437-->

* Le sélecteur de vue de magasin ne bloque plus le volet de traduction lorsque vous modifiez le texte ou les libellés de l’administrateur. Vous pouvez désormais modifier ces fonctionnalités à partir du volet de traduction, et l’interface affiche ces modifications lorsque vous cliquez sur **Envoyer**.

<!-- ACP2E-362-->

* Le format de date et d&#39;heure d&#39;administration pour les langues brésilienne française et portugaise est désormais valide.

<!-- ACP2E-785-->

* Ajout d’un caractère [\`] avec un accent grave dans le programme de validation des noms afin de pouvoir créer un compte client pour les prénoms ou les noms contenant cet accent.

<!-- ACP2E-682-->

* Le texte du bouton **Ajouter au panier** de la page Détails du produit reste désormais traduit dans la langue spécifiée dans la langue associée. Les fichiers de traduction sont désormais convertis en fichiers JavaScript correspondants en fonction des zones, des thèmes et des paramètres régionaux lorsque `translate_strategy=embedded` est utilisé. Auparavant, le texte était rétabli en anglais une fois le produit ajouté au panier.

<!-- ACP2E-752-->

* Les synchronisations de recherche respectent désormais la portée de magasin qui leur est assignée. Auparavant, un synonyme affecté à un magasin spécifique pouvait faire l’objet de recherches dans n’importe quel autre magasin.

<!-- AC-1178-->

* Problèmes avec la région philippine (Philippines) résolus. [GitHub-33996](https://github.com/magento/magento2/issues/33996)

### Interface utilisateur

<!-- ACP2E-557-->

* Les noms de produits longs dans la grille **Catalog** > **Products** sont désormais encapsulés dans un mot au lieu d’être affichés sur une seule ligne.

<!-- ACP2E-347-->

* La plage de dates minimale et maximale est désormais enregistrée en tant qu’horodatage correct, puis convertie d’un horodatage valide en un format de date valide.

<!-- ACP2E-280-->

* L’indisponibilité de `magento.com` n’entraîne plus de problèmes de performances lors de la connexion à l’administrateur. Ajout d’un délai d’expiration sur la demande de récupération de la notification de mise à jour -

<!-- ACP2E-88-->

* Les résultats des filtres de grille de commande, de client et de produit de l’administrateur persistent désormais comme prévu lorsqu’ils sont affichés dans le navigateur Chrome.

<!-- AC-2750-->

* Vous pouvez désormais créer un client à partir de l’administrateur lorsque `Magento_LoginAsCustomerAdminUi` est activé et que l’option **Affichage magasin pour se connecter à** est définie sur une sélection manuelle. Auparavant, Adobe Commerce générait cette erreur : `(Magento\Framework\Exception\LocalizedException): Unable to get Customer ID`. [GitHub-33096](https://github.com/magento/magento2/issues/33096)

<!-- AC-2076-->

* La flèche Suivant est désormais désactivée lorsqu’un acheteur atteint la dernière image miniature de la galerie d’images du produit.

<!-- AC-2060-->

* Le champ d’entrée **Rechercher par mot-clé** comporte désormais un élément `aria-label` au lieu d’un espace réservé sur la page **Catalogue** > **Produit**.

<!-- AC-3058-->

* Le lien Politique de confidentialité dans le pied de page Admin pointe désormais vers la nouvelle Politique de confidentialité d’Adobe.

<!-- AC-2880-->

* Les administrateurs peuvent désormais accéder aux options du menu Admin lorsque le regroupement JavaScript est activé en mode de production.  [GitHub-35325](https://github.com/magento/magento2/issues/35325)

<!-- AC-2851-->

* Les administrateurs peuvent désormais définir la date d’expiration de l’utilisateur actuel au-delà de 2038 et enregistrer l’utilisateur avec succès. Auparavant, l’utilisateur dont la date d’expiration était modifiée ne pouvait pas se reconnecter après s’être déconnecté.

<!-- AC-751-->

* Adobe Commerce affiche désormais un message d’erreur informatif lorsqu’un administrateur tente d’enregistrer une adresse avec des lignes de rues excessives dans Admin **Magasin** > **Attributs** > **Adresse client**.  L&#39;administrateur peut désormais supprimer les informations d&#39;adresse supplémentaires et enregistrer l&#39;adresse avec succès. Auparavant, Adobe Commerce valorisait les lignes supplémentaires, mais n’enregistrait pas les données.

<!-- ACP2E-546-->

* La configuration de la vue Liste de produits dans la base de données et le stockage local a été mise à jour. Les vues de grille personnalisées sont désormais enregistrées lors du rechargement de la page et des modifications de l’affichage.

<!-- ACP2E-747-->

* Vous pouvez désormais basculer entre les vues de magasin lorsque les restrictions du site web sont activées. Auparavant, les problèmes liés au sélecteur d’affichage de magasin empêchaient le changement d’affichage de magasin.

<!-- AC-2042-->

* Le formulaire de téléchargement de l’icône favicon prend désormais en charge les types de fichiers `.ico`. Auparavant, lorsque vous tentiez de charger un fichier favicon avec ce type d’extension dans l’Admin, Adobe Commerce affichait cette erreur : `Warning: imagecreatefromstring(): one parameter to a memory allocation multiplication is negative or zero, failing operation gracefully in /var/www/html/vendor/magento/module-media-storage/Model/File/Validator/Image.php on line 64`. [GitHub-34858](https://github.com/magento/magento2/issues/34858)

<!-- AC-3122-->

* Correction des problèmes d’affichage avec le menu déroulant Sélectionner dans la grille Admin. [GitHub-35386](https://github.com/magento/magento2/issues/35386)


### URL rewrites

<!-- AC-2535-->

* Les URL d’un produit dans une vue de magasin spécifique sont désormais supprimées de la table `url_rewrite` et l’administrateur après que l’état de visibilité du code d’attribut pour la vue de magasin spécifique a été remplacé par **Non visible individuellement**.  Auparavant, toutes les URL étaient supprimées pour le produit dans la table `url_rewrite`. [GitHub-34937](https://github.com/magento/magento2/issues/34937)

### Vidéo

<!-- ACP2E-485-->

* Vous pouvez désormais utiliser les paramètres d’URL YouTube à l’aide du Créateur de pages pour ajouter une nouvelle vidéo. Auparavant, ces paramètres étaient automatiquement supprimés de l’URL.

<!-- AC-2251-->

* Vous pouvez désormais définir une vidéo Vimeo pour qu’elle s’exécute en arrière-plan dans un élément `banner` lorsque la stratégie de sécurité du contenu est définie sur `restrict mode`. Auparavant, Adobe Commerce renvoyait une erreur JavaScript.

### Structure de l’API web

<!-- ACP2E-694-->

* Mutex a été mis en oeuvre pour les commandes afin d’empêcher les conditions de concurrence lors de la mise à jour par des requêtes simultanées. Auparavant, les conditions de concurrence lors d’appels d’API REST simultanés entraînaient le remplacement des informations d’état de livraison dans le tableau Admin Items Ordered .

<!-- ACP2E-677-->

* L’héritage des rôles d’image de produit est désormais conservé, sauf s’il est explicitement défini dans la payload lors de la mise à jour d’un produit dans une vue de magasin spécifique via l’API REST.

<!-- AC-2231-->

* Le schéma Swagger (`/rest/schema`) utilise désormais des identifiants d’opération uniques.

<!-- AC-2845-->

* Les règles de prix du panier créées via le point de terminaison `POST /V1/salesRules/` conservent désormais les valeurs de code de bon existantes après avoir changé l’état désactivé en activé. [GitHub-35298](https://github.com/magento/magento2/issues/35298)

<!-- AC-2764-->

* Les règles de prix du panier créées via le point de terminaison `POST /V1/salesRules/` contiennent désormais des valeurs `from_date` et `to_date` valides. [GitHub-35265](https://github.com/magento/magento2/issues/35265)

<!-- AC-2522-->

* `CartItemInterface` comprend désormais `customizable_options`. [GitHub-31180](https://github.com/magento/magento2/issues/31180)

<!-- AC-2898-->

* Les demandes de PUT et de DELETE en masse de l’API REST fonctionnent désormais comme prévu lorsque le module `Magento_ReCaptchaWebapiRest` est activé. [GitHub-35348](https://github.com/magento/magento2/issues/35348)

<!-- AC-763-->

* L’API Bulk Rest fonctionne désormais avec l’option `bySku` pour les produits configurables. Auparavant, il renvoyait une erreur 500.

<!-- AC-1169-->

* Le point d’entrée `/V1/products/base-prices` fonctionne désormais comme prévu avec le **mode de prix catalogue - site web**. [GitHub-30132](https://github.com/magento/magento2/issues/30132)

<!-- AC-441-->

* La création d’un nouveau planning de prix spécial avec le point d’entrée `POST /V1/products/special-price` fonctionne désormais comme prévu. Auparavant, le point de terminaison renvoyait cette erreur : `Future Update already exists in this time range. Set a different range and try again`.

### Liste de souhaits

<!-- ACP2E-459-->

* La mise à jour de la quantité d’un article à partir de la page de liste de souhaits met désormais à jour la quantité sur la page des détails du produit comme prévu. Adobe Commerce récupère désormais la valeur mise à jour de l’URL du produit et renseigne le champ `qty` de la page des détails du produit à partir de la liste des souhaits elle-même.

## Problèmes connus

**Problème** : les étiquettes de règles de vente intermédiaire peuvent ne pas correspondre après une mise à niveau vers Adobe Commerce 2.4.6 ou version ultérieure à partir de versions de produit antérieures à la version 2.4.5. **Solution** : appliquez ACSD-50625_2.4.5-P1.patch avant l’étape de mise à jour des métadonnées. Reportez-vous à l’article [problèmes d’étiquettes salesRules lors de la mise à niveau à partir des versions &lt; 2.4.5](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/troubleshooting/known-issues-patches-attached/salesrule-label-issues-when-upgrade-from-versions-under-2.4.5.html) de la base de connaissances.

Étapes générales pour résoudre ce problème :

1. Téléchargez le correctif requis. Reportez-vous à l’article [problèmes d’étiquettes salesRules lors de la mise à niveau à partir des versions &lt; 2.4.5](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/troubleshooting/known-issues-patches-attached/salesrule-label-issues-when-upgrade-from-versions-under-2.4.5.html) de la base de connaissances.
2. Suivez les étapes de mise à niveau décrites dans la phase de gestion des packages du processus de mise à niveau [Effectuer une mise à niveau](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/implementation/perform-upgrade.html).
3. Appliquez ce correctif lors de la mise à niveau après la phase de gestion des packages et avant la phase de mise à jour des métadonnées. Voir [Comment appliquer un correctif de compositeur fourni par Adobe](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/how-to/how-to-apply-a-composer-patch-provided-by-magento.html) .
4. Terminez le processus de mise à niveau.

**Problème** : les utilisateurs administrateurs ne peuvent pas créer de commande ou de réorganisation pour les clients à partir de l’administrateur lorsque Braintree est activé. Lorsque l’utilisateur administrateur clique sur **Order** ou **Reorder**, Adobe Commerce n’envoie pas la commande et le `system.log` affiche cette erreur : `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`.  **Solution** : `BUNDLE-3137-composer.patch` est désormais disponible. Consultez l’article [L’administrateur ne peut pas créer de commande/réorganisation lorsque le paiement du Braintree est activé](https://support.magento.com/hc/en-us/articles/8322266352525) de la base de connaissances pour une discussion sur ce problème et l’accès au correctif. Les commerçants cloud doivent télécharger les correctifs cloud pour Commerce v1.0.18. Un correctif sera également inclus dans Adobe Commerce 2.4.5-p1. <!-- AC-6222-->

**Problème** : [!DNL RabbitMQ] éléments d’infrastructure (exchanges, files d’attente) peuvent ne pas être initialisés après une nouvelle installation (pas la mise à niveau) d’Adobe Commerce 2.4.5. Cette configuration incorrecte de [!DNL RabbitMQ] peut entraîner une erreur fatale lors de l’exécution d’opérations asynchrones ou de la génération d’un profil de performances. Les déploiements dans le cloud ne sont pas affectés. **Solution** : les vendeurs qui effectuent une nouvelle installation d’Adobe Commerce 2.4.5 sur site doivent exécuter `bin/magento setup:upgrade --keep-generated` après avoir utilisé `bin/magento setup:config:set` pour configurer [!DNL RabbitMQ] ou installer Adobe Commerce en transmettant [!DNL RabbitMQ] options de configuration à la commande `setup:install`. Voir [[!DNL RabbitMQ]](../../../installation/prerequisites/rabbitmq.md).

## Contributions de la communauté

Nous sommes reconnaissants à l’ensemble de la communauté des Magento Open Sources et tenons à saluer leurs contributions à cette version.

L’équipe d’ingénierie de communauté [contributeurs Magento](https://magento.biterg.io/app/kibana) conserve une liste des principaux contributeurs et partenaires par mois, trimestre et année. Sur cette page Contributeurs, vous pouvez suivre les liens vers leurs relations publiques fusionnées sur GitHub.

### Contributions des partenaires

Le tableau suivant présente les contributions des partenaires. Ce tableau répertorie le partenaire qui a contribué à la demande d’extraction, le numéro de la demande d’extraction externe et le numéro de problème GitHub qui lui est associé (le cas échéant).

{{$include /help/_includes/release-notes/engcomm-2-4-5-partner.md}}

### Contributions des contributeurs individuels

Le tableau suivant répertorie les contributions des membres de notre communauté. Ce tableau répertorie les membres de la communauté ayant contribué à la demande d’extraction, le numéro de la demande d’extraction externe et le numéro de problème GitHub qui lui est associé (le cas échéant).

{{$include /help/_includes/release-notes/engcomm-2-4-5-issues.md}}

## Configuration requise

Notre pile de technologie est basée sur PHP et MySQL. Pour plus d’informations, voir [Configuration requise](../../../installation/system-requirements.md).

## Instructions d’installation et de mise à niveau

Vous pouvez installer Adobe Commerce 2.4.5 à l’aide de [Composer](../../../installation/composer.md).
