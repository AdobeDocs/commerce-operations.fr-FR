---
title: Notes de mise à jour de Magento Open Source 2.4.3
description: Découvrez les nouvelles fonctionnalités, les améliorations, les correctifs de bogues et les problèmes connus de la version 2.4.3 du Magento Open Source.
recommendations: noCatalog
exl-id: fba0e147-1aa2-4c41-bc7d-51dd6755e014
source-git-commit: 1eaf2329c16e6dbe3e93cb7fff3a6920b4b8379d
workflow-type: tm+mt
source-wordcount: '12744'
ht-degree: 0%

---

# Notes de mise à jour de Magento Open Source 2.4.3

Magento Open Source 2.4.3 comprend des améliorations des performances et de la sécurité ainsi que des améliorations importantes de la plateforme. Les améliorations de sécurité comprennent l’extension de la couverture reCAPTCHA et l’inclusion de la limitation de débit intégrée. Les dépendances des compositeurs principaux et les bibliothèques tierces ont été mises à niveau vers les dernières versions compatibles avec PHP 8.x. Le créateur de pages est désormais disponible en tant qu’extension regroupée dans Magento Open Source. Il s’agit désormais de l’outil d’édition de contenu par défaut pour Adobe Commerce et Magento Open Source.

Cette version comprend plus de 370 nouveaux correctifs pour le code principal et 33 améliorations de sécurité. Elle comprend la résolution de près de 290 problèmes GitHub par les membres de notre communauté. Ces contributions de la communauté vont du nettoyage mineur du code principal à des améliorations significatives dans GraphQL.

Cette version comprend plus de 370 nouveaux correctifs pour le code principal et 33 améliorations de sécurité. Tous les problèmes connus identifiés dans les notes de mise à jour de Magento Open Source 2.4.2 ont été corrigés dans cette version.

{{bics}}

Pour plus d’informations sur Adobe Commerce 2.4.2-p2, voir [Notes de mise à jour d’Adobe Commerce 2.4.2-p2](../security/2-4-2-patches.md) .

## Autres informations de mise à jour

Bien que le code de ces fonctionnalités soit fourni avec des versions trimestrielles , plusieurs de ces projets (par exemple, Progressive Web Application (PWA) Studio) sont également publiés indépendamment. Les correctifs de bogues pour ces projets sont documentés dans les informations de mise à jour distinctes et spécifiques au projet disponibles dans la documentation de chaque projet.

## Appliquez `AC-3022.patch` pour continuer à proposer DHL comme opérateur de transport

DHL a introduit la version 6.2 du schéma et va abandonner la version 6.0 dans un avenir proche. Adobe Commerce 2.4.4 et les versions antérieures qui prennent en charge l’intégration DHL ne prennent en charge que la version 6.0. Les commerçants qui déploient ces versions doivent appliquer `AC-3022.patch` dès que possible pour continuer à proposer DHL en tant qu&#39;opérateur de transport. Pour plus d’informations sur le téléchargement et l’installation du correctif, reportez-vous à l’article [Appliquer un correctif pour continuer à proposer DHL comme opérateur de transport](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) de la base de connaissances.

## Appliquez MC-43048__set_rate_limits__2.4.3.patch pour résoudre le problème de limitation du débit de l’API.

Ce correctif fournit une solution au problème où les API Web ne peuvent pas traiter les demandes qui contiennent plus de 20 éléments dans un tableau. Ce problème affecte les déploiements exécutant Magento Open Source 2.4.3, Adobe Commerce 2.4.3 ou 2.3.7-p1. La limitation de débit intégrée a été ajoutée à ces versions pour empêcher les attaques par déni de service (DoS), et le maximum par défaut a été défini sur 20. Ce correctif rétablit la limite par défaut sur une valeur supérieure. Si vous pensez que votre boutique est victime d’une attaque par déni de service, Adobe recommande de réduire les limites d’entrée par défaut à une valeur inférieure afin de limiter le nombre de ressources pouvant être demandées. Consultez l’article [ API Web ne pouvant pas traiter les demandes avec plus de 20 éléments dans le tableau](https://support.magento.com/hc/en-us/articles/4406893342093) de la base de connaissances.

## Appliquez AC-384__Fix_Incompatible_PHP_Method__2.4.3_ce.patch pour résoudre l’erreur fatale PHP lors de la mise à niveau.

L’erreur fatale suivante peut se produire lors de la mise à niveau vers Magento Open Source 2.4.3 :

```terminal
PHP Fatal error: Uncaught Error: Call to undefined function Magento\Framework\Filesystem\Directory\str_contains() in [...]/magento/vendor/magento/framework/Filesystem/Directory/DenyListPathValidator.php:74
```

Cette erreur résulte de l&#39;utilisation de la fonction `str_contains`, qui est une fonction PHP 8.x. L’application Open Source 2.4.3 ne prend pas en charge PHP 8.x. Ce correctif remplace cette fonction par une fonction PHP 7.x prise en charge. Voir l’article [Correctif d’erreur fatale PHP de la mise à niveau Adobe Commerce 2.4.3, 2.3.7-p1](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix) de la base de connaissances.

## Tons clairs

Recherchez les points forts suivants dans cette version.

### Améliorations substantielles de la sécurité

Cette version comprend 33 correctifs de sécurité et améliorations de la sécurité de la plateforme. La plupart de ces correctifs de sécurité ont été rétroportés à 2.4.2-p2 et 2.3.7-p1.

#### Trente-trois améliorations de sécurité permettant de fermer les vulnérabilités d’exécution de code distant (RCE) et de script de site à site (XSS).

Aucune attaque confirmée liée à ces problèmes n&#39;a été survenue à ce jour. Cependant, certaines vulnérabilités peuvent être exploitées pour accéder aux informations sur les clients ou prendre le contrôle des sessions d’administrateur. La plupart de ces problèmes nécessitent qu’un attaquant obtienne d’abord l’accès à l’administrateur. Par conséquent, nous vous rappelons de prendre toutes les mesures nécessaires pour protéger votre administrateur, y compris, mais sans s’y limiter, les efforts suivants : placé sur la liste autorisée IP, [authentification à deux facteurs](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html), utilisation d’un VPN, utilisation d’un emplacement unique plutôt que `/admin`, et bonne hygiène du mot de passe. Consultez le [Bulletin de sécurité des Adobes](https://helpx.adobe.com/security/products/magento/apsb21-64.html) pour une discussion sur ces problèmes résolus.

#### Améliorations supplémentaires de la sécurité

Les améliorations de la sécurité de cette version améliorent la conformité aux dernières bonnes pratiques en matière de sécurité, notamment :

* Un **nouveau module externe Composer** permet d’éviter toute confusion de dépendance et d’identifier les modules malveillants portant le même nom que les modules internes dans le référentiel de modules public. Voir l’article de blog [Adobe Versions du nouveau module complémentaire du compositeur avec la version 2.4.3](https://magento.com/blog/best-practices/adobe-releases-new-composer-plugin-magento-243-release).

* **La limitation de débit est désormais intégrée aux API** pour empêcher les attaques par déni de service (DoS). Les API Web imposent désormais des restrictions sur la taille ou le nombre de ressources (le maximum par défaut est défini sur 20 et peut être configuré sur une valeur différente en fonction des besoins de l’entreprise) qui peuvent être demandées par un client. Voir [Limitation du taux](https://developer.adobe.com/commerce/webapi/get-started/api-security/) pour plus d’informations sur la configuration de ces restrictions. <!-- MC-35358-->

* **La couverture ReCAPTCHA a été étendue** pour inclure :

   * Les API Web qui possèdent des pages d’HTML correspondantes sont traitées par ReCAPTCHA. (Cela exclut les API web accessibles par les intégrations.) La couverture ReCAPTCHA protège les points de terminaison des attaques de spam. Lorsque les API web sont accessibles par un service d&#39;intégration tiers qui utilise OAuth, ReCAPTCHA est désactivé.<!-- MC-34472-->

   * La page de stockage Passer une commande et les API web liées aux paiements. La protection ReCAPTCHA de ces pages est désactivée par défaut et peut être activée à partir de l’administrateur. Cette couverture ajoute un mécanisme anti-force brute pour protéger les magasins contre les attaques de carding.

{{cve-notice}}

### Améliorations des infrastructures

Cette version contient des améliorations qui améliorent la qualité de la structure et les domaines fonctionnels suivants :

* Compte client

* Catalogue

* CMS

* OMS

* Import/Export

* Promotions et ciblage

* Panier et passage en caisse

* B2B

* Évaluation et aperçu

**PayPal plus tard est désormais pris en charge** dans les déploiements qui incluent PayPal. Cette fonctionnalité permet aux acheteurs de payer une commande par versements bimensuels au lieu de payer le montant complet au moment de l’achat. <!-- MC-40556-->

**Nouveau `use_application_lock` mode d&#39;indexation**. Le mode `use_application_lock` vous permet d’activer la réindexation à l’aide de variables d’environnement ou en configurant le fichier `app/etc/env.php`. Vous n’avez plus besoin de réinitialiser manuellement l’indexeur après un échec lorsque ce mode est activé.  Voir [Utilisation du mode de verrouillage de l’application pour les processus de réindexation](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### Améliorations de la plateforme

La version 2.4.3 n&#39;est pas encore compatible avec PHP 8.x, mais les mises à niveau suivantes de la plate-forme nous rapprochent d&#39;une compatibilité future avec PHP 8.x.

* Les dépendances du compositeur principal et les bibliothèques tierces ont été mises à niveau vers les dernières versions compatibles avec PHP 8.x. <!-- MC-39514-->

* La bibliothèque KnockoutJS a été mise à niveau vers la version 3.5.1 (la dernière version). <!-- MC-40694-->

* La bibliothèque TinyMCE v3 obsolète a été supprimée. Le module `Magento_Tinymce3Banner` et les tests MFTF liés à TinyMCE v3.x ont été supprimés d’Adobe Commerce. <!-- MC-42199 42170 -->

* Magento Open Source 2.4.3 a été testé et sa compatibilité avec Redis 6.0.12 a été confirmée. (La version 2.4.x reste compatible avec Redis 5.x.)

* Les dépendances des bibliothèques Laminas ont été mises à niveau vers les versions compatibles avec PHP 8.x. Certaines dépendances redondantes ont été supprimées du fichier `composer.json`. **Magento Open Source 2.4.3 utilise Laminas 3.4.0**. <!-- MC-39513-->

### Améliorations des performances

Cette version comprend des améliorations qui réduisent le temps d’indexation pour les indexeurs de prix de produit et de règles de catalogue. Les vendeurs peuvent désormais exclure un site web d’un groupe de clients ou d’un catalogue partagé, ce qui réduit le nombre d’enregistrements à indexer et améliore les temps d’indexation.

### Intégration Adobe Stock

Cette version inclut l’intégration Adobe Stock v2.1.1.

### GraphQL

Cette version ajoute la couverture GraphQL pour les itinéraires partagés. La [requête d’itinéraire](https://devdocs.magento.com/guides/v2.4/graphql/queries/route.html) et l’ [ interface livrable](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/routable-interface.html) prennent en charge les demandes de routage sur les pages de produit, de catégorie et de CMS. La requête `urlResolver` est obsolète et sa fonctionnalité a été remplacée par la requête `route`.

Pour plus d’informations sur ces améliorations, consultez le [Guide du développeur de GraphQL](https://devdocs.magento.com/guides/v2.4/graphql/) .

### Page Builder

Le créateur de pages est désormais disponible en tant qu’extension regroupée dans Magento Open Source. Il s’agit désormais de l’outil d’édition de contenu par défaut pour Adobe Commerce 2.4.3 et Magento Open Source 2.4.3. Il peut remplacer l’éditeur WYSIWG par n’importe quel module tiers.

Page Builder remplace l’éditeur TinyMCE dans les zones d’administration suivantes :

* Page CMS
* Bloc CMS
* Description de la catégorie
* Description du produit

Tout le contenu créé dans TinyMCE a été migré en tant qu’HTML vers le Créateur de pages.

### PWA Studio

Pour plus d’informations sur les améliorations et les correctifs, voir [Versions de PWA Studio](https://github.com/magento/pwa-studio/releases). Voir [compatibilité](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) pour obtenir la liste des versions de PWA Studio et de leurs versions compatibles.

### Outil de compatibilité de mise à niveau

La portée de l’[outil de compatibilité de mise à niveau](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html) a été étendue en fonction des commentaires de la communauté. Rejoignez notre canal de Slack [#upgrade-compatibility-tool](https://magentocommeng.slack.com/archives/C019Y143U9F) pour obtenir l’assistance de l’équipe produit de l’Adobe et de la communauté, ainsi que pour orienter l’orientation future de l’outil.

### Extensions développées par le fournisseur

Consultez les articles suivants pour connaître les mises à jour des fonctionnalités et des modifications de cette version :

* [Amazon Pay](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html)

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [dotdigital Engagement Cloud](../../../upgrade/modules/upgrade.md)

* [Klarna](https://marketplace.magento.com/klarna-m2-klarna.html)

* [Vertex Cloud](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Critiques de produits Yotpo](../../../upgrade/modules/upgrade.md)

## Problèmes résolus

Nous avons corrigé des centaines de problèmes dans le code de base 2.4.3.

### Installation, mise à niveau, déploiement

<!-- MC-41154-->

* La commande `bin/magento setup:db:status` renvoie désormais un message indiquant que tout est à jour après une mise à niveau réussie. Auparavant, l’application affichait cette erreur : `Declarative Schema is not up to date`.

<!-- MC-40031 -->

* Les valeurs de configuration sont désormais conservées au rechargement du formulaire lorsque la création d’un nouveau produit configurable échoue. Auparavant, les valeurs étaient perdues lors du rechargement du formulaire et l’application affichait cette erreur : `The value specified in the URL Key field would generate a URL that already exists`. [GitHub-32102](https://github.com/magento/magento2/issues/32102)

<!-- MC-37596-->

* L’application ne renvoie plus d’exception lorsque vous exécutez `bin/magento setup:upgrade` pour effectuer une mise à niveau à partir d’un déploiement de Magento Open Source avec Redis vers Adobe Commerce.

<!-- ENGCOM-8508 -->

* Les déploiements exécutés sur la grappe Galera prennent désormais en charge plus de clients. [GitHub-31038](https://github.com/magento/magento2/issues/31038)

<!-- ENGCOM-9036 MC-41938 -->

* Les administrateurs peuvent désormais se connecter avec succès à un déploiement lorsque l’application a été installée avec l’option `—use-rewrites=0` ou `web/seo/use_rewrites` définie sur 0 dans `core_config_data_table`. [GitHub-32100](https://github.com/magento/magento2/issues/32100)

<!-- ENGCOM-8451 -->

* Mise à jour de la charge `sortOrder` pour `AsyncCssPlugin`. L’application charge désormais `AsyncCssPlugin` avant `JsFooterPlugin`. [GitHub-30882](https://github.com/magento/magento2/issues/30882)

<!-- ENGCOM-8701 -->

* `Magento\Config\Model\Config\PathValidator` vérifie désormais le chemin d’affichage pour déterminer si un élément existe et, s’il possède un chemin de configuration, utilise le chemin d’accès `config.xml` à la place pour la validation. [GitHub-27678](https://github.com/magento/magento2/issues/27678)

<!-- ENGCOM-8684 -->

* La compilation de fichiers less avec Grunt ou par compilation côté serveur produit désormais les mêmes résultats. Précédemment. `.abs- styles`, qui étend d’autres `.abs- styles` dans `_extends.less`, n’étaient pas correctement générés lors de la compilation avec Grunt. Cela entraînait des différences entre les déploiements de production et de développement. [GitHub-7231](https://github.com/magento/magento2/issues/7231)

### Intégration Adobe Stock

<!-- MC-39754-->

* L’application affiche désormais un message informatif et un lien vers la page Admin **Magasins** > **Configuration** > **Avancé** > **Système** sur la page Rechercher des Adobe Stock lorsque **Clé API (ID client)** et **Secret client** ne sont pas définis. Auparavant, l’application affichait cette erreur : `We couldn't find any records` et aucun lien.

### Serveur principal

<!-- MC-40389-->

* Les administrateurs disposant d’un accès limité (par exemple, qui se voient attribuer l’accès à un site web uniquement) ne peuvent plus modifier les catégories définies sur la portée globale.

<!-- MC-39037-->

* Le rapport système généré (**Système** > **Assistance** > **Rapport système**) s’affiche désormais correctement. Auparavant, le contenu du rapport n’était pas aligné.

<!-- MC-30152 ENGCOM-8625-->

* L’application désactive désormais la validation sur le champ **Price** comme prévu lorsque le paramètre **Prix dynamique** est activé lors de la création du lot. Auparavant, l’application entraînait une erreur de validation lorsque vous supprimiez une valeur du champ **Price** lorsque le paramètre **Dynamic price** était activé. [GitHub-26214](https://github.com/magento/magento2/issues/26214)

<!-- MC-24840-->

* Les redirections infinies ne se produisent plus lorsque l’URL d’administration diffère de l’URL du site web par défaut dans les déploiements où l’application est configurée pour être accessible à partir de deux URL.

### Lot de produits

<!-- MC-41810-->

* Vous pouvez désormais utiliser la mutation `addProductsToCart` pour ajouter un produit en regroupement avec plusieurs cases à cocher à un panier.

<!-- MC-41614-->

* L&#39;indexation des prix des produits groupés est désormais exécutée à l&#39;aide de tables temporaires, ce qui évite de verrouiller les tables de base de données. Auparavant, l’application utilisait des tables physiques, ce qui entraînait des tables verrouillées.

<!-- MC-41177 magento/magento2#32594-->

* Le prix d’un article de lot peut désormais être défini sur 0,00. Auparavant, lorsque vous reveniez à la page de modification après avoir défini le prix sur 0,00, le prix renvoyait à sa valeur par défaut. [GitHub-32383](https://github.com/magento/magento2/issues/32383)

<!-- MC-40603-->

* Les détails de la commande pour les commandes qui contiennent des produits en bundle affichent désormais le prix correct pour les produits en bundle si le prix a été modifié avant que la commande ne soit passée.

<!-- MC-40035-->

* L’état du stock de produits en bundle est maintenant mis à jour en fonction de l’état du stock de ses produits enfants. Auparavant, les produits en bundle étaient affichés comme étant en rupture de stock lorsqu’une option était supprimée du produit, et le produit en bundle avait deux options avec le même SKU.

<!-- MC-39276-->

* Un administrateur peut désormais modifier la valeur de l’attribut `Shipment Type` d’un produit en bundle après son déplacement vers un autre groupe d’attributs. Auparavant, cet attribut était toujours enregistré avec une valeur `Together` s’il était déplacé vers un groupe d’attributs autre que le groupe par défaut dans le jeu d’attributs.

<!-- MC-38900-->

* La mutation GraphQL `setGuestEmailOnCart` met désormais correctement à jour le courrier électronique des invités. Auparavant, les tableaux d’adresse de devis et de guillemets n’étaient pas mis à jour.

<!-- MC-37719-->

* L’ajout, la suppression ou la mise à jour d’un produit enfant vers un produit groupé via des appels API REST déclenche désormais la réindexation comme prévu. Auparavant, ces actions ne déclenchaient pas de réindexation. Par conséquent, le produit du lot ne modifiait pas son état de stock tant que la réindexation manuelle n’était pas effectuée.

<!-- MC-35725 ENGCOM-8568-->

* L’application affiche désormais la plage de prix correcte pour les produits groupés avec des prix de niveau. [GitHub-30284](https://github.com/magento/magento2/issues/30284)

<!-- MC-35638-->

* L’application affiche désormais le même prix total que celui attendu sur la page Panier et dans l’étape d’expédition du workflow de passage en caisse une fois que le prix d’une option de lot a changé.

<!-- MC-32617-->

* Vous pouvez désormais configurer un produit en bundle en y accédant à partir d’un panier client. Auparavant, la page Configurer le produit n’était pas complètement chargée et vous ne pouviez pas enregistrer vos paramètres.

<!-- MC-30317 ENGCOM-7141-->

* Les vendeurs peuvent désormais attribuer un prix unique pour un produit en lot sur chaque vue de magasin d’un déploiement multi-magasin. Les prix spécifiques au site web sont enregistrés dans la table `catalog_product_bundle_selection_price`. Auparavant, l’application ne basait pas le prix d’un lot sur la portée du site web même lorsque **Magasins** > **Configuration** > **Catalogue** > **Catalogue** > **Prix** > **Portée du prix du catalogue** était définie sur `Website`. Aucun prix spécifique à un site web n’a été enregistré dans `catalog_product_bundle_selection_price`. [GitHub-12584](https://github.com/magento/magento2/issues/12584)

<!-- ENGCOM-8705 MC-38953-->

* Les factures des produits groupés affichent désormais la quantité correcte pour les produits simples associés lorsque l’option **Tarification dynamique** est désactivée. Auparavant, les produits simples associés au produit groupé étaient associés à la quantité du produit parent, et non au produit groupé. [GitHub-30802](https://github.com/magento/magento2/issues/30802)

<!-- magento/magento2#30374 MC-36930-->

* La mutation `updateProductsInWishlist` met désormais à jour avec succès les éléments appartenant à un produit en regroupement dans une liste de souhaits. Auparavant, au lieu de mettre à jour l’élément de liste bloquée, cette mutation supprimait l’élément et en créait un nouveau, qui modifiait l’identifiant de l’élément.

### Cache

<!-- ENGCOM-8554-->

* Le fichier `varnish6.vcl` a été mis à jour afin de contourner la mise en cache de la page du client.

### CAPTCHA

<!-- MC-41572-->

* CAPTCHA valide désormais correctement les données fournies par un acheteur et les champs CAPTCHA s’affichent désormais comme prévu après les multiples tentatives infructueuses d’extraction d’un acheteur avec PayPal Payflow Pro.

<!-- MC-41281-->

* La validation CAPTCHA n’échoue plus de manière aléatoire sur la page de paiement du workflow de passage en caisse.

<!-- MC-41001-->

* L’application affiche désormais les champs CAPTCHA comme prévu une fois que vous avez dépassé le nombre de tentatives d’achèvement ayant échoué. Auparavant, même si l’application vous demandait de relancer le défi CAPTCHA, elle n’affichait pas les champs CAPTCHA.

<!-- MC-40359-->

* CAPTCHA fonctionne désormais comme prévu sur la page de passage en caisse. Auparavant, après qu’un acheteur avait correctement répondu à un défi CAPTCHA, le chargeur sur la page de passage en caisse n’était pas terminé et l’application affichait cette erreur : `captchaData[formId] is undefined`. (Cette erreur se produisait uniquement lorsque le nouvel acheteur utilisait le même navigateur à partir duquel il avait déjà accédé à un déploiement exécutant 2.3.5-p1.)

<!-- ENGCOM-8630-->

* `_.isEmpty()` l’archivage du fichier `defaultCaptcha.js` s’est maintenant terminé avec succès. Auparavant, ces vérifications n’étaient pas terminées et, par conséquent, le chargement de la page de passage en caisse échouait après la mise à niveau. [GitHub-31641](https://github.com/magento/magento2/issues/31641)

### Panier et passage en caisse

<!-- MC-41911-->

* L’application prend désormais en compte les localisateurs décimaux spécifiques aux paramètres régionaux lors de la conversion et de la mise à jour de la quantité de produits dans le panier.

<!-- MC-40657-->

* L’application affiche désormais le message de validation des conditions générales dans le bloc correspondant uniquement lorsqu’un acheteur clique sur le bouton **Passer commande** . Auparavant, l’application affichait ce message dans le bloc Appliquer le code de remise chaque fois qu’un acheteur changeait de mode de paiement dans le workflow de passage en caisse : `The order wasn't placed. First, agree to the terms and conditions, then try placing your order again`.

<!-- MC-39581-->

* L’application ignore désormais les modifications apportées au formulaire d’adresse de facturation à l’étape de paiement de passage en caisse si l’acheteur ne parvient pas à cliquer sur le bouton **Mettre à jour** et est retourné à l’étape de livraison.

<!-- MC-37807 ENGCOM-8530-->

* Les produits avec une option personnalisable `(File)` incluent désormais des liens actifs comme prévu tout au long du processus de passage en caisse multi-expédition. Auparavant, ce lien était absent. [GitHub-31095](https://github.com/magento/magento2/issues/31095)

<!-- MC-37689-->

* Le panier d’administration affiche désormais les prix des produits dans les bonnes devises pour les magasins qui prennent en charge plusieurs devises. Auparavant, les prix étaient convertis plusieurs fois dans la devise spécifiée : d’abord, lorsque des produits étaient ajoutés au panier à partir de la vitrine, puis de nouveau, lorsque la commande était ensuite rendue sur l’administrateur.

<!-- MC-35640-->

* Les acheteurs peuvent désormais ajouter un produit à leur panier dont le prix minimum publicitaire (MAP) dépasse le prix normal.

<!-- MC-35289-->

* Les acheteurs peuvent désormais modifier leur adresse de facturation à partir du workflow de passage en caisse lors de leur passage en caisse avec plusieurs adresses.

<!-- MC-29335 magento/magento2#32251 -->

* Toutes les transactions de paiement payantes créées par les invités sont désormais enregistrées dans la base de données et visibles dans l’Admin comme prévu. Auparavant, seul un petit sous-ensemble de commandes simultanées était enregistré dans la base de données et la plupart des commandes étaient perdues en raison des délais d’expiration dus aux verrous de base de données. [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-23989-->

* L’application affiche désormais correctement les messages de bienvenue en ligne contenant des caractères spéciaux lorsqu’un invité place un produit dans le mini panier. Auparavant, l’application n’ajoutait pas le produit dans le mini panier et n’affichait pas le message de bienvenue. [GitHub-32250](https://github.com/magento/magento2/issues/32250)

<!-- MC-41165-->

* La page d’expédition du workflow de passage en caisse se charge désormais correctement lorsque la diffusion en magasin est activée. Auparavant, l’application renvoyait une erreur JavaScript et la page de paiement d’expédition n’était pas entièrement rendue.

<!-- ENGCOM-9006-->

* Ajout de l’argument `itemResolvers` au fichier de catalogue `di.xml`. Par conséquent, le passage en caisse n’est plus interrompu si les modules de produits configurables et regroupés sont désactivés. [GitHub-30860](https://github.com/magento/magento2/issues/30860)

<!-- ENGCOM-8944-->

* L’application affiche désormais les boutons radio dans la section **Informations de paiement et d’expédition** comme prévu pendant le processus de réorganisation de l’administrateur. [GitHub-30257](https://github.com/magento/magento2/issues/30257)

<!-- MC-39158 ENGCOM-8493-->

* L’application applique désormais correctement les règles de prix de panier avec une remise fixe de niveau panier lorsque le panier contient un produit groupé avec plusieurs options. Auparavant, la règle de prix du panier n’était pas entièrement appliquée à la commande. [GitHub-30952](https://github.com/magento/magento2/issues/30952)

<!-- MC-40983 ENGCOM-8828-->

* Le bouton **Ajouter au panier** de la vue de liste de catégories fonctionne désormais comme prévu. [GitHub-32232](https://github.com/magento/magento2/issues/32232)

<!-- ENGCOM-8490-->

* Vous pouvez désormais utiliser POST `/V1/carts/mine/items` pour ajouter une quantité personnalisée de produits groupés à un panier. [GitHub-26909](https://github.com/magento/magento2/issues/26909)

<!-- ENGCOM-8886-->

* L’application ne remplit plus la zone Adresse de facturation du workflow de passage en caisse avec l’adresse de livraison. Auparavant, lorsque le champ **Etat/Province** de l’adresse de facturation était vide et que les adresses de livraison et de facturation différaient, l’application renseignait le champ de l’adresse de facturation **Etat/Province** avec des informations de l’adresse de livraison. [GitHub-31608](https://github.com/magento/magento2/issues/31608)

### Catalogue

<!-- MC-36787-->

* La mise à jour en masse des attributs **Activer les incréments de qualité** et **Incréments de qualité** fonctionne désormais comme prévu. [GitHub-29544](https://github.com/magento/magento2/issues/29544)

<!-- MC-41575-->

* L’application ne renvoie plus d’erreur JavaScript une fois que vous avez activé la synchronisation des produits récents avec l’administrateur. Auparavant, l’application affichait cette erreur JavaScript : `Cannot read property 'status' of undefined`.

<!-- MC-41534-->

* Les mises à jour personnalisées de la mise en page des thèmes sont désormais appliquées comme prévu. Auparavant, les mises à jour de la mise en page de thème personnalisée étaient ignorées.

<!-- MC-41499-->

* Le cache de catégorie de produits est désormais effacé comme prévu par `cron` lors de l’exécution de `indexer_update_all_views`. Auparavant, les décomptes de produits sur la page Catégorie après la réindexation étaient incorrects.

<!-- MC-41422-->

* Les valeurs d’attribut restent désormais inchangées lorsqu’un attribut n’est pas spécifié dans une requête d’API REST de mise à jour de produit pour une vue de magasin. Auparavant, si aucun attribut n’était spécifié, l’application réinitialisait la valeur de l’attribut à sa valeur de portée par défaut.

<!-- MC-41284-->

* La grille Admin products (Admin **Catalog** > **Products**) affiche désormais le nombre de produits correct lorsque les produits sont filtrés par SKU.

<!-- MC-40873-->

* L’application affiche désormais un état de stock précis lorsqu’un produit est ajouté à une page CMS lorsque les autorisations de catégorie sont activées et empêche l’affichage du prix pour le groupe de clients spécifié. Auparavant, tous les produits étaient affichés comme étant en rupture de stock, quel que soit le statut réel du stock.

<!-- MC-40859-->

* Le champ de saisie des prix du bloc Groupe de clients de tarification avancée a désormais une largeur minimale de cinq chiffres. Auparavant, seuls deux symboles étaient visibles dans ce champ sur les affichages à basse résolution.

<!-- MC-40825-->

* L’application supprime désormais une image multimédia de produit après la suppression d’un produit. Auparavant, l’image du média de produit restait dans le dossier après suppression réussie du produit.

<!-- MC-40811 magento/magento2#32042-->

* La mise en page se met désormais à jour comme prévu lorsque vous créez ou modifiez un produit dans l’administrateur, puis créez une mise à jour de la conception de planification. [GitHub-32007](https://github.com/magento/magento2/issues/32007)

<!-- MC-40773-->

* Un attribut de produit personnalisé avec une valeur nulle peut désormais être enregistré comme vide. Auparavant, l’application ne mettait pas cette valeur à jour en blanc.

<!-- MC-40736 ENGCOM-8789-->

* Les fichiers de mise à jour de mise en page de catégorie personnalisée s’appliquent désormais aux produits comme prévu. Auparavant, le gestionnaire de fichier de mise à jour (`catalog_category_view_*`) ne correspondait pas au gestionnaire de produit. [GitHub-27285](https://github.com/magento/magento2/issues/27285)

<!-- MC-40679-->

* Le tri a été désactivé pour la colonne Taxe fixe des produits (FPT) de la liste des produits d’administration. Auparavant, la page Produits ne pouvait pas être rechargée une fois la colonne FPT triée.

<!-- MC-40443-->

* L’aperçu du widget de produits Page Builder fonctionne désormais comme prévu dans un déploiement de plusieurs sites web lorsque les produits correspondants ont un prix différent sur chaque site web.

<!-- MC-40344 ENGCOM-8629-->

* Le tri par position sur la recherche de produits à l’aide de GET `/rest/V1/products/?searchCriteria[filterGroups]` fonctionne désormais comme prévu. Auparavant, la collection de produits n’avait pas de valeur de champ `position` pour le tri. [GitHub-31591](https://github.com/magento/magento2/issues/31591)

<!-- MC-40122-->

* Les utilisateurs administrateurs peuvent désormais voir des espaces doubles dans les champs **Nom** et **SKU** de la grille de produits. Auparavant, l’application réduisait plusieurs espaces en un seul.

<!-- MC-39869-->

* Les produits sont désormais affichés en rupture de stock sur le storefront lorsque la quantité vendable sur l’administrateur est 0. Auparavant, ces produits étaient répertoriés en stock sur le storefront et l’application affichait un bouton actif **Ajouter au panier** . [GitHub-31117](https://github.com/magento/magento2/issues/31117)

<!-- MC-39809-->

* Les administrateurs peuvent désormais ajouter des produits avec des options personnalisables `(File)` à la grille Articles commandés à partir de la section Panier (colonne Activités du client) de la page Admin Client . Auparavant, l’application n’ajoutait pas l’élément à la liste, car la valeur n’était pas correctement formatée avant d’être insérée dans `\Magento\Catalog\Model\Product\Type\AbstractType::_prepareOptions`.

<!-- MC-39619-->

* L’application n’invite plus les acheteurs à sélectionner une option de produit pour un produit groupé ne comportant qu’une seule option.

<!-- MC-39617-->

* L’application affiche désormais toutes les sous-catégories dans les mises à jour de mise en page (catégories d’ancrage et non d’ancrage) lors de la création d’un nouveau widget.

<!-- MC-39481-->

* La requête `product` ne remplace plus les valeurs par défaut pour toutes les vues de magasin dans un déploiement multi-magasin lorsqu’un nom de produit est mis à jour pour une seule vue de magasin. [GitHub-31083](https://github.com/magento/magento2/issues/31083)

<!-- MC-39470 magento/magento2#31492-->

* Magento Open Source met à jour le nombre total de pages comme prévu lorsque vous modifiez la valeur par page de la liste Produits associés à l’administration, Ventes montées et Ventes croisées . [GitHub-31059](https://github.com/magento/magento2/issues/31059)

<!-- MC-39444-->

* Les administrateurs peuvent désormais ajouter des produits avec plusieurs options personnalisables `(File)` à une commande par SKU.

<!-- MC-39140-->

* L’application ne renvoie plus d’erreur lorsqu’un administrateur disposant d’autorisations restreintes ajoute un widget Produit à une page CMS dans l’Admin. Auparavant, l’application renvoyait cette erreur lorsque l’administrateur cliquait sur le bouton **Enregistrer** : `We are sorry, an error has occurred while generating the content`.

<!-- MC-39134-->

* Les pages Détails du produit s’ouvrent désormais avec l’option de date personnalisable renseignée avec la date de l’ordre précédent lorsque l’option **Utiliser le calendrier JavaScript** est activée. Le résolveur de valeurs de l’option de date personnalisée revient désormais à un format alternatif si la valeur n’est pas formatée en fonction de la configuration actuelle. Auparavant, la valeur de l’option de date personnalisée était vide.

<!-- MC-39104-->

* L’application n’affiche désormais qu’une seule erreur dans le panier lorsque le produit est en rupture de stock. Auparavant, l’application affichait des messages redondants. [GitHub-27469](https://github.com/magento/magento2/issues/27469)

<!-- MC-38575-->

* Vous pouvez désormais définir les attributs de lot `required_options` et `has_options` comme prévu lors de la création ou de la mise à jour d’un produit de lot à l’aide du point d’entrée `POST /V1/product/:sku`. Auparavant, ces attributs personnalisés étaient définis sur 0 (zéro) malgré les efforts déployés pour les définir sur 1 (un).

<!-- MC-35717  magento/partners-magento2ee#427-->

* Les administrateurs peuvent désormais ajouter un produit avec une option personnalisable `(File)` à une commande par SKU. [GitHub-30285](https://github.com/magento/magento2/issues/30285)

<!-- MC-30625-->

* Vous pouvez désormais enregistrer un produit et un prix sans spécifier `type_id`. [GitHub-13639](https://github.com/magento/magento2/issues/13639)

<!-- MC-39024-->

* Les produits de groupe sont désormais disponibles sur le storefront comme prévu lorsqu’une requête REST `PUT /V1/products/:sku/links` est utilisée pour associer un nouveau produit enfant à un nouveau produit de groupe. Auparavant, les produits n’étaient pas correctement indexés après l’exécution de `bin/magento cron:run`.

<!-- ENGCOM-9010 8947-->

* Vous ne pouvez plus créer de produit avec une valeur de SKU `NULL`. Auparavant, vous pouviez créer un produit sans valeur de SKU par le biais d’un importateur personnalisé ou directement dans la base de données, mais lorsque vous tentiez de le modifier à partir de l’administrateur, l’application générait une erreur. [GitHub-27411](https://github.com/magento/magento2/issues/27411), [GitHub-32525](https://github.com/magento/magento2/issues/32525)

<!-- ENGCOM-8902-->

* L’ajout d’options personnalisées requises à un produit simple ne le supprime plus des produits composites parents sans avertissement. L’application affiche désormais un avertissement informatif et n’enregistre pas le produit.  Auparavant, l’application enregistrait les modifications de produit et n’affichait pas d’avertissement. [GitHub-30492](https://github.com/magento/magento2/issues/30492)

### Règle de catalogue

<!-- MC-39896-->

* La requête `products` renvoie désormais les valeurs actuelles lorsqu’une règle de prix de catalogue s’applique à un article. [GitHub-26738](https://github.com/magento/magento2/issues/26738)

<!-- ENGCOM-8367-->

* Les tables temporaires commençant par `catalogrule_product__temp` sont désormais supprimées comme prévu lorsque la réindexation échoue après l’expiration d’une règle de panier ou de catalogue, est désactivée ou devient inactive. [GitHub-22273](https://github.com/magento/magento2/issues/22273)

<!-- ENGCOM-8949-->

* Les fuseaux horaires sont désormais appliqués de la même manière dans `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexById` et `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexByIds`. [GitHub-29549](https://github.com/magento/magento2/issues/29549)

### Contenu CMS

<!-- MC-41471-->

* Les images volumineuses sont désormais redimensionnées comme prévu lors de la mise en ligne lorsque le paramètre de configuration **Activer le redimensionnement frontal** est activé.

<!-- MC-40663 ENGCOM-8883-->

* Correction de la gestion des erreurs pour le contrôleur d’enregistrement de page CMS. Auparavant, lorsqu’un objet `Error` était généré sur l’événement `cms_page_prepare_save`, l’application transmettait cet objet à la fonction `addExceptionMessage`, rompant ainsi son contrat, car cette fonction attend un `Exception`. Ce problème a été résolu en ajoutant un message d’erreur à l’aide de la fonction `addErrorMessage`. [GitHub-30149](https://github.com/magento/magento2/issues/30149)

### Produits configurables

<!-- MC-40719-->

* L’application ne duplique plus les miniatures de produit dans la galerie d’images d’un produit lorsque vous cliquez sur les options configurables d’un produit.

<!-- MC-37418-->

* La fenêtre contextuelle de configuration que l’application affiche lorsque vous modifiez un produit configurable à partir d’une liste de souhaits se ferme désormais comme prévu lorsque vous cliquez sur le bouton **OK** .

<!-- MC-39878  magento/magento2#31472-->

* L’application génère désormais correctement des factures pour les commandes qui ne contiennent qu’un seul produit configurable. [GitHub-31143](https://github.com/magento/magento2/issues/31143)

<!-- ENGCOM-8673-->

* Les acheteurs peuvent désormais ajouter des produits configurables à leur panier à partir d’une vue de magasin autre que celle par défaut. Auparavant, lorsque l’acheteur sur une vue de magasin autre que celle par défaut tentait d’ajouter un produit configurable, l’application affichait cette erreur : `Could not add item to cart. Please check required options and try again`. [GitHub-31660](https://github.com/magento/magento2/issues/31660)

### Stratégie de sécurité du contenu CSP)

<!-- ENGCOM-8577-->

* La stratégie de sécurité du contenu prend désormais en charge le chargement d’images et de polices codées en base64 via `data: scheme`.

### cron

<!-- MC-30804-->

* Les requêtes de nettoyage Cron ont été restructurées afin de réduire ou d’éliminer les problèmes de performances suivants : `cron` tâches restant bloquées dans un état en attente, requêtes MySQL de plus en plus lentes et utilisation accrue du processeur. [GitHub-26507](https://github.com/magento/magento2/issues/26507)

<!-- ENGCOM-8571-->

* `cronjobs` qui sont en état `running` depuis plus de 24 heures sont désormais automatiquement changés en état `error`.  Par conséquent, une nouvelle instance de cette tâche peut s’exécuter à nouveau et vous n’avez pas besoin de modifier manuellement l’état de la tâche lorsqu’une tâche reste incorrectement définie sur l’état `running`. Auparavant, si un `cronjob` était bloqué dans l’état `running`, l’application empêchait le démarrage de nouvelles instances de la même tâche et vous deviez modifier manuellement l’état de la tâche. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` tâches se terminent désormais comme prévu et ne renvoient plus cette erreur de sérialisation : `[Magento\Framework\DB\Adapter\DeadlockException]SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction, query was: DELETE FROM cron_schedule WHERE (status = 'missed') AND (job_code in ('indexer_reindex_all_invalid', 'indexer_update_all_views', 'indexer_clean_all_changelogs')) AND (created_at < '2018-09-28 18:32:28')`. [GitHub-18409](https://github.com/magento/magento2/issues/18409)

<!-- ENGCOM-8571-->

* `indexer_update_all_views` les tâches cron s’exécutent désormais comme prévu après un échec précédent. L’exécution ayant échoué est marquée comme un échec dans `cron_schedule schedule`, et l’exécution suivante n’échoue pas automatiquement. Auparavant, la table `cron_schedule` était remplie avec les tâches en attente et la tâche cron `indexer_update_all_views` ne s’exécutait pas. [GitHub-23054](https://github.com/magento/magento2/issues/23054)

<!-- ENGCOM-8571-->

* `cron` blocages ne se produisent plus suite à la tentative de `cron` de définir un verrouillage dans les déploiements volumineux où des groupes se chevauchent. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` blocages ne se produisent plus sur la table `cron_schedule` après l’exécution de quelques `cron` tâches seulement. [GitHub-22438](https://github.com/magento/magento2/issues/22438)

### Attributs du client personnalisés

<!-- MC-41611-->

* Le champ **État** du carnet d’adresses du compte client du storefront est maintenant chargé comme et reste un élément de page de liste déroulante. Le bouton **Submit** est maintenant désactivé tant que tous les éléments de page n’ont pas été complètement chargés. Auparavant, l’application chargeait ce champ en tant que zone de texte avant de le rendre en tant qu’élément de liste déroulante et les acheteurs pouvaient saisir et enregistrer des valeurs dans le champ de texte, ce qui entraînait par la suite une erreur lors de l’extraction.

<!-- MC-40329-->

* L’application ne renvoie plus d’erreur lorsque vous enregistrez un attribut d’adresse du client avec une pièce jointe dans le champ Admin Customer address (Adresse client de l’administrateur) lors du téléchargement des fichiers. Ce problème se produisait en raison d’une instruction de retour manquante dans l’action du contrôleur. Auparavant, l’application générait cette erreur : `Something went wrong while saving the file`.

<!-- MC-39354-->

* Les appels de l’API de panier REST renvoient désormais des valeurs d’attribut personnalisées correctes pour les adresses de facturation et de livraison. Auparavant, les attributs d’adresse personnalisés s’affichaient incorrectement dans la page des détails de la commande de la page de storefront My account et dans l’Admin.

<!-- MC-24495-->

* L’application gère désormais correctement les fichiers qui contiennent des attributs d’adresse client avec le type d’entrée `file (attachment)`. Auparavant, l’application renvoyait cette erreur lors du chargement du fichier joint : `Something went wrong while saving the file`.

### Client

<!-- MC-40579-->

* Le filtrage par date de création du compte produit désormais des résultats conformes aux paramètres de fuseau horaire configurés et qui capturent tous les comptes créés appropriés.

<!-- MC-40502-->

* Le filtre de grille client utilise désormais une option de site web correcte pour un utilisateur restreint si les données ont été précédemment mises en cache. Auparavant, le filtre de grille client récupérait les paramètres du site web du cache et incluait des données incorrectes pour les utilisateurs restreints.

<!-- MC-39189-->

* L’application ne renvoie plus d’exception sur la page Admin Customers lorsqu’un site web est supprimé dans un déploiement de plusieurs sites web. Auparavant, lorsqu’un administrateur tentait d’accéder à la liste complète des clients, l’application n’affichait pas tous les clients et affichait cette erreur : `The website with id 2 that was requested wasn't found. Verify the website and try again`.

<!-- MC-38913-->

* Les administrateurs autorisés peuvent désormais réaffecter des clients à différents sites web à partir de l’onglet Informations du compte du client.

<!-- MC-39852-->

* Vous pouvez désormais charger un fichier avec succès lors de la création d’un attribut d’adresse client avec un type d’entrée `(File)`. Auparavant, lorsque vous tentiez de charger et d’enregistrer un fichier, l’application provoquait cette erreur : `Something went wrong while saving the file`.

### Répertoire

<!-- MC-39520-->

* L’application ne renvoie plus d’exception lorsqu’un acheteur entre dans un code postal non valide pendant la section d’expédition du workflow de passage en caisse. [GitHub-23371](https://github.com/magento/magento2/issues/23371)

### Téléchargeable

<!-- MC-35779-->

* L’application affiche désormais des liens vers les produits téléchargeables dans l’e-mail New Order (Nouvelle commande) lorsque la commande contient à la fois un produit téléchargeable et un produit configurable avec option de téléchargement. Auparavant, l’application affichait le lien vers le produit téléchargeable autonome, mais pas vers le produit configurable avec une option de téléchargement.

### EAV

<!-- MC-41756-->

* Les valeurs de date d’attribut de l’adresse client sont désormais enregistrées au format quatre chiffres au lieu de deux.

### Email

<!-- MC-39757-->

* Le lien de réinitialisation du mot de passe sur la page Réinitialisation du mot de passe de l’administrateur fonctionne désormais comme prévu. Auparavant, lorsqu’un modèle personnalisé était utilisé pour la page de réinitialisation du mot de passe administrateur, l’application affichait ce message lorsqu’un administrateur cliquait sur le lien à l’intérieur de l’email : `Your password reset link has expired`. Cela s’est produit car le modèle de courrier électronique personnalisé contenait une variable incorrecte pour l’ID utilisateur.

<!-- MC-41588-->

* L’envoi d’emails de clients depuis l’administrateur fonctionne désormais correctement lorsqu’il est activé au niveau de l’affichage en magasin. Auparavant, l’application n’envoyait pas d’e-mails du client lorsque les paramètres de notification électronique étaient activés au niveau de la vue de magasin, mais pas au niveau global.

<!-- MC-40950-->

* L’application envoie désormais des courriers électroniques comme prévu dans les déploiements multisites pour lesquels tous les sites Web n’ont pas activé l’envoi asynchrone de courriers électroniques. Auparavant, si ce paramètre était désactivé sur au moins un site web, aucun courrier électronique n’était envoyé depuis un site web, même s’il était activé. Les courriers électroniques de facture, d’envoi et de notes de crédit avaient des problèmes similaires. Toutefois, les courriers électroniques Commentaires de commande, Commentaires de facture, Commentaires d’envoi et Commentaires de note de crédit ont bien été envoyés. [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-30127 magento/magento2#31455-->

* Les factures et les PDF de facture incluent désormais les mêmes prix que prévu pour les produits groupés. Auparavant, les PDF de factures incluaient un prix incorrect pour les produits regroupés. [GitHub-12856](https://github.com/magento/magento2/issues/12856)

<!-- ENGCOM-9021-->

* La diffusion de chaîne a été ajoutée à la méthode de filtre du modèle d’email pour s’assurer que la valeur renvoyée est un `string`. Auparavant, lorsqu’une exception était interceptée alors qu’elle n’était pas en mode développeur, l’application renvoyait un objet `phrase`. Cela a déclenché un `Uncaught TypeError` fatal. [GitHub-32671](https://github.com/magento/magento2/issues/32671)

<!-- ENGCOM-8807-->

* Les emails de confirmation de commande sont désormais envoyés comme prévu lorsque l’envoi asynchrone est activé (**Magasins** > **Configuration** > **Ventes** > **Courriers électroniques de vente** > **Paramètres généraux** > **Envoi asynchrone**) sur un site web dans un déploiement multi-site. [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-18023 ENGCOM-9000-->

* L’application consigne désormais une erreur comme prévu lorsqu’une exception se produit lorsqu’un client tente d’envoyer un courrier électronique à partir du formulaire de contact. [GitHub-23645](https://github.com/magento/magento2/issues/23645)

### Frameworks

<!-- MC-41712-->

* Les classes parents dans l’administrateur sont désormais vérifiées pour l’annotation docblock avec la classe d’origine et les interfaces héritées. Auparavant, comme les classes parents n’étaient pas cochées, l’exécution d’actions liées aux clients dans l’administrateur qui déclenchait un événement générait une erreur. L&#39;application a consigné cette erreur dans le journal des exceptions : `report.CRITICAL: Method's return type must be specified using @return annotation.`.

<!-- MC-41192-->

* L’application ne renvoie plus d’erreur fatale lorsque le serveur Redis est arrêté dans un déploiement où la mise en cache de la page Redis est activée.

<!-- MC-40739-->

* L’application respecte désormais le paramètre **Exclure le dossier multimédia de la sauvegarde** lorsque la sauvegarde est activée avec `bin/magento config:set system/backup/functionality_enabled 1`. Auparavant, le dossier Media était sauvegardé en dépit de ce paramètre, car le chemin d’accès à `/magento` n’était pas correctement formé avec un double //.

<!-- MC-40654 ENGCOM-8881-->

* L’application convertit désormais toutes les chaînes traduisibles comme prévu pour la page Panier d’administration. Auparavant, la charge de traduction était trop tardive et ignorait tous les observateurs abonnés à l’action du contrôleur qui étaient pré-envoyés. [GitHub-31849](https://github.com/magento/magento2/issues/31849)

<!-- MC-39776-->

* La validation du formulaire sur la page Créer un compte client fonctionne désormais correctement lorsque le paramètre d’extension **Se connecter en tant que client** activé est désactivé. Auparavant, l’application renvoyait une erreur JavaScript.

<!-- MC-39193-->

* La gestion des exceptions pour les processus enfants forés par `ProcessManager` a été améliorée. Lorsqu’une exception se produit maintenant, le processus principal sort et un message d’erreur ne s’affiche qu’une seule fois. Auparavant, plusieurs échecs d’indexation étaient consignés et plusieurs messages s’affichaient. [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- MC-39132-->

* Les modules externes de Magento Open Source global (par exemple, `webapi_rest` et `graphql` ) ne sont plus déclenchés pour un nouveau type de zone personnalisée lorsque le `di.xml` de ce fichier de zone ne contient aucun module externe enregistré.

<!-- MC-38770-->

* Les exceptions survenant lors de l’initialisation ne sont plus mises en cache et déclenchent désormais un code de réponse 500.

<!-- ENGCOM-8232-->

* Le dernier gestionnaire fusionné dans un fichier `communication.xml` ne remplace plus tous les gestionnaires créés précédemment. [GitHub-29528](https://github.com/magento/magento2/issues/29528)

### Correctifs généraux

<!-- MC-41194-->

* L’application affiche désormais le nombre correct d’étoiles sur la page Mes révisions de produit et sur les dernières révisions de la page Mon compte. Auparavant, l’application appliquait la révision uniquement à la première révision et laissait les autres révisions sur la page sans étoile.

<!-- MC-40653-->

* Les liens de compte dans les en-têtes suivent désormais les normes WCAG. Auparavant, les liens de compte dans les en-têtes contenaient des ID dupliqués, ce qui provoquait l’échec de la validation WCAG.

<!-- MC-39765-->

* L’application ne génère plus d’erreurs de journal système lorsqu’un acheteur invité utilise une adresse non valide. Auparavant, l’application affichait par intermittence cette erreur au lieu de rendre la page : `No such entity with addressId`. [GitHub-15115](https://github.com/magento/magento2/issues/15115)

<!-- MC-39747-->

* Le processus de redimensionnement des images ne s’arrête plus pour les images dont le format n’est pas pris en charge. Auparavant, lorsque `catalog:images:resize` rencontrait un format d’image non pris en charge, le processus s’arrêtait et l’application affichait cette erreur : `bin/magento catalog:images:resize Unsupported image format`.

<!-- ENGCOM-8925-->

* La prise en charge du WEBP et de l’AVIF pour les images de logo a été ajoutée à l’administrateur. [GitHub-32495](https://github.com/magento/magento2/issues/32495)

<!-- MC-38156-->

* Vous ne pouvez plus modifier la portée de l’attribut `media_gallery`. Auparavant, lorsque vous renommiez la portée de l’attribut `media_gallery` en `global`, l’application renvoyait une erreur.

<!-- MC-36818  magento/partners-magento2ee#470-->

* Les produits associés qui ont été ajoutés en tant que mise à jour planifiée ne s’affichent plus sur une page de produit storefront après la date de fin de la mise à jour. [GitHub-469](https://github.com/magento/partners-magento2ee/issues/469)

<!-- MC-33499 magento/partners-magento2ee#446-->

* Le filtrage fonctionne désormais comme prévu sur la liste des exports planifiés lorsque le type d’entité est sélectionné. Auparavant, le filtre ne fonctionnait pas et l’application renvoyait une erreur JavaScript. [GitHub-361](https://github.com/magento/partners-magento2ee/issues/361)

<!-- MC-30084 ENGCOM-8674-->

* Les images de catégorie sont désormais copiées comme prévu du répertoire `catalog/tmp/category` vers le répertoire `catalog/category` lorsque des catégories sont enregistrées à l’aide de la méthode de stockage de base de données. La ligne d’image de la table `media_storage_file_storage` contient désormais le `directory_id` correct. [GitHub-11995](https://github.com/magento/magento2/issues/11995)

<!-- MC-24768-->

* Les vendeurs sont désormais informés des caches invalidés comme prévu après l’envoi de modifications à la hiérarchie CMS. Auparavant, l’application n’invalidait pas les caches lors de l’enregistrement de la hiérarchie CMS.

<!-- MC-24725-->

* Les demandes d’AJAX redondantes à la section Panier du panier ont été réduites. Auparavant, l’application ne chargeait pas correctement le sous-total du panier, ce qui déclenchait à nouveau le rechargement du panier.

<!-- MC-23740-->

* Ajout de la validation des URL pour empêcher les mots réservés d’être inclus dans les clés d’URL. Voir [Définition d’identifiants de ressource Uniform (URI) connus](https://tools.ietf.org/html/rfc5785)

<!-- ENGCOM-9037-->

* Lors des déploiements exécutant PHP 7.4, l’application renvoie désormais une erreur 404 lorsque le paramètre **Générer une URL de catégorie/produit&quot; réécrit** est défini sur **Non** et qu’un acheteur tente d’accéder à un chemin de catégorie inexistant. Auparavant, l’application renvoyait une erreur 500 indiquant : `Trying to access array offset on value of type bool`. [GitHub-31984](https://github.com/magento/magento2/issues/31984)

<!-- ENGCOM-8901-->

* `nowdoc` a remplacé `heredoc` dans le sélecteur de magasin `Magento_Backend`. [GitHub-32262](https://github.com/magento/magento2/issues/32262)

<!-- ENGCOM-8685-->

* Ajout des régions de l’Argentine, de la Bolivie, du Chili, de l’Équateur, du Guyana, du Paraguay, du Pérou, du Suriname et du Venezuela à la table `directory_country_region`. [GitHub-31169](https://github.com/magento/magento2/issues/31169)

<!-- ENGCOM-8505-->

* Ajout des régions Albanie, Danemark, Grèce, Islande, Portugal et Suède à la table `directory_country_region`. [GitHub-31040](https://github.com/magento/magento2/issues/31040)

<!-- MC-30104 magento/magento2#31480 -->

* Les messages sont désormais marqués comme erreurs dans la file d’attente des messages MysqlMQ lorsque des exceptions se produisent. [GitHub-18140](https://github.com/magento/magento2/issues/18140)

<!-- ENGCOM-8579-->

* L’application fait désormais référence à l’objet de classe correct lors du chargement des informations fiscales pour la note de crédit de l’administrateur et les pages de facture. [GitHub-31197](https://github.com/magento/magento2/issues/31197)

<!-- MC-40346-->

* L’intégration Royal Mail Click &amp; Drop fonctionne désormais comme prévu. Auparavant, l’application générait cette erreur lorsque vous tentiez d’activer son intégration : `Sorry! Something went wrong. Please try again later`. [GitHub-28996](https://github.com/magento/magento2/issues/28996)

<!-- ENGCOM-8498-->

* La demande affiche désormais un message d’erreur informatif lorsqu’un envoi, une note de crédit ou un identifiant de facture incorrect est transmis dans une URL. Auparavant, l’application entraînait une erreur fatale. [GitHub-30424](https://github.com/magento/magento2/issues/30424)

<!-- ENGCOM-8632-->

* Suppression de la résurgence de l’emplacement des fichiers statiques.  L’application affiche désormais une page 404 au lieu d’une erreur 500. Auparavant, un bogue dans la configuration par défaut de NGINX entraînait une récursion infinie. [GitHub-31530](https://github.com/magento/magento2/issues/31530)

<!-- ENGCOM-8550-->

* Le nom du fichier `cms_index_noroute.xml` a été corrigé sur `cms_noroute_index.xml`. [GitHub-31300](https://github.com/magento/magento2/issues/31300)

<!-- ENGCOM-8516-->

* Le fichier `.editorconfig` a été restructuré pour corriger le formatage automatique des fichiers `db_schema_whitelist.json`. [GitHub-31171](https://github.com/magento/magento2/issues/31171)

<!-- ENGCOM-9018-->

* Le redimensionnement d’une fenêtre de navigateur ne déclenche plus d’événements de loupe de liaison en double. [GitHub-30788](https://github.com/magento/magento2/issues/30788)

<!-- ENGCOM-8722-->

* L’application ne renvoie plus d’exception SQL lors du filtrage de `Magento\Users\Model\ResourceModel\Users\Collection` par `user_id`. [GitHub-31216](https://github.com/magento/magento2/issues/31216)

### Cartes cadeau

<!-- MC-32651-->

* La logique de validation de la plage de prix a été ajoutée à la page de création de la carte-cadeau. Auparavant, un administrateur pouvait créer une carte dont la valeur minimale dépassait la valeur maximale. [GitHub-493](https://github.com/magento/partners-magento2ee/issues/493)

<!-- MC-32638979 magento/partners-magento2ee#40851-->

* La requête `addRequisitionListItemsToCart` renvoie désormais le montant d’une carte-cadeau personnalisée comme prévu lorsque la requête ne contient pas de valeur pour `allow_open_amount`.

### Message cadeau

<!-- ENGCOM-8539-->

* Les administrateurs sont désormais directement redirigés vers la page d’administration demandée après la connexion.  Auparavant, lorsqu’un administrateur se connectait, il était redirigé vers le tableau de bord Admin (ou n’importe quelle page était configurée comme page de démarrage) et devait accéder manuellement à leur destination. [GitHub-31042](https://github.com/magento/magento2/issues/31042)

### Gestionnaire de balises de Google

<!-- MC-39072-->

* Le composant de l’interface utilisateur pour l’adresse de facturation sur la page de paiement du processus de passage en caisse utilise désormais correctement l’adresse de devis lorsque le Gestionnaire de balises de Google est activé. Auparavant, une erreur JavaScript se produisait sur la page de paiement.

### GraphQL

<!-- MC-41885-->

* La requête GraphQL `products` renvoie désormais les options d’attribut triées dans le même ordre de tri que celui utilisé sur la page de modification des attributs.

<!-- MC-41473-->

* La réponse à la requête GraphQL `{ category(id: 2){ children { name children { name } } } }` comprend désormais une arborescence de catégories correctement triée.

<!-- MC-41030-->

* L’objet `CartItemPrices` contient désormais le nouveau champ GraphQL `fixed_product_taxes`, qui renvoie un tableau des taxes fixes sur les produits appliquées à un article de panier. Auparavant, les taxes sur les produits fixes appliquées à un article de panier n’étaient pas incluses dans la requête de panier.

<!-- MC-40920-->

* Les requêtes vides envoyées à GraphQL renvoient désormais le code de réponse 200 au lieu de 500. Auparavant, l’analyseur GraphQL renvoyait une exception avant que le résultat de la requête ne soit généré.

<!-- MC-40867 magento/partners-magento2ee#532 -->

* La mutation `applyRewardPointsToCart` met à jour le total général d&#39;un panier pour refléter précisément la valeur des points de récompense déduits. [GitHub-486](https://github.com/magento/partners-magento2ee/issues/486)

<!-- MC-40379-->

* Les produits désactivés ne sont plus inclus dans la réponse GraphQL lorsque GraphQL est utilisé pour lier des produits de mise à niveau.

<!-- MC-40262-->

* Les vendeurs peuvent désormais utiliser la méthode GraphQL `setShippingAddressesOnCart` pour définir les adresses de facturation et de livraison du panier d’un acheteur lorsque le passage en caisse des invités est désactivé.

<!-- MC-39508-->

* La requête `categoryList` ne renvoie plus d’exception lorsqu’elle contient plusieurs fragments sur l’objet `CategoryTree`. [GitHub-31086](https://github.com/magento/magento2/issues/31086)

<!-- MC-38995-->

* La requête GraphQL `product` renvoie désormais les prix corrects du groupe de clients.

<!-- MC-38822-->

* La réponse de requête GraphQL `products` trie désormais les agrégations en fonction de la position de l’attribut du produit.

<!-- ENGCOM-8462-->

* L’application ne génère plus d’erreurs de type lors des requêtes GraphQL lorsque les suffixes d’URL de catégorie et de produit contiennent des valeurs nulles. [GitHub-30909](https://github.com/magento/magento2/issues/30909)

<!-- magento/magento2#31164-->

* L’objet `CustomizableDateValue` contient désormais l’attribut `type`. Sa valeur est une énumération qui peut être définie sur DATE, DATE_TIME ou TIME.

<!--  magento/partners-magento2ee#421-->

* La requête [`dynamicBlocks`](https://devdocs.magento.com/guides/v2.4/graphql/queries/dynamic-blocks.html) renvoie le contenu des blocs dynamiques qui correspondent aux filtres spécifiés.

<!-- ENGCOM-8603-->

* La requête du POST `V1/products/special-price-delete` supprime désormais uniquement le prix avec un `store_id` spécifié comme prévu. Auparavant, l’appel supprimait de tous les magasins tous les prix spéciaux pour le SKU spécifié. [GitHub-25907](https://github.com/magento/magento2/issues/25907)

<!--  magento/partners-magento2ee#280 -->

* Correction d&#39;une erreur avec l&#39;attribut `country_code` dans la mutation `createGiftRegistry`.

<!-- magento/partners-magento2ee#280 -->

* Correction de problèmes liés à l’attribut `giftRegistryUid` de la mutation `updateGiftRegistryItems`.

<!-- magento/partners-magento2ee#280 -->

* Ajout d’une vérification supplémentaire pour empêcher l’utilisation de la mutation `updateGiftRegistryRegistrants` pour ajouter des personnes aléatoires en tant qu’inscrits à un registre de cadeaux.

<!-- magento/magento2#31380 -->

* La mutation `addConfigurableProductsToCart` renvoie désormais la miniature correcte du produit spécifié. Auparavant, elle renvoyait la miniature du produit parent.

<!-- ENGCOM-8477-->

* La requête `products` n’expose plus le prix spécial d’un produit lorsque la période de prix spécial est définie pour une date ultérieure. [GitHub-30210](https://github.com/magento/magento2/issues/30210), [GitHub-29631](https://github.com/magento/magento2/issues/29631)

<!-- magento-engcom/magento2ee#576-->

* La réponse de requête `customer` inclut désormais l’attribut `total_giftcard` dans le cadre de l’objet `OrderTotal`.

<!-- MC-41084 ENGCOM-9042 -->

* Correction d’un problème en raison duquel la requête `products` renvoyait des informations erronées sur les niveaux de prix sur les articles pour lesquels le niveau de prix n’est pas défini. [GitHub-32279](https://github.com/magento/magento2/issues/32279)

### Image

<!-- MC-38951-->

* Vous pouvez désormais définir les attributs de bundle required_options et has_options comme prévu lors de la création ou de la mise à jour d’un bundle à l’aide du point de terminaison `/V1/product/:sku` du POST. Auparavant, ces attributs personnalisés étaient définis sur 0 (zéro) malgré les efforts déployés pour les définir sur 1 (un).

### Import/export

<!-- MC-41576-->

* Le filtre ID de catégorie pour les entités de produit dans la grille Exporter les attributs d’entité de page fonctionne désormais comme prévu.

<!-- MC-41439-->

* L’état du stock de produits regroupés est désormais mis à jour comme prévu vers hors stock lorsque tous les produits enfants sont en rupture de stock. [GitHub-32647](https://github.com/magento/magento2/issues/32647)

<!-- MC-41184-->

* Le statut du stock de produit configurable est désormais automatiquement mis à jour comme prévu lorsque le statut du stock de produit enfant est mis à jour par import. Auparavant, l’état du stock de produits n’était pas automatiquement mis à jour lorsque l’état du stock de produits enfants était mis à jour par importation.

<!-- MC-41151-->

* Vous pouvez désormais enregistrer des valeurs vides dans une exportation planifiée. Auparavant, l’application mettait à jour les valeurs de filtre vides après la création ou l’enregistrement de l’exportation. Les valeurs `no` et `not specified` étaient représentées par zéro dans la base de données et une valeur `not selected` a été remplacée par `no`.

<!-- MC-41092-->

* Le processus d’exportation prend désormais en compte la portée du rôle utilisateur lors de l’exportation de produits, de sources de stocks et d’entités clients. Auparavant, le processus d’exportation ignorait la portée du rôle utilisateur, ce qui permettait l’exportation des entités d’exportation de rôle utilisateur privé.

<!-- MC-40943-->

* L’application définit désormais la classe de taxe du produit sur `None` si un produit est importé avec les `tax_class_name` valeurs `None` ou `0`. Auparavant, si `product tax_class_name` était `None` dans le fichier CSV, l’application créait une nouvelle classe de taxe `None`, qui dupliquait la classe de taxe existante. Si `product tax_class_name` était `0` dans le fichier CSV, l’application ignorait cette valeur et la classe de taxe du produit ne changeait pas après l’importation.

<!-- MC-40898-->

* Les administrateurs peuvent désormais modifier l’ `name` de `bundle_values` d’un produit de lot à partir de l’administrateur. Auparavant, l’application affichait le produit comme étant en rupture de stock sur le storefront après avoir modifié le nom de l’administrateur. Les produits ont également été fusionnés avec le même SKU en une seule section d’option de lot.

<!-- MC-40333-->

* L’application prend désormais en compte la portée de l’utilisateur lors de l’exportation des données client. Auparavant, lorsque vous tentiez d’exporter des clients, l’application exportait les données client de tous les sites web.

<!-- MC-40305-->

* L’application supprime désormais les relations entre les produits vendus, les ventes croisées et les produits associés lors de l’importation du fichier CSV, comme prévu lorsque `__EMPTY__VALUE__` est spécifié dans le fichier CSV.

<!-- MC-40012-->

* L’exportation de données d’adresse personnalisée pour de nombreux clients (Admin **Système** > **Exporter**) n’entraîne plus systématiquement une erreur de mémoire. Auparavant, lors de l’exportation des données d’adresse personnalisée, l’application tentait de charger toutes les données du client, ce qui entraînait une insuffisance de mémoire, et l’application générait une erreur d’allocation-mémoire en échec.

<!-- MC-39977-->

* Les prix des niveaux en double ne sont plus importés pendant le processus d’importation CSV par défaut. Auparavant, la validation était manquante pour empêcher l’importation de prix de niveau en double. Lorsque des prix de niveau en double se produisaient, les marchands ne pouvaient pas enregistrer de produits. Les commerçants ont également vu cette erreur lorsqu’ils ont tenté de planifier un changement de produit : `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry…`.

<!-- MC-39609  magento/magento2#31397-->

* Toutes les images de produit sont désormais validées lors de l’importation. Auparavant, l’application ne validait que la première image lorsqu’un produit contenait plusieurs images. [GitHub-28236](https://github.com/magento/magento2/issues/28236)

<!-- MC-39483-->

* Vous pouvez désormais supprimer une région d’une adresse client comme prévu lors de l’importation. Auparavant, la région affectée ne changeait pas lorsqu’une adresse client était importée avec une région vide.

<!-- MC-38810-->

* Les produits avec du contenu JSON ou HTML en tant qu’attributs de produit supplémentaires sont désormais exportés correctement dans un fichier CSV. Auparavant, le fichier CSV contenait des chaînes de données chevauchées dans des champs incorrects.

### Index

<!-- MC-39718 ENGCOM-8567-->

* Process Manager se ferme désormais avec une erreur lorsqu’un processus enfant échoue. Auparavant, Process Manager se quittait toujours correctement si le nombre de fonctions qui lui étaient transmises (par exemple, les dimensions de l’indexeur) était inférieur à la valeur de la variable d’environnement `MAGE_INDEXER_THREADS_COUNT`. [GitHub-30964](https://github.com/magento/magento2/issues/30964)

<!-- MC-39272-->

* Les produits sont désormais disponibles comme prévu dans les résultats de recherche storefront lors de la liaison de produits à l’aide d’une requête `/V1/products/:sku/links` de PUT REST lorsque le mode indexeur est défini sur **Mettre à jour sur l’enregistrement**.

<!-- MC-38310 magento/magento2#32693-->

* L’indexeur de règles de prix de catalogue fonctionne désormais comme prévu lorsque le mode indexeur est défini sur **Mettre à jour sur Enregistrer**. [GitHub-370](https://github.com/magento/partners-magento2ee/issues/370)

<!-- ENGCOM-8890-->

* La suppression d’une catégorie désactivée qui n’inclut pas de produit n’a désormais aucun effet sur la recherche de catalogue et les tables d’index plats de catégorie. Auparavant, la suppression d’une catégorie inactive déclenchait une réindexation complète. [GitHub-23297](https://github.com/magento/magento2/issues/23297)

<!-- ENGCOM-8599 8474-->

* Les indexeurs personnalisés peuvent désormais utiliser différents noms de colonne d’entité pour les abonnements. Auparavant, le déclencheur de base de données utilisait le nom de colonne de l’indexeur défini en dernier sur **Mettre à jour par planification** plutôt que l’indexeur désigné. [GitHub-21853](https://github.com/magento/magento2/issues/21853)

<!-- ENGCOM-8887-->

* L’application n’envoie plus de requêtes AJAX pour recharger les sections de données client (`Magento_Customer/js/section-config`) qui ne sont pas affectées par la requête. [GitHub-31948](https://github.com/magento/magento2/issues/31948)

<!-- MC-39569-->

* Les indexeurs suivants ne sont plus invalidés une fois que vous avez ajouté, supprimé ou réorganisé des produits dans une catégorie : `catalog_category_product` et `catalogsearch_fulltext` (et leurs dépendants). Auparavant, ces suppressions involontaires déclenchaient une réindexation complète des sites. Une réindexation complète est désormais bloquée dans ces conditions lorsque le catalogue plat n’est pas activé.

### Infrastructure

<!-- MC-41445-->

* La dépendance `pelago/emogrifier` a été mise à jour de la version 3.1.0 à la version 5.0.0. Cette mise à jour a entraîné l’introduction de modifications incompatibles à l’envers de la classe `Magento\Email\Model\Template\Filter`. Le code modifié est exécuté lors du rendu des modèles d’email. Voir [Référence BIC](https://developer.adobe.com/commerce/php/development/backward-incompatible-changes/reference/).

<!-- MC-42212-->

* Correction d’un problème avec `\Magento\CatalogInventory\Model\Indexer\Stock\CacheCleaner::getCategoryIdsByProductIds` qui empêchait l’enregistrement d’un nouveau produit.

<!-- MC-42199-->

* La bibliothèque TinyMCE v3 obsolète a été supprimée. Le module `Magento_Tinymce3Banner` et les tests MFTF liés à TinyMCE v3.x ont été supprimés d’Adobe Commerce.

<!-- MC-41497-->

* L’application ne renvoie plus d’erreur `Invalid header value detected` sur le formulaire Nous contacter lorsqu’un acheteur saisit une adresse électronique contenant des signes diacritiques français (tels que &quot;é&quot;, &quot;è&quot;). L’application convertit désormais les lettres UTF-8 du nom d’utilisateur en codage ASCII. Auparavant, les lettres UTF-8 n’étaient pas converties en encodage ASCII dans la section unique de l’adresse électronique.

<!-- MC-39947-->

* L’application ne renvoie plus d’erreur fatale PHP lorsqu’un module externe est ajouté à une classe parent. [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-9012-->

* Mise à jour des fichiers README.md pour ces modules : `Magento_Msrp`, `Magento_MsrpConfigurableProduct`, `Magento_MsrpGroupedProduct`, `Magento_Multishipping`, `Magento_MysqlMq`. [GitHub-32577](https://github.com/magento/magento2/issues/32577)

<!-- magento/partners-magento2ee#501-->

* `phpcpd` a été mis à jour vers la version 6.0.3 pour la compatibilité PHP 8.

<!-- ENGCOM-9073-->

* `ramsey/uuid` a été mis à jour pour des raisons de compatibilité avec PHP 8.0. [GitHub-31777](https://github.com/magento/magento2/issues/31777), [GitHub-826](https://github.com/magento/magento2-functional-testing-framework/issues/826)

<!-- ENGCOM-8997-->

* `colinmollenhour/php-redis-session-abstract` a été mis à jour vers la version 1.4.4 pour la compatibilité PHP 8. [GitHub-32709](https://github.com/magento/magento2/issues/32709)

<!-- ENGCOM-8527-->

* Correction d’une combinaison non valide d’onglets et d’espaces dans le fichier `phpstan.neon`. [GitHub-31239](https://github.com/magento/magento2/issues/31239)

<!-- ENGCOM-8668-->

* Suppression de l’utilisation de la propriété obsolète `$_isScopePrivate` dans toute la base de code. [GitHub-30506](https://github.com/magento/magento2/issues/30506)

<!-- ENGCOM-8551-->

* Les mises en page ne sont plus codées en dur dans  `Magento\Widget\Block\Adminhtml\Widget\Instance\Edit\Chooser\Container`.  Par conséquent, la fonction `getPageLayouts()` renvoie désormais la liste réelle des mises en page déclarées par les différents modules, comme prévu. Auparavant, il renvoyait uniquement des mises en page codées en dur. [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8509-->

* Le fichier `composer.lock` a été mis à jour vers la dernière version de la norme de codage. [GitHub-31152](https://github.com/magento/magento2/issues/31152)

<!-- ENGCOM-9015 -->

* Ajout d’une dépendance manquante sur le package `web-token/jwt-framework` au `magento/module-jwt-framework-adapter`. [GitHub-32578](https://github.com/magento/magento2/issues/32578)

<!-- ENGCOM-9019 -->

* Des écouteurs passifs ont été ajoutés à la bibliothèque `fotorama.js` pour améliorer le score des mesures phares. [GitHub-31140](https://github.com/magento/magento2/issues/31140)

<!-- ENGCOM-9014 -->

* Le fichier README.md du module Google Analytics a été mis à jour. [GitHub-32616](https://github.com/magento/magento2/issues/32616)

<!-- ENGCOM-8375 -->

* Process Manager gère désormais correctement les exceptions dans les processus marqués. Le processus principal se ferme maintenant et l’application n’affiche désormais un message d’erreur qu’une seule fois. En outre, les exceptions des processus dupliqués sont désormais gérées lorsqu’ils sont générés dans le processus principal. Auparavant, l’application consignait plusieurs échecs d’indexation et affichait plusieurs messages d’erreur.  [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- ENGCOM-8544 -->

* L’application ne renvoie plus d’erreur lorsqu’un module externe est ajouté à une classe parent. (Le paramètre `optionsProvider` est désormais déclaré après `getContentIdentities` dans `Assest.php`.) Auparavant, l’application générait cette erreur : `Error: Cannot instantiate interface Magento\Framework\Data\OptionSourceInterface`. [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-8549 -->

* L’exécution de `Magento\Framework\Filesystem\Io\Ftp::ls()` sur un dossier vide renvoie désormais un tableau vide comme prévu. Auparavant, l’application lançait cette exception : `Invalid argument supplied for foreach() in vendor/magento/framework/Filesystem/Io/Ftp.php…`. [GitHub-31288](https://github.com/magento/magento2/issues/31288)

<!-- ENGCOM-8791 -->

* La méthode `update` pour le rôle et les règles a été marquée comme obsolète dans `app/code/Magento/Authorization/Model/Role.php`. [GitHub-30756](https://github.com/magento/magento2/issues/30756)

<!-- ENGCOM-8946 -->

* La concaténation des paramètres de cookie SameSite a été corrigée. Auparavant, une concaténation incorrecte annexait le suffixe `lex` à `value`, `domain` et d’autres paramètres. [GitHub-26377](https://github.com/magento/magento2/issues/26377), [GitHub-32440](https://github.com/magento/magento2/issues/32440)

<!-- ENGCOM-8698 ENGCOM-9034 -->

* `allure-framework/allure-phpunit` a été mis à niveau vers la version 1.3.1 dans toute la base de code. Auparavant, l’application affichait cette erreur : `Warning: Use of undefined constant GLOB_BRACE - assumed 'GLOB_BRACE' (this will throw an Error in a future version of PHP) in /var/www/html/src/vendor/allure-framework/allure-phpunit/src/Yandex/Allure/Adapter/AllureAdapter.php:74.` [GitHub-24635](https://github.com/magento/magento2/issues/24635)

<!-- ENGCOM-8783 -->

* L’application affiche désormais des erreurs plus informatives lorsque des erreurs se produisent lors de l’exécution de commandes `bin/magento` en mode de production. Auparavant, l’application n’affichait aucun message d’erreur ou affichait des messages dépourvus d’informations. [GitHub-32786](https://github.com/magento/magento2/issues/32786)

<!-- ENGCOM-8953 -->

* L’objet PHP `ArrayIterator` a été mis à jour pour fonctionner comme prévu avec PHP 7.4. [GitHub-32088](https://github.com/magento/magento2/issues/32088)

<!-- ENGCOM-8469 -->

* L’application ne renvoie plus d’erreur lorsqu’un client tente de terminer une commande lorsqu’aucun opérateur de livraison n’est disponible. Il affiche plutôt la page de passage en caisse et ce message : `Sorry, no quotes are available for this order at this time`. Auparavant, l’application affichait une page de passage en caisse vide et enregistrait ce message dans le journal des exceptions : `array_keys() expects parameter 1 to be array, null given`. [GitHub-30830](https://github.com/magento/magento2/issues/30830)

<!-- ENGCOM-8557 -->

* L’application ne consigne plus chaque cookie comme contexte distinct. Le tableau `$_COOKIE` a également été converti en chaîne. Auparavant, chaque cookie étant consigné comme contexte distinct, lorsque le nombre de cookies dépassait 50, l’application consignait ce message : `Unable to send the cookie. Maximum number of cookies would be exceeded`. [GitHub-31334](https://github.com/magento/magento2/issues/31334)

### Facture

<!-- ENGCOM-8472 -->

* Lors de la création de factures dans l’administrateur, la case à cocher **Copie e-mail de** fonctionne désormais comme prévu. Auparavant, la case à cocher était ignorée si le paramètre global d’envoi des emails de facture était activé dans **Sales Emails**. Il est désormais cohérent et fonctionne de la même manière que les pages de création d’expédition et de note de crédit. [GitHub-28511](https://github.com/magento/magento2/issues/28511)

### Galerie de médias

<!-- MC-41728-->

* `bin/magento media-gallery:sync` échoue désormais comme prévu lors du traitement des images PNG qui ne disposent pas d’informations XMP.

<!-- ENGCOM-8814-->

* Les entrées de la table `catalog_product_entity_media_gallery` sont supprimées comme prévu lorsque les produits associés sont supprimés. [GitHub-17727](https://github.com/magento/magento2/issues/17727)

<!-- ENGCOM-8945-->

* Les détails des images peuvent désormais être mis à jour dans la galerie de médias lorsque la minification JavaScript est activée. Auparavant, les détails de l’image n’étaient pas enregistrés et l’application affichait cette erreur : `TypeError: Cannot read property 'call' of undefined in jquery.validate`. [GitHub-31633](https://github.com/magento/magento2/issues/31633)

### MFTF

Les nouvelles fonctionnalités et les correctifs de bogues de base MFTF sont décrits dans la [Modification de la structure de test fonctionnel](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

<!-- ENGCOM-8496-->

* Les commandes `magento indexer:reindex` et `cache:flush` et le groupe d’actions `AdminReindexAndFlushCache` ont été supprimés des tests afin d’améliorer l’exécution des modules suivants : `Bundle`, `Catalog`, `CatalogRule`, `CatalogRuleConfigurable`, `CatalogUrlRewrite`, `Downloadable`, `Indexer`, `Paypal` et `Sales`. [GitHub-31031](https://github.com/magento/magento2/issues/31031)

<!-- ENGCOM-8562-->

* `AdminSubmitCategoriesPopupActionGroup` a été ajouté aux tests pour empêcher l’échec du test. [GitHub-31251](https://github.com/magento/magento2/issues/31251)

<!-- ENGCOM-8562-->

* Les tests ont été restructurés avec `StorefrontCheckQuickSearchStringActionGroup` et `StorefrontAssertProductNameOnProductMainPageActionGroup` (groupes d’actions existants). [GitHub-31251](https://github.com/magento/magento2/issues/31251)

#### Tests restructurés

Les tests suivants ont été restructurés afin d’améliorer le temps d’exécution :

`AddOutOfStockProductToCompareListTest`  <!-- ENGCOM-8547-->

`AdminApplyTierPriceToProductWithPercentageDiscountTest` <!-- ENGCOM-8522-->

`AdminCheckingCreditMemoTotalsTest` <!-- ENGCOM-8606-->

`AdminCheckDashboardWithChartsTest` <!-- ENGCOM-8897-->

`AdminConfigDefaultProductLayoutFromConfigurationSettingTest`  <!-- ENGCOM-8891-->

`AdminCreateInvoiceTest` <!-- ENGCOM-8581-->

`AdminCreateOrderAddProductCheckboxTest` <!-- ENGCOM-8492-->

`AdminMassOrdersCancelCompleteAndClosedTest` <!-- ENGCOM-8538-->

`AdminMassOrdersCancelProcessingAndClosedTest`  <!-- ENGCOM-8670-->

`AdminMassOrdersHoldOnCompleteTest`  <!-- ENGCOM-8897-->

`AdminMassOrdersHoldOnPendingAndProcessingTest` (remplacement de `AdminMassOrdersHoldOnPendingAndProcessingTest` obsolète) <!-- ENGCOM-8669-->

`AdminMassOrdersUpdateCancelPendingOrderTest` <!-- ENGCOM-8602-->

`AdminMassProductPriceUpdateTest` <!-- ENGCOM-8587-->

`AdminMassUpdateProductAttributesMissingRequiredFieldTest` <!-- ENGCOM-8511-->

`AdminOrdersReleaseInUnholdStatusTest`  <!-- ENGCOM-8592—-->

`AdminPanelIsFrozenIfStorefrontIsOpenedViaCustomerViewTest`  <!-- ENGCOM-8601-->

`AdminSortingByWebsitesTest`  <!-- ENGCOM-8583-->

`AdminUpdateSimpleProduct` <!-- ENGCOM-8536-->

`AdminUpdateSimpleProductWithRegularPriceInStockEnabledFlatTest`  <!-- ENGCOM-8533-->

`AdminValidateShippingTrackingNumberTest`  <!-- ENGCOM-8593-->

`CancelOrdersInOrderSalesReportTest`  <!-- ENGCOM-8591-->

`ProductsQtyReturnAfterOrderCancelTest` <!-- ENGCOM-8506-->

`StorefrontConfigurableProductBasicInfoTest`  <!-- ENGCOM-8711-->

#### Groupes d’actions

Les actions répétitives ont été remplacées par des groupes d’actions dans ces tests :

`AdminCheckConfigurableProductPriceWithDisabledChildProductTest`  <!-- ENGCOM-8574-->

`AdminConfigurableProductCreateTest` <!-- ENGCOM-9013-->

`AdminConfigurableProductRemoveAnOptionTest` <!-- ENGCOM-9038-->

`AdminCreateProductDuplicateUrlkeyTest` <!-- ENGCOM-9007-->

`AdminCreateSimpleProductNegativePriceTest` <!-- ENGCOM-900-->

`AdminCreateSimpleProductZeroPriceTest`  <!-- ENGCOM-9040-->

`AdminCreateVirtualProductFillingRequiredFieldsOnlyTest` <!-- ENGCOM-9003-->

`AdminUpdateSimpleProductWithRegularPriceInStockDisabledProductTest` <!-- ENGCOM-9002-->

`AdminUpdateSimpleProductWithRegularPriceInStockNotVisibleIndividuallyTest`  <!-- ENGCOM-9011-->

`AdminUpdateSimpleProductWithRegularPriceInStockVisibleInCatalogOnlyTest`  <!-- ENGCOM-9041-->

#### Nouveaux groupes d’actions

`AdminClearFiltersOnGridActionGroup` <!-- ENGCOM-8604-->

`AdminClickAddNewPageOnPagesGridActionGroup`  <!-- ENGCOM-8613-->

`AdminClickInsertWidgetActionGroup` <!-- ENGCOM-8614-->

`AdminClickRefundOfflineOnNewMemoPageActionGroup` <!-- ENGCOM-8580-->

`AdminFillAccountInformationOnCreateOrderPageActionGroup` <!-- ENGCOM-8495-->

`AdminGoToOrderStatusPageActionGroup`  <!-- ENGCOM-8615-->

`AdminOpenCMSPagesGridActionGroup`<!-- ENGCOM-8682-->

`AdminSelectAttributeSetOnEditProductPageActionGroup` <!-- ENGCOM-8566-->

`AssertAdminProductIsAssignedToCategoryActionGroup` (remplace le filtrage de la grille de produits par SKU et le fait de cliquer sur la première ligne (afin de réduire le temps d’exécution du test) <!-- ENGCOM-8535 8534-->

`AssertLinkActionGroup` <!-- ENGCOM-8457-->

`AssertStorefrontCartDiscountActionGroup` <!-- ENGCOM-8431-->

`ClickPlaceOrderActionGroup` <!-- ENGCOM-8671-->

`SaveCmsPageActionGroup` <!-- ENGCOM-8683-->

`StorefrontAssertProductNameIsNotOnProductMainPageActionGroup` <!-- ENGCOM-8562-->

`StorefrontGuestCheckoutProceedToPaymentStepActionGroup` <!-- ENGCOM-8582-->

`StorefrontHoverProductOnCategoryPageActionGroup` <!-- ENGCOM-8575-->

`StorefrontSelectCustomizeAndAddToTheCartButtonActionGroup` <!-- ENGCOM-8573-->

#### Groupes d’actions supprimés

<!-- ENGCOM-8525 8558 8608 8546 8695 8889 8681 8627 8714-->

* Suppression de `CliIndexerReindexActionGroup` (ou modification de la valeur) des tests afin d’améliorer le temps d’exécution des `Backend`, `Bundle`, `BundleImportExport`, `Catalog`, `CatalogRule`, `CatalogSearch`, `Checkout`, `Downloadable`, `Elasticsearch`, `Elasticsearch6`, `Indexer`, `LayeredNavigation`, `LoginAsCustomer`, `Newsletter`, `Sales`, `SalesRule`, `Search`}, `Store`, `Swatches`, `UrlRewrite`, `Weee` et `Wishlist` modules.

<!-- ENGCOM-8893 8951 8893 9001 8715 8724 8721 8843-->

* Suppression de `CliCacheFlushActionGroup` de `Catalog`, `CatalogUrlRewrite`, `Checkout`, `Config`, `ConfigurableProduct`, `Contact`, `Cookie`, `CurrencySymbol`, `Customer`, `Downloadable`, `Elasticsearch`, `Elasticsearch6`, `Fedex`, `Indexer`, `LayeredNavigation`, `LoginAsCustomer`, `Msrp`, `Multishipping`, `Sales`}, `Swatches`, `Translation`, `UrlRewrite`, `Vault`, `Weee` et `Wishlist` modules.

### Newsletter

<!-- ENGCOM-8948 MC-40885-->

* L’application n’envoie plus d’e-mail de newsletter à un client qui s’est désabonné de la newsletter entre la création de la file d’attente de la newsletter et l’envoi de la newsletter. [GitHub-32116](https://github.com/magento/magento2/issues/32116)

<!-- ENGCOM-8675-->

* L’application honore désormais les paramètres d’activation de la newsletter (**Magasins** > **Paramètres** > **Configuration** > **Clients** > **Newsletter** > **Options générales**). Auparavant, ces paramètres étaient toujours récupérés de la portée par défaut dans les déploiements multi-magasin. [GitHub-31188](https://github.com/magento/magento2/issues/31188)

<!-- ENGCOM-8551-->

* Le GET d’appel REST `/V1/customers/search` renvoie désormais les informations correctes pour les clients abonnés à plusieurs newsletters. [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8817-->

* Le statut de l’abonnement à la mise en cache a été supprimé du module externe newsletter. [GitHub-19345](https://github.com/magento/magento2/issues/19345)

### Commande

<!-- MC-40963-->

* L’application calcule désormais correctement le solde client facturé lors du renvoi du crédit de magasin à un compte client pour une commande partiellement facturée.

<!-- ENGCOM-8710-->

* L’application enregistre désormais une commande modifiée comme prévu lorsqu’elle enregistre un solde client remboursé. [GitHub-393](https://github.com/magento/partners-magento2ee/issues/393)

### Modes de paiement

<!-- MC-41525-->

* L’application effectue désormais le rendu des blocs de paiement sur `frontend`, quelle que soit la zone à partir de laquelle l’email a été envoyé. (La zone actuelle est désormais émulée en tant que `frontend` avant le rendu du bloc de paiement.) Auparavant, les blocs de paiement étaient générés dans la zone à partir de laquelle le courrier électronique était envoyé. Par conséquent, que le courrier électronique de vente ait été déclenché par l’administrateur ou par l’API REST, les URL des ressources ont tenté de les charger à partir de la mauvaise zone (`webapi_rest` ou `adminhtml`).

<!-- MC-40810-->

* L’application envoie désormais le lien d’un produit téléchargeable à l’adresse électronique spécifiée lors du passage en caisse. Auparavant, lorsqu’un acheteur invité utilisait le paiement express PayPal et saisissait différentes adresses électroniques pour envoyer la commande et extraire, l’application envoyait le lien du produit téléchargeable à la première adresse.

<!-- MC-38051-->

* L’application affiche désormais une valeur exacte pour le crédit de magasin disponible sur la page Mode de paiement dans les déploiements qui prennent en charge plusieurs devises.

<!-- MC-37820-->

* La liste des méthodes de paiement est désormais mise à jour comme prévu lorsqu’un acheteur invité modifie l’adresse d’expédition d’une commande vers un autre pays lors du passage en caisse. Auparavant, la modification de l’adresse de facturation ne déclenchait pas de mise à jour des modes de paiement possibles.

#### PayPal

<!-- MC-39895-->

* Les acheteurs peuvent désormais extraire avec succès une commande PayPal Payflow Pro avec une adresse de livraison contenant des caractères spéciaux. Auparavant, la demande refusait le paiement de ces commandes.

<!-- MC-39861-->

* Les acheteurs sont désormais redirigés vers la page de succès de la commande après un paiement réussi à l’aide de PayPal. Auparavant, les clients étaient redirigés vers une page vierge, car les données de session étaient perdues.

### Performances

<!-- MC-41647-->

* Les performances de la recherche du SKU d’administration sur les catalogues volumineux ont été améliorées. Les indices d’optimisation de requête forcent désormais l’utilisation de l’index lors de l’exécution de la requête.

<!-- MC-41440-->

* Les performances du processus cron `catalog_product_alert` lors de l’exécution sur des tables volumineuses (plusieurs millions de lignes) ont été améliorées. Auparavant, `catalog_product_alert` chargeait toutes les alertes de produit, ce qui provoquait une exception de mémoire insuffisante.

<!-- ENGCOM-8752-->

* L’application ne charge plus toutes les pages CMS lorsqu’il suffit d’une seule page de modification pour générer un formulaire d’administration.  Ces pages se chargent désormais plus rapidement. [GitHub-30936](https://github.com/magento/magento2/issues/30936)

<!-- ENGCOM-8510-->

* Les valeurs numériques dans les expressions `WHERE IN` sont désormais portées en tant que nombre, et non en tant que chaîne, ce qui améliore les performances des requêtes dans certaines versions de MariaDB. [GitHub-31135](https://github.com/magento/magento2/issues/31135)

* Le mode `use_application_lock` vous permet d’activer la réindexation à l’aide de variables d’environnement ou en configurant le fichier `app/etc/env.php`. Vous n’avez plus besoin de réinitialiser manuellement l’indexeur après un échec lorsque ce mode est activé. Lorsque ce mode n’est pas activé, vous devez réinitialiser manuellement l’indexeur après un échec. Voir [Utilisation du mode de verrouillage de l’application pour les processus de réindexation](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### Tarifs

<!-- MC-41767-->

* L’application met à jour correctement le prix d’un produit avec des prix groupés lorsqu’un acheteur met à jour la quantité d’un produit sur le storefront. [GitHub-32669](https://github.com/magento/magento2/issues/32669)

<!-- MC-39282-->

* Les produits groupés peuvent désormais être enregistrés lorsque des produits se voient attribuer un prix de niveau et que `Magento\Framework\Api\ExtensibleDataObjectConverter` est utilisé pour convertir les données de produit. Auparavant, lorsque `Magento\Framework\Api\ExtensibleDataObjectConverter` était utilisé pour convertir les données de produit en tableau lorsqu’un produit était enregistré, l’application n’enregistrait pas le produit et affichait cette erreur : `Notice: Undefined index: price in app/code/Magento/Catalog/Model/Product/Type/Price.php on line 382.`

<!-- MC-36811-->

* Les mises à jour de prix planifiées sont désormais appliquées aux produits déjà présents dans le panier d’un acheteur. [GitHub-356](https://github.com/magento/partners-magento2ee/issues/356)

<!-- MC-24693-->

* Le prix de niveau est désormais appliqué à un produit comme prévu lorsque des incréments de quantité sont activés et que l’inventaire décimal est inférieur à 1. Auparavant, la quantité minimale de prix était définie sur 1.

### Vidéo produit

<!-- MC-39755-->

* Vous pouvez désormais utiliser le bouton **Ajouter une vidéo** (Admin **Catalogue** > **Produits**) pour ajouter plusieurs vidéos consécutivement. Auparavant, les champs vidéo conservaient les détails de la vidéo précédente.

<!-- MC-40817-->

* Le passage en mode plein écran d’une vidéo de produit sur une page de produit fonctionne désormais comme prévu sur les appareils mobiles. Auparavant, le passage en mode Plein écran entraînait la mise en pause de la vidéo avant de quitter le mode Plein écran.

<!-- MC-39759-->

* Les boutons fléchés de navigation (**Suivant** et **Précédent**) sont désormais visibles comme prévu sur les vidéos de produit storefront.

<!-- MC-40463-->

* Les vendeurs peuvent désormais ajouter des vidéos Vimeo à l’aide du bouton **Insérer une vidéo** sur la page du produit, comme prévu. Auparavant, l’application affichait une erreur 404. [GitHub-31753](https://github.com/magento/magento2/issues/31753)

### Citation

<!-- MC-39531-->

* L’appel `/V1/guest-carts/examplecartid/items` renvoie désormais la vue de magasin demandée. Auparavant, il renvoyait la première vue de magasin dans le magasin, et non la vue demandée.

<!-- MC-33893 ENGCOM-8992-->

* L’envoi de facture peut désormais être configuré. Auparavant, l’envoi de factures n’était pas configurable et l’application envoyait toujours une facture après sa création. Les courriers électroniques de factures et de commandes ont tous deux été envoyés sous la forme d’un observateur. Des observateurs distincts régissent désormais l’envoi d’emails de commande et de factures. [GitHub-27656](https://github.com/magento/magento2/issues/27656)

### Rapports

<!-- MC-39737-->

* La date de la dernière révision sur l’administrateur **>** Révisions **>** Par produits **affiche désormais la date de révision correcte.** Auparavant, l’application affichait la date de création du produit au lieu de la date de révision.

### Révisions

<!-- MC-40116-->

* Les étoiles d’évaluation de la révision des produits sont désormais correctement calculées dans la section Détails de la révision de la page Mon compte.

<!-- MC-39763-->

* Les sections Note de produit moyenne et Note de produit de la page des détails de la révision du produit s’affichent désormais correctement. Auparavant, l’ID de révision n’était pas défini lorsque l’application calculait l’évaluation storefront et le modèle de révision de produit n’était pas correctement rendu.

<!-- MC-36149-->

* Le lien **Être le premier à passer en revue ce produit** change désormais comme prévu pour un nombre de révisions après qu’un administrateur a approuvé une révision.

<!-- ENGCOM-8501 MC-30270-->

* Les administrateurs peuvent désormais trier les avis sur les produits dans la section des avis sur les produits de la page de modification du produit, comme prévu. [GitHub-30270](https://github.com/magento/magento2/issues/30270)

<!-- MC-41003  magento/magento2#32259-->

* Les révisions sont désormais enregistrées avec l’ID de magasin correct une fois qu’un administrateur a approuvé et enregistré la révision à partir d’un domaine différent de celui du magasin. [GitHub-17510](https://github.com/magento/magento2/issues/17510)

### Références

<!-- MC-39820-->

* L’application met à jour la liste des méthodes de paiement lorsqu’un acheteur passe en caisse avec plusieurs adresses coche ou décoche l’option **Crédit de boutique (points de récompense)** .

### Ventes

<!-- MC-39796-->

* Les utilisateurs administrateurs peuvent désormais passer des commandes pour des éléments en rupture de stock lorsque le paramètre **Les commandes en arrière-plan sont autorisées** est activé (**Magasins** > **Configuration** > **Catalogue** > **Inventaire** > **Options d’inventaire des produits**). Auparavant, l’application entraînait une erreur.

<!-- MC-42280-->

* Les acheteurs peuvent désormais trouver une commande sur la page Commandes et retours lorsque le nom se termine par un espace blanc.

<!-- MC-41438-->

* Les factures sont désormais créées avec le total général correct lorsqu’une règle de prix de panier attribuant une remise de 100 % est appliquée à une commande qui est également soumise à des taxes de catalogue et de réduction et qui est admissible à la livraison gratuite. Auparavant, la commande avait le prix correct, mais pas la facture. [GitHub-30853](https://github.com/magento/magento2/issues/30853)

<!-- MC-40384-->

* Le filtrage des commandes par date renvoie désormais des résultats précis. Auparavant, l’application ne renvoyait pas de commande qui était placée après 00:00 UTC lorsque vous filtriez les commandes par date de commande.

<!-- MC-40030-->

* La grille de notation de crédit affiche désormais le symbole monétaire correct lorsque la portée **Website** est utilisée pour un attribut **Price** dans un déploiement multi-magasin.

<!-- MC-40013-->

* Les boutons radio Modes de paiement ne disparaissent plus dans la section Informations sur le paiement et l’expédition du workflow de passage en caisse après le rechargement de la page Admin Créer une commande . [GitHub-32106](https://github.com/magento/magento2/issues/32106)

<!-- MC-39891-->

* Le texte arabe s’affiche désormais correctement dans les factures.

<!-- MC-39864-->

* La demande calcule désormais correctement les totaux de taxe sur les avoirs partiels pour les avoirs bloqués sur la base d’une commande ou d’une facture dans les magasins qui déploient PayPal payment Pro comme passerelle de paiement. Auparavant, pour les commandes comportant plusieurs factures, l’application appliquait la taxe totale de cette commande pour l’annulation partielle d’une facture dans l’avoir.

<!-- MC-39521 ENGCOM-8528-->

* L’application ne crée plus de blocages aléatoires de base de données lors de l’envoi de nouveaux emails de commande aux clients. Auparavant, des blocages se produisaient, car l’application enregistrait l’intégralité de l’objet et ses objets associés au lieu de colonnes SQL mises à jour. L&#39;application a affiché ce type d&#39;erreur : `SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction`. [GitHub-31090](https://github.com/magento/magento2/issues/31090)

<!-- MC-39353-->

* La page Détails de la commande du storefront affiche désormais la quantité de produit expédiée correcte. Auparavant, les quantités de produits étaient incorrectes, car le modèle de la page d’envoi de commande affichait **Qté expédiée** comme `int`. Ceci a été remplacé par `float`.

<!-- MC-39026-->

* L’application n’envoie plus de courrier électronique aux copies d’une facture de commande lorsque le bouton **Copie e-mail de la facture** est décoché. Auparavant, l’application envoyait un courrier électronique à **Customer** et **Send Invoice Email Copy To**. [GitHub-28511](https://github.com/magento/magento2/issues/28511)

<!-- MC-38973-->

* L’application ne crée plus d’entrées d’adresse en double pour un compte client lors de la création d’une commande à partir de l’administrateur d’un client existant. La case à cocher **Enregistrer dans le carnet d’adresses** a été renommée **Ajouter au carnet d’adresses** et n’est désormais plus cochée par défaut dans l’administrateur.

<!-- MC-38834-->

* L’application utilise désormais le logo qui a été chargé dans les paramètres **Logo pour la vue d’impression d’HTML** lorsque les acheteurs impriment une commande à partir de leur compte. Auparavant, l’application affichait le logo LUMA au lieu du logo chargé.

<!-- MC-38625-->

* Le téléavertisseur des éléments de commande sur le storefront fonctionne désormais comme prévu lorsque le nombre d’éléments dépasse 20. Auparavant, le téléavertisseur prenait en compte les produits enfants et le nombre total était incorrect.

<!-- MC-23915 ENGCOM-8713-->

* L’application affiche désormais les symboles de devise appropriés pour le sous-total et l’expédition et la gestion des valeurs sur les grilles de page Commande et Mémo de crédit. [GitHub-22662](https://github.com/magento/magento2/issues/22662)

<!-- ENGCOM-8486-->

* Les administrateurs qui utilisent Safari peuvent désormais ajouter un produit à une commande à partir de l’administrateur. Auparavant, lorsque l’administrateur cliquait sur le bouton **Ajouter les produits sélectionnés à commander** , l’application affichait l’icône de chargement en rotation et la page bloquée.

### Règle de vente

<!-- MC-40671-->

* L’application applique désormais les règles de prix du panier avec les conditions **Maximum Qty Discount&quot; (réduction maximale sur la qualité) est appliquée à** ou **conditions de qualité de remise (achat X)** correctement lorsque plusieurs règles de prix du panier sont appliquées au panier. Auparavant, si une règle de prix de panier avec **Remise maximale sur la qualité est appliquée à** ou **Étape de prix de remise (Buy X)** était appliquée après une autre règle de prix de panier, la remise totale était réduite à la valeur configurée pour **Remise maximale sur la qualité est appliquée à** ou **Étape de prix de remise (Buy X)** fois le prix du produit.

<!-- MC-39827-->

* Le rapport Coupon reflète désormais fidèlement l’activité des coupons dans les déploiements où une base de données partagée est implémentée.

<!-- MC-39477-->

* Les règles de prix du panier qui contiennent la condition Catégorie **IS NOT** sont désormais appliquées comme prévu aux produits enfants/simples configurables qui ne sont pas affectés à une catégorie mais dont les produits parents sont affectés.

<!-- MC-39034-->

* La requête GraphQL `cart` renvoie désormais le total général correct pour l’étape de facturation d’un panier lorsqu’un coupon est appliqué à la commande.

### Rechercher {#search-heading}

<!-- MC-41138-->

* La page de catégorie ne contient plus ces ID d’élément d’HTML en double : `modes-label`, `mode-list`, `toolbar-amount`, `sorter`, `limiter`.

<!-- MC-40981-->

* Les résultats de recherche par mots partiels n’incluent plus de correspondances inattendues ou non pertinentes, et les recherches produisent des résultats cohérents à la fois sur le storefront et sur l’administrateur. L’application utilise désormais un autre analyseur sans aucun filtre pour les recherches de mots partielles. Auparavant, les résultats de recherche affichaient des produits qui n’incluaient pas de mots-clés de recherche. (L’analyseur par défaut incluait auparavant un moteur de recherche, et comme le même analyseur était utilisé au moment de la recherche pour une recherche par mot partielle, le résultat de la recherche pouvait produire des correspondances inattendues ou non pertinentes.)

<!-- MC-40715-->

* La recherche rapide renvoie désormais des résultats si la requête de recherche comporte plusieurs mots et si le nom du produit est configuré comme ne pouvant pas faire l’objet d’une recherche. Auparavant, si le nom du produit était configuré comme ne pouvant pas faire l’objet de recherches, l’application générait une exception de requête sur les requêtes comportant plusieurs mots.

<!-- MC-40672-->

* Les résultats de recherche incluent désormais l’attribut `weight` comme prévu lorsqu’il est configuré comme pouvant faire l’objet d’une recherche.

<!-- MC-40409-->

* L’application ne renvoie plus d’erreur lorsque vous affichez une page de catégorie vide avec l’Elasticsearch activé. Il effectue plutôt le rendu de la page comme prévu et affiche un message informatif. Auparavant, un index de texte intégral vide déclenchait une exception sur une page de catégorie.

<!-- MC-40376-->

* La fonction de saisie automatique des champs de recherche fonctionne désormais comme prévu si un acheteur clique en dehors du champ de recherche après avoir commencé sa recherche. Les suggestions de saisie automatique réapparaissent désormais lorsque l’acheteur reprend la saisie. Auparavant, l’application n’affichait pas les suggestions de saisie automatique et, si vous cliquiez dans la zone de recherche, les suggestions de recherche n’étaient plus visibles (bien que d’autres lettres aient été saisies).

<!-- MC-34217-->

* La recherche d’un produit en fonction de son SKU complet ou partiel dans la recherche avancée renvoie désormais le produit attendu.

<!-- MC-31395-->

* Les filtres de navigation en couches affichent désormais un nombre de produits précis. Auparavant, les valeurs du nombre de produits de l’Elasticsearch n’étaient pas filtrées par les autorisations de catalogue.

<!-- MC-23881 ENGCOM-8618-->

* Elasticsearch ne renvoie plus d’erreur lorsque le paramètre de page de l’URL de catégorie dépasse la pagination. [GitHub-23843](https://github.com/magento/magento2/issues/23843)

<!-- MC-24033  magento/magento2#3274-->

* Vous pouvez désormais ajouter un mappeur de champ Elasticsearch personnalisé à `Magento\Elasticsearch\Model\Adapter\FieldMapper\Product\FieldProvider\FieldName\Resolver\CompositeResolver`.

<!-- ENGCOM-9029 MC-24026-->

* Les développeurs peuvent désormais modifier les mappages Elasticsearch. Auparavant, les modèles dynamiques envoyés au serveur Elasticsearch dans les mappages par défaut étaient codés en dur, ce qui empêchait les développeurs d’indexer en Elasticsearch toutes les données supplémentaires associées à un module personnalisé.

<!-- ENGCOM-8464 -->

* Les champs de recherche (minisearch de formulaire) fonctionnent désormais comme prévu lorsque les suggestions de recherche sont désactivées.

### Expédition

<!-- MC-41464-->

* L’application met désormais à jour les prix d’expédition comme prévu lorsqu’un acheteur revient sur la page du panier après avoir supprimé un produit lors de son passage en caisse avec plusieurs adresses.

<!-- MC-41343-->

* La demande affiche désormais le prix d’expédition ajusté correct lorsque certains articles du panier remplissent les conditions d’expédition gratuite. Auparavant, lorsqu’un sous-ensemble d’articles du panier était qualifié pour la livraison gratuite, l’application n’ajustait pas le prix de livraison et affichait le prix de livraison complet à l’acheteur.

<!-- MC-41186-->

* Les utilisateurs administrateurs qui sont limités à un site web spécifique peuvent désormais créer une livraison pour une commande passée sur le même site web. Auparavant, l’application renvoyait cette exception lorsqu’un utilisateur administrateur dépourvu d’autorisation d’accès à la vue de magasin par défaut tentait d’envoyer une commande qui était placée dans une vue de magasin à laquelle l’utilisateur administrateur avait accès : `Notice: Undefined offset: 1 in /app/code/Magento/Catalog/Model/Product/Attribute/Backend/GroupPrice/AbstractGroupPrice.php on line 293`.

<!-- MC-41069-->

* La demande prend désormais en compte les remises appropriées des règles de prix de panier lorsqu’elle détermine si une commande répond aux conditions d’expédition gratuite de DHL.

<!-- MC-40702-->

* Les libellés d’expédition utilisent désormais la devise de base comme prévu au lieu de la devise de commande pour les magasins qui prennent en charge plusieurs devises lorsqu’une commande est placée dans une devise autre que la devise de base. [GitHub-31891](https://github.com/magento/magento2/issues/31891)

<!-- MC-40678-->

* L’application affiche désormais le sous-total de commande correct lorsqu’un acheteur revient sur la page du panier au cours de l’extraction après s’être éloigné de la page à expédition multiple. [GitHub-31889](https://github.com/magento/magento2/issues/31889)

<!-- MC-40541 magento/magento2#31841 -->

* La modification des informations de facturation lors de la création d’une commande par l’administrateur ne modifie plus les informations d’expédition pour les clients dont les adresses de livraison et de facturation par défaut sont différentes. [GitHub-31786](https://github.com/magento/magento2/issues/31786)

<!-- MC-37385 ENGCOM-8578-->

* L’application ne décoche plus la case **Ajouter les commentaires** lorsqu’un acheteur clique sur **Obtenir les méthodes et les tarifs d’expédition** et sélectionne une méthode d’expédition lors de la création d’une commande à partir de l’administrateur.

<!-- MC-36425-->

* Les acheteurs peuvent désormais utiliser le bouton Retour du navigateur pour revenir à la page Sélectionner la méthode d’expédition lors de l’extraction d’une commande avec plusieurs adresses. Auparavant, l’application affichait une page Choix de la méthode d’expédition corrompue. [GitHub-30268](https://github.com/magento/magento2/issues/30268)

<!-- MC-40021 ENGCOM-8983-->

* La quantité de produit reste désormais inchangée, comme prévu, après qu’un acheteur ait modifié la quantité sur la page d’adresse Ship to multiple et qu’il ait cliqué sur le bouton Précédent du navigateur.

<!-- ENGCOM-9096-->

* Les frais de méthode d’expédition à taux plat ne deviennent plus nuls lorsqu’une règle de prix de panier est appliquée lors du passage en caisse. [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- ENGCOM-8537-->

* L’application ne renvoie plus d’erreur lorsqu’un commerçant tente d’expédier une commande à l’aide de DHL lorsque la case à cocher **Créer une étiquette d’expédition** est activée et que le nom du produit contient des caractères Unicode. Auparavant, l’application affichait cette erreur lors de la demande de création d’étiquettes : `The response is in wrong format`.

<!-- ENGCOM-8952 -->

* Vous pouvez passer une commande à partir de l’administrateur dans un déploiement multi-site dans lequel `United States` est activé sur un site web et`Disable all countries` est activé comme étendue par défaut sur l’autre site web. Auparavant, l’application n’avait pas passé la commande et affichait cette erreur : `Please check the shipping address information. "regionId" is required. Enter and try again`.

### Magasin

<!-- MC-40538-->

* L’application ne traite plus une chaîne de `0` comme une valeur vide lors de l’affichage d’une page d’accueil de magasin. Auparavant, l’application traitait une valeur entière au début d’un chemin de requête comme identifiant de magasin, ce qui avait des effets inattendus sur l’optimisation pour les moteurs de recherche.

<!-- MC-40313-->

* Les modules externes pour `\Magento\Framework\App\ActionInterface` sous `lib/internal/Magento/Framework/App/Action/Plugin` ont été supprimés pour respecter la directive selon laquelle les modules externes doivent être utilisés pour personnaliser le comportement d’un module à partir d’un autre module. [GitHub-28050](https://github.com/magento/magento2/issues/28050)

<!-- MC-24772-->

* L’application affiche désormais ce message lorsque vous essayez de sélectionner `Website` comme valeur par défaut lorsque `Store View` est désactivé lors de la création du site web : `Please enable your Store View before using this Web Site as Default`. Auparavant, le site web se bloquait et l’application n’affichait pas d’alerte.

### Taxe

<!-- MC-39571-->

* L’application prend désormais en compte la taxe cachée lors de la validation du montant minimum de la commande.

<!-- MC-38025 ENGCOM-8612-->

* L’application affiche désormais les taxes fixes sur les produits (FPT) comme prévu lorsqu’un acheteur revient dans son panier et passe en caisse après avoir ajouté des produits en bundle au panier. [GitHub-30250](https://github.com/magento/magento2/issues/30250)

<!-- MC-37657 magento/magento2#31850-->

* L’application pré-remplit désormais les champs de saisie **Numéro de TVA** pour les adresses de facturation et de livraison de la section Informations sur l’adresse de la nouvelle page Admin de commande avec des numéros de TVA enregistrés lorsqu’un administrateur crée une commande pour un client existant. [GitHub-31846](https://github.com/magento/magento2/issues/31846)

<!-- ENGCOM-8617 magento-engcom/magento2ee#558-->

* L’application affiche désormais un champ **Numéro de TVA** sur la page d’enregistrement des clients lorsque `customer/create_account/vat_frontend_visibility` est activé.

### Test

<!-- MC-41393-->

* Les environnements de test ont été mis à niveau vers Redis 6.0.12.

<!-- ENGCOM-8529-->

* Suppression de `CacheCleaner::cleanAll();` des tests d’intégration.

<!-- ENGCOM-8898-->

* Ajout d’un test pour ce scénario : les utilisateurs administrateurs peuvent modifier un compte client lorsque le client est abonné à une newsletter mise en file d’attente.

<!-- ENGCOM-8484-->

* Suppression de la commande `cache:flush` des tests afin d’améliorer le temps d’exécution des modules `Catalog`, `CatalogUrlRewrite` et `LoginAsCustomer`.

<!-- ENGCOM-8499-->

* Les paramètres redondants ont été supprimés et le POST remplacé par GET là où nécessaire dans `\Magento\Logging\Model\ProcessorTest::testLoggingProcessorLogsActionShipping`.

### Thème

<!-- MC-41474-->

* La page de connexion du client n’affiche plus ce message lorsque le paramètre **Déplacer le code JS au bas de la page** (**Magasin** > **Configurations** > **Avance** > **Développeur** > **Paramètres JavaScript**) et que les cookies sont activés tous les deux : `The store will not work correctly in the case when cookies are disabled`.

<!-- MC-40982-->

* Les liens de compte dans les en-têtes suivent désormais les normes WCAG. Auparavant, les liens de compte dans les en-têtes contenaient des ID dupliqués, ce qui provoquait l’échec de la validation WCAG.

<!-- MC-40278-->

* L’application donne désormais la priorité à la configuration du magasin pour une image de logo plutôt qu’à la configuration de la mise en page. Auparavant, la taille des images du logo était fixe et ne variait pas en fonction du magasin.

<!-- MC-35227-->

* L’application affiche désormais les éléments de page de manière cohérente sur les pages de storefront qui utilisent des thèmes de Magento Open Source standard. Auparavant, tous les styles n’étaient pas appliqués dans le thème vierge. Par conséquent, tous les éléments de page ne s’affichaient pas dans les pages utilisant ce thème. (Par exemple, aucune icône de loupe n’était présente dans le champ de recherche de la page Mes commandes.)

### Traduction et paramètres régionaux

<!-- MC-23553-->

* Les crochets ajoutés aux chaînes ne sont plus ignorés lors de la configuration de la traduction intégrée. Auparavant, la méthode `escapeHtmlAttr` convertissait les crochets en codes d’entité HTML.

<!-- ENGCOM-8694-->

* Les expressions intraduisibles dans l’administration sont désormais traduisibles. (Cette requête de tirage contribue aux efforts continus pour rendre toutes les chaînes d’administration localisables.) [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8584-->

* Les chaînes de texte dans le modèle qui sont utilisées pour gérer les méthodes de paiement stockées (**Mon compte** > **Méthodes de paiement stockées** ) sont désormais traduisibles.

<!-- MC-30798 ENGCOM-8717-->

* Les courriers électroniques de commande envoyés par l’administrateur utilisent désormais les paramètres régionaux du magasin et non les paramètres régionaux associés au compte de l’administrateur.

### Interface utilisateur

<!-- MC-41784-->

* Le pied de page Admin affiche désormais la version correcte du produit.

<!-- MC-41067-->

* La pagination des sources est désormais présente comme prévu lors de la création de l’envoi par l’administrateur.

<!-- MC-40240-->

* Le filtre de grille de produit fonctionne désormais correctement lorsque vous utilisez des attributs de date personnalisés pour filtrer les produits et que le paramètre régional de l’utilisateur administrateur est `en_GB`.

<!-- MC-39279-->

* Les mouvements de pincement/zoom fonctionnent désormais comme prévu dans la loupe de galerie d’images de la page de produits sur les appareils iOS.

<!-- MC-38787-->

* La pagination des résultats de recherche de grille de produit Admin commence désormais à la page 1 pour chaque recherche, comme prévu.

<!-- MC-38423-->

* Les anomalies avec l’affichage du panier lors du zoom ont été résolues. Auparavant, les éléments d’affichage se chevauchaient lors du zoom de cette page.

<!-- MC-38226-->

* La page de révision des commandes affichée lors du passage en caisse avec PayPal Express Checkout se charge désormais correctement. Auparavant, le modèle contenait le bouton **Mettre à jour la méthode de diffusion** inutilisé, qui n’était que partiellement masqué par le script lors du rendu de la page.

<!-- MC-37941-->

* Les étoiles d’évaluation et le texte de révision dans la section Révisions client de la page du produit sont désormais correctement espacés lorsque de longs noms d’évaluation sont présents.

<!-- MC-37688-->

* Les options s’affichent désormais comme prévu dans la liste déroulante Actions des pages Archives des factures, des envois et des notes de crédit.

<!-- MC-23729  magento/magento2#31549-->

* L’application affiche désormais une valeur horaire correcte lorsque l’option `datetime` component `timeOnly` est définie sur **yes**. [GitHub-23157](https://github.com/magento/magento2/issues/23157)

<!-- ENGCOM-8514 -->

* Vous pouvez désormais supprimer une mise à jour de mise en page après la création d’un widget sur Admin **Content** > **Widgets**.  [GitHub-29936](https://github.com/magento/magento2/issues/29936)

<!-- ENGCOM-8502 MC-35716-->

* Le bouton **Supprimer la mise à jour de la mise en page** fonctionne désormais comme prévu sur toute mise en page que vous avez ajoutée depuis l’Admin **Contenu** > **Widgets**. Auparavant, ce bouton ne fonctionnait sur aucune autre mise en page que la première mise en page sélectionnée lors de l’ajout de plusieurs mises en page. [GitHub-30286](https://github.com/magento/magento2/issues/30286)

<!-- ENGCOM-8524 -->

* L’application utilise désormais le titre de page défini dans le fichier de mise en page comme titre de page du navigateur pour le fichier de modification du compte client. Auparavant, l’action de contrôleur `Magento\Customer\Controller\Account\Edit` appliquait la valeur de titre de page à `Account Information`. [GitHub-30724](https://github.com/magento/magento2/issues/30724)

<!-- ENGCOM-8896 8826-->

* Des cases à cocher permettant aux commerçants de basculer entre l’affichage et le masquage des mots de passe ont été ajoutées à ces pages :
   * Connexion client
   * Enregistrement de client
   * Modification du client (section Modifier le mot de passe )
   * Nouveau mot de passe défini par le client [GitHub-31557](https://github.com/magento/magento2/issues/31557)

<!-- ENGCOM-8545 -->

* Suppression d’un en-tête redondant dans les cellules de grille qui s’affichait lorsqu’un administrateur ajoutait un produit à un ensemble groupé de produits après avoir modifié le jeu d’attributs. [GitHub-30911](https://github.com/magento/magento2/issues/30911)

<!-- ENGCOM-8895 -->

* L’application affiche désormais un filtre `DateRange` dans la zone Connecté de la page **Client** > **Connexion** . Auparavant, l’application affichait un filtre `Text`. [GitHub-30328](https://github.com/magento/magento2/issues/30328)

<!-- ENGCOM-9009 -->

* JavaScript a été supprimé des fichiers de modèle et déplacé dans des fichiers distincts afin de réduire les problèmes de rendu sur les pages d’administration. Auparavant, le rendu des pages d’administration n’était pas correct dans les déploiements pour lesquels la minimisation de l’HTML avait été activée. L’application a affiché cette erreur : `An error has happened during application run. See exception log for details`. [GitHub-32454](https://github.com/magento/magento2/issues/32454)

<!-- ENGCOM-9044 -->

* Le widget `dropdownDialog` charge désormais uniquement les blocs `jquery-ui` déplaçables et redimensionnables dont il a besoin. Auparavant, il chargeait de grandes quantités de code superflu, ce qui gonflait le temps de chargement et réduisait les performances. [GitHub-32810](https://github.com/magento/magento2/issues/32810)

### URL rewrites

<!-- MC-41550-->

* Les réécritures d’URL de produit pour un site web spécifique dans un déploiement multisite sont désormais générées comme prévu une fois que les produits ont été attribués à un site web par mise à jour en masse.

<!-- MC-40780 magento/magento2#32598-->

* L’application génère désormais correctement le chemin d’URL pour les catégories enfants lorsque la case à cocher **Utiliser la valeur par défaut** pour la clé d’URL est activée pour la catégorie parente. Auparavant, le déplacement d’une catégorie dans la hiérarchie générait une valeur `url_path` incorrecte lors de l’utilisation de différentes clés d’URL dans un déploiement d’affichage multi-magasin. [GitHub-16202](https://github.com/magento/magento2/issues/16202)

<!-- MC-40371-->

* L’application met désormais à jour la `url_path` de la catégorie affectée à toute la portée du magasin lorsque vous déplacez une catégorie dans la hiérarchie de catégories. Auparavant, le déplacement d’une catégorie dans la hiérarchie générait un `url_path` incorrect.

<!-- MC-39463-->

* Les redirections d’URL créées à partir de l’administrateur à l’aide d’une URL personnalisée fonctionnent désormais correctement. Auparavant, GraphQL mettait en cache la réponse d’une requête GraphQL `urlResolver` et renvoyait l’ancienne valeur après la mise à jour de la réécriture de l’URL.

<!-- MC-38931  magento/magento2#31106-->

* Les réécritures d’URL de produit sont désormais supprimées comme prévu lorsqu’un produit est supprimé d’un site web. [GitHub-24184](https://github.com/magento/magento2/issues/24184)

<!-- ENGCOM-8719 -->

* Ajout d’une référence `main_table` à `store_id` dans la fonction `addStoreFilter` de la collection `app/code/Magento/UrlRewrite/Model/ResourceModel/UrlRewriteCollection.php`. Auparavant, des problèmes se produisaient lorsqu’un `join` était ajouté à la collection sur une table contenant également une colonne `store_id`. [GitHub-31853](https://github.com/magento/magento2/issues/31853)

<!-- ENGCOM-8894 -->

* Le point d’entrée REST `PUT /V1/products/:sku` génère à nouveau les réécritures d’URL de produit comme prévu. Auparavant, le point de terminaison a généré à nouveau les valeurs `url_key` du produit, mais pas les URL qui réécrivent. [GitHub-30316](https://github.com/magento/magento2/issues/30316)

### Utilisateur

<!-- MC-40777-->

* Vous pouvez désormais enregistrer un nouveau rôle d’utilisateur effectif (administrateur **Système** > **Autorisations** > **Rôles d’utilisateur**) avec l’arborescence `Catalog` entière sélectionnée à l’exception de `Edit Product Design` ( **Catalogue** > **Inventaire** > **Produits** > **Modifier la conception du produit**)). Auparavant, l’application n’enregistrait pas les modifications de produit effectuées par un utilisateur dans ce rôle et affichait cette erreur : `Not allowed to edit the product's design attributes`. [GitHub-31973](https://github.com/magento/magento2/issues/31973)

<!-- MC-38442-->

* L’application utilise désormais le modèle de courrier électronique personnalisé correct lors de la génération de courrier électronique pour les nouveaux utilisateurs administrateurs. Auparavant, l’application utilisait l’ancien modèle par défaut, qui omettait les prénoms et les noms de l’administrateur.

<!-- MC-38122-->

* L’application utilise désormais le modèle de courrier électronique correct lors de l’envoi d’un courrier électronique à de nouveaux utilisateurs. Auparavant, l’application utilisait le modèle par défaut même lorsqu’un modèle personnalisé était sélectionné.

### VersionCMS

<!-- MC-39953-->

* L’application applique désormais le thème correct à une page CMS après avoir modifié sa mise en page. Auparavant, l’application modifiait le thème affecté sur Luma après avoir enregistré vos modifications de mise en page, quel que soit le thème qui était affecté à la page.

### Vidéo

<!-- MC-42059 ENGCOM-9039-->

* Des vidéos sont désormais disponibles dans la galerie de produits comme prévu lorsque le regroupement JavaScript avancé est activé et utilisé. [GitHub-32501](https://github.com/magento/magento2/issues/32501)

<!-- ENGCOM-8532-->

* Les vidéos YouTube pour les produits simples qui appartiennent à un produit configurable fonctionnent désormais comme prévu. Auparavant, les images étaient classées par identifiant plutôt que par position. Par conséquent, certaines vidéos ont été traitées comme des images. [GitHub-29690](https://github.com/magento/magento2/issues/29690)

### Structure de l’API web

<!-- MC-41758-->

* L’API Catalog met désormais correctement à jour les valeurs des options personnalisées d’un produit en ajoutant de nouvelles valeurs et en supprimant les anciennes valeurs. Auparavant, l’API ne supprimait pas les anciennes valeurs.

<!-- MC-34431-->

* Le POST `/V1/guest-carts/:cartId/billing-address` renvoie désormais l’ID d’adresse sous la forme d’un entier, et non d’une chaîne.

### Widget

<!-- MC-39128-->

* Un administrateur peut désormais supprimer toutes les mises à jour de mise en page d’un widget. Auparavant, lorsqu’un widget avait plusieurs mises à jour de mise en page, un administrateur ne pouvait supprimer que la première.

<!-- MC-39107-->

* Le fait de cliquer sur le bouton **Ajouter au panier** du widget de produit n’entraîne plus le rechargement d’une page. Auparavant, lorsque vous cliquiez sur le bouton **Ajouter au panier** d’un widget de produit, une page active était rechargée avant que le produit ne soit ajouté au panier.

### Liste de souhaits

<!-- MC-40651-->

* L’application ne réinitialise plus les paramètres de configuration d’un produit configurable lorsque vous cliquez sur le bouton **Modifier l’élément** pour le produit dans une liste de souhaits. [GitHub-32119](https://github.com/magento/magento2/issues/32119)

<!-- MC-40417-->

* L’application affiche désormais le prix correct du produit lorsque vous mettez à jour un produit avec une option de fichier personnalisable dans la liste de souhaits. Auparavant, l’application affichait un prix de produit incorrect et n’affichait pas de lien vers le fichier téléchargé.

<!-- MC-39060-->

* Le nombre total de produits d’une liste de souhaits pour un client avec plusieurs listes de souhaits correspond désormais au nombre d’éléments de la liste de souhaits. Auparavant, les produits en rupture de stock étaient inclus dans le nombre total de produits.

<!-- MC-36779 magento/magento2#31110-->

* L’application supprime désormais un produit d’une liste de souhaits après l’avoir ajouté à une commande. [GitHub-30260](https://github.com/magento/magento2/issues/30260)

<!-- MC-34456 ENGCOM-8816-->

* Les acheteurs peuvent désormais ajouter des produits associés à leur panier à partir d’une liste de souhaits. Auparavant, l’application ajoutait uniquement le produit configurable, et non le produit configurable et ses produits associés, lorsqu’un acheteur cliquait sur le lien **Sélectionner tout** de la section Produits associés . [GitHub-32274](https://github.com/magento/magento2/issues/32274)

## Problèmes connus

**Problème** : _Erreur JavaScript lorsque reCAPTCHA est désactivé_. Si reCAPTCHA est désactivé pour le passage en caisse, le passage en caisse se poursuit, mais l’application affiche une erreur `Uncaught TypeError` dans le journal de la console.  Ce problème sera corrigé dans une version ultérieure. <!-- MC-42589 42649-->

**Problème** : _Erreur de stratégie de sécurité du contenu_. Le storefront affiche l’erreur suivante dans le journal de la console : `The Content-Security-Policy directive frame-ancestors does not support the source expression unsafe-inline`. Les performances de Storefront ne sont pas affectées. <!-- MC-42613-->

**Problème** : _Anomalies avec crédit PayPal affichant des montants de carte-cadeau_. Lorsque le crédit PayPal est activé et que plusieurs montants de carte-cadeau sont configurés, si un acheteur modifie le montant de la valeur d’une carte-cadeau, le storefront ne met pas à jour le montant des paiements par versements. Un correctif pour ce problème sera inclus dans Adobe Commerce 2.4.4 et Magento Open Source 2.4.4.<!-- MC-42499 AC-344-->

**Problème** : _Le bouton **Ajouter à la commande**ne fonctionne pas pour les produits ajoutés au panier par SKU_.  l’application affiche ce message d’erreur lorsque vous cliquez sur le bouton **Ajouter à la commande** après avoir ajouté des produits à la commande par SKU : `An error has happened during application run`. Les produits ne sont pas ajoutés au panier. **Solution** : utilisez la fonction Ajouter des produits . <!-- AC-345-->

## Contributions de la communauté

Nous sommes reconnaissants à l’ensemble de la communauté des Magento Open Sources et tenons à saluer leurs contributions à cette version.

L’équipe d’ingénierie de communauté [contributeurs Magento](https://magento.biterg.io/app/kibana) conserve une liste des principaux contributeurs et partenaires par mois, trimestre et année. Sur cette page Contributeurs, vous pouvez suivre les liens vers leurs relations publiques fusionnées sur GitHub.

### Contributions des partenaires

Le tableau suivant présente les contributions des partenaires. Ce tableau répertorie le partenaire qui a contribué à la demande d’extraction, la demande d’extraction externe et le numéro de problème GitHub qui lui est associé (le cas échéant).

{{$include /help/_includes/release-notes/engcomm-2-4-3-partner.md}}

### Contributions des contributeurs individuels

Le tableau suivant répertorie les contributions des membres de notre communauté. Ce tableau répertorie les demandes d’extraction externes, le numéro de problème GitHub qui y est associé (le cas échéant) et le membre de la communauté qui a contribué à la demande d’extraction.

{{$include /help/_includes/release-notes/engcomm-2-4-3-issues.md}}

### Configuration requise

Notre pile de technologie est basée sur PHP et MySQL. Pour plus d’informations, voir [Configuration requise](../../../installation/system-requirements.md).

### Instructions d’installation et de mise à niveau

Vous pouvez installer Magento Open Source 2.4.3 à l’aide de [Composer](../../../installation/composer.md).

## Kits d’outils de migration

L’outil de migration des données permet de transférer les données de magasin Magento 1.x existantes vers Magento 2.x. Cette interface de ligne de commande comprend des fonctions de vérification, de suivi de progression, de journalisation et de test. Pour obtenir des instructions sur l’installation, voir [Installation de l’outil de migration de données](../../../tools/data-migration-tool/install.md). Envisagez d’explorer le [référentiel de migration de données](https://github.com/magento/data-migration-tool) ou d’y contribuer.

La [boîte à outils de migration de code](https://github.com/magento-commerce/code-migration) permet de transférer les extensions et personnalisations de magasin Magento 1.x existantes vers Magento 2.x. L’interface de ligne de commande comprend des scripts pour la conversion des modules et des mises en page Magento 1.x.
