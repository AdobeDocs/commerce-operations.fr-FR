---
title: Notes de mise à jour de Magento Open Source 2.4.1
description: Découvrez les nouvelles fonctionnalités, les améliorations, les correctifs de bogues et les problèmes connus de la version 2.4.1 du Magento Open Source.
source-git-commit: 065c56f20ba5b1eef8c331c5c2f5649902f1442b
workflow-type: tm+mt
source-wordcount: '14729'
ht-degree: 0%

---


# Notes de mise à jour de Magento Open Source 2.4.1

Magento Open Source 2.4.1 introduit des améliorations des performances et de la sécurité. Les améliorations de sécurité incluent la prise en charge de la variable `SameSite` pour les cookies et l’ajout de la protection CAPTCHA pour les points de terminaison de l’API liés aux paiements et aux commandes, ainsi que de la page de magasin Place Order.

Cette version de inclut toutes les améliorations de la qualité de base incluses dans la version 2.4.0, plus de 150 nouveaux correctifs du code principal et plus de 15 améliorations de la sécurité. Elle comprend la résolution de presque 300 problèmes GitHub par les membres de notre communauté. Ces contributions de la communauté vont du nettoyage mineur du code principal à des améliorations significatives dans GraphQL.

Tous les problèmes connus identifiés dans la version 2.4.0 ont été corrigés dans cette version.

{{bics}}

## Correctif de sécurité disponible

Les vendeurs peuvent désormais installer des correctifs de sécurité sensibles au temps sans appliquer les centaines de correctifs fonctionnels et d’améliorations apportés par une version trimestrielle complète (par exemple, 2.4.0-p1). Le correctif 2.4.0.1 (package du compositeur 2.4.0-p1) est un correctif de sécurité qui fournit des correctifs pour les vulnérabilités identifiées dans notre version trimestrielle précédente, 2.4.0. Tous les correctifs qui ont été appliqués à la version 2.4.0 sont inclus dans ce correctif de sécurité. (A *correctif* fournit un correctif à une version publiée qui résout un problème ou un bogue spécifique.)

Pour obtenir des informations générales sur les correctifs de sécurité, voir [Présentation de la nouvelle version du correctif de sécurité](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287). Pour plus d’informations sur le téléchargement et l’application de correctifs de sécurité (y compris le correctif 2.3.5-p2), voir [Démarrage rapide de l’installation sur site](../../../installation/composer.md). Les correctifs de sécurité incluent uniquement des correctifs de sécurité, et non les améliorations de sécurité supplémentaires incluses dans le correctif complet.

## Appliquer `AC-3022.patch` continuer à proposer DHL comme opérateur de transport

DHL a introduit la version 6.2 du schéma et va abandonner la version 6.0 dans un avenir proche. Adobe Commerce 2.4.4 et les versions antérieures qui prennent en charge l’intégration DHL ne prennent en charge que la version 6.0. Les vendeurs qui déploient ces versions doivent s’appliquer `AC-3022.patch` dès leur première convenance de continuer à proposer DHL comme transporteur. Voir [Appliquez un correctif pour continuer à proposer DHL comme opérateur de transport](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) Article de la base de connaissances pour plus d’informations sur le téléchargement et l’installation du correctif.

## Autres informations de mise à jour

Bien que le code de ces fonctionnalités soit fourni avec des versions trimestrielles , plusieurs de ces projets (par exemple, Progressive Web Application (PWA) Studio) sont également publiés indépendamment. Les correctifs de bogues pour ces projets sont documentés dans les informations de mise à jour distinctes et spécifiques au projet disponibles dans la documentation de chaque projet.

## Tons clairs

Recherchez les points forts suivants dans cette version.

### Améliorations substantielles de la sécurité

Cette version comprend plus de 15 correctifs de sécurité et améliorations de la sécurité de la plateforme. Tous les correctifs de sécurité ont été rétroportés aux versions 2.4.0-p1 et 2.3.6.

#### Plus de 15 améliorations de sécurité qui permettent de fermer des vulnérabilités d’exécution de code distant (RCE) et de script de site à site (XSS)

Aucune attaque confirmée liée à ces problèmes n&#39;a été survenue à ce jour. Cependant, certaines vulnérabilités peuvent être exploitées pour accéder aux informations sur les clients ou prendre le contrôle des sessions d’administrateur. Pour la plupart de ces problèmes, un attaquant doit d’abord avoir accès à l’administrateur. Par conséquent, nous vous rappelons de prendre toutes les mesures nécessaires pour protéger votre administrateur, y compris, mais sans s’y limiter, les actions suivantes : PLACE SUR LA LISTE AUTORISÉE IP, [authentification à deux facteurs](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html), l’utilisation d’un VPN, l’utilisation d’un emplacement unique plutôt que `/admin`et bonne hygiène des mots de passe. Voir [Mises à jour de sécurité disponibles pour Magento](https://helpx.adobe.com/security/products/magento/apsb20-59.html) pour une discussion sur ces problèmes résolus.

#### Améliorations supplémentaires de la sécurité

Les améliorations de sécurité pour cette version sont les suivantes :

* **CAPTCHA** une protection a été ajoutée aux domaines de produit suivants :

   * Placer la page de storefront des commandes et les points de terminaison REST et GraphQL <!-- MC-36067-->
   * Points de terminaison REST et GraphQL liés aux paiements.<!-- MC-36064-->

   La protection CAPTCHA de ces pages supplémentaires est désactivée par défaut. Elle peut être activée sur l’administrateur de la même manière que les autres pages couvertes par CAPTCHA. Cette protection a été ajoutée en tant que mécanisme anti-force brute pour protéger les magasins contre les attaques de carding. Voir [CAPTCHA](https://docs.magento.com/user-guide/stores/security-captcha.html).

* **Prise en charge de l’attribut SameSite pour les cookies**. Pour prendre en charge l’application Google Chrome du nouveau système de classification des cookies, les classes d’application qui gèrent les cookies ont été mises à jour afin de prendre en charge la variable `SameSite` attribut de cookie. Cet attribut est défini sur `Lax` par défaut, mais peut être remplacée explicitement. <!-- MC-35389-->

* **Outil d’analyse de sécurité amélioré**. Adobe s’est associé à [Sanguine Security](https://sansec.io/), leader dans la prévention de la fraude numérique, pour intégrer leur base de données de plus de 8700 signatures de menaces dans l’outil d’analyse de sécurité. Ce partenariat permettra aux commerçants d’obtenir des informations en temps réel sur l’état de sécurité de leur site grâce à une détection proactive des logiciels malveillants et une réduction des faux positifs. Les marchands peuvent s’inscrire à l’outil en visitant https://account.magento.com/scanner. Pour plus d’informations, voir [Sécurisation de votre storefront à l’aide de l’outil d’analyse de sécurité amélioré](https://magento.com/blog/magento-news/secure-your-storefront-enhanced-magento-security-scan-tool) billet de blog.

{{cve-notice}}

### Améliorations des infrastructures

Cette version contient des améliorations de la qualité de base, qui améliorent la qualité du framework et les domaines fonctionnels suivants : Compte client, catalogue, CMS, OMS, Import/Export, Promotions et Ciblage, Panier et passage en caisse, Évaluation et Aperçu.

### Amélioration des performances

* **Réduction de la taille des transferts réseau entre Redis et Magento**. La configuration de la liste des modules externes est désormais générée lors de l’exécution de la fonction `bin/magento di:compile` . Ces informations de configuration sont écrites dans des dossiers de métadonnées générés en fonction de la portée. Auparavant, ces informations étaient stockées en cache. Les améliorations de performances résultantes incluent une diminution de la taille du cache réseau et du temps d’exécution pour de nombreux scénarios.<!-- MC-31617-->

* **Amélioration des performances des consommateurs de la file de messages**. Trois nouveaux paramètres de configuration prennent en charge une diminution de la consommation du processeur de la file d’attente des clients. Ces paramètres facultatifs offrent un contrôle accru sur les consommateurs et permettent d’économiser les ressources du serveur. Voir [Configuration des files de messages](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) pour une description de la fonction `maxIdleTime`, `sleep`, et `onlySpawnWhenMessageAvailable` paramètres.

* **Amélioration du temps d’exécution** pour `bin/magento` des commandes.

### Intégration Adobe Stock

Cette version inclut l’intégration Adobe Stock v2.1.0.

### Nouvelle galerie de médias

La nouvelle galerie de médias est désormais activée par défaut dans l’Admin. Les vendeurs peuvent désormais effectuer ces actions sur les images de la galerie de médias :

* Suppression d’images en bloc
* Optimiser l’enregistrement multimédia en identifiant les images et les images en double qui ne sont pas utilisées sur le storefront
* Filtrage des images par zone de storefront dans laquelle elles sont utilisées, y compris le contenu des produits et des catégories et les blocs CMS
* Utilisation des métadonnées d’image
   * Affichage des métadonnées à partir des images téléchargées dans la galerie de médias
   * Modification des métadonnées d’image (titre, description et mots-clés)
   * Recherche d’images selon leurs métadonnées

### GraphQL

Cette version ajoute la couverture GraphQL pour les fonctionnalités suivantes :

* **Études de produits**. Les clients et les invités peuvent écrire des critiques de produits. Les clients peuvent récupérer leurs historiques de révision de produit. Voir [Création d’une révision de produit](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) et [Requête productReviewRtingsMetadata](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) pour plus d’informations sur la récupération d’informations sur l’infrastructure de révisions.<!-- MC-32349-->

* **Options de cadeau**. Tous les clients et invités peuvent ajouter un message cadeau à leur commande. Les clients peuvent également ajouter un emballage cadeau, des reçus de cadeaux et des cartes imprimées à la commande. Voir [`setGiftOptionsOnCart` mutation](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) et [`updateCartItems` mutation](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html)<!-- MC-32345-->

* **Historique des commandes**. Tous les clients peuvent afficher des détails sur leur historique de commandes, notamment les factures, les frais d’expédition et les remboursements.<!-- MC-20635-->

* **Ajouter au panier**. Le [`addProductsToCart` mutation](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) vous permet d’ajouter n’importe quel type de produit au principal panier. Nous recommandons d’utiliser cette mutation plutôt que des mutations à usage unique, telles que `addSimpleProductsToCart`. _Correctif soumis par Yaroslav Rogoza dans la demande d’extraction [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)  <!-- MC-21513-->

* **Méthodes de paiement stockées**. Les clients connectés peuvent désormais stocker les informations de paiement (y compris la carte de crédit du Braintree et le Braintree avec PayPal) dans Mon compte.

* **Prise en charge des listes de souhaits dans Magento Open Source**. Vous pouvez [ajouter des éléments](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) à : [mettre à jour des éléments](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) dans et [suppression d’éléments](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) d&#39;une liste de souhaits.

* **Amélioration de la gestion des comptes clients**. Nous avons ajouté la variable [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) et [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) mutations pour gérer les comptes clients ; Ces nouvelles mutations nécessitent des objets d’entrée différents de ceux du scénario `createCustomer` et `updateCustomer` mutations. Pour modifier l’adresse électronique d’un client, utilisez la nouvelle [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) mutation.

* **Prise en charge de Payflow Pro Vault**. Ajout de la prise en charge de GraphQL Vault pour la variable [Payflow Pro Vault](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) mode de paiement. _Correctif soumis par Oleh Usik dans la demande d’extraction [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* Mise à jour de GraphQL [`storeConfig` query](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) pour inclure de nouveaux paramètres de configuration client. _Correctif soumis par Oleh Usik dans la demande d’extraction [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Ajout de la fonction [`requestPasswordResetEmail` mutation](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html), qui déclenche l’e-mail de réinitialisation de mot de passe pour l’adresse électronique fournie. _Correctif soumis par Oleh Usik dans la demande d’extraction [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* **Klarna GraphQL**. Ajout ou mise à jour de rubriques sur Klarna GraphQL dans [Mode de paiement de la larna](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) et [`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

Voir [Guide du développeur de GraphQL](https://devdocs.magento.com/guides/v2.4/graphql/) pour plus d’informations sur ces améliorations.

### PWA Studio

PWA Studio v8.0.0 introduit de nouvelles fonctionnalités et améliorations :

* Mises à jour du guide de style Venia qui s’appliquent aux jetons de conception, à la typographie, aux couleurs, aux composants principaux et aux mises en page. <!-- PWA-519 419-->

* Améliorations de l’expérience de mini-panier Venia <!-- PWA-236-->

* Prise en charge initiale de plusieurs paramètres régionaux et de contenu localisé sur le storefront Venia <!-- PWA-295-->

* De nombreuses améliorations ont été apportées à l’expérience My Account du storefront Venia. <!-- PWA-247-->

Voir [compatibilité](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) pour obtenir la liste des versions de PWA Studio et de leurs versions compatibles. Pour plus d’informations sur les améliorations et les correctifs, voir [Versions PWA Studio](https://github.com/magento/pwa-studio/releases).

### Structure de test fonctionnel (MFTF)

MFTF 3.1.0 est désormais disponible. Voir [Modification de la structure de test fonctionnelle](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

### Extensions développées par le fournisseur

Consultez les articles suivants pour connaître les mises à jour des fonctionnalités et des modifications de cette version :

* [Amazon Pay](https://docs.magento.com/user-guide/payment/amazon-pay.html)

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [dotdigital Engagement Cloud](https://docs.magento.com/user-guide/marketing/dotdigital/engagement-cloud.html)

* [Klarna](https://docs.magento.com/user-guide/payment/klarna.html)

* [Vertex Cloud](https://docs.magento.com/user-guide/tax/vertex.html)

* [Critiques de produits Yotpo](https://docs.magento.com/user-guide/marketing/yotpo-reviews-intro.html)

## Problèmes résolus

Nous avons corrigé des centaines de problèmes dans le code de base 2.4.1.

### Installation, mise à niveau, déploiement

<!-- MC-36113-->

* L’installation avec des extensions tierces qui dépendent d’API pour le module Store dans les commandes de l’interface de ligne de commande n’échoue plus. Auparavant, l’application affichait ce message d’erreur : `The default website isn't defined. Set the website and try again`. Il s’agissait d’un problème connu dans la version 2.4.0.

<!-- MC-33273-->

* `bin/magento setup:di:compile` ne renvoie plus d’erreur fatale. Auparavant, l’application entraînait une erreur la première fois que vous exécutiez cette commande, mais la deuxième exécution générait une compilation réussie.

<!-- MC-34429-->

* La mise à niveau n’échoue plus lorsqu’un module externe est déclaré sur `Magento\Framework\Encryption\Encryptor`.

<!-- MC-36231-->

* L’application affiche désormais un message d’erreur informatif lorsque certains thèmes ne sont pas déployés après l’exécution de `bin/magento setup:static-content:deploy`. Auparavant, une fois le déploiement terminé avec succès mais que tous les modules n’étaient pas déployés, l’application n’affichait pas d’erreur. Lorsque la commande est exécutée avec un traitement parallèle activé et que chaque thème nécessite plus de temps pour être déployé, puis le temps d’exécution maximal spécifié, cette commande peut se terminer avec succès, bien que les thèmes ne soient pas déployés.

<!-- MC-35001-->

* Le **Utiliser la valeur par défaut** case à cocher pour les paiements klarna (**Magasins** > **Configuration** > **Ventes** > **Modes de paiement** > **Klarna**) restent cochés comme prévu lorsque la portée du site web change.

<!-- MC-33788-->

* La mise à niveau n’entraîne plus l’échec soudain de la grappe Galera. Auparavant, la grappe Galera se quittait brusquement après réindexation immédiatement après la mise à niveau. Lors d&#39;une mise à niveau, les tables d&#39;index sont modifiées et le moteur est remplacé par `MEMORY` to `InnoDB`. À ce stade, le contenu de ces tables est devenu désynchronisé entre les noeuds de la grappe Galera. [GitHub-25334](https://github.com/magento/magento2/issues/25334)

<!-- MC-34254-->

* La désactivation du module PageBuilder n’affecte plus le rendu de la page du produit. Auparavant, les mises en page personnalisées sur la page de produit disparaissaient lorsque le module était désactivé et l’application affichait une page vierge.

<!-- ENGCOM-7219-->

* Vous pouvez désormais utiliser `bin/magento sampledata:deploy` pour déployer des exemples de données comme prévu après l’installation de Magento Open Source à l’aide du compositeur. Auparavant, l’application générait cette erreur : `Git installations must deploy sample data from GitHub; see [Clone sample data Git repositories](../../../installation/sample-data/git-repositories.md) for more information`. _Correctif soumis par Andrii Beziazychnyi dans une demande de tirage [27481](https://github.com/magento/magento2/pull/27481)_. [GitHub-19481](https://github.com/magento/magento2/issues/19481)

<!-- ENGCOM-7459-->

* Les performances de Storefront ont été améliorées en éliminant le chargement inutile de la variable `Datepicker` composant. _Correctif soumis par Mateusz Krzeszowiak dans une demande d’extraction [27860](https://github.com/magento/magento2/pull/27860)_. [GitHub-28823](https://github.com/magento/magento2/issues/28823)

<!-- ENGCOM-7265-->

* Exécution `bin/magento setup:upgrade` n’affiche plus d’informations superflues sur les caches. _Correctif soumis par Sathish Subramanian dans une demande d’extraction [27567](https://github.com/magento/magento2/pull/27567)_. [GitHub-27091](https://github.com/magento/magento2/issues/27091)

<!-- MC-17959 ENGCOM-7629-->

* En cours `bin/magento config:show <vendor_module>/general/value` now renvoie `0` ou une chaîne vide comme prévu. Auparavant, il renvoyait `Configuration for path: "vendor_module/general/value" doesn't exist`. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28549](https://github.com/magento/magento2/pull/28549)_. [GitHub-23290](https://github.com/magento/magento2/issues/23290)

<!-- ENGCOM-7853-->

* `bin/magento setup:static-content:deploy --language=all` déploie désormais toutes les langues utilisées sur le storefront et toutes les langues configurées par les utilisateurs administrateurs lorsqu’aucun paramètre de langue n’est défini. (`en_US` est toujours déployé par défaut.) _Correctif soumis par Anton Evers dans la demande d’extraction [28922](https://github.com/magento/magento2/pull/28922)_. [GitHub-29218](https://github.com/magento/magento2/issues/29218)

<!-- ENGCOM-7883-->

* L’application n’affiche plus le menu Sauvegarde lorsque la fonction Sauvegarde est désactivée. _Correctif soumis par Eden Duong dans la demande d’extraction [29222](https://github.com/magento/magento2/pull/29222)_. [GitHub-29280](https://github.com/magento/magento2/issues/29280)

<!-- ENGCOM-7987-->

* L’initialisation de l’assistant d’image de catalogue utilise désormais le modèle de produit au lieu de `DataObject`. _Correctif soumis par jmonteros422 dans la demande d’extraction [29435](https://github.com/magento/magento2/pull/29435)_. [GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- MC-37226-->

* Les utilisateurs administrateurs peuvent désormais enregistrer un **Durée de vie du jeton client (heures)** (Admin) **Magasins**  >  **Configurations**  >  **Services**  >  **OAuth**  >  **Expiration du jeton d’accès**). [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7724 -->

* Le **Créer une redirection permanente pour l’ancienne URL** est désormais désactivé par défaut pour les catégories. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28752](https://github.com/magento/magento2/pull/28752)_. [GitHub-24922](https://github.com/magento/magento2/issues/24922)

### Intégration Adobe Stock

<!-- ENGCOM-7776-->

* Les images de la grille des images Adobe Stock sont désormais correctement alignées une fois les filtres effacés. _Correctif soumis par Nazar Klovanych dans une demande d’extraction [28366](https://github.com/magento/magento2/pull/28366)_. [GitHub-824](https://github.com/magento/adobe-stock-integration/issues/824), [GitHub-972](https://github.com/magento/adobe-stock-integration/issues/972)

<!-- ENGCOM-7709 -->

* Le **Utilisé dans** du champ de la page de détails de l’image de la galerie Adobe Stock identifie désormais précisément si l’image est associée à un produit. _Correctif soumis par Nazar Klovanych dans une demande d’extraction [28798](https://github.com/magento/magento2/pull/28798)_. [GitHub-1474](https://github.com/magento/adobe-stock-integration/issues/1474)

<!-- ENGCOM-7873 -->

* `\Magento\MediaGallery\Model\ResourceModel\Keyword\SaveAssetsKeywords::execute` supprime maintenant les liens vers les mots-clés qui ne sont pas spécifiés dans les paramètres et ajoute les nouveaux liens lors de la suppression des balises de mots-clés lors de la modification des détails de l’image. _Correctif soumis par jmonteros422 dans la demande d’extraction [29207](https://github.com/magento/magento2/pull/29207)_. [GitHub-1391](https://github.com/magento/adobe-stock-integration/issues/1391)

<!-- ENGCOM-7981 -->

* Le `Login failed` message indiquant que l’application s’affiche lorsqu’un commerçant clique **Licence** pour une image Adobe Stock précédemment enregistrée, sans licence ne contient plus de balises HTML. _Correctif soumis par les yolouiens dans la demande d’extraction [29398](https://github.com/magento/magento2/pull/29398)_. [GitHub-1684](https://github.com/magento/adobe-stock-integration/issues/1684)

<!-- ENGCOM-7976 -->

* Cliquez sur les liens de la **Utilisé dans** de la page Détails de l’image affiche désormais une grille qui affiche toutes les entités filtrées par l’image. Le filtre de ressources est également défini et affiché correctement. Auparavant, l’application n’affichait pas le titre de la ressource dans le **Filtres appliqués** . _Correctif soumis par Nazar Klovanych dans une demande d’extraction [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-7976 -->

* L’application n’affiche plus le **Utilisé dans** de la page Détails de l’image lorsque l’image n’est pas en cours d’utilisation. _Correctif soumis par Nazar Klovanych dans une demande d’extraction [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1699](https://github.com/magento/adobe-stock-integration/issues/1699)

<!-- ENGCOM-7976 -->

* Correction de problèmes d’affichage lors de l’ajout d’une nouvelle balise d’image qui dépasse le nombre maximal de caractères. _Correctif soumis par Nazar Klovanych dans une demande d’extraction [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1702](https://github.com/magento/adobe-stock-integration/issues/1702)

<!-- ENGCOM-7976 -->

* Les ressources peuvent désormais être vérifiées comme prévu à l’aide du filtre de ressources sur l’image Détails **Utilisé dans** . _Correctif soumis par Nazar Klovanych dans une demande d’extraction [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1704](https://github.com/magento/adobe-stock-integration/issues/1704)

<!-- ENGCOM-7976 -->

* Informations sur les images utilisées par différentes entités (par exemple, `page` et `category`) est désormais répertorié comme corrigé dans la page Détails de l’image. _Correctif soumis par Nazar Klovanych dans une demande d’extraction [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1747](https://github.com/magento/adobe-stock-integration/issues/1747)

<!-- ENGCOM-8006-->

* L’application ne renvoie plus d’exception lorsqu’un commerçant tente d’enregistrer un produit avec son image associée lorsque la galerie de médias est désactivée. _Correctif soumis par Nazar Klovanych dans une demande d’extraction [29492](https://github.com/magento/magento2/pull/29492)_. [GitHub-1750](https://github.com/magento/adobe-stock-integration/issues/1750)

<!-- ENGCOM-8019-->

* Cliquer sur les liens de la section Utilisé(e) pour une image dans la galerie de médias ouvre désormais la grille des entités qui sont filtrées par l’image comme prévu. Auparavant, le titre de l’image ne s’affichait pas dans la section des filtres appliqués de la grille. _Correctif soumis par Nazar Klovanych dans une demande d’extraction [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019-->

* L’application ajoute désormais correctement des balises lorsque vous modifiez plusieurs images successivement dans la galerie de médias. _Correctif soumis par Nazar Klovanych dans une demande d’extraction [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015-->

* L’application supprime désormais les balises des images Adobe Stock lorsqu’un commerçant supprime les balises et enregistre les détails de l’image. Auparavant, les balises n’étaient pas supprimées tant que la page n’avait pas été actualisée. _Correctif soumis par Honeymay Louiese Ignacio dans la demande d’extraction [29400](https://github.com/magento/magento2/pull/29400)_. [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

### Amazon Pay

* Amazon Pay vérifie désormais si un utilisateur est déjà connecté avant d’effectuer le rendu des options de paiement.

* Les problèmes liés à l’authentification multifacteur et aux paniers abandonnés ont été résolus.

* Amazon Pay renseigne désormais correctement la variable `store name` dans les emails et autres emplacements affichés.  Si la variable **Nom de la boutique** dans la configuration de paiement d’Amazon est vide, l’extension récupère le nom par défaut du magasin (c’est-à-dire le nom que vous donnez à votre boutique dans Admin).

* Les problèmes de localisation/traduction des scénarios de refus ont été résolus. Le texte affiché n’est plus toujours en anglais.

### Lot de produits

<!-- MC-36281-->

* L’application ne renvoie plus d’exception lorsque vous essayez de créer un produit dans un déploiement dans lequel Inventory est installé, mais que la variable `Magento_InventoryBundleProduct` est désactivé.

<!-- MC-34261-->

* L’application calcule désormais correctement les remboursements hors ligne pour les commandes contenant des produits en regroupement.

<!-- MC-24363-->

* Le mini-panier affiche désormais les prix corrects pour les produits groupés lorsque des prix de niveau sont également attribués pour les produits simples. [GitHub-22807](https://github.com/magento/magento2/issues/22807)

<!-- ENGCOM-7499-->

* Les vendeurs peuvent désormais créer une note de crédit pour les produits groupés qui offrent un remboursement sans exiger le retour du produit. Auparavant, l’application entraînait une erreur. _Correctif soumis par Dzung Nguyen dans une demande d&#39;extraction [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7655-->

* L’application n’affiche plus de messages de validation redondants lorsqu’un acheteur ajoute un produit groupé à son panier sans sélectionner une option requise. _Correctif soumis par Dzung Nguyen dans une demande d&#39;extraction [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7985 -->

_Correctif soumis par Michał Derlatka dans la demande d&#39;extraction [29256](https://github.com/magento/magento2/pull/29256)_. [GitHub-26110](https://github.com/magento/magento2/issues/26110)

### Cache

<!-- MC-36096-->

* Le stockage du cache local est maintenant conservé pendant la période définie dans **Magasins** > **Configuration** > **Général** > **Web** > **Paramètres des cookies par défaut**. Auparavant, la date d’expiration des cookies était codée en dur sur un jour, ce qui la désynchronisait de ce paramètre. Par conséquent, les messages de bienvenue ne conservaient pas les informations sur les clients renvoyés pendant la durée attendue.

<!-- ENGCOM-7780-->

* Le nombre d’appels au cache de la page `config` a été réduit. _Correctif proposé par Lukasz Bajsarowicz dans la demande d&#39;extraction [28992](https://github.com/magento/magento2/pull/28992)_. [GitHub-29159](https://github.com/magento/magento2/issues/29159)

<!-- ENGCOM-7073-->

* Le vernis ne renvoie plus une `Connection reset by peer` lorsqu’un catalogue volumineux est réindexé selon le calendrier. _Correctif soumis par Matthew O&#39;Loughlin dans une demande de tirage [26256](https://github.com/magento/magento2/pull/26256)_. [GitHub-8815](https://github.com/magento/magento2/issues/8815)

<!-- MC-29069-->

* Le cache de la page entière n’est plus effacé pour les produits non liés lorsqu’un produit a été modifié dans l’administration. [GitHub-25670](https://github.com/magento/magento2/issues/25670)

### Panier et passage en caisse

<!-- ENGCOM-7950-->

* Les requêtes SQL directes ont été remplacées par le fournisseur de données, ce qui a amélioré les performances d’extraction. _Correctif proposé par Lukasz Bajsarowicz dans la demande d&#39;extraction [29376](https://github.com/magento/magento2/pull/29376)_. [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- MC-36252-->

* Les listes Produits dans la comparaison et Produits récemment comparés fonctionnent désormais comme prévu. Auparavant, lorsque la liste de comparaison était étendue, l’application n’affichait pas les produits, même si la section indiquait que la liste contenait des produits.

<!-- MC-35329-->

* Le **Supprimer** sur le bouton **Ajouter au panier par SKU** de la section d’un client **Gérer le panier** fonctionne désormais comme prévu lorsque plusieurs lignes sont sélectionnées.

<!-- MC-34999-->

* L’application ne renvoie plus d’erreur lorsque vous essayez de commander un produit par SKU lorsque les chiffres saisis correspondent à un SKU valide, mais la casse de ces chiffres diffère. Auparavant, lorsque vous saisissiez un SKU sur **Mon compte** > **Commande par SKU** qui ne correspondait pas exactement à un SKU valide, l’application a généré une erreur.

<!-- MC-25042-->

* L’adresse de livraison d’un client est désormais sélectionnée par défaut lors de l’extraction, lorsque l’adresse se trouve dans le pays identifié dans la liste Autoriser les pays et que cette liste inclut uniquement ce pays. Auparavant, l’application ne sélectionnait pas l’adresse par défaut et affichait ce message d’erreur : `Please specify a regionId in shipping address`.

<!-- MC-24043-->

* Les vendeurs peuvent désormais activer **Appliquer au montant d’expédition** dans l’onglet Action de **Marketing** > **Règles de prix du panier** > **Ajouter une nouvelle règle** when **Remise de montant fixe pour le panier entier** est appliquée. [GitHub-24422](https://github.com/magento/magento2/issues/24422)

<!-- MC-23992-->

* L’application ne renvoie plus d’exception lorsqu’un acheteur tente de dédéfinir le cookie de persistance après le début du passage en caisse, puis lorsqu’il accède à la page d’accueil du storefront. Auparavant, lorsque l’acheteur cliquait sur la variable **Pas vous ?** sur la page d’accueil, l’application a généré cette exception : `The shipping address is missing. Set the address and try again`. [GitHub-24218](https://github.com/magento/magento2/issues/24218)

<!-- MC-33899-->

* L’application affiche désormais un message de réussite de ajouts au panier lorsqu’un client ajoute un produit en rupture de stock à son panier. Auparavant, le produit était ajouté, mais l’application n’affichait pas de message de réussite.

<!-- MC-35989-->

* Les attributs d’adresse personnalisés sont désormais inclus comme prévu dans le formulaire qui s’affiche pour l’étape de paiement dans le processus de passage en caisse.

<!-- MC-36060-->

* Le **Etat/province/région** la zone de saisie est désormais activée comme prévu sur **Mon compte** > **Carnet d’adresses** > **Ajouter une nouvelle adresse**.

<!-- ENGCOM-7746-->

* Les remises sont désormais appliquées comme prévu aux frais d’expédition lorsque **Appliquer au montant d’expédition** est activée. _Correctif soumis par Andrii Kalinich dans une demande d’extraction [28839](https://github.com/magento/magento2/pull/28839)_. [GitHub-26723](https://github.com/magento/magento2/issues/26723)

<!-- ENGCOM-7752-->

* Le code qui prend en charge la fermeture du mini-panier a été restructuré pour supprimer la variable `closeSidebar` fonction . La liaison de clics appropriée a été ajoutée au `[data-action="close"]` élément . _Correctif soumis par lumnin dans la demande d’extraction [28906](https://github.com/magento/magento2/pull/28906)_. [GitHub-29161](https://github.com/magento/magento2/issues/29161)

<!-- ENGCOM-7585-->

* La nouvelle **Afficher le bouton &quot;Effacer le panier&quot; sur la page du panier** le paramètre de configuration permet de contrôler l’affichage d’une **Effacer le panier** sur la page d’affichage du panier. Par défaut, ce paramètre est désactivé. _Correctif soumis par Pavlo Sydorenko dans une demande d&#39;extraction [27917](https://github.com/magento/magento2/pull/27917)_. [GitHub-28705](https://github.com/magento/magento2/issues/28705)

<!-- ENGCOM-7457-->

* La validation a été ajoutée au champ téléphone dans le workflow de passage en caisse. _Correctif soumis par Oleh Usik dans la demande d’extraction [27537](https://github.com/magento/magento2/pull/27537)_. [GitHub-28800](https://github.com/magento/magento2/issues/28800)

<!-- ENGCOM-5629-->

* Le passage en caisse des invités est désormais désactivé comme prévu lorsqu’un panier contient des produits téléchargeables lorsque la variable **Partager** et **Désactiver le passage en caisse des invités si le panier contient des éléments téléchargeables** sont désactivés. _Correctif soumis par Rani Priya dans une demande d’extraction [23972](https://github.com/magento/magento2/pull/23972)_. [GitHub-23971](https://github.com/magento/magento2/issues/23971)

<!-- ENGCOM-7949-->

* Le message de réussite affiché par l’application lorsqu’un acheteur ajoute un produit à son panier à partir de la barre latérale du compte client contient désormais un lien vers le panier de l’acheteur. _Correctif soumis par Ajith dans la demande d’extraction [27977](https://github.com/magento/magento2/pull/27977)_. [GitHub-29097](https://github.com/magento/magento2/issues/29097)

<!-- ENGCOM-7825-->

* L’application sélectionne désormais par défaut une valeur vide pour le menu des options de liste déroulante des préfixes dans le workflow de passage en caisse. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28238](https://github.com/magento/magento2/pull/28238)_. [GitHub-18823](https://github.com/magento/magento2/issues/18823)

<!-- ENGCOM-8004-->

* Le message contextuel qui s’affiche lorsque vous supprimez plusieurs articles d’un panier décrit désormais précisément le nombre et le type d’entités que vous avez sélectionnées pour suppression. _Correctif soumis par Nazar Klovanych dans une demande d’extraction [29490](https://github.com/magento/magento2/pull/29490)_. [GitHub-1749](https://github.com/magento/adobe-stock-integration/issues/1749)

<!-- MC-36418-->

* L’application affiche désormais un formulaire d’enregistrement du client lorsqu’un utilisateur invité termine le passage en caisse.

<!-- MC-35607-->

* Les champs d’attributs d’adresse client personnalisés s’affichent désormais comme prévu dans le workflow de passage en caisse du storefront.

<!-- ENGCOM-7793-->

* L’application récupère désormais le groupe de clients actuel pour un principal guillemet lors du passage en caisse. Auparavant, l’application utilisait le groupe de clients principal lors de l’ajout initial du produit au panier. Si ce groupe de clients était supprimé avant le passage en caisse, l’application générait une erreur. _Correctif proposé par Konstantin dans la demande d’extraction [28902](https://github.com/magento/magento2/pull/28902)_. [GitHub-29327](https://github.com/magento/magento2/issues/29327)

### Catalogue

<!-- MC-31068-->

* L’application supprime désormais les produits désactivés du panier d’un acheteur avant le passage en caisse. Auparavant, lorsqu’un acheteur ajoutait un produit à son panier qui était désactivé avant la fin du passage en caisse, l’application supprimait le produit désactivé du panier, mais le produit restait dans la citation et l’acheteur ne pouvait pas l’extraire. [GitHub-26680](https://github.com/magento/magento2/issues/26680)

<!-- MC-30624-->

* L’application trie désormais les produits à succès comme prévu. Auparavant, le nombre de produits et la pagination des résultats de tri étaient incorrects. [GitHub-25955](https://github.com/magento/magento2/issues/25955)

<!-- ENGCOM-7292-->

* Les acheteurs peuvent désormais ouvrir la page des détails d’un produit en cliquant sur le nom du produit dans la barre latérale de comparaison des produits. _Correctif soumis par Eduard Chitoraga dans la demande d’extraction [27451](https://github.com/magento/magento2/pull/27451)_. [GitHub-21101](https://github.com/magento/magento2/issues/21101)

<!-- ENGCOM-7513-->

* `children_count` les valeurs restent désormais positives lorsqu’un administrateur supprime des catégories. Auparavant, lorsqu’un administrateur supprimait des catégories, la variable `children_count` pour les catégories restantes était négative. _Correctif soumis par Vitali Prokopov dans une demande d&#39;extraction [28044](https://github.com/magento/magento2/pull/28044)_. [GitHub-27969](https://github.com/magento/magento2/issues/27969)

<!-- MC-34314-->

* L’application utilise désormais l’option par défaut (**Configuration** > **Web** > **Disposition par défaut** > **Disposition de produit par défaut**) que vous avez sélectionné pour l’événement `page_layout` lors de la création d’un produit. Auparavant, la valeur par défaut sélectionnée n’était pas appliquée.

<!-- MC-34258-->

* Vous pouvez désormais effectuer des actions de masse avec succès sur le stock de produits d’inventaire. Auparavant, lorsque vous tentiez d’effectuer une action en masse sur le stock de produits d’inventaire, l’application affichait une page vierge. Si vous avez effectué cette action avec l’application en mode développeur, l’application a généré cette erreur : `Notice: Undefined offset: 32000 in /Users/kodithuw/sites/m23inventory/inventory/InventoryCatalogAdminUi/view/adminhtml/templates/catalog/product/edit/action/inventory.phtml on line 24`.

<!-- MC-32552-->

* Nombre total d’enregistrements affichés lorsque vous cliquez sur **Ajouter des produits** sur l’onglet Produits lors de l’ajout de produits à une catégorie de catalogue ne change plus en fonction de l’ordre de tri des produits.

<!-- ENGCOM-7854 -->

* Le `{products(filter: {sku: {eq: "some sku"}}) {…}` La requête renvoie désormais les valeurs qui ont été converties dans la devise attendue. Auparavant, `price_tiers.final_price.value` ont affiché des prix spéciaux dans la devise de base. _Correctif soumis par Petkovski Marjan dans une demande de tirage [28890](https://github.com/magento/magento2/pull/28890)_. [GitHub-26121](https://github.com/magento/magento2/issues/26121)

### Nettoyage

<!-- ENGCOM-7281-->

* Correction d’un désalignement de la case à cocher de la grille Commande de vente d’administrateur . _Correctif soumis par Tu Nguyen dans une demande d&#39;extraction [27642](https://github.com/magento/magento2/pull/27642)_. [GitHub-27633](https://github.com/magento/magento2/issues/27633)

<!-- ENGCOM-7723-->

* Correction d’une faute d’orthographe dans le gestionnaire d’enregistrement de l’adresse de livraison dans le getter d’ID d’adresse de livraison. _Correctif proposé par Konstantin dans la demande d’extraction [28810](https://github.com/magento/magento2/pull/28810)_. [GitHub-28982](https://github.com/magento/magento2/issues/28982)

<!-- ENGCOM-7745-->

* Correction de la variable `getRegionNameExpresion` nom de la méthode `getRegionNameExpression`. _Correctif proposé par Pierre Grimaud dans la demande d’extraction [28832](https://github.com/magento/magento2/pull/28832)_. [GitHub-28829](https://github.com/magento/magento2/issues/28829)

<!-- ENGCOM-7657-->

* Une `init` a été supprimée de `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/Website.php` et `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/TierPriceType.php`. _Correctif soumis par Oleh Usik dans la demande d’extraction [28650](https://github.com/magento/magento2/pull/28650)_. [GitHub-29009](https://github.com/magento/magento2/issues/29009)

<!-- ENGCOM-7698-->

* `localStorage` Le polyfill a été déplacé de `base` to `frontend`. _Correctif soumis par Ihor Sviziev dans la demande d’extraction [28749](https://github.com/magento/magento2/pull/28749)_. [GitHub-28900](https://github.com/magento/magento2/issues/28900)

<!-- ENGCOM-7753-->

* Mise à jour du logo Adobe Commerce et suppression des espaces superflus dans le fichier LISEZMOI principal de la fonction `magento/magento2` référentiel. _Correctif soumis par Rafael Corr̻ a Gomes dans une demande de tirage [28891](https://github.com/magento/magento2/pull/28891)_. [GitHub-29056](https://github.com/magento/magento2/issues/29056)

<!-- ENGCOM-7771-->

* Inutile `overflowed` a été supprimée du widget de la barre latérale du mini-panier. _Correctif soumis par lumnin dans la demande d’extraction [28963](https://github.com/magento/magento2/pull/28963)_. [GitHub-29160](https://github.com/magento/magento2/issues/29160)

<!-- ENGCOM-7658-->

* Un sélecteur CSS incorrect dans la page Expédition a été corrigé. _Correctif soumis par Tu Nguyen dans une demande d&#39;extraction [28639](https://github.com/magento/magento2/pull/28639)_. [GitHub-29261](https://github.com/magento/magento2/issues/29261)

<!-- ENGCOM-7680-->

* Le `lib/internal/Magento/Framework/App/Request/Http.php` a été simplifié en optimisant la logique et en supprimant les affectations de variables redondantes et la surutilisation des retours au sein d’une fonction. _Correctif soumis par Chris Snedaker dans une demande d’extraction [28608](https://github.com/magento/magento2/pull/28608)_. [GitHub-29381](https://github.com/magento/magento2/issues/29381)

<!-- ENGCOM-7925-->

* Le `bin/magento module:status` accepte désormais plusieurs noms de module en tant qu’arguments. _Correctif soumis par Chandru Rajendran dans une demande d’extraction [28250](https://github.com/magento/magento2/pull/28250)_. [GitHub-29344](https://github.com/magento/magento2/issues/29344)

<!-- ENGCOM-7983-->

* Correction d’une faute de frappe dans la description de classe de `\Magento\Downloadable\Block\Sales\Order\Email\Items\Downloadable`. _Correctif soumis par Benjamin Rosenberger dans une demande d’extraction [29451](https://github.com/magento/magento2/pull/29451)_. [GitHub-29470](https://github.com/magento/magento2/issues/29470)

<!-- ENGCOM-7993-->

* Le `TierPriceManagement` a été restructurée afin de supprimer le code redondant. _Correctif proposé par Lukasz Bajsarowicz dans la demande d&#39;extraction [29202](https://github.com/magento/magento2/pull/29202)_. [GitHub-29477](https://github.com/magento/magento2/issues/29477)

<!-- ENGCOM-7830-->

* `autoload.php` a été restructuré afin d’améliorer la lisibilité et la vitesse de retour. _Correctif soumis par Vitaliy Ryaboy dans une demande d&#39;extraction [28923](https://github.com/magento/magento2/pull/28923)_. [GitHub-29527](https://github.com/magento/magento2/issues/29527)

### Contenu CMS

<!-- MC-35971-->

* L’onglet Hiérarchie d’une vue de magasin par défaut sélectionnée affiche désormais la page parente sélectionnée comme prévu.

<!-- ENGCOM-7602-->

* L’application ne renvoie plus d’erreur lors de la création de la vue de magasin lorsque la nouvelle vue de magasin contient une page CMS avec la même clé d’URL qu’une page dans une autre vue de magasin. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28421](https://github.com/magento/magento2/pull/28421)_. [GitHub-28357](https://github.com/magento/magento2/issues/28357)

### Produits configurables

<!-- MC-33523-->

* Les problèmes de pagination avec la liste des variations actuelles de modification de produit configurables ont été corrigés.

<!-- MC-33406-->

* L’application ne met plus à jour la case de prix des produits associés chaque fois qu’un acheteur sélectionne des options pour un produit configurable. Auparavant, l’application mettait à jour la zone de prix chaque fois qu’un acheteur sélectionnait une option pour un produit configurable.

<!-- MC-29882-->

* L’application affiche désormais le prix correct pour les produits configurables avec des options personnalisables sur la page Admin Créer une commande . Comme prévu, le prix affiché est la somme du prix du produit enfant et du prix de l’option personnalisée. Auparavant, l’application affichait uniquement le prix de l’option personnalisée. [GitHub-25766](https://github.com/magento/magento2/issues/25766)

<!-- MC-33745-->

* Le résumé de la commande affiche désormais le montant de remise correct lorsqu’une règle de prix de panier a été appliquée. Auparavant, la règle n’arrondissait pas correctement les montants lors du calcul des remises d’expédition.

<!-- MC-33765-->

* Les comptes d’utilisateurs administrateurs créés à partir d’un compte administrateur avec une portée limitée peuvent désormais créer un produit configurable avec des attributs comme prévu. Auparavant, l’application générait cette erreur : `Notice: Undefined index: value_index in 23develop/app/code/Magento/ConfigurableProduct/Helper/Product/Options/Factory.php on line 101`.

<!-- ENGCOM-7787-->

* L’application ne génère plus d’erreur de validation lorsque vous utilisez POST. `/V1/products` à un produit configurable avec une `int` de 0. Auparavant, l’application générait cette erreur : `Product with id "%1" does not contain required attribute "%2"."` _Correctif soumis par Vadim Malesh dans une demande d’extraction [29001](https://github.com/magento/magento2/pull/29001)_. [GitHub-13210](https://github.com/magento/magento2/issues/13210)

<!-- ENGCOM-7214-->

* L’attribut des options de configuration d’un produit parent n’est plus affecté à un nouveau produit configurable. `size` attribut. _Correctif soumis par Abel Truong dans la demande d’extraction [27339](https://github.com/magento/magento2/pull/27339)_. [GitHub-26449](https://github.com/magento/magento2/issues/26449)

### Cookies

<!-- ENGCOM-7156-->

* L’application crée désormais un maximum de 1 `mage-translation-file-version` et `mage-translation-storage` par session. _Correctif soumis par Ihor Sviziev dans la demande d’extraction [27364](https://github.com/magento/magento2/pull/27364)_. [GitHub-27355](https://github.com/magento/magento2/issues/27355)

### cron

<!-- MC-35884-->

* La configuration des consommateurs de la file d’attente des messages a été étendue avec de nouveaux paramètres qui aident à contrôler les consommateurs et à économiser les ressources du serveur, et qui peuvent potentiellement réduire la consommation du processeur de la file d’attente des consommateurs :

   * `maxIdleTime` définit le temps d’attente maximal en secondes pour un nouveau message de la file d’attente.
   * `sleep` indique le temps de veille en secondes avant de vérifier si un nouveau message est disponible dans la file d’attente.
   * `onlySpawnWhenMessageAvailable` identifie si un consommateur doit être généré uniquement lorsqu’un message disponible existe dans la file d’attente associée. Ce paramètre est activé globalement par défaut pour tous les consommateurs, mais peut être configuré par client.

<!-- ENGCOM-7863-->

* `cron` des expressions telles que  `3/10 * * * *` sont désormais planifiées comme prévu. _Correctif soumis par Anton Evers dans la demande d’extraction [28930](https://github.com/magento/magento2/pull/28930)_. [GitHub-29240](https://github.com/magento/magento2/issues/29240)

<!-- ENGCOM-7193-->

* `sales_clean_quotes` ne charge plus tous les guillemets expirés à la fois. Auparavant, l’application échouait avec cette erreur fatale car tous les guillemets expirés étaient chargés simultanément : `PHP Fatal error: Allowed memory size of 2147483648 bytes exhausted (tried to allocate 20480 bytes) in /path/to/magento2/vendor/magento/framework/Model/AbstractModel.php on line 359`,

### CSS

<!-- ENGCOM-7678-->

* L’application ne duplique plus CSS lors de la **CSS critique** est activée. _Correctif soumis par Tu Nguyen dans une demande d&#39;extraction [28480](https://github.com/magento/magento2/pull/28480)_. [GitHub-26498](https://github.com/magento/magento2/issues/26498)

<!-- MC-24981-->

* Le compilateur LESS côté serveur importe désormais tous les fichiers CSS distants comme prévu lors de l’exécution. `bin/magento setup:static-content:deploy -f`. Auparavant, l’application n’importait pas les fichiers distants et générait une erreur. [GitHub-25119](https://github.com/magento/magento2/issues/25119)

### Client

<!-- MC-33679-->

* Les noms de région dans les adresses client d’administration sont désormais traduits comme prévu.

<!-- MC-36226-->

* Le **Etat/Province** les champs sont maintenant renseignés comme prévu sur la page Modifier l’adresse (**Mon compte** > **Carnet d&#39;adresses**).

<!-- MC-34655-->

* L’application ne renvoie plus d’erreur lorsqu’un client clique sur la variable **Envoyer** bouton plusieurs fois sur les formulaires du storefront pour lesquels l’invisible reCAPTCHA a été activé. Auparavant, le fait de cliquer plusieurs fois sur ce bouton entraînait une erreur interne similaire à celle-ci : `Internal error: Make sure you are using reCaptcha V3 api keys`.

<!-- MC-33522-->

* L’enregistrement d’un client supprimé auprès de l’administrateur génère désormais un message d’erreur uniquement. Auparavant, l’application affichait une page vierge et générait un rapport contenant cette chaîne : `"0":"No such entity with customerId = 3","1":"#1 Magento\\Customer\\Model CustomerRegistry->retrieve() called at [app\/code\/Magento\/Customer\/Model\/ResourceModel\/CustomerRepository.php:340"`.

<!-- MC-33357-->

* L’application affiche désormais un message d’erreur comme prévu lorsqu’un administrateur tente d’enregistrer une adresse pour un client dont le compte vient d’être supprimé. Auparavant, l’application affichait une zone de message vide.

<!-- MC-33150-->

* Les libellés des champs d’adresse du workflow de passage en caisse et du carnet d’adresses ont été modifiés de manière cohérente.

<!-- ENGCOM-7244 -->

* Les libellés front-end reviennent désormais aux libellés de magasin si leurs valeurs ne sont pas nulles. Auparavant, les attributs du client utilisaient les étiquettes frontales par défaut. _Correctif soumis par Toan Nguyen dans une demande de tirage [27064](https://github.com/magento/magento2/pull/27064)_. [GitHub-27063](https://github.com/magento/magento2/issues/27063)

<!-- ENGCOM-7147 -->

* Le `sortOrder`Le nombre de liens dans le XML de mise en page a été corrigé. Auparavant, cet ordre était inversé et l’ordre décroissant était utilisé. _Correctif soumis par Tu Nguyen dans une demande d&#39;extraction [27340](https://github.com/magento/magento2/pull/27340)_. [GitHub-27162](https://github.com/magento/magento2/issues/27162)

### Répertoire

<!-- MC-32271-->

* Le format du menu déroulant Etat/Province est désormais cohérent dans l’ensemble de l’administration.

### dotdigital

* La synchronisation des commandes ne échoue plus lorsqu’une commande contient des SKU de produit qui n’existent plus dans le catalogue.

* Les catégories de produits vides ne sont plus incluses dans les données d’aperçu web.

* Le suivi des comportements web fonctionne désormais pour les marchands avec certaines configurations de thème. Un nouveau sélecteur de secours répond à cette question.

* Le champ de données d’état des abonnés n’inclut plus de valeurs vides lorsque la synchronisation du client a été exécutée à l’aide de cron. (L’émulation d’application résout ce problème.)

* Le mappage du carnet d’adresses fonctionne désormais comme prévu lorsqu’un compte dotdigital est activé au niveau par défaut, mais désactivé pour le site web principal.

* Les coupons sont désormais générés (à l’aide de l’URL de contenu dynamique externe pour la génération des coupons) pour les adresses email contenant des signes plus (&#39;+&#39;).

* Les contacts ne sont plus réabonnés lorsque leurs `last_subscribed_at` est nulle.

* Les erreurs de mise à niveau (datant de la version 4.5.2) qui affectaient les versions antérieures ont été résolues.

* Correction d’un problème de régression introduit dans la version 4.5.3 qui affectait l’utilisation d’une méthode pour obtenir le statut d’abonné lors de la préparation de l’exportation d’abonné.

* Le chiffre total des abonnés synchronisés (présenté dans les journaux et à l’écran) est désormais correctement calculé.

### Téléchargeable

<!-- MC-35026-->

* La zone Mes produits téléchargeables affiche désormais des liens vers les produits téléchargeables achetés qui font partie d’un produit groupé comme prévu.

<!-- MC-34262-->

* Cliquer sur un produit téléchargeable **Exemple** à partir de la page du produit Admin, télécharge désormais un exemple comme prévu. Auparavant, lorsque vous cliquiez sur **Exemple**, l&#39;application affichait cette erreur : `The product that was requested doesn't exist. Verify the product and try again`.

<!-- ENGCOM-7757-->

* Les acheteurs peuvent désormais télécharger des exemples de produits téléchargeables en rupture de stock. Auparavant, lorsqu’un acheteur tentait de télécharger un exemple, l’application ouvrait un nouvel onglet, sans afficher de message informatif ni lancer le processus de téléchargement. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28898](https://github.com/magento/magento2/pull/28898)_. [GitHub-23638](https://github.com/magento/magento2/issues/23638)

<!-- ENGCOM-7796-->

* Le message d’exception affiché par l’application lorsqu’un acheteur tente de définir une adresse de livraison pour un produit téléchargeable a été amélioré. _Correctif soumis par Michał Derlatka dans la demande d&#39;extraction [28904](https://github.com/magento/magento2/pull/28904)_. [GitHub-26107](https://github.com/magento/magento2/issues/26107)

<!-- ENGCOM-7715 -->

* Un produit `stock_item` les données sont mises à jour et les liens et exemples de produits téléchargeables sont conservés comme prévu lorsque vous utilisez un appel de PUT REST pour mettre à jour les données. `stock_item` valeurs. Auparavant, après la mise à jour du produit, le produit ne contenait plus de liens pour télécharger le contenu. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28799](https://github.com/magento/magento2/pull/28799)_. [GitHub-21811](https://github.com/magento/magento2/issues/21811)

<!-- MC-29905-->

* L’application affiche désormais un message plus informatif lorsqu’un client définit l’adresse de livraison pour une commande contenant uniquement des produits téléchargeables.

### Email

<!-- MC-32789-->

* L’application envoie désormais des notifications par e-mail sur les modifications de commande au message client approprié si le message électronique du client a été modifié après la création de la commande.

<!-- MC-36015-->

* Les emails de mise à jour de commande envoyés aux clients incluent désormais le bon état de commande. Auparavant, si l’état d’une commande était différent de `processing` dans un autre état, l’e-mail de commande ne reflétait pas le changement d’état.

<!-- MC-34107-->

* L’application n’affiche plus de messages trompeurs concernant les comptes existants lors du passage en caisse des invités. Auparavant, lorsqu’un invité accédait à la page de passage en caisse, puis revenait à la page d’expédition, l’application affichait cette erreur : `You already have an account with us. Sign in or continue as guest`.

<!-- MC-33905-->

* Les modèles de courrier électronique personnalisés chargent désormais les mêmes éléments que les modèles de courrier électronique natifs par défaut. Auparavant, certains éléments étaient manquants, y compris les valeurs de variable.

<!-- ENGCOM-7576-->

* Une page CSS superflue a été supprimée du modèle Email Preview. _Correctif soumis par Tu Nguyen dans une demande d&#39;extraction [27828](https://github.com/magento/magento2/pull/27828)_. [GitHub-27543](https://github.com/magento/magento2/issues/27543)

<!-- ENGCOM-7177-->

* Le texte du modèle d&#39;email qui duplique le texte déjà affiché par le pied de page a été supprimé. _Correctif proposé par Paweł Tylek dans la demande d&#39;extraction [27356](https://github.com/magento/magento2/pull/27356)_. [GitHub-28433](https://github.com/magento/magento2/issues/28433)

<!-- ENGCOM-7506-->

* Les emails d’alerte de produit sont désormais envoyés à partir du magasin auquel l’alerte est abonnée. Auparavant, cet email était toujours envoyé à partir du magasin par défaut. _Correctif proposé par Maciej Pawłowski dans la demande d&#39;extraction [26534](https://github.com/magento/magento2/pull/26534)_. [GitHub-28968](https://github.com/magento/magento2/issues/28968)

<!-- ENGCOM-7815-->

* Un doublon `customer.name` a été supprimée du modèle de courrier électronique. _Correctif proposé par Paweł Tylek dans la demande d&#39;extraction [29054](https://github.com/magento/magento2/pull/29054)_. [GitHub-29087](https://github.com/magento/magento2/issues/29087)

<!-- MC-33700-->

* Vous pouvez maintenant créer un modèle d’email qui envoie un email avec  `Content-Type: "text/plain"`. Auparavant, l’application ignorait le type de contenu spécifié dans le modèle. _Correctif envoyé par twoonesixdigital dans la demande d’extraction [26474](https://github.com/magento/magento2/pull/26474)_. [GitHub-26471](https://github.com/magento/magento2/issues/26471)

### Frameworks

<!-- MC-35893-->

* Le **Heure d’envoi des données de la journée** du champ Admin **Magasins** > **Configuration** > GÉNÉRAL > **Création de rapports avancés** La page est désormais correctement rendue.

<!-- MC-34153-->

* Les acheteurs peuvent désormais modifier le nombre de commandes affichées par page lorsque la liste Commandes s’étend sur plusieurs pages. Auparavant, l’application affichait le message suivant lorsque l’acheteur accédait à la dernière page des commandes et tentait de modifier le nombre de commandes affichées par page : `You have placed no orders`. Il s’agissait d’un problème connu pour la version 2.4.0.

<!-- MC-35020-->

* Vous pouvez désormais ajouter des produits à une catégorie lors de l’implémentation du cache de niveau 2.

<!-- MC-29755-->

* `X-Magento-Tags` Les en-têtes ne dépassent plus la taille autorisée par la spécification HTTP. Auparavant, les pages de catégorie contenant de nombreux produits renvoyaient une `X-Magento-Tag` qui générait une erreur 503.

<!-- MC-34257-->

* `sales_order_shipment_track_save_commit_after` est maintenant déclenché comme prévu lorsque vous avez utilisé l’API REST pour créer une expédition.

<!-- MC-33898-->

* L’application affiche désormais un message d’erreur informatif lorsqu’une `di compile` échoue en raison d’une dépendance inexistante. Auparavant, le message affiché n’identifiait pas la classe dans laquelle l’exception se produisait.

<!-- MC-32929-->

* L’application ne renvoie plus l’erreur fatale suivante lorsque Redis utilise toute la mémoire autorisée : `report.CRITICAL: OOM command not allowed when used memory > 'maxmemory'.`

<!-- MC-18021-->

* Les acheteurs peuvent désormais ajouter plusieurs produits à leur panier lorsque la variable `Persistent` est désactivé. [GitHub-14486](https://github.com/magento/magento2/issues/14486)

### Correctifs généraux

<!-- MC-36048-->

* Tri des produits sur l’administrateur (**Magasins** > **Attributs** > **Produits**) affiche désormais tous les produits qui répondent aux critères de recherche. Auparavant, l’application n’affichait pas d’enregistrements. Pour trier les enregistrements, vous deviez accéder à la première page des résultats de la recherche.

<!-- MC-36343-->

* Guillemets et échappement inutiles autour d’une URL dans `tracking.phtml` ont été supprimés.

<!-- MC-35998-->

* Le `var/log/system.log` affiche désormais un message plus précis lorsqu’un utilisateur tente d’accéder à un fichier de ressources non existant sous le répertoire statique et que SCD OnDemand et le mode de production sont activés. L’application consigne désormais une erreur 404. Auparavant, l’application consignait le même message consigné lorsque l’erreur se produisait en mode développeur.

<!-- ENGCOM-7286-->

* La minification JavaScript fonctionne désormais correctement. Le résolveur de fichiers de minimisation ne laisse plus les variables à la portée globale. Auparavant, `ctx`, `origNameToUrl`, et `baseUrl` des variables sous la fenêtre ont été divulguées. _Correctif soumis par Mateusz Krzeszowiak dans une demande d’extraction [27622](https://github.com/magento/magento2/pull/27622)_. [GitHub-28110](https://github.com/magento/magento2/issues/28110)

<!-- ENGCOM-7532-->

* Lorsque vous déboguez une erreur qui empêche la création de l’objet, l’application imprime désormais et consigne le message d’exception d’origine. Auparavant, le message était uniquement consigné. _Correctif soumis par Marvin Hinz dans la demande d’extraction [26572](https://github.com/magento/magento2/pull/26572)_. [GitHub-26550](https://github.com/magento/magento2/issues/26550)

<!-- ENGCOM-7577-->

* L’exécution des rappels après validation des modifications de la base de données a été améliorée. Auparavant, si un rappel échouait avec une exception, tous les rappels échouaient. _Correctif soumis par Alok Patel dans la demande d’extraction [27134](https://github.com/magento/magento2/pull/27134)_. [GitHub-28167](https://github.com/magento/magento2/issues/28167)

<!-- ENGCOM-7447-->

* Les mixins pour les modules sans dépendances définies ne renvoient plus cette erreur : `TypeError: Cannot read property 'map' of null`. _Correctif soumis par Mateusz Krzeszowiak dans une demande d’extraction [27690](https://github.com/magento/magento2/pull/27690)_. [GitHub-28340](https://github.com/magento/magento2/issues/28340)

<!-- ENGCOM-7299-->

* Le polyfill de stockage est désormais chargé et appliqué uniquement lorsque `localStorage` ou `sessionStorage` ne sont pas disponibles. _Correctif soumis par Mateusz Krzeszowiak dans une demande d’extraction [27619](https://github.com/magento/magento2/pull/27619)_. [GitHub-28381](https://github.com/magento/magento2/issues/28381)

<!-- ENGCOM-7610-->

* Les listes de commandes de storefront de plusieurs pages se comportent désormais comme prévu lorsqu’un acheteur modifie le nombre de résultats affichés par page à partir de la deuxième page de résultats ou de la page de résultats suivante. Auparavant, l’application affichait cette erreur lorsqu’un acheteur modifiait le nombre de résultats de recherche affichés dans la variable **Mon compte** > **Mes commandes** list : `You have placed no orders`. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28417](https://github.com/magento/magento2/pull/28417)_. [GitHub-28488](https://github.com/magento/magento2/issues/28488)

<!-- ENGCOM-7565-->

* La version obsolète `addWarning` a été remplacée par la méthode `addWarningMessage` dans le module de sécurité. _Correctif soumis par kishorekumarkesavan dans une demande d’extraction [28264](https://github.com/magento/magento2/pull/28264)_. [GitHub-28308](https://github.com/magento/magento2/issues/28308)

<!-- ENGCOM-7588-->

* Code généré à l’aide de la variable `bin/magento` Les commandes de ligne de commande sont désormais conformes aux exigences et aux normes de codage. _Correctif proposé par Lukasz Bajsarowicz dans la demande d&#39;extraction [28351](https://github.com/magento/magento2/pull/28351)_. [GitHub-28376](https://github.com/magento/magento2/issues/28376)

<!-- ENGCOM-7511-->

* Enregistrement d’un attribut avec `backend_type = static` ne supprime plus le contenu de la `frontend_class` champ . _Correctif soumis par jiten-patel dans la demande d’extraction [27369](https://github.com/magento/magento2/pull/27369)_. [GitHub-27051](https://github.com/magento/magento2/issues/27051)

<!-- ENGCOM-7462-->

* Code inutile et `responsive.js` ont été supprimés des fichiers chargés par les thèmes. _Correctif soumis par Mateusz Krzeszowiak dans une demande d’extraction [27617](https://github.com/magento/magento2/pull/27617)_. [GitHub-28811](https://github.com/magento/magento2/issues/28811)

<!-- ENGCOM-7856-->

* La validation a été ajoutée à la fonction **Nombre de symboles** sur la page de configuration Admin CAPTCHA . _Correctif soumis par Eden Duong dans la demande d’extraction [29199](https://github.com/magento/magento2/pull/29199)_. [GitHub-29198](https://github.com/magento/magento2/issues/29198)

<!-- ENGCOM-7999-->

* Le flux RSS se charge désormais correctement. Auparavant, le flux ne se chargeait pas la première fois, bien qu’il se chargeait comme prévu lors de l’actualisation de la page. _Correctif soumis par Vadim Malesh dans une demande d’extraction [29455](https://github.com/magento/magento2/pull/29455)_. [GitHub-25211](https://github.com/magento/magento2/issues/25211)

<!-- MC-35550-->

* Une session persistante expirée est maintenant renouvelée comme prévu lorsque l’acheteur se reconnecte.

<!-- MC-35230-->

* Durée de vie du mot de passe définie dans **Magasins** > **Configuration** > **Avancé** > **Administration** est désormais honorée. Auparavant, si vous cliquiez sur **Mot de passe oublié ?** lorsque vous êtes invité à réinitialiser votre mot de passe, vous pouvez contourner la réinitialisation du mot de passe.

<!-- MC-34369-->

* Les codes coupon sont désormais appliqués uniquement au produit spécifié. Auparavant, l’application appliquait le code de bon à tous les produits du panier. [GitHub-28246](https://github.com/magento/magento2/issues/28246)

<!-- MC-35008-->

* Les paramètres d’expiration du panier ne sont plus rédéfinis lorsqu’une mise à jour de stock ou de prix se produit. Auparavant, lorsqu’un panier était défini pour expirer dans 24 heures et qu’une mise à jour de stock ou de prix s’était produite, les indexeurs renseignaient la variable `updated_at table`, qui redéfinissent le délai d’expiration.

<!-- MC-33313-->

* L’application ne génère plus d’erreur fatale lorsqu’un administrateur affecte un client disposant d’un principal panier à un groupe de clients.

<!-- ENGCOM-7834 -->

* Sélection d’une option de barre d’outils à partir de **Outils de développement**  >  **Réseau**  sur une page de produit lors de l’exécution du navigateur Chrome ne s’initialise plus `toolbar.js` deux fois. _Correctif proposé par Paweł Tylek dans la demande d&#39;extraction [28838](https://github.com/magento/magento2/pull/28838)_. [GitHub-25934](https://github.com/magento/magento2/issues/25934)

<!-- ENGCOM-7420-->

* L’application ajoute désormais un ID de rôle ACL d’utilisateur administrateur à l’ID de cache de l’arborescence de catégorie de produits. Cela limite les arborescences de catégorie qu’un administrateur avec une portée limitée peut voir comme prévu. _Correctif soumis par quangdo-aligent dans la demande d’extraction [27429](https://github.com/magento/magento2/pull/27429)_. [GitHub-28306](https://github.com/magento/magento2/issues/28306)

### GraphQL

<!-- ENGCOM-7661 7662 7559 MC-35646 32345-->

* Les acheteurs peuvent sélectionner des options de message cadeau lors du passage en caisse. GraphQL couvre désormais les options de message cadeau pour différents types d’articles de panier. Voir [`setGiftOptionsOnCart` mutation](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) et [`updateCartItems` mutation](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html). _Correctif soumis par Oleh Usik dans les demandes d’extraction [28519](https://github.com/magento/magento2/pull/28105), [27956](https://github.com/magento/magento2/pull/27956), [28072](https://github.com/magento/magento2/pull/28072), [28072](https://github.com/magento/magento2/pull/28072). [GitHub-28519](https://github.com/magento/magento2/issues/28519)

<!-- ENGCOM-7508 -->

* Les clients et les invités peuvent écrire des critiques de produits. Les clients peuvent également récupérer leurs historiques de révision de produits. Voir [Création d’une révision de produit](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) et [Requête productReviewRtingsMetadata](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) pour plus d’informations sur la récupération d’informations sur l’infrastructure de révisions. _Correctif soumis par Eduard Chitoraga dans la demande d’extraction [27882](https://github.com/magento/magento2/pull/27882)_. [GitHub-28523](https://github.com/magento/magento2/issues/28523)

<!-- ENGCOM-7968 -->

* Le [`addProductsToCart` mutation](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) vous permet d’ajouter n’importe quel type de produit au principal panier. Nous recommandons d’utiliser cette mutation plutôt que des mutations à usage unique, telles que `addSimpleProductsToCart`. _Correctif soumis par Yaroslav Rogoza dans la demande d’extraction [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)

<!-- MC-34187-->

* La nouvelle `availableStores` query renvoie une liste d’attributs de configuration pour plusieurs magasins disponibles sur le même site web (en fonction du magasin actuel). Elle n’expose pas la liste des sites web. Voir [`availableStores` query](https://devdocs.magento.com/guides/v2.4/graphql/queries/available-stores.html). _Correctif soumis par Dmitriy Gallyamov dans une demande d’extraction [28794](https://github.com/magento/magento2/pull/28794)_. [GitHub-28569](https://github.com/magento/magento2/issues/28569)

<!-- ENGCOM-7512 -->

* GraphQL utilise désormais uniquement un jeton d’autorisation pour récupérer un type d’utilisateur et son identifiant. Auparavant, GraphQL utilisait les cookies d’un client principal pour récupérer ces informations lorsque le jeton d’autorisation était vide. _Correctif soumis par Alexander Taranovsky dans une demande d’extraction [27373](https://github.com/magento/magento2/pull/27373)_. [GitHub-28040](https://github.com/magento/magento2/issues/28040)

<!-- ENGCOM-7839 32949-->

* Nous avons ajouté la variable [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) et [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) mutations pour gérer les comptes clients ; Ces nouvelles mutations nécessitent des objets d’entrée différents de ceux du scénario `createCustomer` et `updateCustomer` mutations. Pour modifier l’adresse électronique d’un client, utilisez la nouvelle [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) mutation. _Correctif soumis par Michał Derlatka dans la demande d&#39;extraction [28888](https://github.com/magento/magento2/pull/28888)_. [GitHub-28570](https://github.com/magento/magento2/issues/28570)

<!-- ENGCOM-7750 -->

* Le `updateCustomer` la mutation ne vous permet plus de définir une variable non valide `INT` dans la variable `gender` argument . _Correctif soumis par Alexander Taranovsky dans une demande d’extraction [28487](https://github.com/magento/magento2/pull/28487)_. [GitHub-28481](https://github.com/magento/magento2/issues/28481)

<!-- ENGCOM-7663 -->

* Vous pouvez utiliser la variable `subscribeEmailToNewsletter` mutation pour abonner les clients à une newsletter. Voir [`subscribeEmailToNewsletter` mutation](https://devdocs.magento.com/guides/v2.4/graphql/mutations/subscribe-email-to-newsletter.html). _Correctif soumis par Alexander Taranovsky dans une demande d’extraction [27586](https://github.com/magento/magento2/pull/27586)_. [GitHub-27337](https://github.com/magento/magento2/issues/27337)

<!-- ENGCOM-7216 -->

* Suppression de la logique redondante dans la fonction `setShippingMethodsOnCart` résolveur de mutation. _Correctif soumis par Alexander Taranovsky dans une demande d’extraction [27349](https://github.com/magento/magento2/pull/27349)_. [GitHub-28262](https://github.com/magento/magento2/issues/28262)

<!-- ENGCOM-7638 -->

* Ajout d’une couverture de test pour le `Please provide Email of sender` erreur associée à la variable `sendEmailToFriend` mutation. _Correctif soumis par Alexander Taranovsky dans une demande d’extraction [28034](https://github.com/magento/magento2/pull/28034)_. [GitHub-28138](https://github.com/magento/magento2/issues/28138)

<!-- ENGCOM-7743 34485-->

* Le `products` la requête renvoie désormais les libellés d’option d’attribut de produit pour la vue de magasin par défaut, comme prévu. Auparavant, cette requête renvoyait les étiquettes d’option d’attribut de produit qui étaient définies pour l’administrateur. _Correctif soumis par Dmitriy Gallyamov dans une demande d’extraction [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28568](https://github.com/magento/magento2/issues/28568)

<!-- ENGCOM-7743 -->

* Les agrégations d’attributs personnalisés renvoient désormais des valeurs d’option spécifiques au magasin. _Correctif soumis par Dmitriy Gallyamov dans une demande d’extraction [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28572](https://github.com/magento/magento2/issues/28572)

<!-- ENGCOM-7707 -->

* Les intervalles de prix renvoyés dans une agrégation de produits peuvent désormais être numériques uniquement (aucun caractère générique n’est autorisé). _Correctif soumis par Dmitriy Gallyamov dans une demande d’extraction [28745](https://github.com/magento/magento2/pull/28745)_. [GitHub-28628](https://github.com/magento/magento2/issues/28628)

<!-- ENGCOM-7729 -->

* Le `categoryList` La requête renvoie désormais la réponse correcte lors de l’utilisation de fragments. _Correctif soumis par Ulzii dans la demande d’extraction [28710](https://github.com/magento/magento2/pull/28710)_. [GitHub-28584](https://github.com/magento/magento2/issues/28584)

<!-- ENGCOM-7732 7733-->

* La recherche de produits GraphQL prend désormais en compte les autorisations de catégorie configurées. Auparavant, la recherche de produits ignorait la variable **Activer** paramètre (**Magasins**  >  **Configuration**  >  **Catalogue**  >  **Catalogue** > **Autorisations de catégorie**). _Correctif soumis par Petkovski Marjan dans une demande de tirage [28757](https://github.com/magento/magento2/pull/28757) et extraire la requête 271 dans un référentiel privé`partners-magento2ee`_. [GitHub-28563](https://github.com/magento/magento2/issues/28563)

<!-- MC-31084-->

* Vous pouvez désormais ajouter un produit à un panier à l’aide de la fonction `addSimpleProductToCart` lorsque d’autres articles du panier sont en rupture de stock. Auparavant, l’application renvoyait cette erreur : `Some of the products are out of stock`. [GitHub-26683](https://github.com/magento/magento2/issues/26683)

* GraphQL par défaut `Category` trie désormais par position de catégorie, comme prévu. _Correctif soumis par Derrik Nyomo dans une demande d’extraction [29301](https://github.com/magento/magento2/pull/29301)_. [GitHub-104](https://github.com/magento/catalog-storefront/issues/104)

* Ajout de la prise en charge des listes de souhaits en Magento Open Source. Vous pouvez [ajouter des éléments](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) à : [mettre à jour des éléments](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) dans et [suppression d’éléments](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) d&#39;une liste de souhaits. _Correctif soumis par Eduard Chitoraga dans la demande d’extraction [28205](https://github.com/magento/magento2/pull/28205)_. [GitHub-28551](https://github.com/magento/magento2/issues/28551)

* Nous avons ajouté la variable [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) et [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) mutations pour gérer les comptes clients ; Ces nouvelles mutations nécessitent des objets d’entrée différents de ceux du scénario `createCustomer` et `updateCustomer` mutations. Pour modifier l’adresse électronique d’un client, utilisez la nouvelle [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) mutation.

* Ajout de la prise en charge de GraphQL Vault pour la variable [Payflow Pro Vault](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) mode de paiement. _Correctif soumis par Oleh Usik dans la demande d’extraction [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* Mise à jour de GraphQL [`storeConfig` query](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) pour inclure de nouveaux paramètres de configuration client. _Correctif soumis par Oleh Usik dans la demande d’extraction [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Ajout de la fonction [`resetPassword` mutation](https://devdocs.magento.com/guides/v2.4/graphql/mutations/reset-password.html). _Correctif soumis par Oleh Usik dans la demande d’extraction [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Ajout de la fonction [`resetPassword` mutation](https://devdocs.magento.com/guides/v2.4/graphql/mutations/reset-password.html). _Correctif soumis par Oleh Usik dans la demande d’extraction [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Ajout de la fonction [`requestPasswordResetEmail` mutation](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html), qui déclenche l’e-mail de réinitialisation de mot de passe pour l’adresse électronique fournie. _Correctif soumis par Oleh Usik dans la demande d’extraction [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Ajout ou mise à jour de rubriques sur Klarna GraphQL dans [Mode de paiement de la larna](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) et[`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

### Images

<!-- ENGCOM-7691-->

* Le balisage de HTML des images miniatures a été amélioré. _Correctif soumis par Tu Nguyen dans une demande d&#39;extraction [28642](https://github.com/magento/magento2/pull/28642)_. [GitHub-29468](https://github.com/magento/magento2/issues/29468)

### Import/export

<!-- MC-35479-->

* Le `error_report.csv` se télécharge désormais avec du contenu et est disponible dans la fonction `var/import_history/` comme prévu. Auparavant, ce fichier n’était pas généré après l’importation.

<!-- ENGCOM-7616-->

* L’importation d’un produit à l’aide d’un fichier CSV génère désormais une `error_report.csv` comme prévu. Auparavant, l’application générait le fichier, mais le supprimait une fois l’importation terminée. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28460](https://github.com/magento/magento2/pull/28460)_. [GitHub-28420](https://github.com/magento/magento2/issues/28420)

<!-- ENGCOM-7673-->

* Suppression des imports de classe redondants dans toute la base de code. _Correctif soumis par Oleh Usik dans la demande d’extraction [28696](https://github.com/magento/magento2/pull/28696)_. [GitHub-29012](https://github.com/magento/magento2/issues/29012)

<!-- MC-33730-->

* L’application importe désormais correctement les adresses client contenant une région pour un pays qui n’a pas défini de régions. Auparavant, l’application générait cette erreur : `Please enter a valid region`.

<!-- MC-33277-->

* L’application charge désormais l’ensemble d’attributs d’entité correct lorsqu’un commerçant sélectionne un type d’entité lors de la planification d’une nouvelle exportation.

<!-- MC-32956-->

* La position des produits dans la variable `catalog_category_product` le tableau se met maintenant à jour comme prévu lorsqu’un administrateur crée un produit dans l’Admin et l’affecte à une catégorie. Auparavant, la position des nouveaux produits se voyait toujours attribuer une valeur 0.

<!-- MC-34939-->

* L’exportation des données client à partir de l’administrateur s’effectue désormais correctement, et la grille de données d’exportation affiche les données client comme prévu. Auparavant, une erreur liée à l’allocation de mémoire se produisait lors de l’exportation.

<!-- MC-34657-->

* Les fichiers CSV importés capturent désormais les informations sur les produits associés comme prévu. Auparavant, les informations sur les produits associés n’étaient pas toujours chargées la première fois que le fichier CSV était importé.

<!-- MC-37424-->

* Suppression des paramètres de concept inutilisés dans `AdvancedPricing.php`. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### Index

<!-- ENGCOM-7073-->

* `Magento_CacheInvalidate` gère désormais correctement les modèles de balises volumineuses lors de l’exécution d’une `PURGE`. `sendPurgeRequest` a été restructuré afin de gérer un tableau de balises au lieu d’exiger que l’appelant utilise `implode()`. _Correctif soumis par Matthew O&#39;Loughlin dans une demande de tirage [26256](https://github.com/magento/magento2/pull/26256)_. [GitHub-26255](https://github.com/magento/magento2/issues/26255)

<!-- MC-30568-->

* Les indexeurs partagés affichent désormais l’état de **valide** après avoir exécuté `bin/magento indexer:status` après réindexation. Auparavant, les indexeurs partagés comportaient une **non valide** après une réindexation complète.

### Infrastructure

<!-- MC-37243-->

* Les problèmes de chargement des pages de catalogues et de produits sur les déploiements exécutant PHP 7.4.9 ne se produisent plus. Auparavant, l’application générait cette erreur lorsque vous tentiez de charger le catalogue et les pages de produits : `There has been an error processing your request. Exception printing is disabled by default for security reasons`. [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7994-->

* Toutes les exceptions survenant lorsque des mises en page sont rendues en mode de production sont désormais consignées dans le fichier journal des exceptions (`var/report`). Auparavant, l’application consignait ces messages dans le journal du système en tant que problèmes critiques.

<!-- ENGCOM-7154-->

* Les expressions régulières fonctionnent désormais correctement pour les pages volumineuses en raison d’une augmentation du nombre de `ipcre.backtrack_limi`t et `pcre.recursion_limit` à environ 1000000. _Correctif soumis par Mateusz Krzeszowiak dans une demande d’extraction [27270](https://github.com/magento/magento2/pull/27270)_. [GitHub-26026](https://github.com/magento/magento2/issues/26026)

<!-- ENGCOM-7483-->

* La génération des intercepteurs a été améliorée. `} else {` ont été retirées des intercepteurs; `array_map` a remplacé `foreach`. _Correctif proposé par Lukasz Bajsarowicz dans la demande d&#39;extraction [27902](https://github.com/magento/magento2/pull/27902)_. [GitHub-28383](https://github.com/magento/magento2/issues/28383)

<!-- ENGCOM-7651-->

* La création de tableaux est désormais cohérente dans toute la classe (`app/code/Magento/Sales/Model/Order/Pdf/Items/Invoice/DefaultInvoice.php`). _Correctif soumis par Nathan de Graaf dans la demande d’extraction [28515](https://github.com/magento/magento2/pull/28515)_. [GitHub-28795](https://github.com/magento/magento2/issues/28795)

<!-- ENGCOM-7484-->

* Les modules externes ont été migrés hors de la structure pour suivre la bonne pratique consistant à interdire les modules externes dans l’espace de noms Framework. _Correctif proposé par Lukasz Bajsarowicz dans la demande d&#39;extraction [27965](https://github.com/magento/magento2/pull/27965)_. [GitHub-27962](https://github.com/magento/magento2/issues/27962)

<!-- ENGCOM-7778-->

* Vous pouvez désormais utiliser la nouvelle `UrlFilterApplier` pour appliquer des filtres sur le produit,`cms_page`, et `cms_block` grilles à l’aide du paramètre d’URL de GET. _Correctif soumis par Gabriel da Gama dans une demande de tirage [28932](https://github.com/magento/magento2/pull/28932)_. [GitHub-1501](https://github.com/magento/adobe-stock-integration/issues/1501)

<!-- ENGCOM-7713-->

* L’application ne lance plus une `Undefined class constant` lorsqu’un intercepteur est généré. _Correctif soumis par Vova Yatsyuk dans la demande d&#39;extraction [28797](https://github.com/magento/magento2/pull/28797)_. [GitHub-28981](https://github.com/magento/magento2/issues/28981)

<!-- ENGCOM-7523-->

* Les données de formulaire persistent maintenant lorsque l’application renvoie une exception d’intégration lorsque vous enregistrez une intégration à l’aide d’un nom déjà utilisé. _Correctif soumis par Aditya Yadav dans la demande d’extraction [26660](https://github.com/magento/magento2/pull/26660)_. [GitHub-28143](https://github.com/magento/magento2/issues/28143)

<!-- ENGCOM-7756-->

* L’application ne tronque plus `X-Forwarded-For` en-tête à 32 caractères. _Correctif soumis par Ihor Sviziev dans la demande d’extraction [27221](https://github.com/magento/magento2/pull/27221)_. [GitHub-28693](https://github.com/magento/magento2/issues/28693)

<!-- ENGCOM-7820-->

* La logique qui vérifie si une redirection est interne fonctionne désormais correctement dans l’administrateur lors de l’utilisation d’un domaine d’administration personnalisé. Auparavant, les problèmes liés à cette logique entraînaient de nombreuses redirections d’administrateur vers la page d’accueil du magasin par défaut. _Correctif soumis par Vadim Malesh dans une demande d’extraction [29066](https://github.com/magento/magento2/pull/29066)_. [GitHub-28943](https://github.com/magento/magento2/issues/28943)

<!-- ENGCOM-7758-->

* Problèmes liés à `styles-old.less` ont été supprimés, et le linting n’identifie plus les erreurs. _Correctif soumis par Tu Nguyen dans une demande d&#39;extraction [28895](https://github.com/magento/magento2/pull/28895)_. [GitHub-24004](https://github.com/magento/magento2/issues/24004)

<!-- ENGCOM-7781-->

* `NonComposerComponentRegistration.php` a été restructuré. _Correctif soumis par Vitaliy Ryaboy dans une demande d&#39;extraction [28975](https://github.com/magento/magento2/pull/28975)_. [GitHub-29308](https://github.com/magento/magento2/issues/29308)

<!-- ENGCOM-7926-->

* `ResourceConnection.php` a été restructuré afin d’améliorer la lisibilité des classes. _Correctif proposé par Lukasz Bajsarowicz dans la demande d&#39;extraction [29341](https://github.com/magento/magento2/pull/29341)_. [GitHub-29389](https://github.com/magento/magento2/issues/29389)

<!-- ENGCOM-7910-->

* Le fichier LISEZMOI pour le serveur web intégré a été mis à jour afin d’inclure tous les paramètres Elasticsearch. _Correctif soumis par Yevhenii Dumskyi dans une demande de tirage [29300](https://github.com/magento/magento2/pull/29300)_. [GitHub-29299](https://github.com/magento/magento2/issues/29299)

<!-- ENGCOM-7814-->

* Le `Magento\CmsUrlRewrite\Plugin\Cms\Model\Store\View::aftersSave` plug-in renvoie désormais une valeur comme prévu. Auparavant, ce module externe ne renvoyait aucune valeur. Par conséquent, l’enregistrement d’une vue de magasin entraînait une erreur. _Correctif envoyé par Pieter Hoste dans la demande d’extraction [29035](https://github.com/magento/magento2/pull/29035)_. [GitHub-29034](https://github.com/magento/magento2/issues/29034)

<!-- ENGCOM-7566-->

* Ajout de la prise en charge suivante des méthodes magiques pour `DataObject`:

   * nouvelle extension prise en charge `get/set/has/uns` méthodes magiques (avec utilisation de `__call`)
   * Prise en charge de SessionManager, qui transfère tous les appels au conteneur DataObject
   * couverture de test pour les extensions
   * tests mis à jour pour la vérification des erreurs filtrées
   * augmentation du niveau de contrôle PHPStan de 0 à 1. _Correctif soumis par Oleksandr Kravchuk dans une demande d’extraction [27905](https://github.com/magento/magento2/pull/27905)_. [GitHub-28303](https://github.com/magento/magento2/issues/28303)

<!-- ENGCOM-7906-->

* `ScopeConfigInterface` peut maintenant être plus qu’une chaîne. La restriction de `magentoConfigFixture` la chaîne uniquement a été le résultat involontaire d’une demande d’extraction précédente et a été rétablie. _Correctif soumis par Kristof, Fooman in pull request [29305](https://github.com/magento/magento2/pull/29305)_. [GitHub-29345](https://github.com/magento/magento2/issues/29345)

<!-- ENGCOM-8000-->

* Le `convertConfigTimeToUtc` ne renvoie plus d’erreur fatale en raison de l’envoi de paramètres incorrects à la variable `Phrase` constructeur. _Correctif soumis par Kos Rafał dans une demande de tirage [29483](https://github.com/magento/magento2/pull/29483)_. [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7962 -->

* Les filtres de prix fonctionnent désormais comme prévu sur les données de la grille lorsque `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getCondition` et `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getValue()` renvoyer un tableau contenant des index `from` ou `to` données de chaîne. Auparavant, l’application générait cette erreur : `Notice: A non well formed numeric value encountered in vendor/magento/module-backend/Block/Widget/Grid/Column/Filter/Price.php on line 197`. _Correctif soumis par Nikita Sarychev dans une demande d&#39;extraction [29214](https://github.com/magento/magento2/pull/29214)_. [GitHub-29213](https://github.com/magento/magento2/issues/29213)

<!-- ENGCOM-7911 -->

* Ajout d’un point d’extension pour la prise en charge de l’ajout de HTML à la page de catégorie. Ceci corrige un bogue qui a été introduit par une requête de tirage précédente. _Correctif soumis par iGerchak dans la demande d’extraction [29291](https://github.com/magento/magento2/pull/29291)_. [GitHub-29286](https://github.com/magento/magento2/issues/29286)

### Navigation par couches

<!-- MC-25043-->

* La barre de navigation en couches affiche désormais les attributs booléens avec les deux options (**oui**/**non**) et le nombre de produits correspondant. Auparavant, la navigation par couches ne renvoyait pas de **non** pour les attributs booléens dans les déploiements utilisant Elasticsearch.

<!-- ENGCOM-7493-->

* Le filtre de navigation par couches d’échantillon est désormais cohérent avec les filtres standard utilisés dans tout le Magento Open Source. _Correctif soumis par Bartłomiej Szubert dans une demande d&#39;extraction [28015](https://github.com/magento/magento2/pull/28015)_. [GitHub-28011](https://github.com/magento/magento2/issues/28011)

### Journalisation

<!-- ENGCOM-7692-->

* Toutes les erreurs de référence rompues sont désormais consignées lorsque les déploiements sont uniquement en mode développeur. Auparavant, une erreur était également consignée pour les déploiements en mode de production, ce qui gonflait les journaux d’erreurs. _Correctif soumis par Bartłomiej Szubert dans une demande d&#39;extraction [28735](https://github.com/magento/magento2/pull/28735)_. [GitHub-26504](https://github.com/magento/magento2/issues/26504)

### Media Gallery

<!-- ENGCOM-8014-->

* Interface utilisateur de configuration de la galerie de médias (Admin) **Magasins**  >  **Configuration**  >   **Avancé**  >  **Système** ) a été réorganisé. _Correctif soumis par Shankar Konar dans une demande d’extraction [29433](https://github.com/magento/magento2/pull/29433)_. [GitHub-28011](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-7972 -->

* Ajout de tests pour couvrir la variable **Utilisé dans** liens d’une image dans la galerie de médias. _Correctif soumis par Nazar Klovanych dans une demande d’extraction [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1969](https://github.com/magento/adobe-stock-integration/issues/1693)

### MFTF

<!-- ENGCOM-7963 -->

* Le `AdminSubmitAdvancedInventoryFormActionGroup` , `AdminClickOnAdvancedInventoryLinkActionGroup`, et  `AdminSetStockStatusConfigActionGroup` les groupes d’actions sont désormais utilisés dans les tests conformément aux bonnes pratiques. _Correctif soumis par Oleh USIA dans la demande d’extraction [29386](https://github.com/magento/magento2/pull/29386)_. [GitHub-29420](https://github.com/magento/magento2/issues/29420)

<!-- ENGCOM-7964 -->

* `SearchProductGridByKeywordActionGroup` est désormais utilisé pour la recherche dans la grille de produits. _Correctif soumis par Oleh Usik dans la demande d’extraction [29385](https://github.com/magento/magento2/pull/29385)_. [GitHub-29434](https://github.com/magento/magento2/issues/29434)

<!-- ENGCOM-7915 -->

* `AdminCategoriesClickDoneButtonOnPopupActionGroup` est désormais utilisé pour cliquer sur **Terminé** dans la fenêtre contextuelle Catégories de recherche . _Correctif soumis par Oleh Usik dans la demande d’extraction [28989](https://github.com/magento/magento2/pull/28989)_. [GitHub-29380](https://github.com/magento/magento2/issues/29380)

<!-- ENGCOM-7529 -->

* `LoginToStorefrontActionGroup` est désormais utilisé pour remplacer une séquence d’actions utilisée pour la connexion du client front-end du magasin. _Correctif soumis par Sathish Subramanian dans une demande d’extraction [28113](https://github.com/magento/magento2/pull/28113)_. [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7590 -->

* `AdminUpdateCustomURLRewritesPermanentTest` a été restructuré pour répondre aux bonnes pratiques de la MFTF. _Correctif soumis par Kate Kyzyma dans une demande de tirage [28361](https://github.com/magento/magento2/pull/28361)_. [GitHub-28393](https://github.com/magento/magento2/issues/28393)

<!-- ENGCOM-7343 -->

* Les noms des tests ont été modifiés pour respecter les conventions MFTF. _Correctif soumis par Evgeny Levinsky dans la demande d’extraction [27839](https://github.com/magento/magento2/pull/27839)_. [GitHub-28305](https://github.com/magento/magento2/issues/28305)

#### Nouveaux groupes d’actions

<!-- ENGCOM-7991 -->

* `StorefrontCheckoutClickNextButtonActionGroup` _Correctif soumis par Oleh Usik dans la demande d’extraction [29472](https://github.com/magento/magento2/pull/29472)_. [GitHub-29539](https://github.com/magento/magento2/issues/29539)

<!-- ENGCOM-7857 -->

* `AdminProductFormSaveActionGroup`_Correctif soumis par Oleh Usik dans la demande d’extraction [29142](https://github.com/magento/magento2/pull/29142)_. [GitHub-29292](https://github.com/magento/magento2/issues/29292)

<!-- ENGCOM-7928 -->

* `AdminSaveCategoryActionGroup` _Correctif soumis par Oleh Usik dans la demande d’extraction [28993](https://github.com/magento/magento2/pull/28993)_. [GitHub-29388](https://github.com/magento/magento2/issues/29388)

<!-- ENGCOM-7790 -->

* `AdminProductGridSectionClickFirstRowActionGroup` _Correctif soumis par Oleh Usik dans la demande d’extraction [29 000](https://github.com/magento/magento2/pull/29000)_. [GitHub-29295](https://github.com/magento/magento2/issues/29295)

<!-- ENGCOM-7591 -->

* `AdminProductFormCategoryExistInCategoryListActionGroup` et `AdminProductFormCategoryNotExistInCategoryListActionGroup` _Correctif soumis par Alexander Steshuk dans une demande d’extraction [28287](https://github.com/magento/magento2/pull/28287)_. [GitHub-28392](https://github.com/magento/magento2/issues/28392)

<!-- ENGCOM-7867 -->

* `AdminExpandCategoryTreeActionGroup` _Correctif soumis par Oleh Usik dans la demande d’extraction [29133](https://github.com/magento/magento2/pull/29133)_. [GitHub-29289](https://github.com/magento/magento2/issues/29289)

<!-- ENGCOM-7881 -->

* `AdminTaxRateGridOpenPageActionGroup` _Correctif soumis par Oleh Usik dans la demande d’extraction [29007](https://github.com/magento/magento2/pull/29007)_. [GitHub-29281](https://github.com/magento/magento2/issues/29281)

<!-- ENGCOM-7868 -->

* `AdminNavigateNewCustomerActionGroup` _Correctif soumis par Oleh Usik dans la demande d’extraction [29134](https://github.com/magento/magento2/pull/29134)_. [GitHub-29287](https://github.com/magento/magento2/issues/29287)

#### Nouveaux tests

<!-- ENGCOM-7600 -->

* Ajout d’un test pour la suppression d’une page CMS en tant qu’utilisateur administrateur. _Correctif soumis par Dmitri Tsymbal dans la demande d’extraction [28112](https://github.com/magento/magento2/pull/28112)_. [GitHub-28202](https://github.com/magento/magento2/issues/28202)

* Ajout de la fonction `StorefrontShareCustomerWishlistActionGroup` test pour le partage de la liste de souhaits client avec des adresses email non valides. Le test existant pour le partage de listes de souhaits (`StorefrontShareWishlistEntityTest`) a été restructuré. `StorefrontCustomerShareWishlistActionGroup` a été abandonné.

<!-- ENGCOM-7682 -->

* Ajout d’un test pour vérifier la mise en oeuvre de la variable **Seuil gauche seulement X** paramètre de configuration . _Correctif soumis par Oleh Usik dans la demande d’extraction [27549](https://github.com/magento/magento2/pull/27549)_. [GitHub-28755](https://github.com/magento/magento2/issues/28755)

### Newsletter

<!-- MC-34714-->

* Exportation de la liste Abonnés à la newsletter à l’aide du `EXCEL XML` entraîne désormais l’exportation de toutes les lignes comme prévu. Auparavant, les données exportées incluaient uniquement la valeur de pagination de page, et non toutes les lignes.

<!-- ENGCOM-7522-->

* Les emails d’abonnement à la newsletter utilisent désormais les mêmes balises de HTML que les autres emails liés à la newsletter. _Correctif proposé par Paweł Tylek dans la demande d&#39;extraction [27357](https://github.com/magento/magento2/pull/27357)_. [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7788-->

* Ajout d’un test de suppression d’un abonné à une newsletter en tant qu’utilisateur administrateur. _Correctif soumis par Dmitri Tsymbal dans la demande d’extraction [28972](https://github.com/magento/magento2/pull/28972)_. [GitHub-29032](https://github.com/magento/magento2/issues/29032)

<!-- ENGCOM-7739-->

* Ajout de tests pour l’abonnement à la newsletter pour les invités avec une option non autorisée dans les instructions de configuration. Ce test remplace obsolète `VerifyRegistredLinkDisplayedForGuestSubscriptionNoTest` et `StorefrontCreateNewSubscriberActionGroup`. _Correctif soumis par Dmitri Tsymbal dans la demande d’extraction [28872](https://github.com/magento/magento2/pull/28872)_. [GitHub-29039](https://github.com/magento/magento2/issues/29039)

### Commandes

<!-- ENGCOM-7858-->

* Le `GetAssetIdByContentFieldInterface` et sa mise en oeuvre sur `MediaContent` Les modules permettent désormais à l’intégration Adobe Stock d’étendre `MediaGallery` de filtrage. _Correctif soumis par Gabriel da Gama dans une demande de tirage [29058](https://github.com/magento/magento2/pull/29058)_. [GitHub-1464](https://github.com/magento/magento2/issues/1464)

<!-- ENGCOM-7885-->

* Le `CustomerAddressId` les valeurs d’un client nouvellement créé sont désormais validées entre guillemets. _Correctif soumis par Andrii Kalinich dans une demande d’extraction [29139](https://github.com/magento/magento2/pull/29139)_. [GitHub-28793](https://github.com/magento/magento2/issues/28793)

<!-- ENGCOM-7798-->

* L’état de la commande d’une note de crédit avec un total nul est désormais `Closed`. Auparavant, l’application signalait son état de commande comme `Complete`. _Correctif soumis par Andrii Kalinich dans une demande d’extraction [29023](https://github.com/magento/magento2/pull/29023)_. [GitHub-22762](https://github.com/magento/magento2/issues/22762)

### Modes de paiement

<!-- MC-34363-->

* La demande affiche désormais un message vous invitant à saisir les données de carte de crédit obligatoires lorsque vous cliquez sur **Envoyer** pour une commande Admin sans saisir d’informations de paiement valides. Auparavant, le programme de validation des cartes du Braintree ne renvoyait pas d’erreur lorsque les champs d’entrée de paiement étaient invalides et que la page devenait inactive.

<!-- MC-33494-->

* Vous pouvez désormais modifier le mode de livraison d’une commande que vous créez à partir de l’administrateur d’un client dont le compte comporte une carte de crédit stockée (Braintree). Auparavant, lorsque vous sélectionniez un autre mode de livraison, la carte stockée n’était pas sélectionnée et l’application ne passait pas la commande.

#### PayPal

<!-- MC-33879-->

* La page Révision des commandes du workflow de passage en caisse affiche désormais le montant d’expédition correct pour PayPal via les commandes Braintree pour lesquelles la méthode d’expédition a été modifiée lors du passage en caisse. Auparavant, lorsqu’un client modifiait la méthode d’expédition sur la page de révision des commandes PayPal du processus de passage en caisse, l’application ne mettait pas à jour le total de la commande avec la méthode correcte.

<!-- MC-34152-->

* Les vendeurs peuvent désormais annuler avec succès les commandes qui ont été autorisées à l’aide de PayPal. Auparavant, l’application n’annulait pas la commande et affichait cette erreur : `Declined: 10601-Authorization has expired`.

<!-- MC-33330-->

* L’application ne vide plus votre panier lorsque vous annulez une commande en fermant la fenêtre contextuelle de paiement PayPal après avoir effectué une autre commande.

### Performances

* Trois nouveaux paramètres de configuration prennent en charge une diminution de la consommation du processeur de la file d’attente des clients. Ces paramètres facultatifs offrent un contrôle accru sur les consommateurs et permettent d’économiser les ressources du serveur. Voir [Configuration des files de messages](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) pour une description de la fonction `maxIdleTime`, `sleep`, et `onlySpawnWhenMessageAvailable` paramètres.

<!-- MC-31617-->

* La configuration de la liste des modules externes est désormais générée lors de l’exécution de la fonction `di:compile` . Ces informations de configuration sont écrites dans des dossiers de métadonnées générés en fonction de la portée. Auparavant, ces informations étaient stockées en cache. Les améliorations de performances résultantes sont les suivantes :

   * La taille du cache réseau a diminué
   * Le temps d’exécution de nombreux scénarios a été amélioré.

<!-- ENGCOM-7290-->

* L’application charge désormais le widget de curseur approprié à la demande, ce qui a amélioré le chargement des pages. La personnalisation du widget du curseur tactile a été déplacée vers un fichier distinct afin qu’il ne puisse être chargé que sur les appareils compatibles. Le type de widget de curseur approprié est désormais chargé uniquement lorsque la liaison de plage est réellement utilisée sur la page. _Correctif soumis par Mateusz Krzeszowiak dans une demande d’extraction [27616](https://github.com/magento/magento2/pull/27616)_. [GitHub-28807](https://github.com/magento/magento2/issues/28807)

<!-- MC-33107-->

* Les performances de passage en caisse avec plusieurs commandes simultanées ont été améliorées.

<!-- MC-25062-->

* Les blocages ne se produisent plus lorsque le processus d’importation exécute une insertion en bloc et que le processus de réindexation exécute simultanément une insertion volumineuse à partir de la sélection. Auparavant, l’application affichait cette erreur : `PDOException: SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock`. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

### Révisions

<!-- MC-33405-->

* Une clé unique pour `entity_pk_value-entity_type-store_id` a été ajouté à la variable `review_entity_summary` qui empêche la création de lignes dupliquées pour le même ID de produit (`entity_pk_value`). Auparavant, ce manque de clé unique entraînait la duplication de lignes pour les mêmes ID de produit et erreurs SQL.

### Ventes

<!-- MC-35675-->

* L’application n’affecte plus le statut de `Complete` après la facturation d’une commande qui ne nécessite aucun paiement.

<!-- MC-35888-->

* Le courrier électronique New Shipment généré par l’API REST contient désormais les mêmes informations d’expédition et de client que les envois créés manuellement à partir de l’administrateur. Auparavant, cet e-mail ne contenait pas le nom du client, les informations de suivi, les produits commandés et d’autres informations sur la commande.

<!-- MC-35837-->

* Les noms d’utilisateur invités sont désormais visibles comme prévu dans les emails liés aux factures et à l’expédition lorsque les emails sont chargés ou personnalisés à partir de l’administrateur.

<!-- MC-35707-->

* La facture du PDF est maintenant traduite dans la langue de la vue du magasin où la commande a été passée. Auparavant, la facture du PDF était traduite dans la langue de l&#39;administrateur.

<!-- MC-35858-->

* Vous pouvez maintenant émettre un remboursement comme prévu à partir de la page de note de crédit. [GitHub-29014](https://github.com/magento/magento2/issues/29014)

<!-- MC-35353-->

* Les noms des régions localisés affichés sur la page Commande du storefront sont désormais correctement traduits. Auparavant, le nom de la région n’était pas basé sur les paramètres régionaux spécifiés, sauf s’il était modifié dans l’Admin.

<!-- MC-35633-->

* Expéditions créées via le POST `/rest/V1/shipment` Le point de terminaison met désormais correctement à jour les commandes. Auparavant, l’application créait une expédition, mais l’état de l’expédition restait à l’état de traitement.

<!-- ENGCOM-7639 -->

* Les notes de crédit affichent désormais le mode de paiement dérivé de la portée du magasin dans lequel la commande a été passée. Auparavant, les notes de crédit affichaient le nom tel que défini dans la portée de magasin par défaut. _Correctif soumis par Ledian Hymetllari dans la demande d’extraction [27582](https://github.com/magento/magento2/pull/27582)_. [GitHub-27570](https://github.com/magento/magento2/issues/27570)

### Rechercher {#search-heading}

<!-- MC-31304-->

* Vous pouvez désormais rechercher des produits par attribut à partir de la vue Admin Customer à l’aide de QuickSearch. Auparavant, une exception survenait sur la page des résultats de la recherche catalogue.

<!-- MC-32518-->

* L’application affiche désormais les produits configurables sur la page de catégorie, comme prévu après l’ajout d’un attribut de produit.

<!-- MC-33952-->

* Les résultats Elasticsearch incluent désormais les valeurs correctes pour les options d’attribut de chaque vue de magasin. Si une `Dropdown` ou `Multiple Select` a une valeur d’option différente dans la vue de magasin autre que celle par défaut que dans la vue de magasin par défaut, Elasticsearch indexe désormais cette valeur ou renvoie le produit avec cette valeur dans les résultats. Auparavant, Elasticsearch n’indexait pas cette valeur ou ne renvoyait pas le produit avec cette valeur dans les résultats.

<!-- MC-35013-->

* La recherche par SKU fonctionne désormais comme prévu dans la recherche avancée avec Elasticsearch. Auparavant, lorsque vous tentiez de rechercher par SKU, l’application affichait ce message d’erreur : `We can't find any items matching these search criteria. Modify your search`.

<!-- ENGCOM-7222-->

* La recherche avancée ne permet plus aux acheteurs de filtrer selon des prix négatifs. _Correctif proposé par Rohan Hapani dans la demande d’extraction [27359](https://github.com/magento/magento2/pull/27359)_. [GitHub-27358](https://github.com/magento/magento2/issues/27358)

<!-- ENGCOM-7917-->

* Les valeurs d’étendue sont désormais réinitialisées comme prévu sur le formulaire New Synonym Group. _Correctif soumis par Sathish Subramanian dans une demande d’extraction [29206](https://github.com/magento/magento2/pull/29206)_. [GitHub-28947](https://github.com/magento/magento2/issues/28947)

### Expédition

<!-- MC-34734-->

* L’application calcule désormais correctement les taux des tables d’expédition après la mise à niveau. Auparavant, les taux des tables d’expédition étaient calculés en fonction du prix net, qui excluait la TVA.

<!-- MC-33737-->

* L’application affiche désormais les taux d’expédition dans la devise appropriée dans le workflow de passage en caisse pour les commandes spécifiant FedEx comme méthode d’expédition.

<!-- MC-33267-->

* Les PDF multi-pages des libellés d’expédition pour les commandes expédiées par UPS affichent désormais le nombre correct.

<!-- MC-35514-->

* Les problèmes liés aux composants JavaScript de la page Créer des modules ont été résolus. Auparavant, l’application n’affichait pas la variable **Créer une étiquette d’expédition** sur cette page, et vous n’avez pas pu créer de libellé d’expédition pour une commande existante.

### Plan du site

<!-- ENGCOM-7924-->

* Le plan du site dans `robots.txt` est désormais spécifique au magasin. _Correctif soumis par Vadim Malesh dans une demande d’extraction [29331](https://github.com/magento/magento2/pull/29331)_. [GitHub-28901](https://github.com/magento/magento2/issues/28901)

<!-- MC-34617-->

* Les valeurs codées sont désormais correctement placées dans une séquence d’échappement dans la variable `sitemap.xml` fichier . Auparavant, lorsque vous incluiez des caractères codés dans un nom de produit ou un titre d’image, le plan de site généré n’était pas valide.

### Magasin

<!-- MC-35853-->

* La suppression d’une vue de magasin créée précédemment n’entraîne plus d’erreur dans les déploiements avec une configuration de base de données partagée. Auparavant, l’application lançait une exception.

<!-- MC-32634-->

* Vous pouvez désormais exporter `config.php` et code de site web par défaut d’un site web pour installer et configurer l’application sur un deuxième site web dans le cadre d’un déploiement multisite. Auparavant, le magasin et la vue par défaut disparaissaient après l’exportation et des erreurs se produisaient sur le storefront.

### Swagger

<!-- ENGCOM-7720-->

* Vous pouvez désormais générer un jeton client avec Swagger. Auparavant, Swagger ne générait pas de code de réponse lors de la saisie d’informations d’accès client valides, et l’application affichait cette erreur : `The account sign-in was incorrect or your account is disabled temporarily. Please wait and try again later`. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28822](https://github.com/magento/magento2/pull/28822)_. [GitHub-27098](https://github.com/magento/magento2/issues/27098)

### Nuancier

<!-- ENGCOM-7845-->

* Les produits configurables avec des échantillons affichent désormais le niveau de prix lorsqu’un acheteur clique **Modifier** dans le panier. Auparavant, l’application n’affichait pas les prix de niveau dans le panier avant le passage en caisse. _Correctif soumis par Sathish Subramanian dans une demande d’extraction [29137](https://github.com/magento/magento2/pull/29137)_. [GitHub-28270](https://github.com/magento/magento2/issues/28270)

<!-- MC-33147-->

* L’application affiche désormais les prix des niveaux comme prévu pour les variations de produit configurables.

### Taxe

<!-- MC-36049-->

* L’application n’affiche plus d’attribut de taxe fixe sur les produits sur le storefront pour un produit après qu’un commerçant l’ait déaffecté du jeu d’attributs du produit.

### Test

<!-- ENGCOM-7874-->

* Les erreurs PHPUnit 9 ont été corrigées dans les tests unitaires. _Correctif soumis par Anton Evers dans la demande d’extraction [29244](https://github.com/magento/magento2/pull/29244)_. [GitHub-29329](https://github.com/magento/magento2/issues/29329)

<!-- ENGCOM-7995-->

* Ajout de tests unitaires pour approuver une commande qui a été effectuée avec une remise qui a expiré placera une commande au montant total et ne mettra pas à jour le total de la commande. _Correctif soumis par Joan He dans la demande d’extraction [18](https://github.com/magento/partners-magento2-infrastructure/pull/18)_. [GitHub-204](https://github.com/magento/partners-magento2b2b/issues/204)

<!-- ENGCOM-8003-->

* `SynchronizeFilesInterface` est désormais couvert par les tests d’intégration. _Correctif soumis par jmonteros422 dans la demande d’extraction [29493](https://github.com/magento/magento2/pull/29493)_. [GitHub-1742](https://github.com/magento/magento2/issues/1742)

<!-- ENGCOM-8009-->

* Une fonction a été ajoutée à `\Magento\TestFramework\TestCase\WebapiAbstract` qui permet de comparer de grands tableaux imbriqués de résultats attendus et réels dans les tests et permet aux testeurs d’ignorer les clés inappropriées dans le résultat réel. _Correctif soumis par Jekabs dans la demande d’extraction [29458](https://github.com/magento/magento2/pull/29458)_. [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-7887 -->

* Correction de l’inversion de la valeur attendue avec la valeur réelle dans `app/code/Magento/Newsletter/Test/Unit/Model/SubscriptionManagerTest.php`. _Correctif proposé par Lukasz Bajsarowicz dans la demande d&#39;extraction [29271](https://github.com/magento/magento2/pull/29271)_. [GitHub-29283](https://github.com/magento/magento2/issues/29283)

<!-- ENGCOM-7142 -->

* Les problèmes liés à la sérialisation et à la déssérialisation des propriétés statiques lors de l’exécution de tests consécutifs ont été résolus. _Correctif soumis par Pavel Bystritsky dans une demande d’extraction [26175](https://github.com/magento/magento2/pull/26175)_. [GitHub-28319](https://github.com/magento/magento2/issues/28319), [GitHub-29313](https://github.com/magento/magento2/issues/29313)

<!-- ENGCOM-7886 -->

* Utilisation `ObjectManager` pour instancier des classes pendant le test a été remplacé par le nouveau mot-clé dans les tests unitaires. _Correctif proposé par Lukasz Bajsarowicz dans la demande d&#39;extraction [29272](https://github.com/magento/magento2/pull/29272)_. [GitHub-29346](https://github.com/magento/magento2/issues/29346)

<!-- ENGCOM-7593 -->

* Une couverture de test a été ajoutée pour ces cas de `updateCustomer` mutation : date de naissance non valide, adresse électronique non valide et nom de famille du client vide. _Correctif soumis par Alexander Taranovsky dans une demande d’extraction [28304](https://github.com/magento/magento2/pull/28304)_. [GitHub-28394](https://github.com/magento/magento2/issues/28394)

<!-- MC-30844-->

* Le `ApiFunctional TestFramework` Le client GraphQL analyse désormais correctement les en-têtes. [GitHub-26425](https://github.com/magento/magento2/issues/26425)

### Thème

<!-- MC-34397-->

* Les thèmes ajoutés dans les règles de l’agent utilisateur sont désormais affectés comme prévu lors de l’exécution. `bin/magento catalog:images:resize`. Auparavant, seuls les thèmes affectés aux magasins étaient affectés lors de la `bin/magento catalog:images:resize` a été exécuté.

### Traduction et paramètres régionaux

<!-- MC-20372-->

* L’application ne renvoie plus d’erreur lorsqu’un administrateur modifie la variable **Date** lors de la création ou de l’enregistrement du produit Admin lorsque le paramètre régional d’administration est chinois ou japonais. [GitHub-24696](https://github.com/magento/magento2/issues/24696)

<!-- ENGCOM-7829-->

* L’application vérifie désormais la zone (frontale ou `adminhtml`) avant de générer le balisage de traduction intégré. Auparavant, un appel API était effectué à la fonction `POST /V1/integration/admin/token` les informations d’identification erronées lors de l’activation de la traduction en ligne entraînaient l’inclusion de balises de traduction intégrées autour du message d’erreur dans la réponse de l’API. _Correctif soumis par Zach Nanninga dans la demande d’extraction [28856](https://github.com/magento/magento2/pull/28856)_. [GitHub-28656](https://github.com/magento/magento2/issues/28656)

<!-- ENGCOM-7536-->

* Les régions bulgares ont été ajoutées au `directory_country_region` table. _Correctif soumis par Nikola Lardev dans une demande d’extraction [27957](https://github.com/magento/magento2/pull/27957)_. [GitHub-28215](https://github.com/magento/magento2/issues/28215)

<!-- ENGCOM-7535-->

* Titres et boutons sur l’administrateur **Clients**  >  **Ajouter une nouvelle adresse** et **Modifier le produit**  >  **Inventaire avancé** les modules peuvent désormais être traduits. _Correctif soumis par Sathish Subramanian dans une demande d’extraction [28174](https://github.com/magento/magento2/pull/28174)_. [GitHub-28201](https://github.com/magento/magento2/issues/28201)

<!-- ENGCOM-7521-->

* Le terme FPT peut désormais être traduit sur Admin.  **Magasins**  > **Configuration**  > **Ventes**  > **Taxe**  > **Taxes sur les produits fixes**. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28108](https://github.com/magento/magento2/pull/28108)_. [GitHub-5477](https://github.com/magento/magento2/issues/5477)

<!-- ENGCOM-7631 -->

* Le **Ship here** le libellé du bouton sur le modal d’adresse d’expédition du workflow de passage en caisse a été modifié pour correspondre à la casse chameau utilisée pour les autres boutons. Ce cas correspond désormais à celui utilisé dans les fichiers de traduction. Auparavant, en raison de l’incohérence au cas où ce libellé n’était pas traduit. _Correctif soumis par WK dans la demande d’extraction [28547](https://github.com/magento/magento2/pull/28547)_. [GitHub-28685](https://github.com/magento/magento2/issues/28685)

### Interface utilisateur

<!-- ENGCOM-7514-->

* Le lien de confidentialité et de stratégie de cookie dans le pied de page s’affiche désormais sous la forme d’un lien principal lors de l’affichage de la page Politique de confidentialité et de cookie. _Correctif soumis par Sathish Subramanian dans une demande d’extraction [28004](https://github.com/magento/magento2/pull/28004)_. [GitHub-27985](https://github.com/magento/magento2/issues/27985)

<!-- MC-36260-->

* Correction d’un mauvais alignement du curseur dans la zone de texte Commentaires de facture de la facture associée à une commande que vous avez sélectionnée depuis l’administrateur. **Ventes** > **Commandes**.

<!-- MC-36044-->

* La page Créer une commande s’affiche désormais. **Ajout de produits par SKU** et **Ajouter des produits** comme prévu.

<!-- MC-35974-->

* L’application affiche désormais correctement la page Modifier la révision lorsqu’une évaluation de produit est disponible pour le produit sélectionné.

<!-- MC-35475-->

* L’application affiche désormais correctement la page de modification du client administrateur sur une iPhone exécutant Safari.

<!-- MC-35370-->

* Correction du défilement inutile sur la page Créer une commande .

<!-- MC-35345-->

* Cliquez directement sur le **Exporter les taux de taxe** bouton de la page Ajouter une nouvelle règle fiscale (**Magasins**  >  **Règles fiscales**) télécharge désormais le `tax_rates.csv` comme prévu. Auparavant, les marchands devaient cliquer sur le bord de la variable **Exporter les taux de taxe** bouton . Il s’agissait d’un problème connu dans la version 2.4.0.

<!-- MC-35313-->

* Le **Ajouter des sélections à mon panier** au bas du panier fonctionne désormais comme prévu. Il s’agissait d’un problème connu dans la version 2.4.0.

<!-- MC-35296-->

* Le **Actualiser** du bouton **Produits récemment consultés** de la page Activités du client fonctionne désormais comme prévu. Auparavant, lorsque vous cliquiez sur **Actualiser**, la liste de produits n’a pas été actualisée et la page a fait défiler.

<!-- MC-35412-->

* L’application affiche désormais correctement l’icône de calendrier utilisée pour sélectionner la date de naissance d’un client dans l’onglet Conditions de **Clients** > **Segments** > **Ajouter un segment**.

<!-- MC-35658-->

* La section Résumé du passage en caisse du workflow de passage en caisse ne scintille plus lorsqu’un acheteur fait défiler cette page sur Internet Explorer 11.x.

<!-- MC-34602-->

* L’application affiche désormais correctement le widget Ordre par SKU sur la page Catégorie du storefront. Auparavant, le code de HTML de ce widget n’était pas rendu et l’application n’affichait pas la variable **Chargement d’une liste de SKU** lien.

<!-- MC-37444-->

* Composants de l’interface utilisateur désactivés à l’aide de `this.disabled(true)` n’apparaît plus sur le storefront. [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7264-->

* L’application affiche désormais correctement le widget de produits récemment affiché dans la vue mobile. _Correctif soumis par Tu Nguyen dans une demande d&#39;extraction [27572](https://github.com/magento/magento2/pull/27572)_. [GitHub-27058](https://github.com/magento/magento2/issues/27058)

<!-- ENGCOM-7575-->

* La modification de la position d’un produit à partir de l’administrateur se reflète désormais dans la position du produit sur le storefront. _Correctif soumis par Oleg Aleksin dans une demande d&#39;extraction [28150](https://github.com/magento/magento2/pull/28150)_. [GitHub-28149](https://github.com/magento/magento2/issues/28149)

<!-- ENGCOM-7507-->

* Le style du formulaire de connexion est maintenant cohérent avec le style des autres formulaires dans le thème vierge. Les styles superflus qui définissent la largeur des champs d’entrée de retour automatique à la ligne de contrôle de conteneur ont été supprimés. _Correctif soumis par Tu Nguyen dans une demande d&#39;extraction [28084](https://github.com/magento/magento2/pull/28084)_. [GitHub-28059](https://github.com/magento/magento2/issues/28059)

<!-- ENGCOM-7578-->

* Le **OK** dans la fenêtre contextuelle de confirmation de produit de suppression du mini panier se comporte désormais comme prévu. _Correctif soumis par Tu Nguyen dans une demande d&#39;extraction [28083](https://github.com/magento/magento2/pull/28083)_. [GitHub-27095](https://github.com/magento/magento2/issues/27095)

<!-- ENGCOM-7456-->

* Les éléments de la galerie de produits ne clignotent plus au chargement de la page. _Correctif soumis par Mateusz Krzeszowiak dans une demande d’extraction [27871](https://github.com/magento/magento2/pull/27871)_. [GitHub-28339](https://github.com/magento/magento2/issues/28339)

<!-- ENGCOM-8007-->

* La classe CSS qui contrôle la largeur du champ est désormais appliquée comme prévu à l’élément Heure de début dans l’ensemble de l’administrateur. _Correctif soumis par Shankar Konar dans une demande d’extraction [29511](https://github.com/magento/magento2/pull/29511)_. [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992-->

* Le libellé de texte Termes et conditions peut désormais afficher correctement des chaînes de texte plus longues. _Correctif soumis par Bartłomiej Szubert dans une demande d&#39;extraction [29413](https://github.com/magento/magento2/pull/29413)_. [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7967-->

* Le titre de la page des commandes en échec a été réécrit pour garantir la précision. Auparavant, lorsqu’un acheteur annulait une commande, l’application affichait une page intitulée : `We received your order!`. _Correctif soumis par Angelo Romano dans la demande d’extraction [29410](https://github.com/magento/magento2/pull/29410)_. [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-7770-->

* Le nombre total d’articles annulés sur la page vue de la commande annulée est maintenant correctement identifié sur la page vue de la commande annulée. Auparavant, ce champ était libellé. **Échéance totale**. _Correctif soumis par Madhu Rajawat dans une demande d&#39;extraction [27516](https://github.com/magento/magento2/pull/27516)_. [GitHub-26191](https://github.com/magento/magento2/issues/26191)

<!-- ENGCOM-7579 -->

* Le bouton d’activation/désactivation de la page Créer un produit configurable fonctionne désormais comme prévu. _Correctif soumis par Tu Nguyen dans une demande d&#39;extraction [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-22702](https://github.com/magento/magento2/issues/22702)

<!-- ENGCOM-7579 -->

* L’icône de bloc des propriétés d’attribut avancées sur la page Propriétés d’attribut avancées se comporte désormais comme prévu. _Correctif soumis par Tu Nguyen dans une demande d&#39;extraction [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-26022](https://github.com/magento/magento2/issues/26022)

<!-- ENGCOM-7619 -->

* La section Admin de la page de configuration du système se développe désormais pour afficher les champs requis comme prévu lorsque vous essayez d’enregistrer les paramètres de configuration d’un nouveau module. _Correctif soumis par Bartłomiej Szubert dans une demande d&#39;extraction [28285](https://github.com/magento/magento2/pull/28285)_. [GitHub-26427](https://github.com/magento/magento2/issues/26427)

<!-- ENGCOM-7826 -->

* Comportement corrigé de la loupe lorsque le mode est défini sur `inside`. _Correctif soumis par Sean van Zuidam dans une demande d&#39;extraction [29077](https://github.com/magento/magento2/pull/29077)_. [GitHub-29076](https://github.com/magento/magento2/issues/29076)

<!-- ENGCOM-7010 -->

* Correction de la largeur étonnamment longue du champ de saisie qui se produisait lorsqu’un acheteur saisissait une adresse électronique incorrecte dans le champ abonné du pied de page. _Correctif soumis par Dipesh Rangani dans une demande d’extraction [27106](https://github.com/magento/magento2/pull/27106)_. [GitHub-27099](https://github.com/magento/magento2/issues/27099)

<!-- ENGCOM-7972 -->

* Un `Uncaught ReferenceError` ne s’affiche plus dans la console de développement lorsque vous ajoutez une nouvelle balise et placez le curseur de la souris dessus. _Correctif soumis par Nazar Klovanych dans une demande d’extraction [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1700](https://github.com/magento/magento2/issues/1700)

### URL rewrites

<!-- MC-34483-->

* Le déplacement d’une vue de magasin vers un autre site web ne réinitialise plus les URL. Auparavant, l’application réécrivait incorrectement le CMS et l’URL du produit.

<!-- MC-33028-->

* L’application conserve désormais les URL de catalogue existantes qui réécrivent comme prévu lorsqu’une vue de magasin est affectée à un autre magasin. Auparavant, l’application supprimait les réécritures d’URL spécifiques au magasin.

### Varnish

<!-- ENGCOM-7761-->

* Le redémarrage du vernis n’entraîne plus d’erreurs 503. _Correctif soumis par Ihor Sviziev dans la demande d’extraction [28137](https://github.com/magento/magento2/pull/28137)_. [GitHub-24353](https://github.com/magento/magento2/issues/24353)

### Vault

<!-- MC-34674-->

* La demande n’enregistre plus les numéros de carte de crédit lorsque la variable **Enregistrer pour une utilisation ultérieure** n’est pas sélectionnée dans la section paiement du workflow de passage en caisse.

### Structure d’API web

<!-- MC-35838-->

* Les vendeurs disposant de plusieurs sites web peuvent désormais utiliser l’API REST pour créer et mettre à jour des produits tout en préservant l’héritage des rôles image et image. Auparavant, lorsqu’un commerçant utilisait l’API REST pour créer et mettre à jour des produits et qu’un produit était mis à jour pour la vue de magasin, les rôles d’image par défaut étaient chargés et enregistrés pour cette vue de magasin. Par conséquent, les rôles d’image de vue de magasin ont cessé d’hériter de la portée par défaut après la mise à jour.

<!-- MC-36419-->

* Un compte utilisateur d’intégration non défini peut désormais accéder à une ressource via l’API REST lorsque les autorisations de ressources l’autorisent.

<!-- MC-35975-->

* Les filtres de critères de recherche fonctionnent désormais comme prévu pour les attributs de produit utilisés lors de la création d’un produit configurable. [GitHub-29126](https://github.com/magento/magento2/issues/29126)

<!-- ENGCOM-7785 -->

* L’ID de groupe de clients est désormais validé pour le POST `/rest/V1/customers` requêtes. Auparavant, l’application n’affichait pas de message d’erreur lorsque vous utilisiez un `group_id` dans ces requêtes. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28903](https://github.com/magento/magento2/pull/28903)_. [GitHub-28064](https://github.com/magento/magento2/issues/28064)

<!-- ENGCOM-7611 -->

* Les sessions PHP ne sont pas créées par défaut pour les appels REST anonymes. Auparavant, les sessions étaient lancées même lorsqu’elles étaient inutiles. _Correctif proposé par Maciej Pawłowski dans la demande d&#39;extraction [26032](https://github.com/magento/magento2/pull/26032)_. [GitHub-7213](https://github.com/magento/magento2/issues/7213)

<!-- ENGCOM-7612 -->

* L’utilisation de divers points de fin REST pour mettre à jour les commandes qui contiennent une option personnalisée ne supprime plus les informations sur les options personnalisées. Auparavant, les valeurs de la variable `info_buyRequest` ont été supprimées. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28483](https://github.com/magento/magento2/pull/28483)_. [GitHub-22431](https://github.com/magento/magento2/issues/22431)

<!-- ENGCOM-7665 -->

* Utilisation de GET `V1/customers/me` désormais honneurs **Partage de comptes clients** paramètre (Admin **Magasins** >  **Configuration**  >  **Clients**  >  **Configuration client**  > **Options de partage de compte**) lors de la récupération des informations utilisateur. _Correctif soumis par Pavel Bystritsky dans une demande d’extraction [28213](https://github.com/magento/magento2/pull/28213)_. [GitHub-26089](https://github.com/magento/magento2/issues/26089)

<!-- ENGCOM-7563 -->

* Les attributs d’extension liés aux adresses peuvent être définis sous forme de tableaux de données. Auparavant, l’application générait une erreur lors d’une demande de POST qui contenait  `extension_attributes` a été envoyé à `estimate-shipping-methods`. Ce bogue, introduit par une validation précédente, affectait tout attribut d’extension défini sur `Magento\Quote\Api\Data\AddressInterface` qui n&#39;étaient pas des objets. _Correctif soumis par Alexander Menk dans la demande d’extraction [27338](https://github.com/magento/magento2/pull/27338)_. [GitHub-26682](https://github.com/magento/magento2/issues/26682)

<!-- ENGCOM-7618 -->

* Vous pouvez maintenant spécifier un seul champ lors de la mise à jour d’un client avec le PUT `V1/customers/:id` point de terminaison . Auparavant, le point de fin vous demandait de spécifier l’adresse électronique du client et d’autres champs requis pour créer un client. _Correctif soumis par Vadim Malesh dans une demande d’extraction [28332](https://github.com/magento/magento2/pull/28332)_. [GitHub-21237](https://github.com/magento/magento2/issues/21237)

### Liste de souhaits

<!-- MC-35622-->

* Les clients peuvent désormais modifier la quantité d’un produit dans une liste de souhaits à partir de la liste de souhaits elle-même. Auparavant, l’application ne mettait pas à jour la quantité de produits et n’affichait pas de message.

<!-- MC-35618-->

* Les clients peuvent désormais modifier la quantité d’un produit groupé dans une liste de souhaits à partir de la liste de souhaits elle-même. Auparavant, l’application ne mettait pas à jour la quantité du produit ni n’affichait de message.

<!-- ENGCOM-7580-->

* Renvois pour `Map`, `WeakMap`, `FormData`, et `MutationObserver` sont désormais chargés uniquement si nécessaire. _Correctif soumis par Dmitri Tsymbal dans la demande d’extraction [28330](https://github.com/magento/magento2/pull/28330)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7561-->

* Le processus de mise à jour de liste de souhaits prend désormais en charge la mise à jour simultanée d’un élément de liste de souhaits et de sa description. _Correctif soumis par Eduard Chitoraga dans la demande d’extraction [28222](https://github.com/magento/magento2/pull/28222)_. [GitHub-28261](https://github.com/magento/magento2/issues/28261)

<!-- ENGCOM-7660-->

* Ajout d’un test pour partager la liste de souhaits d’un client avec plus que le nombre autorisé d’emails. _Correctif soumis par Dmitri Tsymbal dans la demande d’extraction [28641](https://github.com/magento/magento2/pull/28641)_. [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- MC-36250-->

* Les administrateurs peuvent désormais configurer un produit configurable ajouté par un client à une liste de souhaits à partir d’un magasin autre que celui par défaut. Auparavant, lorsque le client avait également ajouté le produit configurable à partir d’un magasin autre que celui par défaut, l’application générait une erreur.

<!-- ENGCOM-7660-->

* Ajout d’un test pour partager la liste de souhaits d’un client avec plus que le nombre autorisé d’emails. _Correctif soumis par Dmitri Tsymbal dans la demande d’extraction [28641](https://github.com/magento/magento2/pull/28641)_. [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- ENGCOM-7674-->

* Ajout d’un test de suppression d’éléments de la liste de souhaits d’un client en tant qu’utilisateur administrateur. _Correctif soumis par Dmitri Tsymbal dans la demande d’extraction [28632](https://github.com/magento/magento2/pull/28632)_. [GitHub-28721](https://github.com/magento/magento2/issues/28721)

<!-- ENGCOM-7675-->

* Ajout d’un test pour désactiver la fonctionnalité de liste de souhaits. _Correctif soumis par Dmitri Tsymbal dans la demande d’extraction [28635](https://github.com/magento/magento2/pull/28635)_. [GitHub-28744](https://github.com/magento/magento2/issues/28744)

<!-- ENGCOM-7580-->

* Ajout d’un test pour l’utilisation d’adresses email non valides lors du partage de listes de souhaits de clients. `StorefrontShareWishlistEntityTest` a été restructuré. `StorefrontCustomerShareWishlistActionGroup` a été abandonné. _Correctif soumis par Dmitri Tsymbal dans la demande d’extraction [28330](https://github.com/magento/magento2/pull/28330)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7717-->

* Ajout d’un test pour le partage de la liste de souhaits d’un client qui dépasse la limite de longueur de texte autorisée. _Correctif soumis par Dmitri Tsymbal dans la demande d’extraction [28812](https://github.com/magento/magento2/pull/28812)_. [GitHub-28969](https://github.com/magento/magento2/issues/28969)

## Problèmes connus

**Problème**: La nouvelle fonctionnalité CAPTCHA pour le passage en caisse ne fonctionne pas comme prévu sur la page Passer une commande lors de l’utilisation de fournisseurs de paiement tiers. Les commerçants utilisant la version 2.3.6 ou 2.4.1 qui ont activé la protection CAPTCHA sur la page de magasin Passer une commande verront cette erreur lors de l’extraction à l’aide d’un fournisseur de paiement tiers tel que PayPal : `Please provide CAPTCHA code and try again`. **Solution**: Un correctif pour ce problème est désormais disponible. Voir [Magento Open Source v2.3.6/2.4.1 CAPTCHA dans le passage en caisse ne fonctionne pas](https://support.magento.com/hc/en-us/articles/360051235772) Article de la base de connaissances. Un correctif sera également inclus dans notre prochain correctif trimestriel (Q12021).

**Problème**: Les utilisateurs ne disposant pas de privilèges d’administrateur ne peuvent actuellement pas configurer leur accès 2FA personnel. 2FA comprend deux rôles ACL. Un rôle affecte la configuration globale du système et il n’est nécessaire que lors de la configuration du système. Le deuxième rôle de liste de contrôle d’accès affecte des comptes utilisateur individuels 2FA. Un utilisateur administrateur doit configurer ce deuxième type de liste de contrôle d’accès 2FA. **Solution**: Une fois que l’utilisateur s’est connecté et a vu l’écran Accès refusé, il peut accéder à `https://<magento store>/<admin_path>/tfa/tfa/requestconfig/` pour forcer la configuration. Remarque : Il est déconseillé de désactiver les paramètres de sécurité. Toutefois, cette solution n’est efficace que si les clés secrètes d’URL d’administration sont désactivées.

**Problème**: Le **Création d’un compte** sur la page Créer un compte , le bouton reste désactivé si un acheteur a saisi des données non valides. Cela empêche les acheteurs de réessayer de créer un compte après avoir commis une erreur. **Solution**: Appliquer un correctif `MC-38509`. Un correctif sera également inclus dans nos prochaines versions trimestrielles (2.4.2, 2.4.1-p1 et 2.3.6-p1), qui doivent être publiées au 1er trimestre 2021. Voir [2.4.1 et 2.3.6 créent un bouton de compte désactivé le correctif](https://support.magento.com/hc/en-us/articles/360051130212) Article de la base de connaissances.  [GitHub-30513](https://github.com/magento/magento2/issues/30513)

**Problème**: Les commerçants ne peuvent pas se connecter à dotdigital depuis l’administrateur dans Safari lorsque dotdigital est activé. Voir [Il est impossible de se connecter au dotdigital via le panneau d’administration lorsque le compte dotdigital est activé](https://support.magento.com/hc/en-us/articles/360050092291) Article de la base de connaissances.

**Problème**: La validation des adresses de sommet ne fonctionne pas lors du paiement lorsque l’acheteur sélectionne une adresse de livraison différente de l’adresse de facturation. Le problème sera corrigé dans la version 2.4.2. Voir [2.4.1 Problème connu : Le message Validation de l’adresse du sommet ne disparaît pas après la mise à jour de l’adresse](https://support.magento.com/hc/en-us/articles/360050139631) Article de la base de connaissances.

**Problème**: L’application affiche une page vide lorsqu’un commerçant enregistre un formulaire du générateur de pages numérique sur le navigateur Safari. **Solution**: Rechargez la page pour appliquer vos modifications. Voir [2.4.1 Problème connu : page vide après l’enregistrement du formulaire du générateur de page numérique](https://support.magento.com/hc/en-us/articles/360049819092) Article de la base de connaissances.

**Problème**: Dans certaines conditions, l’application se connecte automatiquement aux clients qui utilisaient auparavant les comptes Amazon plutôt que de les inviter à se connecter lors de l’extraction avec Amazon Pay. Voir [2.4.1 Problème connu : impossible de modifier le compte Amazon dans Google Chrome](https://support.magento.com/hc/en-us/articles/360049814152) Article de la base de connaissances.

**Problème**: L’application affiche brièvement un message d’erreur sur la page de facturation du workflow de passage en caisse lorsque le paiement par le Braintree PayPal et l’envoi d’adresses multiples sont sélectionnés. Voir [2.4.1 Problème connu : erreur apparaissant lors du passage en caisse avec le Braintree PayPal](https://support.magento.com/hc/en-us/articles/360050253211) Article de la base de connaissances.

**Problème**: L’application affiche un message d’erreur non informatif lorsqu’un client invité tente de passer une commande avec PayPal via Braintree lorsque le passage en caisse de l’invité est désactivé. Voir [2.4.1 Problème connu : message d’erreur non informatif lors du passage en caisse des invités à l’aide de Paypal par le biais de Braintree](https://support.magento.com/hc/en-us/articles/360050368111) Article de la base de connaissances.

## Contributions de la communauté

Nous sommes reconnaissants à l’ensemble de la communauté des Magento Open Sources et tenons à saluer leurs contributions à cette version. Découvrez les façons suivantes d’en savoir plus sur les contributions de la communauté à nos versions actuelles :

* Si un membre de la communauté a fourni un correctif pour cette version, nous identifions le correctif dans la section Problème résolu de ces notes avec l’expression &quot;*Correctif fourni par un membre de la communauté*&quot;.

* L’équipe d’ingénieurs de la communauté [Contributeurs Magento](https://magento.com/magento-contributors) tient à jour une liste des principaux individus et partenaires qui contribuent le plus par mois, trimestre et année. Sur cette page Contributeurs, vous pouvez suivre les liens vers leurs relations publiques fusionnées sur GitHub.

### Contributions des partenaires

Le tableau suivant présente les contributions des partenaires. Ce tableau répertorie le partenaire qui a contribué à la demande d’extraction, la demande d’extraction externe et le numéro de problème GitHub qui lui est associé (le cas échéant).

{{$include /help/_includes/release-notes/engcomm-2-4-1-partner.md}}

### Contributions des contributeurs individuels

Le tableau suivant répertorie les contributions des membres de notre communauté. Ce tableau répertorie les demandes d’extraction externes, le numéro de problème GitHub qui y est associé (le cas échéant) et le membre de la communauté qui a contribué à la demande d’extraction.

{{$include /help/_includes/release-notes/engcomm-2-4-1-issues.md}}

### Configuration requise

Notre pile de technologie est basée sur PHP et MySQL. Pour plus d’informations, voir [Configuration requise](../../../installation/system-requirements.md).

### Instructions d’installation et de mise à niveau

Vous pouvez installer Magento Open Source 2.4.1 à l’aide du compositeur.

## Kits d’outils de migration

L’outil de migration des données permet de transférer les données de magasin Magento 1.x existantes vers Magento 2.x. Cette interface de ligne de commande comprend des fonctions de vérification, de suivi de progression, de journalisation et de test. Pour obtenir des instructions sur l’installation, voir [Installation de l’outil de migration des données](../../../tools/data-migration-tool/install.md). Envisagez d’explorer ou de contribuer au [Référentiel de migration des données](https://github.com/magento/data-migration-tool).

Le [Code Migration Toolkit](https://github.com/magento-commerce/code-migration) aide à transférer les extensions et personnalisations de magasin Magento 1.x existantes vers Magento 2.x. L’interface de ligne de commande comprend des scripts pour la conversion des modules et des mises en page Magento 1.x.
