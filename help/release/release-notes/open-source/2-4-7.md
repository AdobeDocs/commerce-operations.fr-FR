---
title: Notes de mise à jour de Magento Open Source 2.4.7-beta1
description: Découvrez les nouvelles fonctionnalités, les améliorations, les correctifs de bogues et les problèmes connus de la version 2.4.7-beta1 du Magento Open Source.
badgeCoreBeta: label="2.4.7-beta1" type="informative"
source-git-commit: 9b66aecb2fc4e84a34320e66272acf446a03b32a
workflow-type: tm+mt
source-wordcount: '6831'
ht-degree: 0%

---


# Notes de mise à jour de Magento Open Source 2.4.7-beta1

>[!IMPORTANT]
>
>Les versions bêta peuvent contenir des défauts et sont fournies &quot;EN L’ÉTAT&quot; sans aucune garantie de quelque type que ce soit. Adobe n’aura aucune obligation de gérer, corriger, mettre à jour, modifier, modifier ou d’autre manière prendre en charge (via les services d’assistance d’Adobe ou d’une autre manière) les versions bêta. Il est conseillé aux clients de faire preuve de prudence et de ne pas s’appuyer d’aucune manière sur le bon fonctionnement ou les performances des versions bêta et/ou de la documentation ou des documents associés. Par conséquent, toute utilisation des versions bêta est entièrement à la charge du client.

Magento Open Source 2.4.7-beta1 comprend plus de 140 correctifs de qualité et améliorations. Les dépendances du compositeur principal et les bibliothèques tierces ont été mises à niveau vers les dernières versions disponibles. La prise en charge du compositeur 2.5 a été ajoutée, tandis que le compositeur 2.2.x reste prise en charge.

Cette version améliore la couverture de GraphQL pour les attributs personnalisés et les fonctionnalités de mise en cache de GraphQL améliorées.

{{bics}}

## Autres informations de mise à jour

Bien que le code de ces fonctionnalités soit fourni avec des versions du code principal du Magento Open Source, plusieurs de ces projets sont également publiés indépendamment. Les correctifs de bogues pour ces projets sont documentés dans les informations de mise à jour distinctes et spécifiques au projet disponibles dans la documentation de chaque projet.

## Magento Open Source 2.4.7-beta1

Magento Open Source 2.4.7-beta1 a été testé par rapport aux versions de composants suivantes :

* Compositeur 2.5
* Elasticsearch 8.5
* MariaDB 10.6
* MySQL 8.0
* OpenSearch 2.5
* PHP 8.2 et 8.1
* RabbitMQ 3.11
* Redis 7.0
* Varnish 7.3

Notre pile de technologie est basée sur PHP et MySQL. Voir [Configuration requise](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## Faits saillants de Magento Open Source 2.4.7-beta1

Recherchez les points forts suivants dans cette version.

### Améliorations de la sécurité

Cette version comprend 13 correctifs de sécurité et améliorations de la sécurité de la plateforme.

Aucune attaque confirmée liée à ces problèmes n&#39;a été survenue à ce jour. Cependant, certaines vulnérabilités peuvent être exploitées pour accéder aux informations sur les clients ou prendre le contrôle des sessions d’administrateur. Pour la plupart de ces problèmes, un attaquant doit d’abord avoir accès à l’administrateur. Par conséquent, nous vous rappelons de prendre toutes les mesures nécessaires pour protéger votre administrateur, y compris, mais sans s’y limiter, les actions suivantes :

* PLACE SUR LA LISTE AUTORISÉE IP
* [authentification à deux facteurs](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)
* utilisation d&#39;un VPN
* utilisation d’un emplacement unique plutôt que `/admin`
* bonne hygiène des mots de passe

Voir [Bulletin de sécurité Adobe](https://helpx.adobe.com/security/products/magento/apsb23-35.html) pour la dernière discussion sur ces problèmes résolus.

#### Améliorations supplémentaires de la sécurité

Les améliorations de sécurité de cette version améliorent la conformité aux dernières bonnes pratiques en matière de sécurité, y compris cette modification, qui introduit un changement dans le comportement par défaut d’un point d’entrée REST existant :

Le comportement par défaut de la variable [`isEmailAvailable`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/queries/is-email-available/) Requête GraphQL et ([`V1/customers/isEmailAvailable`](https://adobe-commerce.redoc.ly/2.4.6-admin/tag/customersisEmailAvailable/#operation/PostV1CustomersIsEmailAvailable)) Le point de terminaison REST a changé. Par défaut, l’API renvoie désormais toujours `false`. Les vendeurs peuvent activer le comportement d’origine, qui consiste à renvoyer la variable `true` si l’email n’existe pas dans la base de données et `false` s’il existe. <!-- AC-6695 -->

### Améliorations de la plateforme

Les mises à niveau de plateforme de cette version améliorent la conformité aux dernières bonnes pratiques en matière de sécurité. Magento Open Source 2.4.7-beta1 introduit :

* Compositeur 2.5.x. La compatibilité avec le compositeur 2.2.x demeure.  <!-- AC-8129 -->

* **Prise en charge du cache 7.3 de vernis**. Cette version est compatible avec la dernière version du Cache Varnish 7.3. La compatibilité reste avec les versions 6.0.x et 7.2.x, mais nous vous recommandons d’utiliser Magento Open Source 2.4.7-beta1 uniquement avec le Cache Varnish version 7.3 ou la version 6.0 LTS.

* **Prise en charge de RabbitMQ 3.11**. Cette version est compatible avec la dernière version de RabbitMQ 3.11. La compatibilité reste avec RabbitMQ 3.9, qui est pris en charge jusqu’à août 2023, mais nous vous recommandons d’utiliser Magento Open Source 2.4.7-beta1 uniquement avec RabbitMQ 3.11.

#### Autres mises à niveau et remplacements

Les bibliothèques JavaScript obsolètes ont été mises à niveau vers leurs dernières versions, notamment :

* `moment.js` library (v2.29.4) <!-- AC-7389 -->
* `jQuery UI` library (v1.13.2)  <!-- AC-7775 -->
* `jQuery` bibliothèque de modules externes de validation (v1.19.5) <!-- AC-8077 -->

### GraphQL

Cette version ajoute des fonctionnalités de mise en cache GraphQL améliorées et la prise en charge du schéma GraphQL pour les attributs de contrôle d’accès des clients, notamment :

* **Amélioration de la prise en charge des attributs personnalisés**. La prise en charge des attributs personnalisés GraphQL a été améliorée en enrichissant les données de l’API. Elle prend donc désormais en charge tous les types d’attributs. Le schéma d’attributs EAV GraphQL prend désormais en charge l’extension des attributs du client et des objets d’adresse du client dans l’Admin et leur récupération à l’aide de GraphQL. Voici quelques améliorations : <!-- LYNX-61 110-->

   * prise en charge étendue/ajoutée d’attributs personnalisés dans des domaines spécifiques tels que l’adresse du client
   * mise en cache ajoutée pour les attributs personnalisés
   * prise en charge améliorée des attributs personnalisés pour les produits

* **Amélioration des fonctionnalités de mise en cache de GraphQL pour améliorer la vitesse de chargement des pages**. La fonctionnalité de mise en cache a été ajoutée à ces requêtes, ce qui accélère le temps de chargement des pages pour la plupart des pages PWA :

   * [`storeConfig`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) <!-- B2B-2487 2258 -->
   * [`currency`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/currency/) <!-- B2B-2255 -->
   * [`countries`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/countries/) et [`country`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/country/) <!-- B2B-2256 -->
   * [`availableStores`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/) <!-- B2B-2257 -->
   * [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql-api/index.html#query-customAttributeMetadata) <!-- B2B-2259 -->

* **Nouveaux types de cache du programme de résolution GraphQL** inclure :
   * Page CMS. Cela met en cache les résultats du programme de résolution de page CMS.  <!-- B2B-2451 -->
   * Blocs CMS. Cela met en cache les résultats renvoyés par . `Magento\CmsGraphQl\Model\Resolver\Blocks::resolve`. <!-- B2B-2659 -->

* Les performances de l’analyseur GraphQL ont été améliorées en réduisant le nombre de fois où la variable `parse` est appelée par requête. Elle est maintenant appelée une fois. Auparavant, l’analyseur était appelé au moins trois fois. <!-- B2B-2606 -->

#### Nouvelle requête

[`customAttributeMetadataV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata-v2/) <!-- LYNX-152 160-->

#### Requêtes obsolètes

* [`attributesMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-metadata/) <!-- LYNX-77-->
* [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata/)

### Métaphorage de l’extension Magento Open Source

Cette version introduit le métapaquet de l’extension Magento Open Source v1.0.0-beta1, qui regroupe automatiquement les [Services de paiement](https://experienceleague.adobe.com/docs/commerce-merchant-services/payment-services/guide-overview.html) avec cette version de base. La version de cette extension incluse dans ce métappackage est installée lorsque `composer update` est exécuté, ce qui simplifie le processus de mise à niveau de l’extension lors de la mise à niveau vers la dernière version de base. Cette extension conserve un calendrier de publication indépendant.

Les futures versions de ce métapackage d’extension contiendront des extensions supplémentaires.

### Page Builder

Page Builder v.1.7.4 est compatible avec Magento Open Source 2.4.7-beta1.

### PWA Studio

PWA Studio v.13.2.x est compatible avec Magento Open Source 2.4.7-beta1. Plusieurs améliorations ont été apportées à l’accessibilité. Pour plus d’informations sur les correctifs, voir [Versions PWA Studio](https://github.com/magento/pwa-studio/releases). Voir [Compatibilité des versions](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) pour obtenir la liste des versions de PWA Studio et de leurs versions Magento Open Sources principales compatibles.

## Problèmes résolus

Nous avons corrigé des centaines de problèmes dans le code de base 2.4.7-beta1 de Magento Open Source. Vous trouverez ci-dessous un sous-ensemble des problèmes résolus inclus dans cette version.

### Installation, mise à niveau, déploiement

<!-- ACP2E-1505 -->

* Le `bin/magento setup:upgrade` La commande n’échoue plus avec ce type d’erreur de limitation de la mémoire MySQL : `PHP Fatal error:  Allowed memory size of 4294967296 bytes exhausted (tried to allocate 20480 bytes)`. La migration d’attributs à sélection multiple a été optimisée pour consommer moins de mémoire pendant la `setup:upgrade`.

<!-- ACP2E-1751 -->

* La génération d’une sauvegarde de base de données fonctionne désormais comme prévu à partir de la ligne de commande et de l’administrateur. Auparavant, Magento Open Source envoyait cette erreur : `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1604 1605-->

* En cours `setup:config:set` sans spécifier la variable `--lock-db-prefix` n’efface plus la valeur actuelle de la variable `env.php` fichier .

<!-- ACP2E-1498 -->

* La configuration de vernis a été mise à jour afin d’empêcher les utilisateurs invités d’accéder au contenu mis en cache associé à d’autres groupes de clients.

<!-- https://github.com/magento/magento2/pull/33092 -->

* `bin/magento setup:upgrade` se termine correctement lors de l’installation d’un nouveau module qui installe les tables et les tables associées `mview` indexeurs.

<!-- ENGCOM-9243 -->

* `bin/magento setup:upgrade` affiche désormais un message d’erreur plus informatif lorsqu’une rubrique de file d’attente de messages n’inclut pas de nom de rubrique. [GitHub-34246](https://github.com/magento/magento2/issues/34246)

<!-- https://github.com/magento/magento2/pull/36239 -->

* `bin/magento setup:upgrade` affiche désormais un message d’erreur plus informatif lorsque les fichiers XML fusionnés ne sont pas valides. Le message d’erreur comprend désormais le nom du fichier.

### Lot de produits

<!-- ACP2E-1478 -->

* Les produits groupés sont désormais importés avec succès sans dupliquer les SKU dans les options de produit. Auparavant, Magento Open Source créait plusieurs SKU en double dans les options de produit lorsque vous importiez des produits en lot avec des entrées en double.

<!-- ACP2E-1388 -->

* Le prix du produit en bundle est désormais correctement calculé lorsque l’un des produits du bundle est en rupture de stock. Auparavant, si un produit faisant partie du lot était en rupture de stock, il était supprimé du calcul du prix.

<!-- ACP2E-1503 -->

* Les produits en bundle s’affichent désormais en rupture de stock lorsque le dernier de leurs produits enfants requis est acheté. Auparavant, les produits en bundle étaient affichés en stock sur le storefront lorsque leurs produits simples étaient en rupture de stock.

<!-- ACP2E-1443 -->

* Problèmes de performance lors de l’ajout au panier de produits en regroupement avec des options non requises à l’aide de la variable `addBundleProductsToCart` la mutation a été résolue.

<!-- ACP2E-1264 -->

* Le `categoryList` la requête renvoie désormais toutes les options de lot comme prévu lorsque la variable **[!UICONTROL Show out-of-stock products]** configuration est activé. Auparavant, les options en rupture de stock n’étaient pas incluses dans la réponse de requête.

<!-- ACP2E-1345 -->

* Lot de produits créés avec `POST V1/products` réussi maintenant lorsque la portée du prix du catalogue est définie sur `website`. Auparavant, une violation de contrainte d’intégrité se produisait. [GitHub-35595](https://github.com/magento/magento2/issues/35595)

### Cache

<!-- ACP2E-1524 -->

* Le cache de page est désormais effacé comme prévu pour un produit parent lorsque l’un de ses produits enfants a été enregistré auprès de l’administrateur. Une vérification de module externe a été introduite pour atteindre l’invalidation du cache pour les variantes configurables, semblables à d’autres types de produits, quel que soit l’état de l’indexeur (planifié ou en temps réel). Auparavant, les prix n’étaient pas correctement mis à jour sur le storefront après la mise à jour d’une variation configurable de la part de l’administrateur.

<!-- ACP2E-1454 -->

* Ajout d’un mécanisme de mise en cache pour les informations d’identification AWS. Un fournisseur d’informations d’identification utilise désormais le cache du Magento pour mettre en cache les informations d’identification extraites d’AWS pour la configuration EC2.

<!-- AC-7639 -->

* Le module externe dont l’objectif est d’ajouter la balise de cache configurable lorsqu’un produit simple associé à un produit configurable est enregistré fonctionne désormais comme prévu. Toutes les balises de cache configurables appropriées sont supprimées comme prévu lorsqu’un produit simple est mis à jour par `POST V1/products`. Auparavant, tous les prix n’étaient pas mis à jour sur le storefront et les caches devaient être effacés manuellement. [GitHub-36726](https://github.com/magento/magento2/issues/36726)

### Panier et passage en caisse

<!-- ACP2E-1580 -->

* La taxe sur le panier et l’estimateur d’expédition reflètent désormais fidèlement la configuration de destination par défaut. Auparavant, lorsque vous configuriez les paramètres de calcul de destination de la taxe par défaut et que vous aviez spécifié Etat/Région et ZIP, seule la valeur ZIP s’affichait dans le panier sous **[!UICONTROL Estimate Tax and Shipping]**. Cela résultait du fait que le Magento Open Source définissait l’identifiant de région sur non défini avant d’appeler l’instruction conditionnelle qui définit l’identifiant de région par défaut à partir de l’administrateur.

<!-- ACP2E-1547 -->

* Magento Open Source ne renvoie plus cette erreur lors du passage en caisse lorsque le panier persistant est activé : `Invalid state change requested`. Auparavant, lorsque cette erreur était générée, plusieurs commandes étaient identiques. `quote_id` ont parfois été créées.

<!-- ACP2E-1456 -->

* Le mini panier affiche désormais les prix des produits en bundle qui reflètent les paramètres de configuration de la taxe sur le panier. Auparavant, le mini-panier incluait toujours des taxes dans les prix des produits groupés.

<!-- AC-7503 -->

* L’estimation de la livraison fournie à partir de la page du panier est désormais exacte. `collectShippingRates` n’est désormais défini qu’une seule fois. Auparavant, l’estimation de la livraison était dupliquée. [GitHub-36648](https://github.com/magento/magento2/issues/36648)

<!-- ACP2E-1417 -->

* Le `cart` ne renvoie plus d’erreur lorsqu’un produit figurant dans le panier spécifié est en rupture de stock. Auparavant, les acheteurs qui utilisaient cette requête pour effectuer un achat ne pouvaient pas terminer leur achat lorsqu’un article était en rupture de stock et leur page de passage en caisse était vide.

<!-- ACP2E-1459 -->

* Requêtes d’API d’invité à `POST V1/default/V1/guest-carts/<cartId>/shipping-information` ne renvoie plus un `cancel` statut si la page se recharge lors de la connexion à un environnement mobile. Auparavant, Magento Open Source générait une erreur 500 et consignait cette exception : `TypeError: Argument 2 passed to Magento\CustomerCustomAttributes\Model\Plugin\ProcessCustomerShippingAddressCustomAttributes::beforeSaveAddressInformation() must be of the type string, null given`.

<!-- AC-7886 -->

* L’éligibilité à la livraison gratuite est désormais calculée comme prévu lorsque la variable **[!UICONTROL Subtotal (Excl. Tax)]** condition des règles de panier est appliquée. [GitHub-36760](https://github.com/magento/magento2/issues/36760)

<!-- AC-6672 -->

* Le `cart` la requête renvoie désormais le niveau de prix correct pour un produit. [GitHub-29655](https://github.com/magento/magento2/issues/29655)

<!-- AC-1162 -->

* Des messages d’erreur informatifs ont été ajoutés à la page de passage en caisse afin de guider les acheteurs lorsque l’application d’un coupon sur la page d’expédition entre en conflit avec la méthode d’expédition sélectionnée. Auparavant, un message demandait aux acheteurs de revenir à la page précédente.

<!-- ENGCOM-8387 -->

* La fenêtre contextuelle d’authentification n’est désormais initialisée que lorsqu’elle est nécessaire et non dès que l’extraction d’invité est activée. Elle est maintenant initialisée lorsque l’acheteur invité tente de procéder à l’extraction et que l’extraction d’invité est désactivée. [GitHub-30672](https://github.com/magento/magento2/issues/30672)

### Règle de prix du panier

<!-- ACP2E-1516 -->

* Les règles de prix du panier sont désormais appliquées comme prévu lorsqu’une règle de prix du panier associée à une méthode d’expédition est configurée pour le magasin et que cette méthode d’expédition est remplacée par une autre lors de l’extraction. Auparavant, la variable `applied_rule_ids` n’a jamais été modifiée dans la variable `sales_order_item` et que la règle de prix du panier n’était pas appliquée à la commande.

<!-- AC-2044 -->

* Les bons sont désormais appliqués avec succès à une commande lorsqu’un acheteur applique le bon après avoir sélectionné le mode d’expédition à taux fixe lorsqu’une règle de prix du panier avec la méthode d’expédition définie comme condition s’applique. Auparavant, la page du panier affichait la variable `Coupon is Not valid` et le coupon n’a pas été appliqué. [GitHub-34866](https://github.com/magento/magento2/issues/34866)

### Catalogue

<!-- ACP2E-1479 -->

* Magento Open Source n’affiche plus de message d’avertissement lorsque vous enregistrez un produit qui a été créé avec des options personnalisées après la suppression de son image.

<!-- ACP2E-1419 -->

* Les images miniatures de produit s’affichent désormais comme prévu dans l’e-mail d’alerte de stock de produit envoyé lorsqu’un produit est de nouveau en stock. Auparavant, cette image n’était pas affichée dans l’e-mail d’alerte.

<!-- AC-3003 -->

* Nombre de produits dans l’arborescence des catégories (Admin) **[!UICONTROL Catalog]** > **[!UICONTROL Category]**) est désormais exact. Auparavant, le nombre de produits de catégorie ne pouvait pas être récupéré dans la variable `catalog_category_product_index` table. La faute de frappe qui a déclenché ce bogue a été corrigée. [GitHub-35417](https://github.com/magento/magento2/issues/35417)

<!-- ACP2E-1239 -->

* L’image principale du produit sur la page des détails du produit ne se déplace plus visiblement vers le bas au cours du chargement de la page lorsque `product_image_white_borders` dans le thème `view.xml` est désactivée. Auparavant, l’image du produit était visiblement déplacée vers le bas au chargement de la page en raison de paramètres de hauteur incorrects dans Fotorama JS.

<!-- ACP2E-1361 -->

* Les clients sont désormais informés des baisses de prix lorsque le client est abonné à des alertes de chute de prix. Auparavant, les notifications de baisse de prix n’étaient pas toujours envoyées en raison de la mise en cache au niveau de l’application.

<!-- ACP2E-1422 -->

* La validation côté serveur a été ajoutée au processus de création d’attributs de produit via l’API web. Vous ne pouvez pas activer la variable **[!UICONTROL Use in Layered Navigation Catalog]** lorsque la variable **[!UICONTROL Catalog Input Type for Store Owner]** la valeur du champ est `Text Field`,  `Text Area`,  `Text Editor`, `Date`ou `Date and Time`. Auparavant, les produits étaient omis des catégories et des résultats de recherche.

<!-- ACP2E-1413 -->

* La page de catégorie se recharge désormais avec la pagination correcte une fois qu’un acheteur a ouvert la page, modifié la pagination, accède à une page de produit, puis revient à la page de catégorie.  [GitHub-36563](https://github.com/magento/magento2/issues/36563)

<!-- ACP2E-1334 -->

* Les produits simples en rupture de stock qui sont des options pour un produit configurable s’affichent désormais comme désactivés sur le storefront lorsque **[!UICONTROL Display Out of Stock Products]** est défini sur **Oui**. Auparavant, toutes les options s’affichaient comme disponibles, en dépit de leur état et de leur disponibilité réelle.

<!-- ACP2E-1384 -->

* La mise à jour de l’attribut de portée du site web dans une vue de magasin spécifique ne remplace plus la valeur de cet attribut dans la portée globale. Auparavant, l’importation des prix des produits lorsque plusieurs lignes étaient disponibles avec le même SKU et `store_view_code` résultait en des prix inexacts pour les portées de vue par défaut et Toutes les boutiques.

<!-- ACP2E-1632 -->

* Les marchands peuvent désormais ajouter une image de GIF à la galerie d’images d’un produit à partir de l’administrateur. Auparavant, Magento Open Source affichait cette erreur :  `imagecolorsforindex(): Argument #2 ($color) is out of range`.

<!-- ACP2E-1709 -->

* Des vérifications ont été ajoutées pour gérer les erreurs qui résultent de clés de tableau non définies. Auparavant, une erreur se produisait lors de la génération de la liste autorisée de schéma déclaratif.

<!-- ACP2E-1749 -->

* Magento Open Source renvoie désormais un résultat valide pour la date personnalisée `01/01/1970`. Auparavant, l’attribut personnalisé renvoyait cette erreur : `Invalid input datetime format of value '1/01/1970`. [GitHub-37274](https://github.com/magento/magento2/issues/37274)

<!-- AC-6507 -->

* `routes` les requêtes qui utilisent des fragments renvoient désormais les informations de catégorie comme prévu. Auparavant, une erreur de serveur interne se produisait sur la page de catégorie. [GitHub-35906](https://github.com/magento/magento2/issues/35906)

<!-- ACP2E-1772 -->

* Problèmes liés à `cataloginventory_stock` le processus de réindexation partielle a été résolu et les performances de l’indexeur ont été améliorées. Auparavant, les catégories de stock et de produit n’étaient pas mises à jour avec précision.

<!-- AC-8226 -->

* Magento Open Source génère désormais une redirection 301 pour un produit lorsque la catégorie à laquelle il appartient a été déplacée vers un nouveau parent. [GitHub-37039](https://github.com/magento/magento2/issues/37039)

### Règles du catalogue

<!-- ACP2E-1579 -->

* Les règles du catalogue sont désormais appliquées comme prévu dans un environnement multisite.

### Coupons

<!-- ACP2E-1551 -->

* Les acheteurs peuvent désormais utiliser deux codes de bons générés automatiquement distincts, générés par la même règle de prix de panier. Le `Uses per Coupon` est maintenant activé lorsque le type de coupon est sélectionné sur `Auto` (similaire pour le type de coupon =`Specific Coupon`) . Cela permet à son tour à l’acheteur d’appliquer plusieurs codes de bon au même prix de panier si les codes sont différents.

<!-- ACP2E-1496 -->

* La valeur de bon à usage unique d’un acheteur est désormais restaurée comme prévu lorsque la commande à laquelle il a été appliqué est annulée.

<!-- ACP2E-1195 -->

* Le `GET V1/coupons/<couponId>` endpoint renvoie désormais la réponse attendue complète pour les bons créés manuellement, comme pour les bons générés automatiquement.  Auparavant, certains champs étaient omis (par exemple, `usage_limit`, `usage_per_customer`, et `created_at`).

### cron

<!-- AC-7987 -->

* Les utilisateurs administrateurs peuvent désormais afficher la tâche `bin/magento cron:run` est actuellement en cours d’exécution. Le titre du processus en cours d’exécution répertorie désormais les noms des groupes et des tâches. [GitHub-34321](https://github.com/magento/magento2/issues/34321)

### Client

<!-- AC-6748 -->

* Magento Open Source affiche désormais la variable **[!UICONTROL Date of Birth]**, **[!UICONTROL Tax/VAT Number]**, **[!UICONTROL Gender]**, **[!UICONTROL Telephone]**, **[!UICONTROL Company]**, et **[!UICONTROL Fax]** sur la page modifier le client en fonction des paramètres de configuration. [GitHub-36196](https://github.com/magento/magento2/issues/36196)

### Email

<!-- ACP2E-1529 -->

* Les détails de l’administrateur de la société sont désormais enregistrés comme prévu et les administrateurs sont correctement redirigés, lorsque les e-mails d’administrateur de la société Assign Company contiennent une `CMS Block URL` .

<!-- AC-2903 -->

* Les adresses électroniques du client peuvent désormais inclure des diacritiques. Auparavant, la validation frontale interdisait la création d’un utilisateur avec des signes diacritiques dans son adresse électronique. [GitHub-12075](https://github.com/magento/magento2/issues/12075)

<!-- ACP2E-1682 -->

* Les emails d’alerte de stock et de prix sont désormais traduits en fonction de la langue configurée pour la vue de magasin par défaut du site web. Auparavant, ces emails n’étaient pas traduits.

<!-- ACP2E-1571 -->

* `POST V1/order/notify-orders-are-ready-for-pickup` envoie désormais un email pour avertir les clients qu’une commande est prête à être récupérée uniquement lorsque la commande est prête. L’e-mail est maintenant déclenché uniquement lorsque la demande a été satisfaite sans exception.

### Frameworks

<!-- ACP2E-1492 -->

* Mutex a été mis en oeuvre pour les commandes afin d’empêcher les conditions de concurrence lors de la mise à jour par des requêtes simultanées. Auparavant, les demandes simultanées (conditions de concurrence) pour les annulations de commande provoquaient des entrées dupliquées dans la variable `inventory_reservation` table.

<!-- ACP2E-1381 -->

* Le `populateWithArray` transforme désormais les propriétés de l’objet pour gérer correctement la casse, en la rendant compatible avec `AbstractModel` getters et setters. Auparavant, la mise en forme de la casse du serpent était incorrecte lorsque le nom de l’attribut de données contenait plusieurs lettres majuscules dans une ligne.

<!-- ACP2E-1522 -->

* La valeur d’incrémentation automatique dans la variable `catalog_product_entity_varchar` s’incrémente désormais correctement après l’enregistrement d’un produit. Auparavant, cette valeur augmentait de dix.

<!-- ACP2E-1701 -->

* Magento Open Source ne renvoie plus cette exception de système de fichiers lorsque vous essayez de vider le cache JavaScript/CSS :  `No such file or directory`.

<!-- ACP2E-1358 -->

* La valeur de `value_id` in `customer_entity_int` est désormais incrémentée correctement. Une requête de mise à jour est exécutée au lieu de `insert on duplicate key update` lors de la mise à jour d’une entité qui intègre ces attributs. Par conséquent, les colonnes à incrémentation automatique utilisées dans le modèle de VEC se développent désormais de manière linéaire. Auparavant, le processus d’auto-incrémentation des colonnes ignorait les valeurs en raison de l’échec des requêtes d’insertion. [GitHub-28387](https://github.com/magento/magento2/issues/28387)

<!-- AC-8462 -->

* Suppression de l’espace blanc superflu de `id` attributs qui ne le nécessitent pas. (Ce bogue a été introduit par une modification du code Magento Open Source 2.4.6.)

<!-- AC-7923 -->

* Les codes de magasin n’apparaissent plus dans l’URL du magasin lorsque celui-ci est en mode magasin unique. [GitHub-36831](https://github.com/magento/magento2/issues/36831)

<!-- AC-7988 -->

* Des mises à jour mineures ont été apportées à `around` modules externes. [GitHub-31443](https://github.com/magento/magento2/issues/31443)

<!-- AC-7989 -->

* Les échantillons `Helper` a été restructuré afin de supprimer les alias d’importation trompeurs. [GitHub-31373](https://github.com/magento/magento2/issues/31373)

<!-- AC-8708 -->

* Les utilisateurs administrateurs peuvent désormais supprimer ou renommer un `sitemap.xml` comme prévu. Auparavant, un utilisateur administrateur pouvait supprimer le fichier de l’administrateur, mais il restait dans le système de fichiers.  [GitHub-37468](https://github.com/magento/magento2/issues/37468)


<!-- ACP2E-1747 -->

* Les coupons ne sont plus marqués comme utilisés lorsque le paiement échoue pour la commande à laquelle ils ont été appliqués. Les messages de file d’attente sont maintenant traités dans l’ordre dans lequel ils sont publiés au démarrage du consommateur. Auparavant, le premier message était extrait de la file d’attente pour vérifier simplement si les messages étaient placés en file d’attente et était rejeté par la suite, ce qui provoquait le premier traitement du premier message en dernier.

<!-- ACP2E-1627 -->

* Magento Open Source ne renvoie plus d’exception dans le fichier journal lorsqu’un utilisateur tente d’imprimer un libellé d’expédition. Auparavant, si une extension modifiait les en-têtes de réponse contenant une pièce jointe, le système envoyait une exception dans le fichier journal.

<!-- AC-7986 -->

* La prise en charge d’autres classes de HTML a été ajoutée à `elements.xsd`. [GitHub-36891](https://github.com/magento/magento2/issues/36891)

### Correctifs généraux

<!-- ACP2E-1508 -->

* Les erreurs ne se produisent plus lors des demandes d’un flux RSS pour les catégories lorsque **[!UICONTROL RSS Feed Top Level Category]** est activée. Auparavant, la navigation sur la page de catégorie de flux RSS générait des Elasticsearch. `CRITICAL` erreurs dans les fichiers journaux lorsque **[!UICONTROL RSS Feed Top Level Category]** a été activé.

<!-- ACP2E-1490 -->

* La valeur correcte est désormais enregistrée pour `gws_store_groups` lorsque la portée du rôle est modifiée lors de la création du rôle utilisateur. Auparavant, lorsque la portée du rôle était sélectionnée comme `All`, la variable `gws_store_groups` a été enregistrée comme nulle lors de la création de l’utilisateur, mais pas lors de la modification des rôles. En outre, si la portée du rôle a été sélectionnée comme `Custom`, puis la variable `gws_store_groups` a toujours été enregistrée comme nulle.

<!-- ACP2E-1446 -->

* Vous pouvez désormais accéder à la page de réinitialisation du mot de passe en cliquant sur le lien Réinitialiser le mot de passe de l’administrateur sur la page de connexion de l’administrateur lorsque la variable **[!UICONTROL Add Store Code to Urls]** est activé. Le lien Réinitialisation du mot de passe de l’administrateur a précédemment ouvert la page de connexion ou la page 404.

<!-- ACP2E-1274 -->

* La plage de dates dans le tableau de bord des statistiques d’administration est désormais calculée en fonction du fuseau horaire défini dans les paramètres de configuration, puis convertie en UTC afin de récupérer les données de la base de données.

<!-- ACP2E-1665 -->

* Le filtre de hiérarchie CMS fonctionne comme prévu une fois que vous avez filtré une vue de magasin, puis cliqué sur **[!UICONTROL Save]** sur Admin **[!UICONTROL Content]** > **[!UICONTROL Hierarchy]**. Auparavant, cliquez sur **[!UICONTROL Save]** actualisait la page, mais le contexte était perdu et la vue de magasin sélectionnée ne s’affichait plus.

<!-- ACP2E-1631 -->

* Cliquez sur le bouton **[!UICONTROL Send invitation]** (Admin) **[!UICONTROL Marketing]** > **[!UICONTROL Private sales]**  > **[!UICONTROL Invitation]**) envoie désormais une demande de POST avec la clé de formulaire et envoie l’invitation avec succès. Auparavant, lorsque vous cliquiez sur ce bouton, ni la méthode de POST HTTP, ni la clé de formulaire n’étaient présentes.

<!-- ACP2E-1608 -->

* Les fichiers sans octet peuvent désormais être copiés vers un stockage distant avec AWS S3.

<!-- AC-7402 -->

* Les utilisateurs administrateurs peuvent désormais ajouter une nouvelle adresse client à partir de l’administrateur lorsqu’un client a été créé pour un autre site web dont l’ID de boutique ne correspond pas à l’ID du site web. Auparavant, Magento Open Source affichait ce message contextuel : `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- AC-8247 -->

* La page de l’éditeur de blocs CMS affiche désormais le widget correct. `block_id` .  [GitHub-29644](https://github.com/magento/magento2/issues/29644)

### Cartes cadeau et enveloppement


<!-- ACP2E-1341 -->

* L’émulation commence maintenant pendant `send()` les appels une fois que l’émulation a été terminée pendant la `getInfoBlockHtml()` et aucune erreur n’est consignée. Auparavant, la variable `system.log` a été inondé avec cette erreur : `main.ERROR: Environment emulation nesting is not allowed`. [GitHub-35603](https://github.com/magento/magento2/issues/35603)

<!-- ACP2E-1612 -->

* Vous pouvez désormais utiliser la variable `updateCartItems` mutation pour mettre à jour une carte-cadeau dans un panier. Auparavant, seule la quantité de la carte pouvait être mise à jour dans le panier par cette mutation.

<!-- AC-7530 -->

* Le `addProductsToCart` La requête ajoute maintenant une carte-cadeau à un panier. Auparavant, cette requête attendait le nom du destinataire de la carte-cadeau, mais celui de l’expéditeur était renvoyé. Magento Open Source a lancé cette erreur : `Please specify a recipient name`. [GitHub-36665](https://github.com/magento/magento2/issues/36665)

### Google ReCAPTCHA

<!-- ACP2E-1539 -->

* Le Google reCAPTCHA dans le workflow de passage en caisse fonctionne désormais comme prévu pour les contrôles, les commandes et les modes de paiement personnalisés.

<!-- ACP2E-1311 -->

* Les formulaires Magento Open Source ne peuvent plus être envoyés avant le chargement de la case à cocher Google ReCAPTCHA .

<!-- ACP2E-1338 -->

* Le widget reCAPTCHA précède désormais le **[!UICONTROL Place Order]** sur la page de paiement. Auparavant, le widget s’affichait en haut de la page.

### GraphQL

<!-- ACP2E-1584 -->

* Attributs de produit de type `DateTime` mappez maintenant à la fonction `FilterRangeTypeInput` filtre dans les requêtes de produits. Auparavant, ces attributs étaient mappés sur `FilterMatchTypeInput`. Suite à cette modification, interroge le filtrage sur `DateTime` attributs requis `from` et `to` plutôt que de correspondre aux valeurs.

<!-- ACP2E-1552 -->

* Le `customer` la mutation renvoie désormais uniquement les révisions client liées à une vue de magasin spécifique, comme prévu lorsqu’elle est filtrée par identifiant de magasin.

<!-- AC-7544 -->

* Le `categories` ne renvoie plus d’erreur lorsque la variable `items.redirect_code` la valeur de réponse contient une valeur nulle. [GitHub-36675](https://github.com/magento/magento2/issues/36675)

<!-- ACP2E-1486 -->

* Le `changeCustomerPassword` La mutation déclenche désormais l’envoi d’un courrier électronique comme prévu après la réinitialisation d’un mot de passe.

<!-- ACP2E-1494 -->

* `urlResolver` et `route` les requêtes renvoient désormais un résultat lorsque la variable `Target Path` de la réécriture de l’URL est une URL absolue. Auparavant, la variable `urlResolver` la requête renvoyait NULL lorsque vous l’utilisiez pour récupérer les données de redirection.

<!-- AC-7979 -->

* Le `products` la requête renvoie désormais les libellés corrects. [GitHub-29635](https://github.com/magento/magento2/issues/29635)


<!-- ACP2E-1315 -->

* Le `categoryList` la requête renvoie désormais une valeur renseignée. `product` de la section `options` bloc pour les produits enfants des produits de bundle comme prévu.  Auparavant, aucune information sur le regroupement de produits enfants n’était renvoyée.

<!-- AC-7114 -->

* Le `route` query renvoie désormais les itinéraires pour les catégories et les produits comme prévu sans erreur de serveur interne. [GitHub-36544](https://github.com/magento/magento2/issues/36544)

<!-- ACP2E-1652 -->

* Le `products` query now récupère `url_key` lorsque plusieurs catégories sont sélectionnées.

<!-- LYNX-17 -->

* `product` les requêtes renvoient désormais des agrégations uniquement pour les produits affectés au catalogue partagé spécifié.

<!-- AC-7974 -->

* Des noms de transaction ont été ajoutés aux transactions GraphQL New Relic. [GitHub-36874](https://github.com/magento/magento2/issues/36874)

<!-- AC-6680 -->

* Le `OptionValueProvider` class `get()` renvoie désormais une valeur d’option d’attribut en fonction de la variable `option_id` comme prévu. Auparavant, il renvoyait une erreur. [GitHub-35910](https://github.com/magento/magento2/issues/35910)

<!-- AC-6745 -->

* Le `searchProducts` query renvoie désormais toutes les agrégations disponibles (filtres) et leurs libellés correctement traduits. Auparavant, les libellés d’agrégation de prix et de catégories n’étaient pas traduits comme prévu. [GitHub-36140](https://github.com/magento/magento2/issues/36140)

<!-- AC-6666 -->

* Vous pouvez désormais utiliser un fragment `ProductCard` lors de l’interrogation `related_products`, `upsell_products`, et  `crossell_products` on `ProductInterface`. [GitHub-29769](https://github.com/magento/magento2/issues/29769)

<!-- AC-7014 -->

* Le `products` la requête renvoie désormais les produits associés, de mise à niveau et de vente croisée dans l’ordre dans lequel ils ont été enregistrés. [GitHub-36461](https://github.com/magento/magento2/issues/36461)

<!-- AC-8573 -->

* Les requêtes GraphQL renvoient désormais les données de produits associées triées par position. [GitHub-33010](https://github.com/magento/magento2/issues/33010)


<!-- AC-8542 -->

* `category_url_path` a été ajouté à `ProductAttributeFilterInput`, qui prend en charge la demande de tous les produits pour une catégorie dans une seule requête. [GitHub-32460](https://github.com/magento/magento2/issues/32460)

<!-- AC-821 -->

* Correction d’une erreur dans laquelle la méthode qui définit le magasin actuel dans une mutation GraphQL était exécutée avant la méthode qui gère la validation. [GitHub-31336](https://github.com/magento/magento2/issues/31336)

### Image

<!-- ACP2E-1353 -->

* Le formulaire de chargement de l’icône Admin favicon prend désormais en charge `.ico` types de fichiers. [GitHub-34858](https://github.com/magento/magento2/issues/34858)

### Import/export

<!-- ACP2E-1565 -->

* Le processus d’importation de produit n’est plus interrompu lorsque des images de produit sont manquantes. Auparavant, lorsqu’une image de produit était manquante lors de l’importation d’un service tiers à l’aide d’un fichier CSV, Magento Open Source affichait cette erreur : `Maximum error count has been reached or a system error is occurred!`.

<!-- ACP2E-1476 -->

* Les performances d’exportation des clients à partir de la grille de clients ont été améliorées dans les déploiements où B2B est activé.

<!-- ACP2E-1391 -->

* Le processus d’importation de produit ne génère plus d’erreur de validation lorsqu’une valeur d’attribut dans `configurable_variations` contient une virgule.

<!-- ACP2E-1377 -->

* Le décodage a été exclu du processus d’exportation. Le texte du fichier d’exportation CSV reste inchangé après l’importation. Par conséquent, la description ne change pas après la réimportation. Auparavant, les balises de HTML étaient supprimées dans l’éditeur de Page Builder après l’exportation et l’importation du produit.

<!-- ACP2E-1451 -->

* Les configurations autres que par défaut (portée du site web ou du magasin) qui sont ajoutées en tant que variables d’environnement n’interrompent plus la variable `app:config:import` traiter avec une erreur de récursion.

<!-- ACP2E-1569 -->

* Les indexeurs de prix et de recherche catalogue en mode Mise à jour en mode Enregistrer ne sont plus invalidés après l’importation. Auparavant, la version du document de l’indexeur Elasticsearch changeait de version lorsque des produits nouveaux et existants étaient importés.

<!-- ACP2E-1482 -->

* Les rapports de produit sont désormais exportés vers la variable `var` répertoire .  Auparavant, ces rapports étaient exportés vers le répertoire racine du document, qui est un répertoire en lecture seule dans les instances cloud.

<!-- ACP2E-1736 -->

* Les champs d’adresse client à sélection multiple vides n’interrompent plus ou n’interrompent plus le processus d’exportation.

### Index

<!-- ACP2E-1697 -->

* Les performances de l’indexeur de produits de règle de catalogue dans les déploiements où les règles ne sont pas affectées à tous les sites web ont été améliorées.

<!-- ACP2E-1401 -->

* Création d’un type de produit personnalisé lorsque les indexeurs sont définis sur **[!UICONTROL Update on schedule]** ne provoque plus la mise à jour de l’index `cron` tâche à échouer. [GitHub-36471](https://github.com/magento/magento2/issues/36471)

<!-- AC-6816 -->

* `bin/magento indexer:reindex customer_grid` n’échoue plus avec une erreur MySQL lorsque la grille du client inclut des attributs client personnalisés nouvellement créés. [GitHub-36233](https://github.com/magento/magento2/issues/36233)

<!-- AC-8076 -->

* Le changement du mode d’indexeur pour plusieurs indexeurs (c’est-à-dire un changement de mode d’indexeur d’action de masse) modifie désormais le mode d’un indexeur uniquement lorsque le mode actuel diffère de celui appliqué. Cela améliore les performances en empêchant les déplacements inutiles vers la base de données. [GitHub-36823](https://github.com/magento/magento2/issues/36823)

<!-- AC-6934 -->

* L’indexation des produits avec de nombreuses options d’attribut a été améliorée. [GitHub-36386](https://github.com/magento/magento2/issues/36386)


### Infrastructure

<!-- ACP2E-1462 -->

* Magento Open Source n’inclut plus le chemin d’accès complet à la racine du serveur dans le message d’erreur qu’il affiche lorsqu’une requête HTTP incorrecte a été envoyée au serveur. Seules les chaînes sont désormais transmises à la variable `explode` comme second argument.

<!-- AC-8384 -->

* `restricted_classes.php` a remplacé `Zend_Validate_File_Upload`. Auparavant, le programme de validation se bloquait lors du chargement d’un fichier d’importation supérieur à la valeur configurée dans `php.ini `. [GitHub-37281](https://github.com/magento/magento2/issues/37281)

<!-- AC-7093 -->

* Le moteur de modèle de courrier électronique peut désormais traiter correctement certaines directives imbriquées (par exemple : `{{if}}{{depend}}...{{/depend}}{{/if}}`). [GitHub-36438](https://github.com/magento/magento2/issues/36438)

<!-- AC-7920 -->

* `product` les requêtes avec données d’agrégation renvoient désormais les valeurs d’étiquette correctes pour les attributs de produit de type booléen. [GitHub-29123](https://github.com/magento/magento2/issues/29123)

<!-- AC-2618 -->

* Ajout de régions ukrainiennes à la `directory_country_region` table. [GitHub-35187](https://github.com/magento/magento2/issues/35187)

<!-- https://github.com/magento/magento2/pull/29173 -->

* Les fichiers CSS ne sont plus corrompus lors de la fusion `var/tmp` et `pub/static` se trouvent sur différents systèmes de fichiers et **[!UICONTROL CSS Merging Enabled]** est activée. Les fichiers temporaires ont été créés dans le même répertoire statique que le fichier cible pour s’assurer que les deux fichiers se trouvent sur le même système de fichiers. Par conséquent, l’appel pour le renommer est atomique. [GitHub-29172](https://github.com/magento/magento2/issues/29172)

<!-- https://github.com/magento/magento2/pull/36769 -->

* Appel à une fonction membre `getId()` ne déclenche plus d’exception.

<!-- https://github.com/magento/magento2/pull/34092 -->

* Les vérifications de type sont désormais appliquées pour le type de tableau dans le processeur de configuration du thème de conception.  [GitHub-34440](https://github.com/magento/magento2/issues/34440)

### Journalisation

<!-- ACP2E-1385 -->

* Les utilisateurs administrateurs peuvent désormais consulter les journaux des actions en bloc créées par les intégrations dans la section Journal des actions en bloc de l’administrateur.

### Connexion

<!-- ACP2E-1521 -->

* La réinitialisation d’un mot de passe dans un navigateur puis la connexion à l’aide d’un autre navigateur ne génère plus d’exception. [GitHub-36447](https://github.com/magento/magento2/issues/36447)

<!-- ACP2E-1332 -->

* Les clients sont désormais redirigés vers la page de connexion après l’activation d’un compte comme prévu. Auparavant, les clients étaient automatiquement connectés.

### Commandes

<!-- ACP2E-1514 -->

* Les acheteurs ne peuvent plus commander un produit à l’aide d’un prix personnalisé lorsqu’une commande est générée pour la première fois à partir de l’administrateur à l’aide du prix personnalisé ponctuel. Auparavant, si une commande contenait un article avec des prix personnalisés, ce prix personnalisé était appliqué aux autres commandes passées avec la fonctionnalité de réorganisation.

<!-- ACP2E-1421 -->

* Les acheteurs ne peuvent plus enregistrer les états de commande incorrects dans la page de commande. L’état de la commande n’est plus remplacé par Terminé lors de l’expédition d’un élément. Auparavant, Magento Open Source ne vérifiait pas l’état actuel de la commande avant d’enregistrer l’état de la commande après qu’un acheteur ait saisi un commentaire. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1367 -->

* La grille des commandes client est désormais synchronisée de manière asynchrone avec toutes les commandes, comme prévu. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1197 -->

* La fonctionnalité de filtrage par date d’achat de la section commandes client de la page commandes fonctionne désormais comme prévu. Auparavant, une erreur JavaScript se produisait lorsque la logique de conversion du fuseau horaire entraînait une erreur lorsque le même fuseau horaire était fourni à la méthode .

<!-- ACP2E-1294 -->

* Le tableau de bord du Magento Open Source affiche désormais les statistiques de commandes correctes au premier chargement. Auparavant, le tableau de bord présentait des informations de commande incorrectes, mais présentait les informations correctes une fois la période mise à jour.

<!-- ACP2E-1762 -->

* Les utilisateurs administrateurs sont désormais redirigés comme prévu vers la page de commande après avoir sélectionné une vue de magasin lors de la création d’une commande à partir de l’administrateur.

<!-- ACP2E-1418 -->

* L’API REST Commandes renvoie désormais des informations sur les produits configurables et simples dans la commande, quel que soit l’état du stock des produits simples. Les utilisateurs administrateurs ne peuvent passer des commandes maintenant que si les articles (produits) sélectionnés sont en stock ou pouvant être vendus. Auparavant, cette API renvoyait des informations uniquement sur les produits en stock.

<!-- AC-7901 -->

* La page de note de crédit ne se bloque plus lorsque la livraison gratuite est activée lorsque les prix d’expédition incluent des taxes et que les calculs de taxe sont appliqués après les remises. Auparavant, le Magento Open Source lançait une `Division by zero` exception. [GitHub-36800](https://github.com/magento/magento2/issues/36800)

<!-- AC-1342 -->

* En utilisant la variable `rest/V1/orders/{id}/comments` endpoint pour publier un commentaire sur une commande sans indiquer l’état de la commande n’a plus d’incidence sur l’affichage de la commande. Auparavant, l’état de la commande était consigné comme NULL dans la variable `sales_order` et `sales_order_grid` et ni la page Mes commandes ni la grille Commandes d’administration n’affichaient la commande. [GitHub-34180](https://github.com/magento/magento2/issues/34180)

### Page Builder

<!-- ACP2E-1564 -->

* L’ajout d’un produit à un panier à partir du carrousel du Créateur de pages ne duplique plus la quantité d’article des pages comportant deux widgets différents affichant les mêmes produits.

<!-- ACP2E-1542 -->

* Le Créateur de pages n’ajoute plus le `tabindex` Attribut de HTML aux balises de lien hypertexte `a` lorsque vous modifiez un lien hypertexte, enregistrez un modèle.

<!-- ACP2E-1444 -->

* Le widget de produits et l’aperçu du Créateur de pages gèrent désormais correctement les caractères spéciaux de HTML. Auparavant, le widget de produit n’affichait pas correctement les SKU qui contenaient la variable `&` caractère.

<!-- ACP2E-1441 -->

* Le contenu de l’élément de texte Page Builder est maintenant mis à jour comme prévu lorsque vous sélectionnez et mettez à jour le bloc de contenu complet en mode aperçu.

<!-- ACP2E-1362 -->

* La copie et le collage de texte d’un éditeur de texte de Page Builder vers un autre fonctionnent désormais comme prévu. Auparavant, la page dans laquelle vous tentiez de coller du texte ne pouvait pas être enregistrée et Magento Open Source affichait cette erreur de console : `[ERROR] Page Builder was rendering for 5 seconds without releasing locks.`.

<!-- ACP2E-1568 -->

* Page Builder `column-block` le type de contenu créé dans les anciennes versions du Créateur de pages s’affiche désormais correctement.

<!-- ACP2E-1234 -->

* Le filtrage de la description des métadonnées de produit lors de la création du produit à partir de l’administrateur a été amélioré. Auparavant, si le créateur de pages était activé, la description des métadonnées du produit était générée en fonction de la valeur par défaut.` {{name}} {{description}}` Masque. Le masque de méta-description du produit par défaut est désormais composé de `{{name}}`. [GitHub-36107](https://github.com/magento/magento2/issues/36107)

<!-- ACP2E-1758 -->

* L&#39;ajout d&#39;un bloc dynamique sans contenu ne déclenche plus d&#39;erreur.

<!-- AC-6645 -->

* Les problèmes d’affichage des colonnes dans le contenu du Créateur de pages ont été résolus. Auparavant, `column-line` le contenu du type de contenu n’a pas été rendu. [GitHub-3949](https://github.com/magento/pwa-studio/issues/3949)

### Paiement

<!-- ACP2E-1215 -->

* L’option de mode de paiement Vault n’apparaît plus dans le workflow de passage en caisse de l’administrateur lorsque l’acheteur ne dispose pas d’un jeton Vault. [GitHub-36273](https://github.com/magento/magento2/issues/36273)

<!-- ACP2E-1303 -->

* Le **[!UICONTROL Venmo]** peut maintenant être masqué lorsque les boutons PayPal sont activés. Auparavant, la variable **[!UICONTROL Venmo]** Le bouton n’a pas pu être supprimé du panier, du mini-panier, des détails du produit ou des pages de passage en caisse.

<!-- AC-7105 -->

* Les acheteurs sont désormais redirigés vers la page de succès après avoir effectué avec succès un paiement de lien de flux de paie Paypal. [GitHub-36520](https://github.com/magento/magento2/issues/36520)


#### Braintree


<!-- ACP2E-1229 -->

* L’option de mode de paiement Braintree Vault n’est plus automatiquement désélectionnée dans le workflow de passage en caisse lorsqu’un acheteur met à jour son adresse de facturation. Auparavant, le mode de paiement était désélectionné lorsque l’acheteur désélectionnait la variable **[!UICONTROL My billing and shipping address are the same]** bouton .

<!-- BUNDLE-3248 -->

* Résolution de problèmes liés à l’extraction avec PayPal via Braintree après la mise à niveau d’Adobe Commerce 2.4.5-p2. [GitHub-37242](https://github.com/magento/magento2/issues/37242)

<!-- BUNDLE-3257 -->

* Les numéros de téléphone sont désormais rendus comme prévu avec les adresses dans les champs d’adresse de livraison modale de payement Google. Auparavant, les numéros de téléphone étaient absents.

<!-- BUNDLE-3228 -->

* Les commandes sont maintenant placées avec le Braintree lorsque la réponse du Braintree inclut une valeur vide pour la variable `threeDSecureInfo/eciFlag`. Auparavant, une erreur PHP se produisait lors de l’extraction lorsque cette valeur était vide.

<!-- BUNDLE-3243 -->

* Magento Open Source ne renvoie plus d’erreur lorsqu’un acheteur applique un coupon sur la page de vérification de commande lors de l’extraction avec Google Pay à partir du mini panier. Auparavant, les acheteurs étaient redirigés vers une page 404.

<!-- BUNDLE-3245 -->

* Les acheteurs peuvent désormais effectuer le passage en caisse à l’aide des paiements du Braintree et de Magento Open Source 2.4.6 avec ReCAPTCHA v2 ou v3 invisible. [GitHub-37241](https://github.com/magento/magento2/issues/37241)

<!-- BUNDLE-3241 -->

* Les acheteurs ne peuvent plus cliquer sur le bouton **[!UICONTROL PayPal]** pour acheter un produit configurable sans avoir au préalable sélectionné les options requises. Auparavant, les acheteurs pouvaient cliquer sur le **[!UICONTROL PayPal]** et ont ensuite été redirigés vers la page produit avec une erreur :

<!-- BUNDLE-3148 -->

* Le **[!UICONTROL PayPal]** s’affiche désormais comme prévu sur les pages panier et mini panier. Auparavant, ce bouton n’était pas affiché sur la page du panier et était dupliqué sur la page du mini panier.

<!-- BUNDLE-3244 -->

* Les commandes partiellement facturées sont désormais capturées comme prévu dans le compte correct dans les déploiements où les marchands ont deux ID de compte marchand différents pour la même devise dans leur compte Braintree.

<!-- BUNDLE-3250 -->

* Le Magento Open Source ne génère plus d’erreur lors de la création d’une deuxième facture partielle pour une commande passée par Braintree lorsque la variable **[!UICONTROL Enable Vault for Card Payments]** est activée. Auparavant, lorsqu’un commerçant tentait de créer une seconde facture, le Magento Open Source envoyait cette erreur : `Your payment could not be taken. Please try again or use a different payment method. Payment method token is invalid`.

<!-- AC-2901 -->

* Les informations de paiement des Braintree sont désormais enregistrées par boutique et les acheteurs ne voient que les informations de carte qui ont été enregistrées dans la boutique dans laquelle ils font leurs achats. Auparavant, les acheteurs pouvaient voir les informations de carte stockées de tous les magasins pendant le passage en caisse. [GitHub-34253](https://github.com/magento/magento2/issues/34253)

### Promotion

<!-- ACP2E-1290 -->

* Les effets des **[!UICONTROL Fixed amount discount for whole cart]** règle de prix, lorsqu’elle est appliquée à la variable **[!UICONTROL Apply to shipping amount]** , est désormais répartie proportionnellement entre les produits et les montants d’expédition, conformément aux attentes. Auparavant, les calculs de remise étaient incorrects.

<!-- ACP2E-1300 -->

* Le **[!UICONTROL Discard Subsequent Rules]** est désormais appliqué comme prévu. Lorsque ce paramètre est activé, d’autres règles de priorité basse peuvent être appliquées à un autre produit uniquement. [GitHub-35707](https://github.com/magento/magento2/issues/35707)

### Rapports

<!-- ACP2E-1541 -->

* Le rapport Commandes (**[!UICONTROL REPORTS]** > **[!UICONTROL Sales]** > **[!UICONTROL Orders]**) inclut désormais les valeurs de commande correctes lorsque les commandes sont générées par des magasins qui utilisent des devises autres que les devises par défaut. Auparavant, ce rapport incluait des valeurs incorrectes. [GitHub-36742](https://github.com/magento/magento2/issues/36742)

<!-- ACP2E-1477 -->

* Les informations trompeuses figurant dans le formulaire de rapport des commandes client ont été révisées pour plus de clarté.

<!-- ACP2E-1435 -->

* Les utilisateurs administrateurs peuvent désormais rechercher des enregistrements contenant des courriers électroniques.  `+` (plus) des signes de la page Rapport Paniers abandonnés . [GitHub-36560](https://github.com/magento/magento2/issues/36560)

### Rechercher {#search-heading}

<!-- ACP2E-1499 -->

* Les résultats de la recherche affichent désormais les résultats pertinents en fonction du poids de la recherche des attributs, comme prévu.

<!-- AC-7505 -->

* Texte informatif sous le `Search Weight` d’attribut `Storefront Properties` Champ de saisie sur Admin **[!UICONTROL Stores]** > **[!UICONTROL Attributes]** > **[!UICONTROL Product]** décrit désormais les valeurs possibles. [GitHub-36646](https://github.com/magento/magento2/issues/36675)

### Expédition

<!-- AC-7003 -->

* Le **[!UICONTROL Shipping Policy]** La zone de texte est désormais visible dans la portée Vue de la boutique d’administration lorsque  **[!UICONTROL Apply custom Shipping Policy]** est activé et une stratégie d’expédition personnalisée est disponible. [GitHub-36425](https://github.com/magento/magento2/issues/36425)

<!-- AC-7550 -->

* Le `cart` la requête renvoie désormais une `selected_shipping_method` qui correspond à l’une des valeurs suivantes : `available_shipping_methods` les codes de l’opérateur et de la méthode. Auparavant, lorsque l’une des méthodes d’expédition sélectionnées contenait un trait de soulignement, ces codes opérateur/méthode ne correspondaient pas. [GitHub-36606](https://github.com/magento/magento2/issues/36606)

<!-- AC-2556 -->

* Le `setShippingAddressesOnCart` la mutation ne renvoie plus d’erreur lorsque la seconde valeur du tableau street est est nulle. Auparavant, cette exception était générée : `The address failed to save. Verify the address and try again`. [GitHub-35160](https://github.com/magento/magento2/issues/35160)

### Taxe

<!-- ACP2E-1527 -->

* Vous pouvez désormais modifier la valeur du Pays et de la région du taux d’imposition à partir de la page de modification de la règle sur les impôts comme prévu. Auparavant, les modifications effectuées à partir de cette page n’étaient pas enregistrées.

<!-- ACP2E-1143 -->

* Le montant de la taxe dans la zone d’estimation du panier est maintenant actualisé comme prévu lors de la mise à jour du mode de livraison. Auparavant, le taux de taxe n’était pas mis à jour après qu’un acheteur a changé de pays lors de l’extraction.

<!-- AC-8227 -->

* Le `tax class` La valeur des produits simples nouvellement créés est désormais définie sur la valeur du produit parent lors de la création de nouvelles variantes d’un produit configurable existant dans la portée Affichage de la boutique. Auparavant, cette valeur était définie sur &quot;none&quot;. Par conséquent, aucune taxe n’a été ajoutée à ces produits dans le panier et les clients ont été sous-taxés. [GitHub-37180](https://github.com/magento/magento2/issues/37180)

### Test

<!-- AC-7098 -->

* Problèmes de performance liés aux tableaux volumineux dans `TableNameSniff` ont été résolus.

<!-- ACP2E-1748 -->

* `CollectionTest::testGetDateRangeFirstPart()` prend désormais en compte l’heure d’été.


### Interface utilisateur

<!-- ACP2E-171 -->

* Le formulaire d’enregistrement du client se charge désormais comme prévu lorsqu’il comprend des attributs de client à sélection multiple. Auparavant, Magento Open Source lançait cette exception : `[2023-03-05T05:57:40.032602+00:00] report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- ACP2E-1602 -->

* Les messages de bienvenue contenant des guillemets simples sont désormais rendus correctement sur le storefront sans erreur de console. Auparavant, si un message de bienvenue contenait un guillemet simple, le message de bienvenue n’était pas chargé lors du rendu du storefront. Magento Open Source affichait également des erreurs de console.

<!-- ACP2E-1369 -->

* Magento Open Source ne renvoie plus d’erreur lorsque vous essayez de modifier rapidement l’affichage entre l’historique des commentaires et le rapport dans la page Ordre d’administration. Auparavant, Magento Open Source affichait cette erreur générique : `A technical problem with the server created an error`.

<!-- ACP2E-1374 -->

* Les utilisateurs administrateurs dont les privilèges sont limités à un site web peuvent désormais mettre à jour les attributs de produit spécifiques à un site web définis sur une `all stores view` portée.

<!-- ACP2E-1648 -->

* Le widget de loupe se charge désormais comme prévu sur la page du produit.

<!-- ACP2E-1216 -->

* Les options personnalisables multi-lignes sont désormais rendues correctement dans les documents de PDF de facture, d’envoi et de note de crédit. Auparavant, le texte multiligne était précédé d’un saut de page inattendu. Si le texte dépassait la page, il était tronqué.

<!-- AC-7402 -->

* Les utilisateurs administrateurs peuvent désormais ajouter une nouvelle adresse client à partir de l’administrateur lorsqu’un client a été créé pour un autre site web dont l’ID de boutique ne correspond pas à l’ID du site web. Auparavant, Magento Open Source affichait ce message contextuel : `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- ACP2E-1529 -->

* Les détails de l’administrateur de la société sont désormais enregistrés comme prévu et les administrateurs sont correctement redirigés, lorsque les e-mails d’administrateur de la société Assign Company contiennent une `CMS Block URL` .

<!-- ACP2E-1775 -->

* Les messages d’erreur associés à l’envoi de commentaires sur la page des détails de la commande sont désormais plus informatifs. Auparavant, lorsqu’un acheteur cliquait sur **[!UICONTROL Submit comment]** sans modifier l’état de l’ordre ni saisir du texte dans la zone de commentaire, Magento Open Source a affiché ce message : `The comment is missing. Enter and try again`.

<!-- ACP2E-1659 -->

* L’icône Calendrier s’affiche désormais comme prévu dans les champs de la période sur l’Admin. **[!UICONTROL Marketing]** > **[!UICONTROL Cart Price Rules]** une fois qu’une date est sélectionnée pour un champ. Auparavant, après avoir sélectionné une date pour un champ, l’icône Calendrier ne s’affichait plus dans les autres champs et le Magento Open Source affichait le texte d’espace réservé. [GitHub-36499](https://github.com/magento/magento2/issues/36499)

<!-- ACP2E-1717 -->

* Les formulaires d’enregistrement de client qui incluent des champs à sélection multiple se chargent désormais correctement. Auparavant, ce formulaire ne se chargeait pas lorsqu’il contenait des champs à sélection multiple et l’erreur suivante était déclenchée :  `report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- AC-7092 -->

* Cliquer sur une miniature vidéo en mode Plein écran de la galerie de produits affiche désormais la vidéo comme prévu. Auparavant, la vidéo n’était pas affichée et la console du navigateur affichait une erreur JavaScript. [GitHub-36456](https://github.com/magento/magento2/issues/36456)

<!-- AC-7806 -->

* Ajout d’une variable à la ligne de copyright automatiquement mise à jour chaque année. [GitHub-36776](https://github.com/magento/magento2/issues/36776)

<!-- AC-8441 -->

* Le curseur de l’image sur la page du produit fonctionne désormais comme prévu dans la vue mobile. Auparavant, seule la première image s’affichait correctement. [GitHub-37232](https://github.com/magento/magento2/issues/37232)

### URL rewrites

<!-- ACP2E-1737 -->

* Les réécritures d’URL de catégorie sont désormais générées pour toutes les vues de magasin lorsqu’une nouvelle catégorie est importée à partir d’un fichier CSV.

<!-- ACP2E-1700 -->

* Les configurations de suffixe d’URL de produit et de suffixe d’URL de catégorie correspondent désormais aux suffixes dans la variable `url_rewrite` table. Auparavant, les conditions de concurrence lors de la mise à jour des configurations de suffixes d’URL se produisaient, ainsi que les suffixes d’URL configurés et la variable `url_rewrite` ne correspondait pas.

<!-- ACP2E-1703 -->

* Magento Open Source effectue désormais le rendu de l’arborescence des catégories à tous les niveaux lors de la création de réécritures d’URL de catégorie. Auparavant, seuls les trois premiers niveaux des catégories s’affichaient. [GitHub-36973](https://github.com/magento/magento2/issues/36973)

<!-- ACP2E-1737 -->

* Les réécritures d’URL de catégorie sont désormais présentes dans le fichier CSV lors de l’importation d’une nouvelle catégorie.

<!-- ACP2E-1668 -->

* Les pages CMS multi-magasins sans réécriture d’URL sont désormais transférées comme prévu. Auparavant, les pages CMS multi-magasin demandées sans réécriture d’URL étaient redirigées vers la page d’accueil du magasin, mais les pages CMS d’origine n’étaient pas redirigées.

### Structure d’API web

<!-- ACP2E-1543 -->

* Les clients créés à l’aide de l’API en bloc reçoivent désormais des courriers électroniques d’enregistrement des clients dans la langue configurée sur le site web qui leur est assigné.  Auparavant, tous les emails étaient envoyés aux paramètres régionaux par défaut, et non aux paramètres régionaux du site web auquel le client est affecté.

<!-- ACP2E-1339 AC-7577-->

* Le `POST V1/guest-carts` n’envoie plus de commandes d’invité lorsque **[!UICONTROL Allow Guest Checkout]** est désactivée.


<!-- ACP2E-1526 -->

* Le Magento Open Source renvoie désormais avec succès la variable `content` (code image base64) dans `GET V1/products/sku/media` réponses de l’API de média de produit. Le `content` n’apparaissait pas auparavant dans la réponse.

## Problèmes connus

Les problèmes connus suivants seront corrigés dans Magento Open Source 2.4.7-beta2 :

**Problème**: L’API XML UPS a été abandonnée par UPS le 5 juin 2023, ce qui affecte les commerçants de différentes façons :

* Les clients actuels (c’est-à-dire les commerçants qui ont déjà généré leurs clés d’accès UPS) ne seront pas affectés avant juin 2024.

* Les commerçants qui souhaitent générer de nouvelles clés d’accès pour utiliser l’intégration UPS prête à l’emploi d’Adobe Commerce ne peuvent actuellement pas générer de nouvelles clés.

**Problème**: Cliquez sur le bouton **[!UICONTROL Show password]** sur la page de connexion storefront , le mot de passe n’est pas affiché comme prévu.  <!-- AC-8823 -->

**Problème**: Les prix des produits en regroupement fixe ne comprennent pas les prix spéciaux attribués comme prévu. <!-- ACP2E-2034 -->

## Configuration requise

Notre pile de technologie est basée sur PHP et MySQL. Pour plus d’informations, voir [Configuration requise](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## Instructions d’installation et de mise à niveau

Vous pouvez installer Magento Open Source 2.4.7-beta1 à l’aide de [Compositeur](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html).
