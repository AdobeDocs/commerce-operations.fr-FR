---
title: Notes de mise à jour Magento Open Source 2.4.7
description: Découvrez les nouvelles fonctionnalités, les améliorations, les correctifs et les problèmes connus de la version 2.4.7 de Magento Open Source.
recommendations: noCatalog
exl-id: 0145380a-8b4b-4757-a5fe-d98713f0df62
source-git-commit: 16feb8ec7ecc88a6ef03a769d45b1a3a2fe88d97
workflow-type: tm+mt
source-wordcount: '16977'
ht-degree: 0%

---


# Notes de mise à jour de Magento Open Source 2.4.7

Magento Open Source 2.4.7 introduit le support de PHP 8.3. Il comprend des centaines de correctifs et d’améliorations de qualité. Les dépendances du compositeur principal et les bibliothèques tierces ont été mises à niveau vers les dernières versions disponibles. Cette version augmente la couverture GraphQL pour les attributs personnalisés et les caches de résolution GraphQL. Elle introduit également la prise en charge des services FedEx et UPS récemment mis à jour.

{{bics}}

## Autres informations sur les versions

Bien que le code de ces fonctionnalités soit fourni avec les versions du code de base Magento Open Source, plusieurs de ces projets sont également publiés indépendamment. Les correctifs de bogues pour ces projets sont documentés dans les informations de version distinctes spécifiques au projet qui sont disponibles dans la documentation de chaque projet.

## Magento Open Source 2.4.7 Faits saillants

Recherchez les points forts suivants dans cette version.

### Améliorations de la sécurité

Cette version comprend les mêmes correctifs de sécurité et améliorations de la sécurité de la plateforme que ceux inclus dans Adobe Commerce 2.4.6-p5, 2.4.5-p7 et 2.4.4-p8. Consultez le [Bulletin de sécurité d’Adobe](https://helpx.adobe.com/fr/security/products/magento/apsb24-18.html) pour connaître la dernière discussion sur ces problèmes résolus.

Aucune attaque confirmée liée à ces problèmes ne s’est produite à ce jour. Cependant, certaines vulnérabilités peuvent potentiellement être exploitées pour accéder aux informations sur les clients ou prendre le contrôle de sessions d’administration. La plupart de ces problèmes nécessitent qu’un attaquant obtienne d’abord l’accès à l’administrateur. Par conséquent, nous vous rappelons de prendre toutes les mesures nécessaires pour protéger votre administrateur, y compris, mais sans s’y limiter, ces efforts :

* Liste d’adresses IP autorisées
* [authentification à deux facteurs](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
* utilisation d’un VPN
* utilisation d’un emplacement unique plutôt que `/admin`
* bonne hygiène des mots de passe

#### Améliorations de la sécurité supplémentaires

Les améliorations apportées à la sécurité dans cette version améliorent la conformité aux dernières bonnes pratiques de sécurité.

* **Modifications du comportement des clés** de cache non générées :

   * Les clés de cache non générées pour les blocs incluent désormais des préfixes différents des préfixes pour les clés générées automatiquement. (Les clés de cache non générées sont des clés qui sont définies via la syntaxe de la directive de modèle ou les `setCacheKey` méthodes OU `setData` .)
   * Les clés de cache non générées pour les blocs ne doivent désormais contenir que des lettres, des chiffres, des traits d’union (-) et des traits de soulignement (_). <!-- AC-9831 -->

* **Limitations du nombre de codes** de coupon générés automatiquement. Magento Open Source limite désormais le nombre de codes promo générés automatiquement. La valeur maximale par défaut est de 250 000. Les commerçants peuvent utiliser la nouvelle **[!UICONTROL Code Quantity Limit]** option de configuration (**[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL Customers]** > **[!UICONTROL Promotions]**) pour éviter de surcharger potentiellement le système avec de nombreux coupons. <!-- AC-8753 -->

* **Optimisation du processus de génération d’URL d’administration par défaut**. La génération de l’URL d’administration par défaut a été optimisée pour une plus grande randomisation, ce qui rend les URL générées moins prévisibles. <!-- AC-9028 -->

* Un nouveau paramètre de configuration du cache de pages entières peut contribuer à atténuer les risques associés au point d’entrée HTTP `{BASE-URL}/page_cache/block/esi`. Ce point d’entrée prend en charge des fragments de contenu chargés dynamiquement et sans restriction à partir des poignées de disposition et des structures de bloc Commerce. Le nouveau paramètre de configuration de **[!UICONTROL Handles params size]** définit la valeur du paramètre `handles` de ce point d’entrée, qui détermine le nombre maximal autorisé de descripteurs par API. La valeur par défaut de cette propriété est 100. Les commerçants peuvent modifier cette valeur à partir de Admin (**[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL System]** > **[!UICONTROL Full Page Cache]** > **[!UICONTROL Handles params size]**). Voir [Configuration de l’application Commerce pour utiliser Varnish](https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cache/configure-varnish-commerce.html?lang=fr). <!-- AC-9113 -->

* **Ajout de la prise en charge de l’intégrité des sous-ressources (SRI)** pour se conformer aux exigences PCI 4.0 pour la vérification de l’intégrité des scripts sur les pages de paiement. La prise en charge de l’intégrité des sous-ressources (SRI) fournit des hachages d’intégrité pour toutes les ressources JavaScript résidant dans le système de fichiers local. La fonction SRI par défaut est implémentée uniquement sur les pages de paiement pour les zones Admin et Storefront. Cependant, les commerçants peuvent étendre la configuration par défaut à d’autres pages. Voir [Intégrité des sous-ressources](https://developer.adobe.com/commerce/php/development/security/subresource-integrity/) dans le _Guide du développeur de Commerce PHP_.<!--AC-11513-->

* **Modifications apportées à la politique de sécurité du contenu (CSP)** : mises à jour et améliorations de la configuration des politiques de sécurité du contenu (CSP) d’Adobe Commerce pour se conformer aux exigences PCI 4.0. Pour plus de détails, consultez [Politiques de sécurité du contenu](https://developer.adobe.com/commerce/php/development/security/content-security-policies/) dans le _Guide du développeur de Commerce PHP_. <!--AC-11512-->

   * La configuration CSP par défaut pour les pages de paiement des zones Commerce Admin et Storefront est désormais en mode `restrict`. Pour toutes les autres pages, la configuration par défaut est le mode `report-only`.  Dans les versions antérieures à la version 2.4.7, CSP était configuré en mode `report-only` pour toutes les pages.

   * Ajout d’un fournisseur à usage unique pour permettre l’exécution de scripts intégrés dans une CSP. Le fournisseur de valeur à usage unique facilite la génération de chaînes à usage unique pour chaque requête. Les chaînes sont ensuite associées à l’en-tête CSP.

   * Ajout d’options permettant de configurer des URI personnalisés pour signaler des violations de CSP pour la page Créer une commande dans l’administration et la page Passage en caisse dans le storefront. Vous pouvez ajouter la configuration à partir de l’administration ou en ajoutant l’URI au fichier `config.xml`.

     >[!NOTE]
     >
     >La mise à jour de la configuration du CSP en mode `restrict` peut bloquer les scripts intégrés existants sur les pages de paiement dans Admin et Storefront, ce qui entraîne l’erreur de navigateur suivante lorsqu’une page se charge : `Refused to execute inline script because it violates the following Content Security Policy directive: "script-src`. Corrigez ces erreurs en mettant à jour la configuration de la liste autorisée pour autoriser les scripts requis. Voir [Dépannage](https://developer.adobe.com/commerce/php/development/security/content-security-policies/#troubleshooting) dans le _Guide du développeur de Commerce PHP_.

* **Limitation de taux native pour les informations de paiement transmises via les API REST et GraphQL**. Les commerçants peuvent désormais [configurer la limitation de taux](https://experienceleague.adobe.com/fr/docs/commerce-admin/config/sales/sales#rate-limiting) pour les informations de paiement transmises à l’aide de REST et de GraphQL. Cette couche de protection supplémentaire permet de prévenir les attaques par carte et de réduire potentiellement le volume d’attaques par carte qui testent plusieurs numéros de carte de crédit à la fois. Il s’agit d’une modification du comportement par défaut d’un point d’entrée REST existant. Voir [Limitation de débit](https://developer.adobe.com/commerce/webapi/get-started/rate-limiting/).

* Le comportement par défaut de la requête GraphQL [isEmailAvailable](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/queries/is-email-available/) et du point d’entrée REST ([V1/customers/isEmailAvailable](https://adobe-commerce.redoc.ly/2.4.7-admin/tag/customersisEmailAvailable/#operation/PostV1CustomersIsEmailAvailable)) a changé. Par défaut, les API renvoient désormais toujours des `true`. Les commerçants peuvent activer le comportement d’origine en définissant l’option *[Activer la connexion au passage en caisse des invités](https://experienceleague.adobe.com/fr/docs/commerce-admin/config/sales/checkout)* dans l’interface d’administration sur `yes`, mais cela peut exposer les informations du client à des utilisateurs non authentifiés.

### Améliorations de Platform

Les mises à niveau de Platform pour cette version améliorent la conformité aux dernières bonnes pratiques de sécurité.

Magento Open Source 2.4.7 comprend les mises à niveau de plateforme suivantes :

* **Compatibilité PHP 8.3**. Cette version introduit la prise en charge de PHP 8.3. Magento Open Source prend désormais en charge PHP 8.3 et 8.2. PHP 8.2 sera pris en charge jusqu’à sa date de fin de service (EOS) en décembre 2025. Après décembre 2025, tous les commerçants exécutant des déploiements 2.4.7 doivent migrer vers PHP 8.3. <!-- AC-8988 -->

Magento Open Source 2.4.7 est toujours compatible avec PHP 8.1, uniquement pour la mise à niveau. PHP 8.1 n&#39;est pas pris en charge et n&#39;est pas recommandé. Magento Open Source code de base 2.4.7, toutes les extensions groupées et toutes les extensions et services SaaS appartenant à Adobe sont compatibles avec PHP 8.3. <!-- AC-9668 -->

* **Prise en charge de RabbitMQ 3.13**. Cette version est compatible avec la dernière version de RabbitMQ 3.13. La compatibilité reste avec RabbitMQ 3.11 et 3.12, qui est pris en charge respectivement jusqu’en août 2024 et décembre 2024, mais Adobe a recommandé d’utiliser Magento Open Source 2.4.7 uniquement avec RabbitMQ 3.13. <!-- AC-9659 -->

* **Composer 2.7.x**. La compatibilité avec Composer 2.2.x reste. <!-- AC-9663 -->

* **Prise en charge du cache de vernis 7.4**. Cette version est compatible avec la dernière version de Varnish Cache 7.4. La compatibilité reste avec les versions 6.0.x et 7.2.x, mais nous avons recommandé d’utiliser Magento Open Source 2.4.7 uniquement avec Varnish Cache version 7.4 ou version 6.0 LTS. <!-- AC-9662 -->

* &#x200B;<!-- AC-9661 --> de compatibilité **Elasticsearch 8.11**

* &#x200B;<!-- AC-9659 --> de prise en charge d’OpenSearch 2.12 et d’OpenSearch 1.3

* **Redis 7.2** <!-- AC-10811 -->

* La `extjs` bibliothèque a été remplacée par la dernière version de `jsTree`. <!-- AC-9320 -->

* `jquery/fileUpload` La bibliothèque a été supprimée. <!-- AC-10569 -->

Toutes les bibliothèques JavaScript et les dépendances NPM dans le code principal Magento Open Source ont été mises à jour vers les dernières versions disponibles. Toutes les dépendances de la bibliothèque Laminas ont été mises à jour vers la dernière version compatible avec PHP 8.3. <!-- AC-9667 9665 -->

#### Mises à niveau supplémentaires

* La passerelle API XML de Commerce UPS a été migrée vers la nouvelle [API](https://experienceleague.adobe.com/fr/docs/commerce-admin/stores-sales/delivery/shipping-carriers/ups) REST Commerce UPS pour prendre en charge les mises à jour apportées par UPS à son [modèle](https://developer.ups.com/oauth-developer-guide) de sécurité d’API. (UPS met en œuvre un modèle de sécurité OAuth 2.0 (bearer tokens) pour toutes les API.) Toutes les API XML UPS Commerce précédentes ont été supprimées de la base de code Magento Open Source 2.4.7. <!-- AC-8918 -->

* L’intégration[&#128279;](https://experienceleague.adobe.com/fr/docs/commerce-admin/stores-sales/delivery/shipping-carriers/fedex) Magento Open Source avec FedEx a été migrée des anciens services Web FedEx WSDL vers les dernières API FedEx RESTful. Les services Web FedEx pour le suivi, la validation des adresses et la validation des codes postaux WSDLS seront retirés en mai 2024. <!-- AC-1470 -->

* Ajout de la prise en charge de la nouvelle méthode d&#39;expédition USPS Ground Advantage. Il s&#39;agit d&#39;une intégration prête à l&#39;emploi avec la nouvelle méthode d&#39;expédition d&#39;USPS, USPS Ground Advantage, publiée en juillet 2023. Cette nouvelle intégration peut être utilisée pour récupérer les tarifs d&#39;expédition et planifier les livraisons et les retours via le service d&#39;expédition USPS. La méthode d&#39;expédition USPS Ground Advantage remplace ces méthodes d&#39;expédition, qui ont été abandonnées lorsque la méthode d&#39;expédition USPS Ground Advantage a été lancée :

   * USPS Retail Ground
   * Service De Package De Première Classe
   * Sélection de parcelle <!-- AC-9182 --> sol

* Les modules d’expédition Temando ont été supprimés de la base de code Magento Open Source principale. Cette fonctionnalité a été abandonnée dans Magento Open Source 2.4.4. <!-- AC-8130 -->

### Améliorations des performances et de l’évolutivité

Magento Open Source 2.4.7 comporte les améliorations suivantes en termes de performances et d’évolutivité de Magento Open Source :

* **Gestion améliorée de l’indexeur**. La nouvelle commande `indexer:set-status` prend en charge la gestion dynamique du statut de l’indexeur. Les utilisateurs administrateurs peuvent utiliser cette commande pour modifier le statut de l’indexeur en `suspended`, `invalid` ou `valid`. Cette fonctionnalité est particulièrement utile pour gérer les performances du système lors d’opérations en bloc importantes, telles que des importations ou des mises à jour de produits, en permettant de contrôler le moment où les indexeurs sont automatiquement déclenchés par les tâches cron du système. Voir [Gestion des indexeurs](https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cli/manage-indexers.html?lang=fr).

* **Page de liste de produits pour les produits complexes avec de nombreuses options**. Le temps de chargement s’est amélioré pour les pages de liste de produits qui incluent des produits complexes avec plus de 100 options. Les performances des requêtes GraphQL pour répertorier les produits par catégorie ont également été améliorées. <!-- ACPT-1683 -->

* **Amélioration des performances des règles de** vente. Amélioration des performances des déploiements d’entreprise avec un grand nombre (environ 100 000) règles de vente actives. Les déploiements d’entreprise qui implémentent fortement les promotions déploient souvent de nombreuses règles de panier actives. Ces types de déploiements d’entreprise exécutant Magento Open Source 2.4.7 ne verront aucune dégradation des performances liée au nombre de règles de prix de panier configurées pendant les opérations de paiement. <!-- ACPT-1198 -->

* **Opérations de sauvegarde plus rapides des configurations au niveau du magasin pour les déploiements avec de nombreux magasins**. L’enregistrement des paramètres de configuration dans les déploiements de plus de 500 magasins peut prendre beaucoup de temps. Le nouveau [module de configuration](../../../performance/configuration.md#asynchronous-configuration-save) asynchrone permet des opérations d’enregistrement de configuration asynchrone en exécutant une tâche cron qui utilise un consommateur pour traiter l’opération d’enregistrement dans une file d’attente de messages. AsyncConfig est désactivé par défaut.

* **Génération plus rapide du cache de configuration pour les configurations volumineuses**. La `bin/magento cache:clean config` commande préchauffe désormais le cache de configuration lorsque le cache de configuration est activé. Cela réduit le temps d’arrêt requis pour générer le cache de configuration pour les configurations volumineuses. Les opérations d’enregistrement de configuration ne nettoient plus le cache avant d’écrire `config_scopes` des données dans le cache, ce qui réduit également le temps pendant que d’autres demandes sont verrouillées pendant l’écriture des données de configuration.

### Braintree

* **[!DNL Vaulted PayPal]et [!DNL Pay Later] modifications** : les clients connectés qui ont précédemment stocké/stocké leur compte PayPal ont la possibilité de payer avec :
   * [!DNL Pay Now] (sans avoir à se connecter à son [!DNL PayPal] compte, l’utilisateur peut payer avec sa carte par défaut)
   * Payer avec une autre source d’approvisionnement
   * Payer avec un compte différent
   * Bouton [!DNL PayPal Pay Later] ou [!DNL PayPal Credit]

* Prise en charge de **3DS pour[!DNL Google Pay]** : prise en charge de la vérification 3DS pour les cartes [!DNL Google Pay] non segmentées en unités lexicales. Pour plus d’informations[&#128279;](https://developer.paypal.com/braintree/docs/guides/3d-secure/client-side/android/v3#using-3d-secure-with-google-pay) consultez la documentation de Braintree .

* **[!DNL Vault Apple Pay Payments]**: autorisez les clients connectés à enregistrer/stocker leurs [!DNL Apple Pay] paiements sur leur compte Boutique Commerce afin de les utiliser lors de transactions futures. Cela réduit le nombre d’étapes à la caisse et crée une expérience de paiement plus rapide pour le client de retour.

* **[!DNL Vault Google Pay Payments]**: autorisez les clients connectés à enregistrer/stocker leurs [!DNL Google Pay] paiements sur leur compte Boutique Commerce afin de les utiliser lors de transactions futures. Cela réduit le nombre d’étapes à la caisse et crée une expérience de paiement plus rapide pour le client de retour.

* **[!DNL Vault Venmo Payments]**: autorisez les clients connectés à sauvegarder/stocker leurs [!DNL Venmo] comptes sur leur compte Boutique Commerce pour les utiliser lors de transactions futures. Cela réduit le nombre d’étapes à la caisse et crée une expérience de paiement plus rapide pour le client de retour.

* **[!DNL Vault ACH Payments]**: autorisez les clients connectés à sauvegarder/stocker leurs paiements ACH sur leur compte Boutique Commerce afin de les utiliser lors de transactions futures. Cela réduit le nombre d’étapes à la caisse et crée une expérience de paiement plus rapide pour le client de retour.

* **[!UICONTROL Express Payment]Boutons en haut du passage** en caisse : pour encourager un passage en caisse plus rapide, nous avons introduit [!DNL Express Payment] des options au début du passage en caisse. Les clients peuvent désormais payer par [!DNL PayPal], [!DNL PayPal Pay Later], [!DNL Apple Pay]et [!DNL Google Pay Express] les paiements.

* **[!DNL Braintree]les notes de mise à jour et les liens d’assistance dans la configuration d’administration** les commerçants peuvent désormais accéder directement à l’assistance et aux notes de mise à jour de Braintree à partir de Commerce Admin.

* **Prise en charge de GraphQL pour tous les modes de paiement [!DNL Braintree] à l’exception de[!DNL Venmo]** : d’autres configurations sont exposées dans l’API GraphQL. Cela s’avère particulièrement utile pour les applications découplées.

* **[!DNL Vaulting]les paiements dans la zone de compte**—Les clients connectés peuvent désormais [coffre/magasin](https://experienceleague.adobe.com/fr/docs/commerce-admin/stores-sales/payments/braintree#step-3-complete-the-advanced-settings) de nouvelles cartes de crédit/débit et de nouveaux comptes [!DNL PayPal] dans la zone de compte client. Auparavant, les clients ne pouvaient mettre leurs paiements en chambre forte que lorsqu’ils les enregistraient pour une utilisation ultérieure lors de l’exécution d’une transaction lors du passage en caisse. Désormais, ils peuvent mettre en chambre forte les nouvelles cartes de crédit/débit et les nouveaux comptes PayPal sans avoir à créer de nouvelle transaction.

* **Transactions sans frottement** : les transactions sans frottement accélèrent le processus de paiement en réduisant le nombre de clics/étapes des clients pour effectuer une transaction par carte de crédit/débit en ligne. Auparavant (lorsque la 3DS était activée), chaque client était confronté à un défi 3DS. Grâce à la nouvelle fonctionnalité Transactions sans friction, les clients ne sont sollicités pour la 3DS que lorsque la banque le demande. Cela réduit les abandons de panier, augmente les taux de conversion et conduit à plus de ventes.

* **Webhooks de** litige : lorsqu’un client conteste une transaction dans Braintree, l’état du litige est désormais transmis au service Commerce. Il est consultable dans la grille de **[!UICONTROL Sales]** > **[!UICONTROL Order]** et attaché à chaque commande.

### GrapheQL

Magento Open Source 2.4.7 inclut des capacités de mise en cache GraphQL améliorées, la prise en charge du schéma GraphQL pour les attributs personnalisés, la prise en charge de l’annulation de commande sans tête et une mise en cache améliorée du résolveur.

* **Gestion** des paniers plus flexible. La `clearCart` mutation efface désormais le contenu d’un panier spécifié en une seule action. Elle remplace la `clearCustomerCart` mutation, qui a été abandonnée. <!-- LYNX-254 -->

* **Améliorations apportées à la création de mutations de panier**. La mutation `createGuestCart` a été ajoutée pour remplacer la mutation `createEmptyCart` obsolète. Auparavant, si vous utilisiez `createEmptyCart`, vous ne pouviez pas déterminer si le panier était pour un invité ou un client connecté. <!-- LYNX-224 -->

* **Les éléments de commande incluent désormais des images de produit**. `OrderItemInterface` expose les images des produits, ce qui permet de les associer aux produits commandés et de les charger plus efficacement. [GitHub-32369](https://github.com/magento/magento2/issues/32369) <!-- AC-7918 -->

* **Prise en charge étendue de la mise en cache du résolveur**. Les résolveurs de requêtes GraphQL suivants peuvent désormais être mis en cache dans le cache GraphQL Resolver Results, ce qui améliore les performances lorsque des requêtes sont soumises avec des requêtes POST :

   * `Magento\CustomerGraphQl\Model\Resolver\Customer::resolve`
   * `Magento\CustomerGraphQl\Model\Resolver\CustomerAddress::resolve`
   * `Magento\CustomerGraphQl\Model\Resolver\IsSubscribed::resolve` <!-- B2B-2658 -->
   * `Magento\CatalogGraphQl\Model\Resolver\Product\MediaGallery::resolve` <!-- B2B-2677 -->

* **Prise en charge de l’annulation** de commande. La [mutation cancelOrder](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/cancel-order/) permet à un client d’annuler une commande, en passant son identifiant et un motif d’annulation. <!-- LYNX-197 -->

   * Les champs Nouveau `order_cancellation_enabled` champ et `order_cancellation_reasons.description` champ de réponse dans `storeConfig`
Prise en charge des requêtes Demandes d’annulation de commande initiées par l’utilisateur. Voir [Requête sur la configuration d’annulation de commande d’une boutique](https://developer-stage.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/#query-a-stores-order-cancellation-configuration)

* **Amélioration de la prise en charge des attributs personnalisés**. La prise en charge des attributs personnalisés GraphQL a été améliorée en enrichissant les données API pour prendre en charge tous les types d’attributs. Le schéma Attributs EAV GraphQL prend désormais en charge l’extension des attributs du client et des objets d’adresse du client dans l’administration et leur récupération à l’aide de GraphQL. Les domaines spécifiques d&#39;amélioration comprennent : <!-- LYNX-61 110-->

   * extension/ajout de la prise en charge des attributs personnalisés à des zones spécifiques telles que l’adresse du client
   * ajout de la mise en cache pour les attributs personnalisés
   * prise en charge améliorée des attributs personnalisés existants pour les produits

* **Les fonctionnalités de mise en cache GraphQL améliorées améliorent la vitesse de chargement des pages**. La fonctionnalité de mise en cache a été ajoutée à ces requêtes, améliorant ainsi la vitesse de chargement des pages pour la plupart des pages PWA :

   * [Magasins disponibles](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/)
   * [ pays ](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/countries/) et [ pays ](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/country/)
   * [Configuration de la boutique](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/)
   * [devise](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/currency/)
   * [customAttributeMetadata](https://developer.adobe.com/commerce/webapi/graphql-api/index.html#query-customAttributeMetadata)

* **Amélioration des performances de l’analyseur GraphQL**. Les performances de l’analyseur GraphQL ont été améliorées en réduisant le nombre d’appels de la méthode d’analyse par requête. Il est maintenant appelé une fois. Auparavant, l’analyseur était appelé au moins trois fois.

#### Nouveaux champs pour les mutations existantes

* Ajout du champ `quickorder_active` aux requêtes [storeConfig](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) et [availableStores](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/). Ce champ indique si la fonction de commande rapide est activée.

* Ajout des champs suivants aux mutations `setBillingAddressOnCart` et `setShippingAddressesOnCart` :

   * `fax`
   * `middlename`
   * `prefix`
   * `suffix`

#### Nouvelles requêtes et mutations

* [`attributeForms`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-form/) requête<!-- LYNX-151 -->
* [`attributesList`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-list/) requête<!-- LYNX-150 -->
* requête [`guestOrder`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/queries/guest-order/)
* requête [`guestOrderByToken`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/queries/guest-order-by-token/)
* requête [`recaptchaFormConfig`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/recaptcha-form-config/)
* [`cancelOrder`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/cancel-order/) mutation<!-- LYNX-172 -->
* requête [`customAttributeMetadataV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata-v2/)
* mutation [`applyCouponsToCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/apply-coupons/)
* mutation [`confirmEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/confirm-email/)
* mutation [`createGuestCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/create-guest-cart/)
* mutation [`estimateShippingMethods`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/estimate-shipping-methods/)
* mutation [`estimateTotals`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/estimate-totals/)
* mutation [`removeCouponsFromCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/remove-coupons/)

#### Requêtes et mutations obsolètes

* `clearCustomerCart` mutation<!-- LYNX-254 -->
* [`createEmptyCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/create-empty-cart/) mutation<!-- LYNX-224 -->
* requête [`attributesMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-metadata/)
* requête [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata/)

### Inventory management

Inventory management (v1.2.7) fournit des outils de gestion de l’inventaire des produits. Cette fonctionnalité développée par la communauté est fournie avec le code principal Adobe Commerce et Magento Open Source.

### Métapaquet d’extension Magento Open Source

Cette version comprend le métapaquet Extension de Magento Open Source v1.0.0, qui regroupe automatiquement certaines extensions de Magento Open Source avec cette version principale. La version de cette extension incluse dans ce métapaquet est installée lorsque `composer update` est exécuté, ce qui simplifie le processus de mise à niveau de l’extension lors de la mise à niveau vers la dernière version de base. Cette extension conserve un planning de publication indépendant.

Le métapaquet Extension de Magento Open Source pour Magento Open Source 2.4.7 comprend les extensions suivantes :

* [Intégration d’Adobe Commerce à Adobe IMS](https://experienceleague.adobe.com/docs/commerce-admin/start/admin/ims/adobe-ims-integration-overview.html?lang=fr)
* [Braintree](https://experienceleague.adobe.com/docs/commerce-admin/stores-sales/payments/braintree.html?lang=fr)
* [ Services de paiement ](https://experienceleague.adobe.com/docs/commerce/payment-services/guide-overview.html?lang=fr)

Les futures versions de ce métapaquet d’extension contiendront des extensions supplémentaires.

### PWA Studio

PWA Studio v14.0 est compatible avec Magento Open Source 2.4.7-beta1. Il comprend plusieurs améliorations pour améliorer l’accessibilité. Pour plus d’informations sur les correctifs, voir [Versions de PWA Studio](https://github.com/magento/pwa-studio/releases). Consultez [Compatibilité des versions](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) pour obtenir la liste des versions de PWA Studio et de leurs versions principales de Magento Open Source compatibles.

### Framework d’API web

Cette version introduit deux nouveaux points d’entrée REST qui offrent une solution pour une limitation de l’`GET` de l’API REST et des points d’entrée `POST V1/products/attributes`. Ces points d’entrée renvoient la même valeur pour l’attribut `is_filterable` pour les options `Filterable(with results)` et `Filterable(no results)` de l’option **[!UICONTROL Use in Layered Navigation]**. (La propriété d’attribut `is_filterable` est de type `Boolean`, ce qui n’autorise pas la définition de cette propriété sur `Filterable(no results)`.)

Deux nouveaux points d’entrée REST ont été implémentés comme solution :

* `PUT /V1/products/attributes/{attributeCode}/is-filterable/{isFilterable}`. Paramètres de chemin : `attributeCode` (`String`) et `isFilterable` (`int` les valeurs sont : 0 est No ; 1 est `Filterable (with results)`; 2 est `Filterable (no results)`).
* `GET /V1/products/attributes/{attributeCode}/is-filterable`. Paramètres de chemin : `attributeCode` (`String`).<!-- ACP2E-2275 -->

## Problèmes résolus

Nous avons corrigé des centaines de problèmes dans le code de base Magento Open Source 2.4.7. Un sous-ensemble des problèmes résolus inclus dans cette version est décrit ci-dessous.

### Installation, mise à niveau, déploiement

<!-- AC-10396 -->

* Les manipulations inutiles du cache ont été supprimées du processus de configuration. Auparavant, Magento Open Source écrivait inutilement sa configuration sur le disque lorsqu’elle `bin/magento setup:db-data:upgrade` était exécutée, ce `bin/magento setup:upgrade` qui causait des problèmes avec les modules som lors de l’installation. [GitHub-38124](https://github.com/magento/magento2/issues/38124)

<!-- ACP2E-1675 -->

* Les problèmes de déploiement dus à une mémoire insuffisante et à des tables volumineuses ont été résolus. La `bin/magento setup:upgrade` commande n’échoue plus en raison d’erreurs de dépassement de mémoire liées aux tables MySQL volumineuses.

<!-- ACP2E-2198 -->

* `bin/magento setup:install` se termine maintenant correctement après `app/etc/config.php` a été supprimé. Auparavant, le fichier manquant n’était pas régénéré pendant l’installation et Magento Open Source générait une erreur. [GitHub-37805](https://github.com/magento/magento2/issues/37805)

<!-- AC-8381 -->

* `bin/magento setup:upgrade` a été restructuré pour s&#39;exécuter correctement lors de l&#39;installation d&#39;un nouveau module qui installe les tables et les indexeurs de `mview` associés. [GitHub-37304](https://github.com/magento/magento2/issues/37304)

<!-- ACP2E-1882 -->

* La restauration de la base de données n’échoue plus en raison d’une erreur de délimiteur. Auparavant, Magento Open Source générait cette erreur lors de l’exécution de `bin/magento setup:rollback --db` : `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1505 -->

* La commande `bin/magento setup:upgrade` n’échoue plus avec ce type d’erreur liée à la limite de mémoire MySQL : `PHP Fatal error: Allowed memory size of 4294967296 bytes exhausted (tried to allocate 20480 bytes)`. La migration d’attributs à sélection multiple a été optimisée pour consommer moins de mémoire pendant la `setup:upgrade`.

<!-- ACP2E-1751 -->

* La génération d’une sauvegarde de base de données fonctionne désormais comme prévu à partir d’Admin et de la ligne de commande. Auparavant, Magento Open Source générait cette erreur : `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1604 1605-->

* L’exécution de `setup:config:set` sans spécifier le paramètre `--lock-db-prefix` n’efface plus la valeur actuelle du fichier `env.php`.

<!-- ACP2E-1498 -->

* La configuration du vernis a été mise à jour afin d’empêcher les utilisateurs invités d’accéder au contenu mis en cache associé à d’autres groupes de clients.

<!-- https://github.com/magento/magento2/pull/33092 -->

* `bin/magento setup:upgrade` s’exécute maintenant correctement lors de l’installation d’un nouveau module qui installe les tables et les indexeurs de `mview` associés.

<!-- ENGCOM-9243 -->

* `bin/magento setup:upgrade` affiche désormais un message d’erreur plus informatif lorsqu’une rubrique de file d’attente de messages n’inclut pas de nom de rubrique. [GitHub-34246](https://github.com/magento/magento2/issues/34246)

<!-- https://github.com/magento/magento2/pull/36239 -->

* `bin/magento setup:upgrade` affiche désormais un message d’erreur plus informatif lorsque les fichiers XML fusionnés ne sont pas valides. Le message d’erreur comprend désormais le nom du fichier.

### Interface utilisateur d’administration

<!-- AC-10998 -->

* Les graphiques sont désormais désactivés par défaut sur le tableau de bord. [GitHub-38430](https://github.com/magento/magento2/issues/38430)

<!-- AC-9423 -->

* Le menu Admin Sales affiche maintenant correctement les sous-menus. Auparavant, le saut de colonne ne fonctionnait pas correctement et certains sous-menus n’étaient pas affichés. [GitHub-37812](https://github.com/magento/magento2/issues/37812)

<!-- AC-3122 -->

* **[!UICONTROL Select]** Les options du menu déroulant sont désormais visibles sur les > **[!UICONTROL Pages]** d’administration **[!UICONTROL Content]** lorsque plusieurs pages sont sélectionnées dans la grille. [GitHub-35386](https://github.com/magento/magento2/issues/35386)

<!-- AC-9209 -->

* Correction du chemin d’accès à la valeur par défaut dans les paramètres de `system/dashboard/enable_charts` configuration. Les graphiques sont maintenant affichés dans l’interface administrateur comme prévu. [GitHub-37668](https://github.com/magento/magento2/issues/37668)

<!-- AC-9632 -->

* Correction d’un problème d’affichage avec les grilles du client d’administration. Auparavant, les colonnes de la grille n’étaient pas entièrement contenues dans la page affichée.

<!-- AC-2916 -->

* Les couleurs de pointage sont maintenant appliquées, comme prévu, aux lignes des grilles statiques Admin. [GitHub-35358](https://github.com/magento/magento2/issues/35358)

<!-- AC-7551 -->

* Le workflow de passage en caisse n’affiche plus d’avertissement lorsqu’un acheteur saisit un code postal pour la Grèce qui ne contient pas d’espace vide. [GitHub-36676](https://github.com/magento/magento2/issues/36676)

<!-- AC-9357 -->

* Le lien Admin `It's time to change your password` redirige désormais vers la page Modifier le mot de passe administrateur comme prévu. [GitHub-37902](https://github.com/magento/magento2/issues/37902)

<!-- AC-9164 -->

* Les suffixes de titre de page sont désormais inclus dans la `title` balise et dans la balise pour les pages de `meta title` produits. [GitHub-37680](https://github.com/magento/magento2/issues/37680)

<!-- ACP2E-2023 -->

* La condition d’état des stocks de produits est désormais correctement appliquée aux règles de produits associés.

<!-- ACP2E-2083 -->

* Le **[!UICONTROL Login as Customer]** bouton s’affiche désormais correctement sur les appareils mobiles.

<!-- ACP2E-2146 -->

* Adobe Commerce n’affiche plus le bouton Admin **[!UICONTROL Add new customer group]** si l’utilisateur administrateur connecté n’est pas autorisé à ajouter un nouveau groupe de clients.

<!-- ACP2E-2286 -->

* Un utilisateur administrateur disposant d’autorisations restreintes peut désormais enregistrer un produit enfant dont le produit parent est affecté à une étendue différente. Auparavant, Commerce invalidait le cache d’un produit parent qui n’était pas affecté à l’étendue dans laquelle le produit enfant avait été modifié.

<!-- ACP2E-2042 -->

* Les utilisateurs administrateurs peuvent désormais basculer entre les vues de filtre d’administration sans que les données de vue ne soient corrompues ou perdues. [GitHub-37529](https://github.com/magento/magento2/issues/37529)

### Lots de produits

<!-- AC-8966 -->

* La requête `customerCart` renvoie désormais toutes les remises appliquées sur les produits groupés comme prévu. Auparavant, le total des remises appliquées à un produit groupé était renvoyé en tant que zéro.

<!-- ACP2E-2618 -->

* Les pages Détails du produit affichent désormais le prix correct pour les produits groupés pour lesquels une remise de 100 % a été appliquée. Auparavant, Magento Open Source n’appliquait pas de remise de 100 % aux prix des lots de produits.

<!-- ACP2E-2377 -->

* Les règles de prix de panier sont désormais appliquées aux offres groupées de produits au lieu de chaque produit enfant pour les produits groupés à prix dynamiques.

<!-- ACP2E-1650 -->

* Correction d’une erreur qui se produisait lorsque vous utilisiez le point d’entrée `POST V1/shipment` pour créer une expédition contenant un produit groupé. Le point d’entrée ajoute maintenant les éléments comme prévu et ne renvoie plus cette erreur : `The shipment couldn't be saved`.

<!-- ACP2E-1650 -->

* Vous pouvez désormais utiliser l’itinéraire `GET V1/shipment/` API pour créer un envoi avec un produit groupé lorsque le type d’envoi du produit est **[!UICONTROL together]** défini. Les produits groupés sont désormais également validés en fonction de leur propriété de type d’expédition.

<!-- ACP2E-2038 -->

* Les acheteurs peuvent désormais modifier la quantité d’un produit groupé dans leur panier de storefront. Auparavant, Adobe Commerce ne gérait pas les valeurs nulles pour les `ItemId` lorsque les produits étaient modifiés dans le panier du storefront et affichaient une erreur. [GitHub-37696](https://github.com/magento/magento2/issues/37696)

<!-- ACP2E-1801 -->

* Vous pouvez désormais ajouter des produits groupés à une commande d’administration à l’aide de SKU qui contiennent une barre oblique (`/`). Auparavant, les utilisateurs administrateurs ne pouvaient pas utiliser cette méthode pour ajouter des produits à une commande administrateur et Magento Open Source a généré une erreur JavaScript.

<!-- ACP2E-1799 -->

* Les utilisateurs administrateurs peuvent désormais définir des valeurs décimales par défaut pour les options de lot nouvellement ajoutées lorsque **[!UICONTROL Qty Uses Decimal]** est activé pour le produit simple correspondant. Auparavant, les valeurs décimales ne pouvaient être définies que pour les sélections enregistrées.

<!-- ACP2E-1347 -->

* Performances optimisées pour l’enregistrement des produits groupés avec un grand nombre d’options

<!-- ACP2E-1478 -->

* Les produits groupés sont désormais importés sans duplication des références SKU dans les options de produit. Auparavant, Magento Open Source créé plusieurs SKU en double dans les options de produit lorsque vous importiez des produits groupés avec des entrées en double.

<!-- ACP2E-1388 -->

* Le prix du bundle du produit est désormais correctement calculé lorsque l’un des produits du bundle est en rupture de stock. Auparavant, si un produit faisant partie du lot était en rupture de stock, il était supprimé du calcul du prix.

<!-- ACP2E-1503 -->

* Les produits groupés s’affichent désormais comme étant en rupture de stock lorsque le dernier de leurs produits enfants requis est acheté. Auparavant, les produits groupés étaient affichés comme étant en stock sur le storefront lorsque leurs produits simples étaient en rupture de stock.

<!-- ACP2E-1443 -->

* Les problèmes de performances liés à l’ajout au panier de produits groupés avec des options non requises à l’aide de la mutation `addBundleProductsToCart` ont été résolus.

<!-- ACP2E-1264 -->

* La requête `categoryList` renvoie désormais toutes les options de lot comme prévu lorsque le paramètre de configuration **[!UICONTROL Show out-of-stock products]** est activé. Auparavant, les options en rupture de stock n’étaient pas incluses dans la réponse à la requête.

<!-- ACP2E-1345 -->

* Les produits groupés créés avec `POST V1/products` réussissent désormais lorsque l’étendue de prix catalogue est définie sur `website`. Auparavant, une violation de contrainte d’intégrité se produisait. [GitHub-35595](https://github.com/magento/magento2/issues/35595)

### Cache

<!-- AC-11411 -->

* Les catégories sont désormais visibles pour les acheteurs dans les magasins où le cache est défini sur Fast CDN (**[!UICONTROL Caching Application=Fastly CDN]**). Cela affectait à la fois les clients invités et les clients enregistrés.

<!-- ACP2E-2070 -->

* Les cookies de mise en cache après connexion sont désormais les mêmes après la navigation sur le site web. Auparavant, le contrôleur de connexion envoyait un cookie de mise en cache incorrect et les pages pouvaient avoir été mises en cache plusieurs fois.

<!-- ACP2E-1840 -->

* Les réponses de GraphQL GET opérations sur les pages CMS qui contiennent des blocs CMS sont maintenant effacées comme prévu dans le cache Fastly. Les mises à jour planifiées suivantes affichent désormais un contenu de mise à jour précis pour ces pages.

<!-- ACP2E-1524 -->

* Le cache de page est maintenant effacé comme prévu pour un produit parent lorsque l’un de ses produits enfants a été enregistré de l’administrateur. Une vérification du plug-in a été introduite pour atteindre l’invalidation du cache pour les variantes configurables, similaires à d’autres types de produits, quel que soit l’état de l’indexeur (planifié ou en temps réel). Auparavant, les prix n’étaient pas correctement mis à jour sur le storefront après la mise à jour d’une variation configurable à partir de l’administrateur.

<!-- ACP2E-1454 -->

* Ajout d’un mécanisme de mise en cache pour les informations d’identification AWS. Un fournisseur d’informations d’identification utilise désormais le cache de Commerce pour mettre en cache les informations d’identification récupérées d’AWS pour la configuration EC2.

<!-- AC-7639 -->

* Le plug-in dont l’objectif est d’ajouter la balise de cache configurable lorsqu’un produit simple associé à un produit configurable est enregistré fonctionne désormais comme prévu. Toutes les balises de cache configurables pertinentes sont supprimées comme prévu lorsqu’un produit simple est mis à jour par `POST V1/products`. Auparavant, tous les prix n’étaient pas mis à jour sur le storefront et les caches devaient être effacés manuellement. [GitHub-36726](https://github.com/magento/magento2/issues/36726)

### Panier et passer en caisse

<!-- ACP2E-2658 -->

* Magento Open Source optimise désormais les performances en ne chargeant pas les données de devis spécifiques à l’utilisateur lors de la génération de pages pouvant être mises en cache en page entière, telles que les pages de détails du produit (PDP) et les pages CMS lorsque le panier persistant est activé. Auparavant, le système chargeait inutilement les données de session et de devis spécifiques à l’utilisateur ou à l’utilisatrice lors de la génération de ces pages, ce qui affectait les performances.

<!-- ACP2E-2684 -->

* Les attributs personnalisés des adresses sont désormais enregistrés comme prévu dans la base de données. Auparavant, les valeurs d’attribut enregistrées dans la base de données étaient précédées du code d’attribut.

<!-- ACP2E-2517 -->

* La génération du texte de filtre des règles de panier pour les attributs de produit a été améliorée. Les produits individuels ne sont plus chargés plusieurs fois.

<!-- AC-8920 -->

* Magento Open Source affiche désormais un message d’erreur informatif lorsqu’une erreur se produit lors du passage en caisse et ne ramène plus l’acheteur à une étape de paiement antérieure. Auparavant, l’acheteur était renvoyé à la page d’expédition.

<!-- ACP2E-2520 -->

* La `cart` requête ne renvoie plus le mode d’expédition et l’adresse pour les paniers virtuels. Auparavant, lorsqu’un panier contenait à la fois des produits physiques et virtuels et que tous les produits physiques étaient supprimés, la réponse à la requête de panier continuait d’inclure des informations d’expédition.

<!-- ACP2E-2267 -->

* Magento Open Source affiche désormais des messages informatifs lorsqu’une action d’ajout au panier est déclenchée. Auparavant, le `The requested qty is not available` n’était pas toujours affiché comme nécessaire sur le storefront.

<!-- ACP2E-2166 -->

* Les temps de chargement des pages de passage en caisse ont été améliorés pour les clients avec des carnets d’adresses volumineux. Magento Open Source traite désormais uniquement le nombre d’adresses client spécifié dans le paramètre **[!UICONTROL Customer Addresses Limit]**. Auparavant, Magento Open Source chargeait le carnet d’adresses entier.

<!-- ACP2E-2174 -->

* La quantité de produit peut maintenant être modifiée dans le panier comme prévu pour les articles en stock lorsqu’un article est en rupture de stock. Auparavant, les acheteurs ne pouvaient pas modifier la quantité de produits de n’importe quel article lorsqu’un article était en rupture de stock.

<!-- ACP2E-2269 -->

* Le filtre d’attribut de produit `AdvancedSalesRule` fonctionne désormais correctement avec le type principal d’attribut décimal. Par conséquent, les règles du panier avec `Coupon Type` défini sur **[!UICONTROL No Coupon]** fonctionnent désormais comme prévu.

<!-- ACP2E-2376 -->

* Le montant total d’une remise panier entier est désormais appliqué comme prévu aux paniers qui contiennent à la fois des produits groupés et configurables.

<!-- ACP2E-2092 -->

* Les cookies de la section client respectent désormais le paramètre de domaine du cookie. Auparavant, le mini-panier n’était pas mis à jour comme prévu dans les magasins contenant des sous-domaines, même si la session était partagée.

<!-- AC-9340 -->

* L’expédition d’une commande à plusieurs adresses ne déclenche plus d’erreur pendant le traitement de l’identifiant de région.

<!-- AC-8853 -->

* Les montants de remise fixes appliqués au niveau du panier sont maintenant corrects.[GitHub-37496](https://github.com/magento/magento2/issues/37496)

<!-- AC-2044 -->

* Les coupons sont maintenant appliqués avec succès à une commande lorsqu’un acheteur applique le coupon après avoir sélectionné la méthode d’expédition forfaitaire où une règle de prix de panier avec la méthode d’expédition définie comme condition s’applique. Auparavant, la page du panier affichait l’erreur Coupon n’est pas valide et le coupon n’était pas appliqué. [GitHub-34866](https://github.com/magento/magento2/issues/34866)

<!-- AC-2044 -->

* Les coupons sont désormais appliqués avec succès à une commande lorsqu’un acheteur applique le coupon après avoir sélectionné la méthode d’expédition à taux forfaitaire dans laquelle une règle de prix de panier avec la méthode d’expédition définie comme condition s’applique. Auparavant, sur la page du panier affichée l’erreur Coupon non valide s’affichait et le coupon n’était pas appliqué. [GitHub-34866](https://github.com/magento/magento2/issues/34866)

<!-- AC-8596 -->

* La **[!UICONTROL My billing and shipping address are the same]** case à cocher reste désormais cochée par défaut lorsqu’un acheteur utilise la saisie semi-automatique Chrome pour remplir son adresse de livraison, puis clique sur **Suivant** avant que le bloc des modes d’expédition ne soit rechargé. [GitHub-33725](https://github.com/magento/magento2/issues/33725)

<!-- ACP2E-2005 -->

* La `applied_rule_ids` valeur du `quote_item` tableau comprend désormais une liste correcte des ID de règle appliqués. Auparavant, cette valeur ne contenait que le dernier identifiant de règle appliquée.

<!-- ACP2E-2025 -->

* Les données de mini-panier et de client dans le stockage local se réinitialisent désormais lorsqu’une session est supprimée du serveur. Auparavant, ces données s’affichaient toujours lorsque le fichier de session était supprimé.

<!-- ACP2E-1763 -->

* Les paniers distincts ne sont plus fusionnés par erreur à partir de l’administration lorsque le panier persistant est activé.

<!-- ACP2E-1580 -->

* L’estimateur de taxe et d’expédition du panier reflète désormais avec précision la configuration de destination par défaut. Auparavant, lorsque vous configuriez les paramètres de calcul de destination de taxe par défaut et que vous spécifiiez l’état/la région et le code postal, seule la valeur ZIP s’affichait dans le panier sous **[!UICONTROL Estimate Tax and Shipping]**. Cela résultait de Magento Open Source définissant l’ID de région sur undefined avant d’appeler l’instruction conditionnelle qui définissait l’ID de région par défaut de l’administrateur.

<!-- ACP2E-1547 -->

* Magento Open Source ne renvoie plus cette erreur lors du passage en caisse lorsque le panier persistant est activé : `Invalid state change requested`. Auparavant, lorsque cette erreur était générée, plusieurs commandes avec le même `quote_id` étaient parfois créées.

<!-- ACP2E-1456 -->

* Le mini-panier affiche désormais les prix des produits groupés qui reflètent les paramètres de configuration de la taxe du panier. Auparavant, le mini-panier incluait toujours les taxes dans les prix des produits groupés.

<!-- AC-7503 -->

* L’estimation des frais d’expédition fournie à partir de la page du panier est maintenant exacte. `collectShippingRates` est maintenant défini une seule fois. Auparavant, l’estimation d’expédition était dupliquée. [GitHub-36648](https://github.com/magento/magento2/issues/36648)

<!-- ACP2E-1417 -->

* La requête `cart` ne renvoie plus d’erreur lorsqu’un produit du panier spécifié est en rupture de stock. Auparavant, les acheteurs qui utilisaient cette requête pour effectuer un achat ne pouvaient pas terminer leur achat lorsqu’un article était en rupture de stock et leur page de passage en caisse était vierge.

<!-- ACP2E-1459 -->

* Les requêtes d’API invitées à `POST V1/guest-carts/<cartId>/shipping-information` ne renvoient plus de statut `cancel` si la page se recharge lors de la connexion dans un environnement mobile. Auparavant, Magento Open Source générait une erreur 500 et consignait cette exception : `TypeError: Argument 2 passed to Magento\CustomerCustomAttributes\Model\Plugin\ProcessCustomerShippingAddressCustomAttributes::beforeSaveAddressInformation() must be of the type string, null given`.

<!-- AC-7886 -->

* L’éligibilité d’expédition gratuite est désormais calculée comme prévu lorsque la condition de **[!UICONTROL Subtotal (Excl. Tax)]** des règles de panier est appliquée. [GitHub-36760](https://github.com/magento/magento2/issues/36760)

<!-- AC-6672 -->

* La requête `cart` renvoie désormais la tarification de niveau correcte pour un produit. [GitHub-29655](https://github.com/magento/magento2/issues/29655)

<!-- AC-1162 -->

* Des messages d’erreur informatifs ont été ajoutés à la page de passage en caisse pour guider les acheteurs lorsque l’application d’un bon sur la page d’expédition entre en conflit avec la méthode d’expédition sélectionnée. Auparavant, un message demandait aux acheteurs de revenir à la page précédente.

<!-- ENGCOM-8387 -->

* La fenêtre contextuelle d’authentification est désormais initialisée uniquement lorsqu’elle est nécessaire plutôt que chaque fois que l’extraction d’invité est activée. Il est maintenant initialisé lorsque l’acheteur invité tente de passer à la caisse et que le paiement invité est désactivé. [GitHub-30672](https://github.com/magento/magento2/issues/30672)

### Règle de prix du panier

<!-- AC-2054 -->

* La condition de sous-sélection de produit de la règle de prix du panier inclut désormais l’option `total (incl.tax)` comme prévu. [GitHub-34871](https://github.com/magento/magento2/issues/34871)

<!-- ACP2E-2029 -->

* La condition de règle de prix de catalogue `If an item is FOUND/NOT FOUND in the cart with ALL/ANY of these conditions true` fonctionne désormais correctement avec les attributs de catégorie et de SKU. Auparavant, cette condition n’était pas correctement appliquée dans la logique de coupon de prix de panier et des coupons non valides étaient appliqués aux commandes. [GitHub-37660](https://github.com/magento/magento2/issues/37660)

<!-- ACP2E-1932 -->

* Vous pouvez maintenant enregistrer une nouvelle règle de prix de panier avec l’extension `Magento_OfflineShipping` désactivée. Auparavant, Magento Open Source générait cette erreur : `report.ERROR: Warning: Undefined array key "simple_free_shipping"`. [GitHub-37580](https://github.com/magento/magento2/issues/37580)

<!-- ACP2E-1516 -->

* Les règles de prix de panier sont désormais appliquées comme prévu lorsqu’une règle de prix de panier liée à une méthode d’expédition est configurée pour le magasin et que cette méthode d’expédition est remplacée par une autre lors du passage en caisse. Auparavant, la valeur `applied_rule_ids` n’était jamais modifiée dans le tableau `sales_order_item` et la règle de prix du panier n’était pas appliquée à la commande.

<!-- AC-2044 -->

* Les coupons sont désormais appliqués avec succès à une commande lorsqu’un acheteur applique le coupon après avoir sélectionné la méthode d’expédition à taux forfaitaire dans laquelle une règle de prix de panier avec la méthode d’expédition définie comme condition s’applique. Auparavant, la page du panier affichait l’erreur `Coupon is Not valid` et le coupon n’était pas appliqué. [GitHub-34866](https://github.com/magento/magento2/issues/34866)

### Catalogue

<!-- AC-10746 -->

* L’exécution de `bin/magento cache:clean` ou `bin/magento cache:flush` ne vide plus l’intégralité du cache de pleine page intégré ou de vernis, sauf indication contraire. [GitHub-38301](https://github.com/magento/magento2/issues/38301)

<!-- ACP2E-2257 -->

* Les commerçants peuvent désormais utiliser le carrousel de produit pour créer des blocs CMS lorsque `catalog_product_price dimensions-mode` est défini sur `website`. Auparavant, Magento Open Source n’enregistrait pas le bloc et générait cette erreur SQL : `report.CRITICAL: PDOException: SQLSTATE[42S02]: Base table or view not found: 1146 Table`.

<!-- AC-6847 -->

* Magento Open Source no longer displays duplicate images when the product color is changed on a product detail page.  [GitHub-36243](https://github.com/magento/magento2/issues/36243)

<!-- ACP2E-2504 -->

* Optimisation de l’algorithme de synchronisation des valeurs spécifiques au site web après l’ajout d’une nouvelle boutique ou la modification d’une boutique existante dans des environnements multi-boutiques volumineux.

<!-- ACP2E-2631 -->

* Le processus de nettoyage des fichiers image mis en cache a été amélioré afin d’éviter la création de répertoires masqués dans le dossier `pub/media/catalog/product`. Auparavant, les répertoires masqués entraînaient des problèmes d’espace disque lors des opérations de nettoyage. L’opération a pu être arrêtée, ce qui a laissé des répertoires masqués temporaires qui n’ont jamais été supprimés.

<!-- AC-10316 -->

* Les prix des produits groupés sont désormais calculés correctement et un problème lié à l’ordre des opérations lors du calcul des prix a été résolu. [GitHub-35665](https://github.com/magento/magento2/issues/35665)

<!-- AC-6996 -->

* Une clause inutile a été supprimée des requêtes d’index `catalog_product_price`, ce qui a amélioré les performances de cet indexeur sur les magasins avec des catalogues volumineux. [GitHub-32382](https://github.com/magento/magento2/issues/32382)

<!-- ACP2E-2522 -->

* Magento Open Source n’insère plus de texte de description du produit dans le champ **[!UICONTROL Meta Description]** de la page des détails du produit lorsque ce champ est vide. Auparavant, lorsqu’une description de produit contenait du code HTML généré par Page Builder ou un autre éditeur HTML, l’HTML s’affichait dans le champ **[!UICONTROL Description]** des métadonnées et vous ne pouviez pas laisser ce champ vide.

<!-- ACP2E-2308 -->

* Les options de produit configurables sur les pages PDP de produit configurables ne sont plus affectées par les autres options de produit configurables sur la page. Auparavant, les produits configurables avec des attributs de liste déroulante ne déclenchaient plus d’exception lorsqu’un carrousel de produit était présent sur la page des détails du produit. Les options de produit configurables n’étaient pas sélectionnables lorsque d’autres produits configurables avec des options d’échantillon étaient présents sur la page.

<!-- ACP2E-2260 -->

* Les informations sur les produits récemment consultées sont désormais affichées conformément à la configuration de l’affichage en magasin. Auparavant, les données de produit récemment consultées n’étaient pas mises à jour par vue de magasin, y compris le nom et la langue préférée.

<!-- ACP2E-2296 -->

* Les vidéos Vimeo sont désormais lues comme prévu sur les pages de produits en vue mobile dans les navigateurs web Chromium.

<!-- ACP2E-1959 -->

* La commande `bin/magento catalog:images:resize` génère désormais correctement des images de produit pour les produits affectés à un site web personnalisé avec un thème personnalisé.

<!-- ACP2E-1982 -->

* Les métadonnées avec des valeurs `NULL` ou `NOT NULL` sont désormais enregistrées pour le magasin par défaut, conformément à la case à cocher **Utiliser la valeur par défaut** prévue. Auparavant, les métadonnées avec `NULL` valeur n’étaient pas enregistrées lorsque cette case était décochée.

<!-- ACP2E-2093 -->

* Les commerçants peuvent désormais supprimer une image existante de la page des détails du produit, puis charger une nouvelle image portant le même nom. Auparavant, dans ces circonstances, la page produit de storefront n’affichait pas l’image correcte.

<!-- ACP2E-2128 -->

* La requête `productDetail` renvoie désormais le nom du produit au lieu de la valeur null lorsque l’attribut de `alt` de l’image du produit est défini comme vide.

<!-- ACP2E-2215 -->

* Les commandes qui comprennent à la fois des produits téléchargeables et physiques comprennent désormais des liens de travail vers le produit téléchargeable dès que la commande est terminée. Auparavant, les liens vers des produits téléchargeables n’étaient pas disponibles tant que les produits physiques de la même commande n’avaient pas été expédiés.

<!-- ACP2E-2343 -->

* Les réécritures d’URL sont désormais mises à jour lorsqu’une catégorie est déplacée d’un magasin/d’une catégorie racine vers un autre magasin/une autre catégorie racine. Les entrées de base de données obsolètes sont désormais supprimées lorsque les sous-catégories sont transférées vers de nouvelles catégories parentes. La base de données ne comprend désormais que les entrées pertinentes. Auparavant, le `url_path` n’était pas mis à jour avec l’ID de magasin approprié.

<!-- ACP2E-2152 -->

* Le point de terminaison REST `V1/products/<sku>/media` peut désormais traiter le transfert simultané de plusieurs images multimédias. Auparavant, lors du traitement simultané de plusieurs demandes, des données incohérentes étaient créées et Magento Open Source générait une erreur lorsque ces données étaient enregistrées dans la base de données.

<!-- ACP2E-2219 -->

* Les performances de réindexation partielle des indexeurs Produits de catégorie et Catégories de produits ont été améliorées. Auparavant, la `indexer_update_all_views` tâche cron exécutait des réindexeurs plusieurs fois par produit ou catégorie.

<!-- ACP2E-2043 -->

* Lorsque le statut du stock de produits est automatiquement mis à jour à rupture de stock en fonction de la configuration du stock (quantité), le statut du stock est ensuite mis à jour à rupture de stock lorsque la quantité de stock est mise à jour. Auparavant, le paramètre `stock_status_changed_auto` était ignoré lorsque la configuration de stock d’un produit était mise à jour sur en stock.

<!-- AC-8904 -->

* Le tri de la barre d’outils fonctionne désormais comme prévu sur les pages de recherche lorsque le paramètre **[!UICONTROL Remember Category Pagination]** est activé. [GitHub-33220](https://github.com/magento/magento2/issues/33220)

<!-- ACP2E-1640 -->

* Les attributs à sélection multiple sont désormais enregistrés comme prévu lorsque **[!UICONTROL Use Default Value]** case à cocher dans la portée de la vue du magasin est sélectionnée. Auparavant, cette case à cocher n’était pas cochée lorsque le produit était modifié et que la valeur par défaut était enregistrée.

<!-- ACP2E-1878 -->

* Les utilisateurs administrateurs disposant d’un accès limité au site Web peuvent désormais ajouter des images à un produit qui entre dans leur champ d’application. Si l’utilisateur administrateur ne dispose pas de droits d’accès au produit, Magento Open Source affiche un message informatif. Auparavant, les utilisateurs administrateurs disposant d’un accès limité au site Web ne pouvaient pas ajouter d’images aux produits auxquels ils avaient accès.

<!-- AC-6761 -->

* Magento Open Source affiche désormais le nom correct après avoir trié les produits par nom dans Admin > **[!UICONTROL Category]** > **[!UICONTROL Products in category]** dans les déploiements multimagasins où les noms de produits varient d’un magasin à l’autre. [GitHub-36208](https://github.com/magento/magento2/issues/36208)

<!-- ACP2E-1975 -->

* La mutation `addProductsToCart` renvoie désormais des options personnalisables avec des données. Auparavant, elle renvoyait uniquement les options personnalisables vides. [GitHub-37599](https://github.com/magento/magento2/issues/37599)

<!-- ACP2E-1943 -->

* Le statut du produit en retard s’affiche désormais correctement sur le storefront. Auparavant, les produits disponibles pour expédition étaient incorrectement identifiés comme en retard.

<!-- ACP2E-1994 -->

* Les produits exportés ont désormais la valeur `manage_stock` correcte lorsque la valeur `use_config_manage_stock` est égale à `1`. Auparavant, cette valeur par défaut était incorrecte.

<!-- ACP2E-1948 -->

* L’accès aux produits téléchargeables à partir de l’administrateur n’entraîne plus d’erreur lorsque l’utilisateur administrateur modifie la vue du magasin de la vue utilisée lors de la création du produit à une autre vue de magasin. Les prix des produits sont désormais convertis avec succès en virgule flottante lorsqu’un utilisateur administrateur bascule l’affichage du magasin de toutes les vues du magasin vers l’affichage du magasin par défaut. Auparavant, Magento Open Source générait une erreur. [GitHub-37519](https://github.com/magento/magento2/issues/37519)

<!-- ACP2E-1479 -->

* Magento Open Source n’affiche plus de message d’avertissement lorsque vous enregistrez un produit créé avec des options personnalisées après avoir supprimé son image.

<!-- ACP2E-1419 -->

* Les images miniatures des produits s’affichent désormais comme prévu dans l’e-mail d’alerte de stock de produits envoyé lorsqu’un produit est de nouveau en stock. Auparavant, cette image n’était pas affichée dans le courrier électronique d’alerte

<!-- AC-3003 -->

* Le nombre de produits dans l’arborescence des catégories (**[!UICONTROL Catalog]** d’administration > **[!UICONTROL Category]**) est désormais exact. Auparavant, le nombre de produits de la catégorie ne pouvait pas être récupéré à partir du tableau `catalog_category_product_index`. La faute de frappe qui a déclenché ce bogue a été corrigée. [GitHub-35417](https://github.com/magento/magento2/issues/35417)

<!-- ACP2E-1239 -->

* L’image principale du produit sur la page de détails du produit ne se déplace plus visiblement vers le bas pendant le chargement de la page lorsque `product_image_white_borders` le thème `view.xml` est désactivé. Auparavant, l’image du produit se déplaçait visiblement vers le bas pendant le chargement de la page en raison de paramètres de hauteur incorrects dans Fotorama JS.

<!-- ACP2E-1361 -->

* Les clients sont désormais informés des baisses de prix des produits lorsqu’ils sont abonnés aux alertes de baisse de prix. Auparavant, les notifications de baisse de prix n’étaient pas toujours envoyées en raison de la mise en cache au niveau de l’application.

<!-- ACP2E-1422 -->

* La validation côté serveur a été ajoutée au processus de création d’attributs de produit via l’API Web. Vous ne pouvez pas activer le champ **[!UICONTROL Use in Layered Navigation Catalog]** lorsque la valeur du champ **[!UICONTROL Catalog Input Type for Store Owner]** est `Text Field`, `Text Area`, `Text Editor`, `Date` ou `Date and Time`. Auparavant, les produits étaient omis des catégories et des résultats de recherche.

<!-- ACP2E-1413 -->

* La page de catégorie se recharge désormais avec la pagination correcte une fois qu’un acheteur a ouvert la page, modifié la pagination, accède à une page de produit, puis revient à la page de catégorie. [GitHub-36563](https://github.com/magento/magento2/issues/36563)

<!-- ACP2E-1334 -->

* Les produits simples en rupture de stock qui sont des options pour un produit configurable s’affichent désormais comme désactivés sur le storefront lorsque **[!UICONTROL Display Out of Stock Products]** est défini sur **Oui**. Auparavant, toutes les options étaient affichées comme disponibles, malgré leur statut et leur disponibilité réelle.

<!-- ACP2E-1384 -->

* La mise à jour de l’attribut d’étendue du site Web dans une vue de magasin spécifique ne remplace plus la valeur de cet attribut dans l’étendue globale. Auparavant, l’importation des prix des produits lorsque plusieurs lignes sont disponibles avec le même SKU entraînait `store_view_code` des prix inexacts pour les étendues d’affichage par défaut et Toutes les boutiques.

<!-- ACP2E-1632 -->

* Les commerçants peuvent désormais ajouter une image GIF à la galerie d’images d’un produit à partir de l’administrateur. Auparavant, Magento Open Source affichait cette erreur : `imagecolorsforindex(): Argument #2 ($color) is out of range`.

<!-- ACP2E-1709 -->

* Des vérifications ont été ajoutées pour gérer les erreurs résultant de clés de tableau non définies. Auparavant, une erreur s’était produite lors de la génération de la liste autorisée du schéma déclaratif.

<!-- ACP2E-1749 -->

* Magento Open Source renvoie désormais un résultat valide pour le `01/01/1970` de date personnalisé. Auparavant, l’attribut personnalisé renvoyait cette erreur : `Invalid input datetime format of value '1/01/1970`. [GitHub-37274](https://github.com/magento/magento2/issues/37274)

<!-- AC-6507 -->

* Les requêtes `routes` qui utilisent des fragments renvoient désormais les informations de catégorie attendues. Auparavant, une erreur de serveur interne s’était produite sur la page de catégorie. [GitHub-35906](https://github.com/magento/magento2/issues/35906)

<!-- ACP2E-1772 -->

* Les problèmes liés au processus de réindexation partielle `cataloginventory_stock` ont été résolus et les performances de l’indexeur se sont améliorées. Auparavant, les catégories de stock et de produit n’étaient pas mises à jour avec précision.

<!-- AC-8226 -->

* Magento Open Source génère désormais une redirection 301 pour un produit lorsque la catégorie à laquelle il appartient a été déplacée vers un nouveau parent. [GitHub-37039](https://github.com/magento/magento2/issues/37039)

### Règles de catalogue

<!-- ACP2E-1834 -->

* Les règles de catalogue sont désormais correctement indexées lorsqu’elles sont activées par la mise à jour planifiée. Par conséquent, les prix réduits sont désormais correctement générés et indexés. Auparavant, lorsque deux règles de catalogue étaient disponibles et qu’une règle était activée après la première règle avant que l’opération d’indexation de la première règle de catalogue ne soit terminée, les prix de remise de la règle de catalogue n’étaient pas générés pour la seconde règle de catalogue.

<!-- ACP2E-1579 -->

* Les règles de catalogue sont désormais appliquées comme prévu dans un environnement multi-sites web.

### Produits configurables

<!-- ACP2E-1881 -->

* Les commerçants peuvent désormais sélectionner des **[!UICONTROL Skip quantity at this time]** et des **[!UICONTROL Skip image uploading at this]** lors de la configuration d’un produit configurable sans affecter la source des produits simples associés. Auparavant, la sélection des **[!UICONTROL Skip quantity at this time]** entraînait la disparition des sources de produits.

<!-- AC-7099 -->

* Le libellé **[!UICONTROL As low as]** ne s’affiche plus pour un prix de produit configurable lorsque toutes les options ont le même prix.

<!-- ACP2E-2464 -->

* Les utilisateurs administrateurs disposant d’autorisations de site web peuvent désormais enregistrer un produit enfant qui fait partie d’un produit configurable dans un autre contexte de magasin. Les processus de réindexation ignorent désormais ce type de produit configurable.

<!-- ACP2E-2003 -->

* Les produits configurables avec deux produits enfants ne sont plus marqués comme étant en rupture de stock lorsqu’un produit enfant est désactivé par une mise à jour planifiée. Il s’agissait d’un problème connu de la version 2.4.7-bêta1.

<!-- AC-8060 -->

* Les performances des opérations d’enregistrement pour les produits configurables avec plusieurs options ont été améliorées. Auparavant, les délais d’expiration pouvaient survenir pendant les opérations d’enregistrement du produit. [GitHub-36928](https://github.com/magento/magento2/issues/36928)

<!-- ACP2E-1764 -->

* L’affichage en storefront des prix des produits configurables change désormais comme prévu lorsqu’un acheteur sélectionne une option de produit. [GitHub-37378](https://github.com/magento/magento2/issues/37378)

### Coupons

<!-- ACP2E-2495 -->

* Les codes promotionnels avec un nombre limité d’utilisations par client peuvent désormais être utilisés une seconde fois lorsque la commande pour laquelle ils ont été utilisés précédemment échoue. Auparavant, le code promotion n’était pas publié lorsque la commande précédente était annulée.

<!-- ACP2E-2428 -->

* Les codes promo contenant des espaces ne sont plus invalidés. Auparavant, si un code de coupon contenait un espace (avant ou après le code réel), la validation échouait. [GitHub-38048](https://github.com/magento/magento2/issues/38048)

<!-- ACP2E-1551 -->

* La valeur du coupon à usage unique d’un acheteur est désormais restaurée comme prévu lorsque la commande à laquelle il a été appliqué est annulée.

<!-- ACP2E-1195 -->

* Le `GET V1/coupons/<couponId>` point de terminaison renvoie désormais la réponse complète attendue pour les coupons créés manuellement, tout comme il le fait pour les coupons générés automatiquement. Auparavant, certains champs étaient omis (par exemple, `usage_limit`, et `usage_per_customer` `created_at`).

### cron

<!-- ACP2E-2457 -->

* La tâche cron `aggregate_sales_report_bestsellers_data` ne crée plus de très grandes tables MySQL temporaires et se termine désormais correctement. Cette tâche cron insère désormais des données par magasin, et non pour tous les magasins en même temps. Auparavant, cette tâche cron pouvait entraîner des erreurs `No space left on device`.

<!-- ACP2E-2427 -->

* Le nombre d’enregistrements en attente dans la table `cron_schedule` a été réduit en empêchant les tâches cron d’essayer d’acquérir des verrous de tâche cron inutiles. Auparavant, les tâches cron essayaient d’acquérir des verrous lorsqu’il était trop tard pour exécuter la tâche. Les tâches Cron n’étaient `cron_schedule` pas marquées comme manquées, même si elles avaient déjà dépassé l’heure prévue. Magento Open Source a également affiché cette erreur à plusieurs reprises dans le journal des erreurs : `report.WARNING: Could not acquire lock for cron job: indexer_update_all_views`.

<!-- AC-9207 -->

* Correction de l’erreur fatale diviser par zéro dans les expressions cron. [GitHub-37804](https://github.com/magento/magento2/issues/37804)

<!-- ACP2E-1792 -->

* Le `sales_clean_quotes` processus cron a été optimisé pour s’exécuter plus rapidement en ajoutant un index composite sur `store_id` et `updated_at columns` dans la table des devis. Cette modification améliore les performances des tâches cron lors du traitement de nombreux devis.

<!-- AC-7987 -->

* Les utilisateurs administrateurs peuvent désormais visualiser la tâche actuellement effectuée par le `bin/magento cron:run` processus. Le titre du processus en cours d’exécution répertorie désormais les noms des groupes et des tâches. [GitHub-34321](https://github.com/magento/magento2/issues/34321)

### Client

<!-- AC-6748 -->

* Magento Open Source affiche désormais les champs **[!UICONTROL Date of Birth]**, **[!UICONTROL Tax/VAT Number]**, **[!UICONTROL Gender]**, **[!UICONTROL Telephone]**, **[!UICONTROL Company]** et **[!UICONTROL Fax]** sur la page modifier le client en fonction des paramètres de configuration. [GitHub-36196](https://github.com/magento/magento2/issues/36196)

### E-mail

<!-- ACP2E-2125 -->

* Les e-mails contenant des signes diacritiques ou des accents (c’est-à-dire, un e-mail utf8) sont désormais pris en charge pour les clients et les sociétés, ainsi que pour le passage de commandes par les invités et les clients enregistrés. Auparavant, Magento Open Source n’enregistrait pas les enregistrements de clients contenant des signes diacritiques et affichait cette erreur : `Something went wrong while saving the customer`.

<!-- ACP2E-2503 -->

* Les noms des expéditeurs d’e-mails ne peuvent plus contenir de caractères deux-points. Une nouvelle règle de validation empêche désormais l’enregistrement des noms d’expéditeur qui contiennent des caractères deux-points dans la section Stocker les adresses e-mail d’Admin **[!UICONTROL Stores]** > **[!UICONTROL General]**. Auparavant, les commerçants pouvaient enregistrer un nom d’expéditeur qui contenait un caractère deux-points, ce qui entraînait des erreurs de serveur de messagerie.

<!-- AC-2903 -->

* Les adresses e-mail des clients peuvent désormais inclure des signes diacritiques. Auparavant, la validation frontale interdisait la création d’un utilisateur avec des signes diacritiques dans son adresse e-mail. [GitHub-12075](https://github.com/magento/magento2/issues/12075)

<!-- ACP2E-1682 -->

* Les e-mails de Stock et d’alerte de prix sont désormais traduits en fonction de la langue configurée pour l’affichage de la boutique par défaut du site Web. Auparavant, ces e-mails n’étaient pas traduits.

<!-- ACP2E-1571 -->

* `POST V1/order/notify-orders-are-ready-for-pickup` envoie désormais un e-mail pour avertir les clients qu’une commande est prête à être récupérée uniquement lorsque la commande est prête. L’e-mail n’est désormais déclenché que lorsque la demande a été honorée sans exception.

### Cadres

<!-- AC-10873 -->

* Amélioration du débogage en ajoutant la valeur `UNCACHEABLE` lors de la sortie d’un en-tête HTTP avec vernis en cours d’utilisation. Auparavant, seules les valeurs `HIT` ou `MISS` étaient générées. [GitHub-37912](https://github.com/magento/magento2/issues/37912)

<!-- AC-10884 -->

* Ajout de code pour prendre en charge la gestion par défaut de la compression Vernis. [GitHub-38309](https://github.com/magento/magento2/issues/38309)

<!-- AC-8502 -->

* La commande `varnish:vcl:generate` comprend désormais un `input-file argument` . Cela prend en charge l’ajout d’une VCL personnalisée à un référentiel Git, par rapport à la racine Commerce. [GitHub-37363](https://github.com/magento/magento2/issues/37363)

<!-- AC-10739 -->

* La prise en charge de Varnish 4.x et 5.x a été supprimée de la base de code. [GitHub-38304](https://github.com/magento/magento2/issues/38304)

<!-- AC-8023 -->

* `phpcodesniffer-composer-installer` in `composer.json` a été mis à niveau vers la version 1.0.0. [GitHub-36913](https://github.com/magento/magento2/issues/36913)

<!-- AC-10858 -->

* Les caractères non conformes aux [RFC3986](https://www.rfc-editor.org/rfc/rfc3986.html)  ont été supprimés de la base de code. [GitHub-38355](https://github.com/magento/magento2/issues/38355)

<!-- AC-10692 -->

* Correction d&#39;une balise de document PHP incorrecte dans la classe `Magento\Reports\Block\Adminhtml\Shopcart\Product\Grid`. [GitHub-38186](https://github.com/magento/magento2/issues/38186)

<!-- AC-10865 -->

* Le code refactorisé dans toute la base de code qui a été créée lorsque les pratiques de codage ont dicté que toute section de cache incluse dans le fichier `app/etc/env.php` inclurait une section frontale. Cette refactorisation résout les problèmes potentiels lors de la mise à niveau Magento Open Source déploiements antérieurs à la version 2.4.4. [GitHub-38363](https://github.com/magento/magento2/issues/38363)

<!-- AC-8005 -->

* Clarification du message d’erreur associé lorsqu’un `StockItemValidator.php` ID de stock avec une valeur de 0 est fourni lors d’un appel API. [GitHub-31107](https://github.com/magento/magento2/issues/31107)

<!-- AC-10583 -->

* Ajout d’un tableau vide par défaut à in `CompositeTagGenerator` pour éviter les erreurs lors de `$tagGenerators` la compilation d’injection de dépendance. Auparavant, l’exécution de la `bin/magento setup:upgrade` commande lorsque les `Magento_DirectoryGraphQl` modules et `Magento_StoreGraphQl` étaient désactivés générait une erreur. [GitHub-38165](https://github.com/magento/magento2/issues/38165)

<!-- AC-9232 -->

* La classe `AlgorithmProviderFactory` inutilisée a été supprimée, ainsi que les dépendances de cette classe dans les classes `JweAlgorithmManagerFactory.php`, `JweContentAlgorithmManagerFactory.php` et `JwsAlgorithmManagerFactory`. [GitHub-37783](https://github.com/magento/magento2/issues/37783)

<!-- AC-9776 -->

* Le fichier `var/log/system.log` ne contient plus de messages d’erreur `main.INFO`. Le journal d’entrée de menu a été déplacé du niveau INFO vers DEBUG. Auparavant, le fichier `var/log/system.log` était inondé de messages comme celui-ci : `Add of item with id Magento_Theme::design_config was processed … `.

<!-- AC-8809 -->

* Le préchargement Redis n’échoue plus lorsque `exec()` renvoie false. La vérification a été ajoutée au processus de préchargement pour empêcher `array_combine` de recevoir des `false` en tant que second argument. Par conséquent, le préchargement continuera à s’exécuter lorsque `exec()` retourne `false`. [GitHub-37509](https://github.com/magento/magento2/issues/37509)

<!-- AC-8220 -->

* Refactorisation du module `Magento_CatalogWidget` pour remplacer les fonctions d’échappement `$block` par des fonctions d’échappement `$escaper`. [GitHub-37107](https://github.com/magento/magento2/issues/37107)

<!-- AC-9336 -->

* `Swaziland` a été mis à jour pour `Eswatini` dans toute la base de code. [GitHub-37873](https://github.com/magento/magento2/issues/37873)

<!-- ACP2E-2638 -->

* Ajout de la nouvelle monnaie nicaraguayenne (NIO) à la liste des monnaies disponibles.

<!-- AC-10591 -->

* Correction d’un nom de variable dans `CatalogRule/Controller/Adminhtml/Promo/Catalog/NewConditionHtml.php`. [GitHub-38093](https://github.com/magento/magento2/issues/38093)

<!-- AC-9221 -->

* Correction des erreurs d&#39;arrondi du sous-total qui se produisaient dans les transactions pour les produits pour lesquels la quantité décimale a été activée. [GitHub-37817](https://github.com/magento/magento2/issues/37817)

<!-- ACP2E-2127 -->

* Le filtre de date de la grille de clients d’administration fonctionne désormais comme prévu en fonction du paramètre régional spécifié.

<!-- AC-9027 -->

* La commande `bin/magento setup:upgrade` n’échoue plus en raison du type de données de variable `$schemaPatch`. Auparavant, la valeur de chaîne était transmise à la fonction `get_class`, ce qui provoquait l’erreur. [GitHub-37545](https://github.com/magento/magento2/issues/37545)

<!-- ACP2E-2345 -->

* La connexion à la base de données MySQL est maintenant restaurée si la connexion expire au cours d’une transaction lorsque vous définissez des `max_messages = 0` pour le client. Auparavant, la connexion était interrompue.

<!-- ACP2E-2121 -->

* Le `magento/module-release-notification` module principal a été marqué comme obsolète dans le code 2.4-develop avec ce commentaire : `Starting from Magento 2.4.7, Magento_ReleaseNotification module is deprecated in favor of another in-product messaging mechanism`.

<!-- AC-9388 -->

* La génération de code proxy génère désormais des fichiers proxy et d’usine comme prévu pour les déploiements exécutés en mode production. [GitHub-35252](https://github.com/magento/magento2/issues/35252)

<!-- AC-1477 -->

* L&#39;état indien du Ladakh est maintenant listé comme une option dans les menus déroulants Admin **[!UICONTROL State]**. [GitHub-33698](https://github.com/magento/magento2/issues/33698)

<!-- AC-8388 -->

* L’indicateur de compte à rebours des événements s’affiche désormais comme prévu sur la page de catégorie.

<!-- AC-8369 8368 8365 8317 8351 8357 8377 8357 8351 8323-->

* La balise `@author` interdite a été supprimée de la base de code, y compris les modules suivants : `Magento_user-variable-wee`, `Magento_Catalog` et `Magento_Customer`, `Magento_Wishlist`, `Magento_Review` `Tax`, ainsi que dans l’ensemble du framework. [GitHub-37245](https://github.com/magento/magento2/issues/37245), [GitHub-37246](https://github.com/magento/magento2/issues/37246), [GitHub-37249](https://github.com/magento/magento2/issues/37249), [GitHub-37263](https://github.com/magento/magento2/issues/37263)

<!-- AC-9489 -->

* Le sérialiseur JSON du `User` module a été remplacé par un nouveau sérialiseur plus précis (`JsonHexTag`). Auparavant, Magento Open Source se bloquait parfois lorsque vous tentiez d’utiliser des données sérialisées par le sérialiseur standard lorsqu’elles contenaient des éléments sans échappement. [GitHub-31377](https://github.com/magento/magento2/issues/31377)

<!-- ACP2E-2138 -->

* Les erreurs de pipeline rompues ne se produisent plus lors de l’exécution d’une réindexation complète (`bin/magento indexer:reindex`). Les connexions AMPQ sont désormais fermées avant que le process manager ne bifurque les processus.

<!-- ACP2E-2244 -->

* Le programme de validation des messages de la file d’attente valide désormais le sous-type de tous les éléments du tableau. Auparavant, Magento Open Source avait généré une exception.

<!-- ACP2E-2066 -->

* La configuration de connexion à la file d’attente par rubrique dans `app/etc/env.php` fonctionne désormais correctement. Auparavant, la file d’attente d’alerte de produit ne se générait pas correctement lorsqu’une nouvelle file d’attente de messages était créée avec un échange personnalisé. Si la connexion de file d’attente pour une rubrique a été configurée dans `app/etc/env.php` avec un échange personnalisé, une nouvelle liaison a été créée pour toutes les rubriques avec cet échange personnalisé. Les commerçants ne pouvaient pas traiter les alertes de produits.

<!-- ACP2E-2144 -->

* Les formats temporels marqués d’un commentaire `/* mariadb-5.3 */` ne provoquent plus d’erreurs lors de la mise à niveau du serveur MariaDB vers la version 10.5.1 ou une version ultérieure `bin/magento setup:install`.

<!-- ACP2E-2147 -->

* Le pilote AwsS3 fonctionne maintenant comme prévu pour remplacer l&#39;implémentation de base du stockage de fichiers par défaut. Auparavant, les données pouvaient être endommagées lorsque ce pilote était configuré pour le stockage de fichiers. [GitHub-37844](https://github.com/magento/magento2/issues/37844)

<!-- ACP2E-1999 -->

* `bin/magento config:show` et `set` les commandes qui utilisent `$_ENV` des variables prennent désormais en charge l’utilisation de codes de site Web et de magasin contenant des caractères en majuscules ou en majuscules.

<!-- AC-8923 -->

* Ajout de classes avec `!important` telles qu’utilisées dans Tailwind 3 pour la prise en charge de la disposition CSS. [GitHub-37568](https://github.com/magento/magento2/issues/37568)

<!-- AC-9115 -->

* Une dépendance manquante `jQuery` a été ajoutée au `trim-input.js` fichier. [GitHub-37683](https://github.com/magento/magento2/issues/37683)

<!-- AC-9387 -->

* Les détails spécifiques à l’événement sont maintenant transmis en tant que deuxième attribut (`context`) de la `log` méthode. [GitHub-37879](https://github.com/magento/magento2/issues/37879)

<!-- AC-9109 -->

* Des valeurs de format ont été ajoutées aux images du catalogue et les scripts inutiles ont été supprimés de la structure de l’interface utilisateur. [GitHub-37691](https://github.com/magento/magento2/issues/37691)

<!-- AC-9188 -->

* Amélioration des messages d’erreur déclenchés par une configuration XML non valide afin d’être plus informatifs. [GitHub-37788](https://github.com/magento/magento2/issues/37788)

<!-- AC-9335 8817-->

* Code obsolète restructuré lié à la création de propriétés dynamiques dans l’ensemble de la base de code.

<!-- AC-7009 -->

* Les performances des indexeurs pour les grands magasins avec des bases de données de produits extrêmement actives se sont améliorées. Les indexeurs indexent désormais les informations produit les plus récentes une fois pour chaque index plutôt que plusieurs fois. Auparavant, les produits disparaissaient du site web et les données des produits pouvaient être obsolètes sur le site web. [GitHub-30012](https://github.com/magento/magento2/issues/30012)

<!-- ACP2E-1971 -->

* `mview_state` statut d&#39;enregistrement indique désormais précisément l&#39;état en fonction de l&#39;activité du journal des modifications lorsqu&#39;une connexion à la base de données esclave est disponible. Auparavant, ces enregistrements restaient dans un état `waiting` dans les déploiements cloud, même lorsqu’il n’y avait aucune nouvelle entrée dans le journal des modifications.

<!-- ACP2E-2022 -->

* Ajout de la prise en charge de l’option `precision` pour le format monétaire afin de préserver la parité des fonctionnalités avec la classe de `ZendCurrency` obsolète.

<!-- AC-8854 -->

* Les messages de cookie ont été convertis en attributs observables et les développeurs peuvent désormais manipuler l’état, ce qui peut potentiellement déclencher des modifications de l’interface utilisateur. Auparavant, les cookies étaient en lecture seule et ne pouvaient pas être manipulés. [GitHub-37308](https://github.com/magento/magento2/issues/37308)

<!-- AC-6325 -->

* Les utilisateurs administrateurs peuvent désormais générer une facture lorsque leur instance Magento Open Source est connectée au stockage S3. Auparavant, Magento Open Source affichait cette erreur : `Cannot create image resource. File not found`. [GitHub-35706](https://github.com/magento/magento2/issues/35706)

<!-- AC-6906 -->

* Magento Open Source consigne désormais un message d’exception comme prévu lorsque la validation du numéro de TVA par le service de validation VIES échoue. [GitHub-36065](https://github.com/magento/magento2/issues/36065)

<!-- AC-8146 -->

* Le nom du `Administrators` a été supprimé de la requête utilisée pour récupérer le rôle d’un administrateur lors de la création du rôle d’administrateur. [GitHub-36998](https://github.com/magento/magento2/issues/36998)

<!-- AC-8607 -->

* La commande `bin/magento setup:config:set` n&#39;échoue plus lorsqu&#39;un nom d&#39;utilisateur de base de données non valide est inclus dans le fichier `app/etc/env.php`. [GitHub-37409](https://github.com/magento/magento2/issues/37409)

<!-- AC-8595 -->

* Le tri par colonne sur les mots réservés dans un composant de l’interface utilisateur d’administration par défaut n’entraîne plus d’erreur SQL dans les `var/log/exception.log`. [GitHub-37423](https://github.com/magento/magento2/issues/37423)

<!-- AC-8562 -->

* Ajout de `AddDataForCostaRica.php` pour fournir des informations sur l’État du Costa Rica. [GitHub-37382](https://github.com/magento/magento2/issues/37382).

<!-- AC-8577 -->

* Amélioration du message d’erreur pour le scénario où l’utilisateur ou l’utilisatrice tente d’accéder à une URL non valide à partir de l’administrateur. [GitHub-35682](https://github.com/magento/magento2/issues/35682).

<!-- ACP2E-1841 -->

* `Param $options[`position`]` pour les symboles de devise fonctionne désormais comme prévu et prend en charge la personnalisation de la position du symbole de devise. Auparavant, après la migration depuis Zend Framework 1, la méthode `toCurrency` ignorait le paramètre `position`. Ce problème survenait dans toute l’interface d’administration.

<!-- ACP2E-1492 -->

* Mutex a été implémenté pour les commandes afin d’empêcher les conditions de concurrence lors de la mise à jour par des requêtes simultanées. Auparavant, les requêtes simultanées (conditions de concurrence) pour les annulations de commande entraînaient des entrées dupliquées dans la table `inventory_reservation`.

<!-- ACP2E-1381 -->

* La fonction `populateWithArray` transforme désormais correctement les propriétés d’objet en casse de serpent, ce qui la rend compatible avec les getters et setters `AbstractModel`. Auparavant, la mise en forme de la casse de serpent était incorrecte lorsque le nom de l’attribut de données contenait plusieurs lettres majuscules à la suite.

<!-- ACP2E-1522 -->

* La valeur d’incrémentation automatique dans le tableau `catalog_product_entity_varchar` s’incrémente désormais correctement après l’enregistrement d’un produit. Auparavant, cette valeur augmentait de dix.

<!-- ACP2E-1701 -->

* Magento Open Source ne renvoie plus cette exception de système de fichiers lorsque vous tentez de vider le cache JavaScript/CSS : `No such file or directory`.

<!-- ACP2E-1358 -->

* La valeur de `value_id` dans `customer_entity_int` est désormais incrémentée correctement. Une requête de mise à jour est exécutée au lieu de `insert on duplicate key update` lors de la mise à jour d’une entité qui incorpore ces attributs. Par conséquent, les colonnes d’auto-incrémentation utilisées dans le modèle EAV augmentent désormais de manière linéaire. Auparavant, le processus d’incrémentation automatique pour les colonnes ignorait les valeurs en raison de l’échec des requêtes d’insertion. [GitHub-28387](https://github.com/magento/magento2/issues/28387)

<!-- AC-8462 -->

* Suppression des espaces inutiles des attributs de `id` qui ne les nécessitent pas. (Ce bogue a été introduit par un changement de code dans Magento Open Source 2.4.6.)

<!-- AC-7923 -->

* Les codes de magasin n’apparaissent plus dans l’URL du magasin lorsque celui-ci est en mode magasin unique. [GitHub-36831](https://github.com/magento/magento2/issues/36831)

<!-- AC-7988 -->

* Des mises à jour mineures ont été apportées aux `around` modules externes. [GitHub-31443](https://github.com/magento/magento2/issues/31443)

<!-- AC-7989 -->

* Les échantillons `Helper` ont été restructurés afin de supprimer les alias d’importation trompeurs. [GitHub-31373](https://github.com/magento/magento2/issues/31373)

<!-- AC-8708 -->

* Les utilisateurs administrateurs peuvent maintenant supprimer ou renommer un `sitemap.xml` fichier comme prévu. Auparavant, un utilisateur administrateur pouvait supprimer le fichier de l’administrateur, mais il restait dans le système de fichiers. [GitHub-37468](https://github.com/magento/magento2/issues/37468)

<!-- ACP2E-1747 -->

* Les coupons ne sont plus marqués comme utilisés lorsque le paiement échoue pour la commande à laquelle ils ont été appliqués. Les messages de file d’attente sont désormais traités dans l’ordre dans lequel ils sont publiés lorsque le client est démarré. Auparavant, le premier message était extrait de la file d’attente pour simplement vérifier si les messages étaient placés en file d’attente, puis était rejeté, ce qui entraînait le dernier traitement du premier message.

<!-- ACP2E-1627 -->

* Magento Open Source ne renvoie plus d’exception dans le fichier journal lorsqu’un utilisateur tente d’imprimer une étiquette d’expédition. Auparavant, si une extension modifiait les en-têtes de réponse contenant une pièce jointe, le système générait une exception dans le fichier journal.

<!-- AC-7986 -->

* La prise en charge d’autres classes HTML a été ajoutée à `elements.xsd`. [GitHub-36891](https://github.com/magento/magento2/issues/36891)

### Correctifs généraux

<!-- AC-10591 -->

* Changement du nom de la `reponseBody` variable en `responseBody` .`app/code/Magento/CatalogRule/Controller/Adminhtml/Promo/Catalog/NewConditionHtml.php`[GitHub-38093](https://github.com/magento/magento2/issues/38093)

<!-- ACP2E-2647 -->

* La planification des mises à jour de produits n’efface plus les données d’attribut à sélection multiple. Auparavant, lorsqu’une mise à jour était planifiée pour un produit, les données d’attribut à sélection multiple du produit étaient effacées par erreur. [GitHub-37675](https://github.com/magento/magento2/issues/37675)

<!-- AC-2904 -->

* L’enregistrement d’un produit avec une étendue de magasin autre que celle par défaut n’entraîne plus la modification de la portée du magasin des attributs lorsqu’ils sont chargés à l’aide de `ProductRepository`. [GitHub-8897](https://github.com/magento/magento2/issues/8897)

<!-- ACP2E-2404 -->

* Des messages d’erreur informatifs ont été ajoutés à la validation des champs personnalisés sur les pages de détails du produit. [GitHub-38006](https://github.com/magento/magento2/issues/38006)

<!-- ACP2E-2511 -->

* Les caractères spéciaux peuvent désormais être utilisés dans les champs de nom. Auparavant, l’esperluette (&amp;) était limitée dans le programme de validation des noms, ce qui bloquait les opérations d’ajout ou de modification des clients lorsque le nom du client contenait une esperluette. [GitHub-38080](https://github.com/magento/magento2/issues/38080)

<!-- ACP2E-2469 -->

* Les utilisateurs administrateurs disposant d’un accès restreint à un magasin spécifique peuvent désormais utiliser une action de mise à jour en masse pour mettre à jour les avis de produits. Auparavant, Magento Open Source avait généré l’exception suivante : `report.CRITICAL: TypeError: array_intersect(): Argument #1 ($array) must be of type array, null given in app/code/Magento/AdminGws/Model/Models.php:439`.

<!-- AC-8600 -->

* La fonctionnalité Afficher le mot de passe de la page de connexion de storefront affiche désormais les mots de passe comme prévu. Auparavant, les mots de passe n’étaient pas affichés. [GitHub-37432](https://github.com/magento/magento2/issues/37432)

<!-- ACP2E-2062 -->

* La liste de comparaison des produits est désormais toujours spécifique au site Web pour les acheteurs invités et ne contient pas les produits qui ont été ajoutés à partir d’autres sites Web, y compris les produits qui ont été attribués aux deux sites Web.

<!-- ACP2E-2087 -->

* Les blocs de contenu CMS qui contiennent des emojis ne sont plus tronqués après l’emoji lors de l’enregistrement dans la base de données. Auparavant, le contenu était tronqué après l’emoji car la configuration de base de données par défaut ne prenait pas en charge les caractères à quatre octets.

<!-- AC-8823 -->

* Les mots de passe sont maintenant affichés comme prévu lorsque la **[!UICONTROL Show Password]** case sur la page de connexion est active.

<!-- ACP2E-2037 -->

* L’attribut système du jeton de réinitialisation de mot de passe de la validation de l’entité client (`rp_token`) a été supprimé de la validation des attributs lors de la création du compte client et la validation des diacritiques est incluse uniquement dans l’e-mail du client qui en résulte. Auparavant, Magento Open Source n’enregistrait pas l’enregistrement du client et affichait cette erreur : `Something went wrong while saving the customer`.

<!-- AC-8826 -->

* Vous pouvez désormais enregistrer les modifications apportées à la grille Pages d’administration et Bloc après la suppression d’une colonne. [GitHub-37525](https://github.com/magento/magento2/issues/37525)

<!-- ACP2E-1972 -->

* Les clients peuvent désormais se connecter avec un nouveau mot de passe depuis un appareil après avoir réinitialisé leur mot de passe sur un autre appareil.

<!-- ACP2E-1609 -->

* Le champ Adresse du client administrateur **État/Province** conserve désormais la dernière valeur enregistrée comme prévu. Auparavant, lorsque vous supprimiez la valeur de ce champ, Magento Open Source continuait à afficher la valeur supprimée dans le champ **État/Province**. [GitHub-36846](https://github.com/magento/magento2/issues/36846)

<!-- ACP2E-1508 -->

* Les erreurs ne se produisent plus lors des demandes de flux RSS pour les catégories lorsque le **[!UICONTROL RSS Feed Top Level Category]** est activé. Auparavant, la navigation sur la page de catégorie de flux RSS entraînait des erreurs de Elasticsearch `CRITICAL` dans les fichiers journaux lorsque **[!UICONTROL RSS Feed Top Level Category]** l’activation était activée.

<!-- ACP2E-1490 -->

* La valeur correcte est désormais enregistrée lorsque `gws_store_groups` l’étendue du rôle est modifiée lors de la création du rôle utilisateur. Auparavant, lorsque l’étendue du rôle était sélectionnée comme `All`, la valeur était enregistrée comme nulle lors de la création de l’utilisateur `gws_store_groups` , mais pas lors de la modification du rôle. En outre, si l’étendue du rôle a été sélectionnée sur `Custom`, la `gws_store_groups` valeur était toujours enregistrée comme nulle.

<!-- ACP2E-1446 -->

* La page de réinitialisation du mot de passe est maintenant accessible en cliquant sur le lien Mot de passe de réinitialisation de l’administrateur sur la page de connexion administrateur lorsque le **[!UICONTROL Add Store Code to Urls]** paramètre est activé. Le lien Admin reset password ouvrait précédemment la page de connexion ou la page 404.

<!-- ACP2E-1274 -->

* La période du tableau de bord des statistiques d’administration est désormais calculée en fonction du fuseau horaire défini dans les paramètres de configuration, puis converti en UTC pour récupérer les données de la base de données.

<!-- ACP2E-1665 -->

* Le filtre de hiérarchie CMS fonctionne comme prévu une fois que vous avez filtré une vue de magasin, puis cliqué sur **[!UICONTROL Save]** dans Admin **[!UICONTROL Content]** > **[!UICONTROL Hierarchy]**. Auparavant, cliquer sur **[!UICONTROL Save]** actualisait la page, mais le contexte était perdu et la vue de magasin sélectionnée n’était plus affichée.

<!-- ACP2E-1631 -->

* Cliquez sur le **[!UICONTROL Send invitation]** bouton (Admin **[!UICONTROL Marketing]** > **[!UICONTROL Private sales]** > **[!UICONTROL Invitation]**) envoie maintenant une demande de POST avec la clé de formulaire et envoie l’invitation avec succès. Auparavant, lorsque vous cliquiez sur ce bouton, ni la méthode de POST HTTP ni la clé de formulaire n’étaient présentes.

<!-- ACP2E-1608 -->

* Les fichiers à zéro octet peuvent désormais être copiés avec succès vers le stockage à distance avec AWS S3.

<!-- AC-7402 -->

* Les utilisateurs administrateurs peuvent désormais ajouter une nouvelle adresse client à partir de l’administrateur lorsque ce client a été créé pour un autre site Web dont l’ID de magasin ne correspond pas à l’ID de site Web. Auparavant, Magento Open Source affichait ce message contextuel : `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- AC-8247 -->

* La page de l’éditeur de blocs CMS affiche désormais la valeur de widget `block_id` correcte. [GitHub-29644](https://github.com/magento/magento2/issues/29644)

### GrapheQL

<!-- AC-8964 -->

* La requête `getCustomerWishlist` n’entraîne plus d’erreur de serveur interne lors de l’interrogation de listes contenant des produits configurables.

<!-- AC-8966 -->

* La requête `customerCart` renvoie désormais toutes les remises appliquées sur les produits groupés comme prévu. Auparavant, le total des remises appliquées à un produit groupé était renvoyé en tant que zéro.

<!-- AC-8964 -->

* La requête `getCustomerWishlist` n’entraîne plus d’erreur de serveur interne lors de l’interrogation de listes contenant des produits configurables.

<!-- AC-9147 -->

* La déclaration de l’indicateur `is_subscribed`, de son résolveur, du cache et des tests associés a été déplacée du module `CustomerGraphQl` vers le module `NewsletterGraphQl`.

<!-- AC-9362 -->

* La mutation `addProductsToCart` ne signale plus d’erreurs sans rapport dans les `user_errors`. Auparavant, les erreurs liées au panier étaient incluses dans `user_errors` avec les erreurs d’opération attendues. [GitHub-37908](https://github.com/magento/magento2/issues/37908)

<!-- ACP2E-2119 -->

* Le filtre de produit de requête `products` peut désormais renvoyer des résultats de correspondance partielle ainsi que des correspondances complètes. Le nouvel attribut `match_type` (PARTIAL, FULL) prend en charge la spécification du type de correspondance. Auparavant, la requête renvoyait uniquement les correspondances complètes.

<!-- ACP2E-2155 -->

* Mutex a été ajouté à la requête `addConfigurableProductsToCart` pour empêcher les conditions de concurrence lors d’une mise à jour par des requêtes simultanées. Auparavant, lorsqu’un commerçant envoyait deux demandes parallèles pour ajouter le même produit configurable à un panier, deux articles distincts avec le même SKU de produit étaient ajoutés. [GitHub-37847](https://github.com/magento/magento2/issues/37847)

<!-- ACP2E-2201 -->

* L’agrégation des produits dans les réponses GraphQL inclut désormais des valeurs non nulles pour les attributs lorsque **[!UICONTROL Use in Layered Navigation]** est défini sur **[!UICONTROL Filterable (no results)]**. Auparavant, seules les valeurs non nulles étaient renvoyées.

<!-- ACP2E-2141 -->

* Amélioration des performances de la requête `setShippingAddressForEstimate` pour les opérations liées au panier qui impliquent des attributs de produit personnalisés. Auparavant, la requête chargeait tous les attributs de produit lorsque les paramètres étaient envoyés en tant que variables.

<!-- ACP2E-2255 -->

* Le champ de `ConfigurableProduct.configurable_options` de requête `products` renvoie désormais uniquement les valeurs qui ont au moins un produit activé. Auparavant, ce champ renvoyait des produits simples désactivés.

<!-- ACP2E-2151 -->

* Amélioration des performances du `GetCategories query` en réduisant le nombre de requêtes SQL inutiles qu’il génère.

<!-- AC-8623 -->

* La gestion des erreurs d’adresse pour les composants de la bibliothèque GraphQL fonctionne désormais comme prévu.

<!-- AC-9058 -->

* La requête `products` renvoie désormais tous les détails de tarification storefront pertinents lorsque la tarification dynamique est définie sur non et que des remises sont appliquées. Auparavant, la fourchette de prix des produits n’était pas renvoyée. [GitHub-35649](https://github.com/magento/magento2/issues/35649)

<!-- ACP2E-1744 -->

* Les noms des transactions GraphQL incluent désormais uniquement les noms des requêtes de niveau supérieur dans les journaux New Relic. Auparavant, les noms de transaction incluaient également des noms de requête secondaires.

<!-- AC-8623 -->

* La gestion des erreurs d’adresse pour les composants de la bibliothèque GraphQL fonctionne désormais comme prévu.

<!-- AC-7430 -->

* Lorsque le paramètre Visibilité d’un produit est défini sur `Catalog`, `products` requêtes sur ce produit résolvent désormais correctement le paramètre. Auparavant, tout filtre fourni était basculé vers le paramètre `Visibility: Catalog`. [GitHub-36591](https://github.com/magento/magento2/issues/36591)

<!-- ACP2E-1769 -->

* La requête `customer` renvoie désormais un champ de `product_sale_price` qui inclut la taxe sur les commandes lorsque le prix du produit a été configuré pour inclure la taxe. [GitHub-36946](https://github.com/magento/magento2/issues/36946)

<!-- ACP2E-1584 -->

* Les attributs de produit de type `DateTime` sont désormais mappés au filtre `FilterRangeTypeInput` dans les requêtes de produits. Auparavant, ces attributs étaient mappés à `FilterMatchTypeInput`. Suite à cette modification, les requêtes qui filtrent sur des attributs `DateTime` nécessitent des valeurs `from` et `to` au lieu de valeurs correspondantes.

<!-- ACP2E-1552 -->

* La requête `customer` renvoie désormais uniquement les avis clients liés à une vue de magasin spécifique, comme prévu, lorsqu’elle est filtrée par ID de magasin.

<!-- AC-7544 -->

* La requête `categories` ne renvoie plus d’erreur lorsque la valeur de réponse `items.redirect_code` contient une valeur nulle. [GitHub-36675](https://github.com/magento/magento2/issues/36675)

<!-- ACP2E-1486 -->

* La mutation `changeCustomerPassword` déclenche désormais l’e-mail comme prévu après la réinitialisation réussie d’un mot de passe.

<!-- ACP2E-1494 -->

* Les requêtes `urlResolver` et `route` renvoient désormais un résultat lorsque le `Target Path` de réécriture d’URL est une URL absolue. Auparavant, la requête `urlResolver` renvoyait la valeur NULL lorsque vous l’utilisiez pour récupérer les données de redirection.

<!-- AC-7979 -->

* La requête `products` renvoie désormais des libellés corrects. [GitHub-29635](https://github.com/magento/magento2/issues/29635)

<!-- ACP2E-1315 -->

* La `categoryList` requête renvoie maintenant une section remplie `product` du bloc pour les `options` produits enfants des produits groupés, comme prévu. Auparavant, aucune information sur les produits enfants du lot n’était renvoyée.

<!-- AC-7114 -->

* La `route` requête renvoie maintenant les itinéraires pour les catégories et les produits comme prévu sans erreur interne du serveur. [GitHub-36544](https://github.com/magento/magento2/issues/36544)

<!-- ACP2E-1652 -->

* La `products` requête récupère désormais des `url_key` valeurs lorsque plusieurs catégories sont sélectionnées.

<!-- LYNX-17 -->

* `products` requêtes renvoient désormais des agrégations uniquement pour les produits affectés au catalogue partagé spécifié.

<!-- AC-7974 -->

* Les noms des transactions ont été ajoutés aux transactions New Relic GraphQL. [GitHub-36874](https://github.com/magento/magento2/issues/36874)

<!-- AC-6680 -->

* La `OptionValueProvider` méthode class `get()` renvoie désormais une valeur d’option d’attribut basée sur l’élément donné, `option_id` comme prévu. Auparavant, il renvoyait une erreur. [GitHub-35910](https://github.com/magento/magento2/issues/35910)

<!-- AC-6745 -->

* La `products` requête renvoie maintenant toutes les agrégations (filtres) disponibles et leurs étiquettes correctement traduites. Auparavant, les libellés d’agrégation des prix et des catégories n’étaient pas traduits comme prévu. [GitHub-36140](https://github.com/magento/magento2/issues/36140)

<!-- AC-6666 -->

* Vous pouvez désormais utiliser un `ProductCard` de fragment lors de l’interrogation de `related_products`, `upsell_products` et `crossell_products` sur `ProductInterface`. [GitHub-29769](https://github.com/magento/magento2/issues/29769)

<!-- AC-7014 -->

* La requête `products` renvoie désormais les produits associés, de montée en gamme et de vente croisée dans l’ordre dans lequel ils ont été enregistrés. [GitHub-36461](https://github.com/magento/magento2/issues/36461)

<!-- AC-8573 -->

* Les requêtes GraphQL renvoient désormais les données des produits associés, triées par position. [GitHub-33010](https://github.com/magento/magento2/issues/33010)

<!-- AC-8542 -->

* `category_url_path` a été ajouté à `ProductAttributeFilterInput`, qui prend en charge la demande de tous les produits d’une catégorie dans une seule requête. [GitHub-32460](https://github.com/magento/magento2/issues/32460)

<!-- AC-821 -->

* Correction d’une erreur dans laquelle la méthode qui définit le magasin actuel dans une mutation GraphQL exécutée avant la méthode qui gère la validation. [GitHub-31336](https://github.com/magento/magento2/issues/31336)

### Image

<!-- ACP2E-1353 -->

* Le formulaire de chargement de l’icône Admin favicon prend désormais en charge les types de fichiers `.ico`. [GitHub-34858](https://github.com/magento/magento2/issues/34858)

### Importer/exporter


<!-- ACP2E-2261 -->

* Le processus d’importation de produit analyse désormais les valeurs avec le séparateur correct. Auparavant, le processus d’importation utilisait l’opérateur de barre verticale (« | ») pour analyser les valeurs à sélection multiple jusqu’à ce que le séparateur de valeurs déterminé ne soit pas égal à la valeur par défaut. Le processus d’importation a ensuite échoué.

<!-- ACP2E-2490 -->

* Les redirections 301 sont désormais automatiquement créées lorsque les valeurs `URL Key` sont mises à jour par l’importation d’un fichier CSV.

<!-- ACP2E-2129 -->

* Les taux de la table d’expédition sont désormais mis à jour comme prévu dans le fichier CSV d’importation des taux de la table. Le fichier de chargement du taux de table est temporairement stocké jusqu’à l’exécution de la tâche cron du processeur de configuration asynchrone . Cette tâche cron récupère le nouvel emplacement du fichier et le traite en conséquence. Auparavant, les taux de mise à jour des tableaux n&#39;étaient pas mis à jour comme prévu, car le processeur asynchrone recherchait le fichier au mauvais emplacement.

<!-- ACP2E-2298 -->

* La grille Exporter les fichiers affiche désormais tous les fichiers exportés, quel que soit l’horodatage. Auparavant, la grille n’affichait pas tous les fichiers exportés qui avaient la même date et heure. [GitHub-36951](https://github.com/magento/magento2/issues/36951)

<!-- ACP2E-2028 -->

* Les produits dotés d’options personnalisables peuvent désormais être importés avec succès. Auparavant, les données des options étaient perdues pendant l’importation. [GitHub-37598](https://github.com/magento/magento2/issues/37598)

<!-- ACP2E-2214 -->

* Les caractères spéciaux des fichiers CSV exportés sont maintenant représentés comme prévu dans Excel. [GitHub-37921](https://github.com/magento/magento2/issues/37921)

<!-- ACP2E-2301 -->

* L’importation des sources de stock et des adresses client à l’aide de cette **[!UICONTROL Customers and Addresses (single file)]** option se termine désormais avec succès.

<!-- ACP2E-1930 -->

* L’importation de produits n’échoue plus en raison d’un manque de mémoire. Auparavant, l’importation d’un nombre illimité de produits dans une base de données contenant déjà environ dix millions de produits échouait en raison d’un manque de mémoire.

<!-- AC-9116 -->

* Les contrôles de validation interrompent désormais le processus d’importation comme prévu lorsqu’il n’y a aucune donnée valide à importer et Magento Open Source affiche désormais cette erreur : `There are no valid rows to import`. Auparavant, la validation réussissait dans ces conditions, mais le processus d’importation échouait avec le message suivant : `entity values are mixed`. [GitHub-32905](https://github.com/magento/magento2/issues/32905)

<!-- ACP2E-1754 -->

* L’importation de clés d’URL avec le même produit ne remplace ni ne supprime les clés existantes d’affichage de magasin par défaut. Les réécritures d’URL ne sont désormais régénérées pour les vues de magasin que lorsqu’il n’existe aucune valeur de `url_key` remplacée. Auparavant, l’importation de réécritures d’URL avec la même clé URL remplaçait la clé d’URL d’affichage de magasin par défaut existante. (`key_store` réécritures d’URL ont été supprimées, mais la réécriture d’URL au niveau d’affichage par défaut du magasin pour le produit était toujours définie sur `key_store`.)

<!-- ACP2E-1875 -->

* Le nombre de produits ne change plus de manière inattendue pendant l’importation. Le vidage du cache est désormais reporté jusqu’à la fin du processus d’importation.

<!-- ACP2E-1813 -->

* L’état des actions d’importation planifiées représente désormais avec précision le succès ou l’échec de l’opération d’importation. Auparavant, toutes les actions étaient consignées comme ayant réussi.

<!-- AC-7039 -->

* Magento Open Source prend désormais en compte le paramétrage lors de l’import **[!UICONTROL Disable Automatic Group Change Based on VAT ID]** des enregistrements client. Auparavant, la `disable_auto_group_change` valeur des fichiers d’importation était ignorée. [GitHub-36409](https://github.com/magento/magento2/issues/36409)

<!-- AC-965 -->

* `Magento\Framework\Convert\Excel`gère désormais les nombres précédés d’un espace. Le fichier XML Excel code désormais les champs sous la forme d’un `String`. Auparavant, le rédacteur Excel codait ces valeurs en tant que `number`, ce qui générait des fichiers non valides. [GitHub-33422](https://github.com/magento/magento2/issues/33422)

<!-- ACP2E-1641 -->

* Les commerçants peuvent désormais spécifier le paramètre régional dans lequel les données d’importation sont présentées et la manière dont les validateurs de données doivent analyser ces données. Si aucune valeur de paramètre régional n’est spécifiée, Magento Open Source utilise le paramètre régional de configuration par défaut (et non la vue de magasin par défaut) pour analyser les données. Dans l’administration, les processus d’importation et d’exportation continuent d’utiliser les paramètres régionaux de l’interface utilisateur d’administration pour importer, analyser et formater les données, respectivement.

<!-- ACP2E-1847 -->

* L’importation de produits avec des attributs de `country_of_manufacture` créés par un utilisateur administrateur avec un paramètre régional différent de celui de l’utilisateur administrateur qui importe les produits ne renvoie plus d’erreur de validation. Auparavant, cette opération d’importation pouvait entraîner une erreur de validation sur l’attribut `country_of_manufacture`.

<!-- ACP2E-1994 -->

* Les produits exportés ont maintenant la valeur correcte `manage_stock` lorsque la `use_config_manage_stock` valeur est `1`égale à . Auparavant, cette valeur par défaut était incorrecte.

<!-- ACP2E-1620 -->

* Magento Open Source affiche désormais un message d’erreur informatif dans la grille d’importation planifiée lorsqu’une image n’est pas importée avec succès lors d’une opération d’importation planifiée. Auparavant, aucun message d’erreur ne s’affichait.

<!-- ACP2E-1565 -->

* Le processus d’importation de produits n’est plus interrompu lorsque des images de produits sont manquantes. Auparavant, lorsqu’une image de produit était manquante lors de l’importation d’un service tiers à l’aide d’un fichier CSV, Magento Open Source affichait cette erreur : `Maximum error count has been reached or a system error is occurred!`.

<!-- ACP2E-1391 -->

* Le processus d’importation de produits ne renvoie plus d’erreur de validation lorsqu’une valeur d’attribut dans `configurable_variations` la colonne contient une virgule.

<!-- ACP2E-1377 -->

* Le décodage a été exclu du processus d’exportation. Le texte du fichier d’exportation CSV reste inchangé après l’importation. Par conséquent, la description ne change pas après la réimportation. Auparavant, les balises HTML étaient supprimées dans l’éditeur Page Builder après l’exportation et l’importation du produit.

<!-- ACP2E-1451 -->

* Les configurations non par défaut (portée du site web ou du magasin) ajoutées en tant que variables d’environnement n’interrompent plus le processus de `app:config:import` avec une erreur de récursivité.

<!-- ACP2E-1569 -->

* Les indexeurs de prix et de recherche catalogue du mode Mise à jour lors de l’enregistrement ne sont plus invalidés après l’importation. Auparavant, la version du document de l’indexeur d’Elasticsearch était modifiée lors de l’importation de produits nouveaux et existants.

<!-- ACP2E-1482 -->

* Les rapports de produit sont désormais exportés vers le répertoire `var`. Auparavant, ces rapports étaient exportés vers le répertoire racine du document, qui est un répertoire en lecture seule dans les instances cloud.

<!-- ACP2E-1736 -->

* Les champs d’adresse client à sélection multiple vides n’interrompent plus ou n’interrompent plus le processus d’exportation.

### Index

<!-- AC-10911 -->

* Amélioration des performances de l’indexeur  `catalogrule_product` lorsqu’aucune règle de catalogue n’est définie. [GitHub-34784](https://github.com/magento/magento2/issues/34784)

<!-- ACP2E-2204 -->

* Les problèmes liés aux performances de l&#39;indexeur des prix ont été résolus. Les performances de l’indexeur ne se dégradent plus progressivement. L&#39;indexeur a été refactorisé pour augmenter la vitesse de traitement de l&#39;indexeur en modifiant la façon dont les tables temporaires sont créées. Ces tables temporaires sont maintenant recréées au lieu d’être traitées par des instructions DELETE plus longues.

<!-- ACP2E-2033 -->

* Les performances de l’indexeur de prix ont été améliorées. Une indication d’index a été ajoutée à l’indexeur de prix pour améliorer les temps d’exécution des requêtes MySQL déclenchées lors de l’indexation.

<!-- AC-9223 -->

* Tous les indexeurs utilisent désormais les mêmes couleurs pour représenter leur état. [GitHub-34648](https://github.com/magento/magento2/issues/34648)

<!-- ACP2E-1697 -->

* Les performances de l’indexeur de produit de règles de catalogue dans les déploiements où les règles ne sont pas affectées à tous les sites web ont été améliorées.

<!-- ACP2E-1401 -->

* La création d’un type de produit personnalisé lorsque les indexeurs sont définis sur **[!UICONTROL Update on schedule]** n’entraîne plus l’échec de la tâche de mise à jour de l’index `cron` . [GitHub-36471](https://github.com/magento/magento2/issues/36471)

<!-- AC-6816 -->

* `bin/magento indexer:reindex customer_grid` ne fonctionne plus avec une erreur MySQL lorsque la grille client inclut des attributs client personnalisés nouvellement créés. [GitHub-36233](https://github.com/magento/magento2/issues/36233)

<!-- AC-8076 -->

* La modification du mode d’indexation pour plusieurs indexeurs (c’est-à-dire un changement de mode d’indexation d’action de masse) modifie désormais le mode d’un indexeur uniquement lorsque le mode actuel diffère de celui appliqué. Cela améliore les performances en évitant les déplacements inutiles vers la base de données. [GitHub-36823](https://github.com/magento/magento2/issues/36823)

<!-- AC-6934 -->

* L’indexation des produits avec de nombreuses options d’attribut a été améliorée. [GitHub-36386](https://github.com/magento/magento2/issues/36386)

### Infrastructure

<!-- AC-10866 -->

* Ajout d&#39;une instruction `return` manquante au contrôleur d&#39;activation de l&#39;utilisation par l&#39;administrateur. Auparavant, il n&#39;y avait pas d&#39;instruction `return` et le contrôleur de `FrontendController` classe était mal géré. [GitHub-31374](https://github.com/magento/magento2/issues/31374)

<!-- AC-9390 -->

* Remplacement de MySQL `CREATE TEMPORARY TABLE ... LIKE` par `CREATE TEMPORARY TABLE` refactorisé pour assurer la conformité à MySQL 8.x. [GitHub-37926](https://github.com/magento/magento2/issues/37926)

<!-- ACP2E-1462 -->

* Magento Open Source n’inclut plus le chemin d’accès complet à la racine du serveur dans le message d’erreur qu’il affiche lorsqu’une requête HTTP incorrecte a été envoyée au serveur. Seules les chaînes sont désormais transmises à la méthode `explode` en tant que deuxième argument.

<!-- AC-8384 -->

* `restricted_classes.php` a remplacé `Zend_Validate_File_Upload`. Auparavant, le programme de validation se bloquait lors du chargement d’un fichier d’importation plus volumineux que la valeur configurée dans `php.ini `. [GitHub-37281](https://github.com/magento/magento2/issues/37281)

<!-- AC-7093 -->

* Le moteur de modèle d’e-mail peut désormais traiter correctement certaines directives imbriquées (par exemple, `{{if}}{{depend}}...{{/depend}}{{/if}}`). [GitHub-36438](https://github.com/magento/magento2/issues/36438)

<!-- AC-7920 -->

* `product` requêtes avec des données d’agrégation renvoient désormais les valeurs de libellé correctes pour les attributs de produit de type booléen. [GitHub-29123](https://github.com/magento/magento2/issues/29123)

<!-- AC-2618 -->

* Ajout des régions ukrainiennes au tableau `directory_country_region`. [GitHub-35187](https://github.com/magento/magento2/issues/35187)

<!-- https://github.com/magento/magento2/pull/29173 -->

* Les fichiers CSS ne sont plus corrompus lors de la fusion lorsque `var/tmp` et `pub/static` se trouvent sur des systèmes de fichiers différents et que **[!UICONTROL CSS Merging Enabled]** est activé. Des fichiers temporaires ont été créés dans le même répertoire statique que le fichier cible pour s’assurer que les deux fichiers se trouvent sur le même système de fichiers. Par conséquent, l’appel pour le renommer est atomique. [GitHub-29172](https://github.com/magento/magento2/issues/29172)

<!-- https://github.com/magento/magento2/pull/36769 -->

* Correction d’une erreur potentielle lors de l’appel d’une fonction membre `getId()` sur `int`, qui déclenchait parfois une exception lorsqu’un client était affiché dans l’interface d’administration.

<!-- https://github.com/magento/magento2/pull/34092 -->

* Les vérifications de type sont désormais appliquées pour le type de tableau dans le processeur de configuration du thème de conception. [GitHub-34440](https://github.com/magento/magento2/issues/34440)

### Gestion des stocks

<!-- ACP2E-1883 -->

* Les produits repassent désormais automatiquement au statut En stock après un avoir qui inclut un retour de la quantité de produit. Auparavant, si un produit était en rupture de stock, mais qu&#39;un avoir renvoyait du stock de ce produit, les commerçants devaient modifier manuellement le statut du stock du produit.

<!-- ACP2E-2123 -->

* Amélioration des performances de l’indexeur d’inventaire en mode asynchrone en supprimant les requêtes redondantes pour réindexer les éléments sources par défaut.

<!-- AC-7023 -->

* Correction de problèmes liés à l’indexeur d’inventaire qui affectaient la précision de l’inventaire du stock de storefront des produits configurables. [GitHub-36421](https://github.com/magento/magento2/issues/36421)

<!-- ACP2E-2082 -->

* La mise à jour des articles d’origine de stock via REST `V1/inventory/source-items` fonctionne désormais plus rapidement. L’appel ne déclenche plus de réindexation ou d’opération de nettoyage du cache sur les produits d’inventaire inchangés.

<!-- ACP2E-1842 -->

* Le `V1/products/<sku>` REST déclenche désormais une réindexation automatique des stocks lors de la mise à jour de l’état des stocks d’un produit. Auparavant, une réindexation de stock n’était pas déclenchée pour le produit mis à jour.

<!-- ACP2E-1653 -->

* Le statut du stock de produits configurables est désormais mis à jour sur le storefront comme prévu lorsque les produits enfants sont mis à jour par `V1/inventory/source-items`.

<!-- ACP2E-2114 -->

* L’appel REST `POST <store_code>/V1/inventory/source-items` valide désormais la payload pour les espaces blancs dans les éléments sources d’inventaire renvoyés et envoie un message d’erreur sur la validation, le cas échéant.

<!-- ACP2E-2072 -->

* Les commerçants peuvent désormais informer les acheteurs qu’une commande est prête à être retirée lorsque le paramètre **[!UICONTROL No Manage Stock]** est activé pour un produit. Auparavant, lorsque ce paramètre était activé, Magento Open Source affichait le message d’erreur suivant : `Your order is not ready for pickup`.

<!-- ACP2E-2227 -->

* Les commerçants peuvent désormais créer un avoir pour les commandes à partir desquelles un produit simple associé à un produit configurable a été supprimé. Auparavant, les commerçants ne pouvaient pas créer l’avoir, et Magento Open Source a généré une exception `TypeError`.

<!-- ACP2E-2310 -->

* Le nombre de sources de grille d’administration renvoie désormais des enregistrements valides après l’application d’un filtre. Auparavant, la méthode `getSourcesCount` renvoyait toujours le nombre total de sources après l’application d’un filtre.

<!-- ACP2E-1364 -->

* La page Catégorie ne redirige plus vers le tableau de bord d’administration lorsque vous triez des produits à l’aide de l’option « Déplacer les stocks vers le bas ». Le problème a été résolu en plaçant l&#39;instruction de jointure SQL dans l&#39;instruction conditionnelle uniquement après s&#39;être assuré qu&#39;elle n&#39;est pas déjà incluse. Auparavant, la page était redirigée vers le tableau de bord d’administration avec le message : `Invalid security or form key. Please refresh the page`.

<!-- ACP2E-1488 -->

* La `AUTO_INCREMENT` de la table `inventory_source_item` n’est plus augmentée à chaque opération de `UPDATE`. Auparavant, chaque mise à jour augmentait la `AUTO_INCREMENT` de ce tableau, ce qui entraînait finalement l’exclusion de la valeur `AUTO_INCREMENT` lors de l’ajout d’un nouvel enregistrement au `inventory_source_item table`. Par conséquent, les utilisateurs administrateurs ont reçu l’erreur suivante lorsqu’ils ont essayé de créer un nouveau produit à partir de l’administrateur : `Numeric value out of range...`.

<!-- ACP2E-1378 -->

* Les utilisateurs administrateurs peuvent désormais ajouter un produit à un panier client à partir de l’administration pour une portée d’affichage de magasin particulière avec Inventory management. Auparavant, l’ID de stock n’était pas déterminé correctement et les utilisateurs administrateurs ne pouvaient pas ajouter le produit au panier du client.

<!-- ACP2E-1399 -->

* La synchronisation entre l&#39;inventaire et le catalogue ne repose plus sur le paramètre de configuration **[!UICONTROL Synchronize with Catalog]**. Auparavant, les produits n’étaient correctement synchronisés que lorsque ce paramètre était activé.

<!-- ACP2E-1382 -->

* Magento Open Source ne renvoie plus d’erreur après le rechargement de la page lorsqu’un acheteur déduit une quantité de produit d’une commande qui se situe dans la plage de produits disponibles lors de la sélection de la source d’expédition.

<!-- ACP2E-1259 -->

* Le statut du stock de produits configurables est désormais correctement mis à jour lorsqu&#39;un produit configurable et sa valeur de `Stock Availability` de produits enfants sont mis à jour par une mise à jour en masse du stock. Auparavant, vous ne pouviez pas renvoyer en stock un produit configurable et ses produits enfants par mise à jour en masse.

<!-- ACP2E-2096 -->

* Le type de données pour les sources non par défaut a été mis à jour à `DECIMAL (12, 4)` pour prendre en charge jusqu’à huit chiffres entiers, ce qui correspond à la limite implémentée pour le stock par défaut. Cette valeur est désormais synchronisée avec les pages Admin Ajouter et modifier des produits , qui prennent en charge la validation des entrées pour un maximum de huit chiffres pour tous les types de sources d’inventaire. Auparavant, l’entrée du champ (pour les sources autres que celles **[!UICONTROL Quantity]** par défaut) était prise en charge jusqu’à six chiffres uniquement.

<!-- ACP2E-2054 -->

* Les sources par défaut et les autres sources affichent désormais les informations correctes pour la quantité vendable du produit lorsqu’une source autre que celle par défaut commandée dans la vitrine est traitée pour expédition. Auparavant, Magento Open Source affichait un état de stock incorrect pour les sources de produits.

<!-- ACP2E-1950 -->

* `\Magento\Catalog\Model\Product::getIsSalable()` renvoie désormais l’état du stock selon le périmètre défini dans l’objet de produit (`\Magento\Catalog\Model\Product::getStoreId()`). Auparavant, l’état `getIsSalable()` des stocks renvoyait en fonction de la portée actuelle, quel que soit l’objet du produit.

### Journalisation

<!-- ACP2E-1385 -->

* Les utilisateurs administrateurs peuvent désormais consulter les journaux des actions en masse créées par les intégrations dans la section Journal des actions en masse de l’administrateur.

### Login

<!-- ACP2E-1521 -->

* La réinitialisation d’un mot de passe dans un navigateur et la connexion ultérieure via un autre navigateur n’entraînent plus d’exception. [GitHub-36447](https://github.com/magento/magento2/issues/36447)

<!-- ACP2E-1332 -->

* Les clients sont maintenant redirigés vers la page de connexion après l’activation d’un compte comme prévu. Auparavant, les clients étaient automatiquement connectés.

### Newsletter

<!-- AC-10806 -->

* Commerce vérifie désormais si la fonctionnalité d’abonnement à la newsletter est activée avant d’accepter de nouveaux abonnés à une newsletter. [GitHub-33040](https://github.com/magento/magento2/issues/33040)

### Commandes

<!-- AC-8857 -->

* Les produits déplacés du panier Admin vers la liste des articles à commander sont désormais supprimés comme prévu du panier. [GitHub-37538](https://github.com/magento/magento2/issues/37538)

<!-- ACP2E-2535 -->

* Les commerçants peuvent maintenant créer des avoirs comme prévu pour le retour partiel des commandes qui ont été payées en partie par des points de récompense. Auparavant, lorsqu&#39;un commerçant créait un retour partiel, le statut de la commande était incorrectement identifié comme fermé, et la page de commande Admin n&#39;affichait pas les options d&#39;avoir.

<!-- ACP2E-2583 -->

* Magento Open Source applique désormais le montant de remise correct aux commandes partiellement annulées. Auparavant, le montant de la remise calculé dans la colonne `base_discount_cancelled` était incorrectement calculé lorsqu’une commande était modifiée. La prise en charge des valeurs négatives a été ajoutée aux factures pour les commandes avec remise.

<!-- ACP2E-2412 -->

* Magento Open Source trie désormais les attributs d’adresse client personnalisés en fonction de l’ordre de tri fourni lorsque l’utilisateur administrateur a créé l’ordre dans l’Administration.

<!-- ACP2E-2400 -->

* La page Admin - Grille des commandes client se charge désormais comme prévu lorsqu’un commerçant lance une recherche à partir de cette page. Previously, when a merchant tried to search orders from this table, the page froze, and Magento Open Source displayed a `Request-URI Too Long` error in the browser console.

<!-- ACP2E-2213 -->

* Amélioration des performances de la méthode `OrderRepository::get()` en réduisant le nombre de fois où elle charge une commande à partir de la base de données. Auparavant, cette méthode chargeait une commande plusieurs fois. [GitHub-36636](https://github.com/magento/magento2/issues/36636)

<!-- ACP2E-1918 -->

* Les commerçants peuvent désormais générer des avoirs pour les commandes contenant certains articles dont le total est nul lorsque d&#39;autres articles de commande peuvent être remboursés. Auparavant, les commerçants ne pouvaient pas effectuer plusieurs remboursements lorsqu’un client bénéficiait d’une remise de 100 % sur certains articles de la commande.

<!-- AC-8254 -->

* Les liens entre les produits enfants et parents sont désormais affichés sur la page de commande lors de la réorganisation du produit enfant à partir de l’administrateur. [GitHub-37028](https://github.com/magento/magento2/issues/37028)

<!-- ACP2E-1341 -->

* L’émulation commence désormais pendant les appels `send()` une fois qu’elle est terminée pendant l’appel `getInfoBlockHtml()` et qu’aucune erreur n’est consignée. Auparavant, le fichier `system.log` était inondé avec cette erreur : `main.ERROR: Environment emulation nesting is not allowed`. [GitHub-35603](https://github.com/magento/magento2/issues/35603)

<!-- ACP2E-1918 -->

* Les commerçants peuvent désormais générer des avoirs pour les commandes contenant certains articles dont le total est nul lorsque d&#39;autres articles de commande peuvent être remboursés. Auparavant, les commerçants ne pouvaient pas effectuer plusieurs remboursements lorsqu’un client bénéficiait d’une remise de 100 % sur certains articles de la commande.

<!-- AC-8254 -->

* Les liens entre les produits enfants et parents sont désormais affichés sur la page de commande lors de la réorganisation du produit enfant à partir de l’administrateur. [GitHub-37028](https://github.com/magento/magento2/issues/37028)

<!-- AC-1756 -->

* La section d’en-tête de la page de commande contient désormais les informations attendues sur la facture envoyée, le mémo de crédit et l’expédition. [GitHub-27474](https://github.com/magento/magento2/issues/27474)

<!-- AC-7632 -->

* Les notes de crédit pour les commandes qui ne contiennent qu’un seul produit configurable sont maintenant générées correctement. Auparavant, la `isLast()` fonction ne retournait `true` pas comme prévu. [GitHub-36722](https://github.com/magento/magento2/issues/36722)

<!-- ACP2E-1961 -->

* Amélioration des performances de la `aggregate_sales_report_bestsellers_data` tâche cron en optimisant la requête de données principale.

<!-- ACP2E-1714 -->

* Le statut de la commande est maintenant correct lorsqu’un remboursement partiel a été effectué pour une commande contenant des produits groupés. Auparavant, le statut de la commande était répertorié comme terminé après l’émission d’un remboursement partiel, même si la commande restante n’était pas complète. [GitHub-37377](https://github.com/magento/magento2/issues/37377)

<!-- ACP2E-1514 -->

* Les acheteurs ne peuvent plus commander un produit à l’aide d’un prix personnalisé lorsqu’une commande est générée pour la première fois à partir de l’administrateur à l’aide du prix personnalisé unique. Auparavant, si une commande contenait un article avec des prix personnalisés, ce prix personnalisé était appliqué pour les autres commandes passées avec la fonctionnalité de réapprovisionnement.

<!-- ACP2E-1421 -->

* Les acheteurs ne peuvent plus enregistrer les statuts de commande incorrects sur la page de commande. L’état de la commande n’est plus modifié de Terminé à Traitement lorsqu’un article est expédié. Auparavant, Magento Open Source ne vérifiait pas l’état actuel de la commande avant d’enregistrer l’état de la commande après qu’un acheteur ait entré un commentaire. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1367 -->

* La grille des commandes client est maintenant synchronisée de manière asynchrone avec toutes les commandes, comme prévu. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1197 -->

* La fonctionnalité de filtrage par date d’achat de la section Commandes client de la page commandes fonctionne désormais comme prévu. Auparavant, une erreur JavaScript se produisait lorsque la logique de conversion de fuseau horaire générait une erreur lorsque le même fuseau horaire était fourni à la méthode.

<!-- ACP2E-1294 -->

* Le tableau de bord Admin affiche désormais les statistiques de commande correctes lors du premier chargement. Auparavant, le tableau de bord affichait des informations de commande incorrectes, mais affichait les informations correctes une fois la période mise à jour.

<!-- ACP2E-1762 -->

* Les utilisateurs administrateurs sont maintenant redirigés, comme prévu, vers la page de commande après avoir sélectionné une vue de magasin lors de la création d’une nouvelle commande à partir de l’administrateur.

<!-- ACP2E-1418 -->

* Le `GET V1/orders/<OrderID>` point de terminaison renvoie désormais des informations sur les produits configurables et simples de la commande, quel que soit l’état du stock des produits simples. Les utilisateurs administrateurs peuvent passer des commandes maintenant uniquement si les articles sélectionnés (produits) sont en stock ou vendables. Auparavant, cette API renvoyait uniquement des informations sur les produits qui étaient en stock.

<!-- AC-7901 -->

* La page avoir ne se bloque plus lorsque la livraison gratuite est activée lorsque le prix d&#39;expédition inclut la taxe et que les calculs de taxe sont appliqués après les remises. Auparavant, Magento Open Source a généré une exception `Division by zero`. [GitHub-36800](https://github.com/magento/magento2/issues/36800)

<!-- AC-1342 -->

* L’utilisation du point de terminaison pour publier un commentaire sur une commande sans indiquer l’état de la `rest/V1/orders/{id}/comments` commande n’affecte plus l’affichage de la commande. Auparavant, l’état de la commande était enregistré comme NULL dans les `sales_order` tableaux et `sales_order_grid` et ni la page Mes commandes ni la grille de commande Admin n’affichaient la commande. [GitHub-34180](https://github.com/magento/magento2/issues/34180)

### Créateur de pages

<!-- AC-8777 -->

* Les images conservent désormais les proportions correctes lorsqu’elles sont redimensionnées dans le créateur de pages. [GitHub-37493](https://github.com/magento/magento2/issues/37493)

<!-- AC-10919 -->

* Page Builder affiche désormais les messages d’erreur dont vous avez besoin lorsque vous essayez de charger une image d’une taille supérieure à la taille de fichier maximale spécifiée. Auparavant, Commerce affichait un message d’alerte contextuel pour les fichiers image chargés dont la taille était inférieure au maximum spécifié.

<!-- ACP2E-1992 -->

* Les curseurs de produit de page CMS incluent désormais les produits parents de tous les produits enfants qui ont été sélectionnés pour inclusion dans le curseur. Auparavant, les produits parents étaient exclus du curseur.

<!-- ACP2E-2115 -->

* Le contenu converti en HTML est maintenant affiché dans les modèles d’e-mail comme prévu lorsque le `Magento_AsyncConfig` module est désactivé. Auparavant, les modèles de courrier électronique contenaient uniquement du code HTML brut.

<!-- AC-9128 -->

* Les performances des opérations d’enregistrement de Page Builder dans le navigateur Chrome ont été améliorées.

<!-- ACP2E-1564 -->

* L’ajout d’un produit au panier à partir du carrousel Page Builder ne duplique plus la quantité d’articles des pages avec deux widgets différents affichant les mêmes produits.

<!-- ACP2E-1542 -->

* Page Builder n’ajoute plus l’attribut `tabindex` HTML aux balises de lien hypertexte `a` lorsque vous modifiez un lien hypertexte, puis enregistrez un modèle.

<!-- ACP2E-1444 -->

* Le widget de produits et l’aperçu de Page Builder gèrent désormais correctement les caractères spéciaux HTML. Auparavant, le widget de produit n’affichait pas correctement les SKU qui contenaient le caractère `&`.

<!-- ACP2E-1441 -->

* Le contenu de l’élément de texte Page Builder est désormais mis à jour comme prévu lorsque vous sélectionnez et mettez à jour le bloc de contenu complet en mode Aperçu.

<!-- ACP2E-1362 -->

* La copie et le collage de texte d’un éditeur de texte Page Builder vers un autre fonctionnent désormais comme prévu. Auparavant, la page dans laquelle vous tentiez de coller du texte n’avait pas pu être enregistrée et Magento Open Source affichait cette erreur de console : `[ERROR] Page Builder was rendering for 5 seconds without releasing locks.`.

<!-- ACP2E-1568 -->

* Le type de contenu `column-block` de Page Builder créé dans les anciennes versions de Page Builder s’affiche désormais correctement.

<!-- ACP2E-1234 -->

* Le filtrage de la description des métadonnées du produit lors de la création du produit à partir de l’administrateur a été amélioré. Auparavant, si Page Builder était activé, la description des métadonnées du produit était générée en fonction du masque par défaut` {{name}} {{description}}` . Le masque de méta description du produit par défaut est désormais composé de `{{name}}`. [GitHub-36107](https://github.com/magento/magento2/issues/36107)

<!-- ACP2E-1758 -->

* L’ajout d’un bloc dynamique sans contenu ne déclenche plus d’erreur.

<!-- AC-6645 -->

* Les problèmes d’affichage des colonnes dans le contenu de Page Builder ont été résolus. Auparavant, `column-line` contenu de type de contenu n’était pas rendu. [GitHub-3949](https://github.com/magento/pwa-studio/issues/3949)

### Paiement

<!-- ACP2E-2533 -->

* Magento Open Source gère désormais correctement les erreurs 502 de PayPal en empêchant la création de commande lorsque cette erreur se produit. Auparavant, les commandes étaient toujours créées malgré une erreur 502 de PayPal, ce qui entraînait des incohérences entre les enregistrements Magento Open Source et ceux de PayPal.

<!-- AC-9142 -->

* Les transactions PayPal Express Checkout incluent désormais des SKU de produits enfants et des titres de produits complets. Le fichier `Magento/Paypal/Model/Cart.php` collecte désormais les SKU de produit enfants avec leur titre de produit parent afin d’identifier le titre du produit avec le SKU enfant. [GitHub-36808](https://github.com/magento/magento2/issues/36808)

<!-- ACP2E-1964 -->

* Le paramètre de configuration **[!UICONTROL Card Security Code Does Not Match]** est maintenant traité comme prévu pendant le processus de paiement de Payflow Pro. Auparavant, ce processus d’évaluation n’était jamais terminé, ce qui bloquait le passage en caisse.

<!-- ACP2E-1215 -->

* L’option Mode de paiement du coffre n’apparaît plus dans le workflow de passage en caisse de l’administrateur lorsque l’acheteur ne dispose pas d’un jeton de coffre. [GitHub-36273](https://github.com/magento/magento2/issues/36273)

<!-- ACP2E-1303 -->

* Le bouton **[!UICONTROL Venmo]** peut désormais être masqué lorsque les boutons PayPal sont activés. Auparavant, le bouton **[!UICONTROL Venmo]** ne pouvait pas être supprimé du panier, du mini panier, des détails du produit ou des pages de passage en caisse.

<!-- BUNDLE-3313 -->

* Les acheteurs peuvent désormais sélectionner un mode d’expédition lors de l’application du code de coupon lors de la commande. Auparavant, dans ces conditions, Magento Open Source générait une erreur et affectait un frais d’expédition forfaitaire à la commande.

<!-- BUNDLE-3310 -->

* Les problèmes liés au traitement en storefront des méthodes de paiement PayPal et PayPal ont été résolus.

<!-- BUNDLE-3273 -->

* Correction de problèmes liés aux URL de secours pour les commandes payées avec par les paiements Idéal lorsque le paiement local est activé.

<!-- BUNDLE-3253 -->

* Les acheteurs ne peuvent plus créer une commande PayPal sans ajouter de nom.

#### Braintree

<!-- AC-2901 -->

* Braintree informations de paiement sont désormais enregistrées par magasin et les acheteurs ne voient désormais que les informations de carte enregistrées dans le magasin dans lequel ils effectuent leurs achats. Auparavant, les acheteurs pouvaient voir les informations de carte stockées de tous les magasins lors du paiement. [GitHub-34253](https://github.com/magento/magento2/issues/34253)

<!-- BUNDLE-3304 -->

* Les acheteurs peuvent désormais vérifier une commande envoyée à plusieurs adresses à l’aide d’un mode de paiement Braintree lorsque le coffre pour les paiements par carte est désactivé. [GitHub-37615](https://github.com/magento/magento2/issues/37615)

<!-- BUNDLE-3244 -->

* Les commandes partiellement facturées sont désormais capturées comme prévu dans le bon compte dans les déploiements où les marchands ont deux ID de compte marchand différents pour la même devise dans leur compte Braintree.

<!-- BUNDLE-3250 -->

* Magento Open Source ne renvoie plus d’erreur lors de la création d’une deuxième facture partielle pour une commande payée par Braintree lorsque le **[!UICONTROL Enable Vault for Card Payments]** est activé. Auparavant, lorsqu’un commerçant tentait de créer une seconde facture, Magento Open Source générait cette erreur : `Your payment could not be taken. Please try again or use a different payment method. Payment method token is invalid`.

<!-- ACP2E-1229 -->

* L’option de mode de paiement Braintree Vault n’est plus automatiquement désélectionnée dans le processus de paiement lorsqu’un acheteur met à jour son adresse de facturation. Auparavant, le mode de paiement était désélectionné lorsque l’acheteur désélectionnait le **[!UICONTROL My billing and shipping address are the same]** bouton.

<!-- BUNDLE-3248 -->

* Résolution de problèmes liés à la vérification avec PayPal via Braintree après la mise à niveau à partir d’Adobe Commerce 2.4.5-p2. [GitHub-37242](https://github.com/magento/magento2/issues/37242)

<!-- BUNDLE-3257 -->

* Les numéros de téléphone sont maintenant rendus comme prévu avec les adresses dans les champs d’adresse d’expédition de la fenêtre contextuelle Google Pay. Auparavant, les numéros de téléphone étaient absents.

<!-- BUNDLE-3228 -->

* Les commandes sont maintenant passées avec succès avec Braintree lorsque la réponse Braintree inclut une valeur vide pour `threeDSecureInfo/eciFlag`. Auparavant, une erreur PHP se produisait lors du paiement lorsque cette valeur était vide.

<!-- BUNDLE-3243 -->

* Magento Open Source ne renvoie plus d’erreur lorsqu’un acheteur applique un coupon sur la page de révision de commande lors du paiement avec Google Pay à partir du mini-panier. Auparavant, les acheteurs étaient redirigés vers une page 404.

<!-- BUNDLE-3245 -->

* Les acheteurs peuvent désormais effectuer le paiement à l’aide de Braintree Payments et Magento Open Source 2.4.6 avec ReCAPTCHA v2 ou v3 invisible. [GitHub-37241](https://github.com/magento/magento2/issues/37241)

<!-- BUNDLE-3241 -->

* Les acheteurs ne peuvent plus cliquer sur le bouton pour acheter un produit configurable sans d’abord **[!UICONTROL PayPal]** sélectionner les options requises. Auparavant, les acheteurs pouvaient cliquer sur le **[!UICONTROL PayPal]** bouton et étaient ensuite redirigés vers la page du produit avec une erreur :

<!-- BUNDLE-3148 -->

* Le **[!UICONTROL PayPal]** bouton s’affiche désormais comme prévu sur les pages panier et mini-panier. Auparavant, ce bouton n’était pas affiché sur la page du panier et dupliqué sur la page du mini-panier.

### Performances

<!-- AC-9753 -->

* Les clics multiples dans le menu déroulant d’action en masse de la **page Ventes** > **Commandes** ne génèrent plus plusieurs demandes de POST.  [GitHub-37997](https://github.com/magento/magento2/issues/37997)

<!-- AC-10944 -->

* Seules les réponses `200` ou `404` sont mises en cache lorsqu’un acheteur accède à une page qui déclenche une redirection 301, sauf si l’en-tête de contrôle du cache de la page contient des `private `. Auparavant, un statut HTTP 200 avec `private` dans l’en-tête Cache-Control était mis en cache et un statut HTTP 301 était mis en cache, sauf s’il contenait `private` dans son en-tête Cache-Control. [GitHub-36492](https://github.com/magento/magento2/issues/36492)

<!-- AC-9302 -->

* Suppression de l’inutilisé `Magento\Catalog\Controller\Adminhtml\Product\Initialization\Helper` du `Magento\Catalog\Model\ProductRepository`fichier . Auparavant, `ProductRepository` chargé cet assistant qui est un `Adminhtml` contrôleur. [GitHub-37864](https://github.com/magento/magento2/issues/37864)

<!-- AC-9127 -->

* Amélioration des performances de la vitesse de chargement des pages lorsque de nombreuses options sont ajoutées aux produits groupés. [GitHub-29409](https://github.com/magento/magento2/issues/29409)

<!-- ACP2E-2069 -->

* Le processus d’affectation des produits aux catégories à partir de l’onglet **[!UICONTROL Products in Category]** a été optimisé. Les **[!UICONTROL Assign]** boutons et **[!UICONTROL Remove]** de l’onglet sont maintenant désactivés jusqu’à ce que les **[!UICONTROL Add Product by SKU]** produits soient entièrement chargés dans la grille. Auparavant, les utilisateurs administrateurs ne pouvaient pas ajouter de produits par SKU dans des catalogues contenant des millions de produits enregistrés.

<!-- ACP2E-2098 -->

* Les performances de la mutation `addProductToCart` lors de l’exécution avec de nombreux attributs de produit personnalisés ont été améliorées. Auparavant, lorsque cette mutation était exécutée avec de nombreux attributs de produit (environ 1 000), Magento Open Source tentait de charger tous les attributs de produit.

<!-- ACP2E-1965 -->

* Les problèmes de performances lors du chargement des attributs de produit utilisés par les règles de panier ont été résolus. Seuls les attributs de produit des règles de panier actives sont désormais chargés.

<!-- ACP2E-1864 -->

* La commande `bin/magento setup:perf:generate-fixtures setup/performance-toolkit/profiles/ee/small.xml` s’exécute désormais correctement lorsqu’elle est exécutée plusieurs fois. Auparavant, il générait cette erreur lorsqu’il était exécuté plusieurs fois : `Coupon with the same code already exists`.

### Promotion

<!-- ACP2E-1290 -->

* Les effets de la règle de prix de **[!UICONTROL Fixed amount discount for whole cart]**, lorsqu’elle est appliquée avec la règle de **[!UICONTROL Apply to shipping amount]**, sont désormais répartis proportionnellement entre les produits et les montants d’expédition, comme prévu. Auparavant, les calculs de remise étaient incorrects.

<!-- ACP2E-1300 -->

* Le paramètre **[!UICONTROL Discard Subsequent Rules]** est maintenant appliqué comme prévu. Lorsque ce paramètre est activé, les autres règles de faible priorité ne peuvent être appliquées qu’à un autre produit. [GitHub-35707](https://github.com/magento/magento2/issues/35707)

### reCAPTCHA

<!-- ACP2E-2509 -->

* ReCAPTCHA v3 invisible fonctionne désormais comme prévu pour le bouton de page **[!UICONTROL Sign in]** de paiement. Auparavant, les acheteurs ne pouvaient pas se connecter et Commerce générait des erreurs JavaScript.

<!-- ACP2E-1539 -->

* Le reCAPTCHA Google du workflow de passage en caisse fonctionne désormais comme prévu pour les chèques, les mandats et les modes de paiement personnalisés.

<!-- ACP2E-1311 -->

* Adobe Commerce forms ne peut plus être envoyé avant le chargement de la case à cocher Google ReCAPTCHA .

<!-- ACP2E-1338 -->

* Le widget reCAPTCHA précède maintenant le bouton **[!UICONTROL Place Order]** sur la page de paiement. Auparavant, le widget s’affichait en haut de la page.

### Rapports

<!-- ACP2E-1541 -->

* L&#39;état Commandes (**[!UICONTROL REPORTS]** > **[!UICONTROL Sales]** > **[!UICONTROL Orders]**) inclut désormais les valeurs de commande correctes lorsque les commandes sont générées par des magasins qui utilisent des devises autres que celles définies par défaut. Auparavant, ce rapport incluait des valeurs incorrectes. [GitHub-36742](https://github.com/magento/magento2/issues/36742)

<!-- ACP2E-1477 -->

* Les informations trompeuses figurant dans le formulaire de rapport de commande client ont été révisées pour plus de clarté.

<!-- ACP2E-1435 -->

* Les utilisateurs administrateurs peuvent désormais rechercher des enregistrements dans les e-mails contenant des signes `+` (plus) à partir de la page Rapport sur les paniers abandonnés . [GitHub-36560](https://github.com/magento/magento2/issues/36560)

### Rechercher {#search-heading}

<!-- ACP2E-2272 -->

* Les suggestions de recherche de saisie automatique sur le mini front de recherche de l’en-tête fonctionnent désormais comme prévu. Auparavant, la saisie automatique ne remplissait pas ce champ lorsque cette fonctionnalité était activée. [GitHub-37557](https://github.com/magento/magento2/issues/37557)

<!-- ACP2E-2101 -->

* Les performances des requêtes effectuées à partir de la barre de recherche d’administration ont été améliorées par l’ajout d’un indexeur. Auparavant, plus la table `search_query` était grande, plus la requête prenait de temps.

<!-- ACP2E-2279 -->

* Le tri alphabétique des produits par nom fonctionne désormais correctement pour les noms contenant des caractères turcs.

<!-- ACP2E-1854 -->

* La propriété d’attribut de produit **[!UICONTROL Use in Search Results Layered Navigation]** s’affiche désormais uniquement lorsque **[!UICONTROL Use in Search]** paramètre est défini sur **[!UICONTROL Yes]**.

<!-- ACP2E-1870 -->

* Le prix de la recherche avancée et les filtres SKU fonctionnent désormais correctement lorsqu’ils sont appliqués ensemble dans une recherche avancée. [GitHub-37581](https://github.com/magento/magento2/issues/37581)

<!-- ACP2E-1787 -->

* Les champs de recherche vides ne sont plus recherchés. La taille de la table `search_query` est ainsi réduite. Auparavant, les requêtes incorrectes ou les requêtes sur des champs de recherche vides renvoyaient un jeu de données volumineux, ce qui augmentait la taille de la table de `search_query` et entraînait des problèmes de `/tmp`.

<!-- ACP2E-1916 -->

* Les filtres Storefront fonctionnent désormais comme prévu lors du tri des entrées de catalogue avec des attributs personnalisés de liste déroulante.

<!-- ACP2E-1499 -->

* Les résultats de recherche affichent désormais les résultats pertinents en fonction du poids de recherche des attributs comme prévu.

<!-- AC-7505 -->

* Le texte d’information sous le champ d’entrée `Storefront Properties` de l’attribut `Search Weight` dans Admin **[!UICONTROL Stores]** > **[!UICONTROL Attributes]** > **[!UICONTROL Product]** décrit désormais les valeurs possibles. [GitHub-36646](https://github.com/magento/magento2/issues/36675)

### Expédition

<!-- ACP2E-2515 -->

* Les règles de prix de panier fonctionnent désormais comme prévu lorsqu’un produit groupé est ajouté au panier lorsque les attributs de prix dynamiques sont désactivés. La livraison gratuite et le taux de table correct sont appliqués, que l’attribut dynamique soit activé ou désactivé. Auparavant, la livraison gratuite n’était pas appliquée comme prévu.

<!-- AC-9729 -->

* Magento Open Source passe maintenant à une nouvelle page d’expédition comme prévu après la création d’une expédition partielle pour une commande. Auparavant, après avoir créé une expédition partielle, Magento Open Source ne créait pas de page d’expédition complète pour les produits restants de la commande. [GitHub-38063](https://github.com/magento/magento2/issues/38063)

<!-- AC-8795 -->

* Le montant total pour l’expédition d’une commande à plusieurs adresses est maintenant correctement calculé. Auparavant, lorsqu’un devis contenait plusieurs adresses de livraison, l’adhérent total mettait à jour le montant des frais d’expédition pour l’adresse indiquée au `$quote->getShippingAddress()` lieu de le `$shippingAssignment` transmettre comme prévu. [GitHub-37283](https://github.com/magento/magento2/issues/37283)

<!-- ACP2E-2459 -->

* Magento Open Source ne lève plus d’exception lors du paiement avec plusieurs adresses de livraison lorsque l’utilisateur administrateur a utilisé la fonctionnalité de connexion en tant que client.

<!-- ACP2E-2258 -->

* Les produits sont désormais correctement répertoriés dans la grille Produits de la page Créer des packages lorsque vous ajoutez des produits à un package après la création de l’étiquette d’expédition.

<!-- ACP2E-2044 -->

* La requête `cart` renvoie désormais les remises sur les livraisons discrètes sous la forme de remises sur les livraisons distinctes avec des étiquettes de remise uniques. La nouvelle propriété de remise `applied_to` prend en charge la différenciation entre les remises appliquées à un article du panier. Auparavant, toutes les remises d’expédition étaient combinées en une valeur **[!UICONTROL Shipping Discount]** codée en dur.

<!-- ACP2E-1826 -->

* Lorsque l’utilisateur au statut d’administrateur crée une nouvelle commande, les adresses de facturation et d’expédition de la commande initiale renseignent automatiquement les champs appropriés lorsque l’utilisateur au statut d’administrateur clique sur le bouton **[!UICONTROL Reorder]** (**[!UICONTROL Sales]** d’administrateur > **[!UICONTROL Orders]** > **[!UICONTROL View]** ). Si les mêmes adresses sont enregistrées dans le carnet d’adresses de l’acheteur, la nouvelle commande incorporera toujours une version mise à jour de ces adresses. Auparavant, le champ Adresse d’expédition était prérempli avec les données mises à jour, mais pas le champ Adresse de facturation.

<!-- AC-7003 -->

* La **[!UICONTROL Shipping Policy]** zone de texte est maintenant visible dans l’étendue de la vue Boutique d’administration lorsque **[!UICONTROL Apply custom Shipping Policy]** cette option est activée et qu’une stratégie d’expédition personnalisée est disponible. [GitHub-36425](https://github.com/magento/magento2/issues/36425)

<!-- AC-7550 -->

* La `cart` requête renvoie désormais une `selected_shipping_method` valeur qui correspond à l’un des codes de transporteur `available_shipping_methods` et de méthode. Auparavant, lorsque l’un des modes d’expédition sélectionnés contenait un trait de soulignement, ces codes de transporteur/méthode ne correspondaient pas. [GitHub-36606](https://github.com/magento/magento2/issues/36606)

<!-- AC-2556 -->

* La `setShippingAddressesOnCart` mutation ne renvoie plus d’erreur lorsque la deuxième valeur du tableau de la rue est nulle. Auparavant, cette exception était générée : `The address failed to save. Verify the address and try again`. [GitHub-35160](https://github.com/magento/magento2/issues/35160)

### Plan du site

<!-- AC-2465 -->

* Le plan de site XML fonctionne désormais comme prévu dans un déploiement à plusieurs étages. Auparavant, les plans de site ne contenaient pas les pages par défaut attribuées pour chaque magasin. [GitHub-35001](https://github.com/magento/magento2/issues/35001)

<!-- AC-2267 -->

* Les marchands peuvent désormais créer et enregistrer un produit lorsque le site Web `id != 1` et le mode magasin unique sont activés. Auparavant, l’action d’enregistrement échouait avec ce message : `SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails`. [GitHub-35009](https://github.com/magento/magento2/issues/35009)

### Taxe

<!-- ACP2E-2651 -->

* Les factures affichent désormais le sous-total correct lorsque les taxes sont configurées et que FPT est activé.

<!-- ACP2E-2245 -->

* Magento Open Source affiche désormais la valeur correcte de la valeur **[!UICONTROL Regular Price]** lorsqu’une option personnalisée est sélectionnée pour un produit qui a une valeur **[!UICONTROL Special Price]** lorsque la **[!UICONTROL Price Display Settings]** est définie pour inclure la taxe.

<!-- ACP2E-2303 -->

* La taxe est désormais incluse comme prévu dans le prix d’expédition du workflow de passage en caisse, tel que spécifié par les paramètres de configuration.

<!-- AC-9758 -->

* La valeur de réponse de `applied_taxes` de requête `cart` inclut désormais toutes les règles fiscales individuelles comme prévu. Auparavant, elle renvoyait la valeur fiscale totale lorsque plusieurs règles fiscales étaient configurées.

<!-- ACP2E-2247 -->

* L’icône Réduire/Développer de la section **[!UICONTROL Additional Settings]** lors de la création de la règle de taxe fonctionne désormais comme prévu. Auparavant, seule l’icône Développer fonctionnait. [GitHub-37922](https://github.com/magento/magento2/issues/37922)

<!-- ACP2E-1527 -->

* Vous pouvez désormais modifier la valeur du pays et de la région du taux d’imposition à partir de la page de modification des règles fiscales comme prévu. Auparavant, les modifications apportées à partir de cette page n’étaient pas enregistrées.

<!-- ACP2E-1143 -->

* Le montant des taxes dans la zone d’estimation du panier est maintenant actualisé comme prévu lorsque le mode d’expédition est mis à jour. Auparavant, le taux de taxe n’était pas mis à jour après qu’un acheteur ait changé de pays lors du passage en caisse.

<!-- AC-8227 -->

* La valeur `tax class` pour les produits simples nouvellement créés est désormais définie sur la valeur du produit parent lors de la création de nouvelles variantes d’un produit configurable existant dans la portée Vue du magasin. Auparavant, cette valeur était définie sur Aucune. Par conséquent, aucune taxe n&#39;a été ajoutée à ces produits dans le panier et les clients ont été sous-taxés. [GitHub-37180](https://github.com/magento/magento2/issues/37180)

### Test

<!-- ACP2E-2501 -->

* Amélioration du `AdminCreateOrderWithVirtualProductFromDefaultSourceWithBackorders` test afin d’éliminer les échecs causés par le remplissage prématuré du champ de courriel.

<!-- AC-10863 -->

* `StorefrontVerifyProductAfterPartialReindexOnSeveralWebsitesTest` a été remanié afin d’améliorer la fiabilité. [GitHub-38359](https://github.com/magento/magento2/issues/38359)

<!-- ACP2E-2501 -->

* Correction du `AdminSimpleProductwithTextandVisualSwatch` test en introduisant une étape supplémentaire qui définit explicitement les attributs à utiliser dans la recherche.

<!-- AC-9194 -->

* Correction d’une faute de frappe dans le test unitaire `SortbyTest`. [GitHub-37792](https://github.com/magento/magento2/issues/37792)

<!-- AC-9035 -->

* Suppression des références à des classes inexistantes dans les tests unitaires. [GitHub-37636](https://github.com/magento/magento2/issues/37636)

<!-- ACP2E-2604 -->

* Amélioration du `AdminCreateOrderWithVirtualProductFromDefaultSourceWithBackorders` test afin d’éliminer les échecs causés par le remplissage prématuré du champ de courriel.

<!-- ACP2E-2202 -->

* Test de `Magento\GraphQl\Catalog\ProductSearchTest::testFilterProductsBySingleCategoryId` refactorisé pour gérer l’ordre aléatoire des catégories dans les réponses de requête `products`.

<!-- AC-6842 -->

* `\Magento\Test\Integrity\Di\CompilerTest::testConstructorIntegrity` test vérifie maintenant toutes les classes PHP à partir des modules enregistrés par `ComponentRegistrar()`.

<!-- AC-7098 -->

* Les problèmes de performances des baies volumineuses dans `TableNameSniff` ont été résolus.

<!-- ACP2E-1748 -->

* `CollectionTest::testGetDateRangeFirstPart()` prend désormais en compte l’heure d’été.

### Framework de l’interface utilisateur

<!-- AC-8039 -->

* L’attribut `crossorigin` a été ajouté à `linkTypes` pour les éléments `HEAD`.[GitHub-32509](https://github.com/magento/magento2/issues/32509)

<!-- AC-9604 -->

* Le téléchargeur d’images fonctionne désormais comme prévu dans les lignes dynamiques. Les images sont désormais correctement chargées lorsqu’elles sont envoyées sous la forme d’un tableau multinational. [GitHub-37957](https://github.com/magento/magento2/issues/37957)

<!-- AC-10877 -->

* Les styles de chargement de fichier ne sont plus dupliqués dans le thème Luma . [GitHub-32373](https://github.com/magento/magento2/issues/32373)

<!-- AC-9984 -->

* Les champs de rue sur le formulaire d’adresse de modification du compte client de champ de rue sont maintenant enregistrés correctement. Ces champs sont désormais correctement triés selon les clés indiquées dans le formulaire. [GitHub-37973](https://github.com/magento/magento2/issues/37973)

<!-- AC-3001 -->

* Les valeurs CLS (Cumulative Layout Shift) ont été améliorées pour les pages de détails du produit. (Cette mesure quantifie la stabilité visuelle des mises en page).[GitHub-35410](https://github.com/magento/magento2/issues/35410)

<!-- AC-10567 -->

* Amélioration de la messagerie des erreurs qui se produisent pendant le rendu du modèle. Magento Open Source affiche désormais un message informatif. Auparavant, Magento Open Source affichait des fuites HTML lorsqu’une erreur PHP se produisait.

<!-- ACP2E-2595 -->

* Les attributs personnalisés du client (type `File attached`) fonctionnent désormais correctement avec les images qui ont été supprimées, puis téléchargées. Auparavant, les attributs personnalisés chargés, puis supprimés et chargés à nouveau ne pouvaient pas être enregistrés à partir du storefront.

<!-- AC-9125 -->

* Correction d&#39;une erreur de syntaxe dans le fichier de modèle de calendrier. [GitHub-37725](https://github.com/magento/magento2/issues/37725)

<!-- AC-6445 -->

* Les utilisateurs administrateurs peuvent désormais modifier le logo du storefront lorsque le mode magasin unique est activé. Auparavant, Magento Open Source affichait le logo de secours par défaut. [GitHub-35952](https://github.com/magento/magento2/issues/35952)

<!-- ACP2E-2045 -->

* Les valeurs de configuration des mixins ne sont plus vides et les mixins jQuery fonctionnent désormais quelle que soit la position de chargement. Auparavant, les mixins jQuery n’étaient pas chargés de manière cohérente dans les navigateurs.

<!-- AC-8823 -->

* Les mots de passe s’affichent désormais comme prévu lorsque la case **[!UICONTROL Show Password]** de la page de connexion est activée.

<!-- ACP2E-2034 -->

* Magento Open Source affiche désormais des prix corrects pour les produits groupés fixes avec des prix spéciaux.

<!-- AC-8285 -->

* Mise à jour du lien vers la page de liste Problèmes GitHub dans le fichier de modèle de pied de page du storefront. [GitHub-37214](https://github.com/magento/magento2/issues/37214)

<!-- AC-6282 -->

* Le widget Récemment consultés affiche désormais le montant correct de taxe dans les prix de produits groupés. [GitHub-35881](https://github.com/magento/magento2/issues/35881)

<!-- AC-6636 -->

* Les utilisateurs administrateurs peuvent maintenant glisser-déposer les options personnalisables créées pour le produit simple comme prévu. [GitHub-36051](https://github.com/magento/magento2/issues/36051)

<!-- AC-8345 -->

* L’ordre des types d’attributs Liste déroulante de produit correspond désormais à l’ordre des images sur la page de produit configurable. [GitHub-37285](https://github.com/magento/magento2/issues/37285)

<!-- ACP2E-1969 -->

* Les messages système se chargent désormais plus rapidement. Seuls les messages affichés sont chargés. Auparavant, tous les messages étaient chargés à partir de la base de données, ce qui prenait du temps.

<!-- ACP2E-1804 -->

* La suppression du nœud de chemin de navigation en définissant `remove=true` à travers la mise en page XML n’entraîne plus la suppression du titre de la page sur la page de catégorie. Auparavant, la suppression des chemins de navigation de cette manière supprimait le titre de la page de la catégorie.

<!-- ACP2E-171 -->

* Le formulaire d’enregistrement des clients se charge désormais comme prévu lorsqu’il inclut des attributs client à sélection multiple. Auparavant, Magento Open Source avait généré l’exception suivante : `[2023-03-05T05:57:40.032602+00:00] report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- ACP2E-1602 -->

* Les messages de bienvenue contenant des guillemets simples sont désormais rendus correctement sur la vitrine sans erreur de console. Auparavant, si un message de bienvenue contenait un guillemet unique, le message de bienvenue n’était pas chargé pendant le rendu de la vitrine. Magento Open Source affichait également des erreurs dans la console.

<!-- ACP2E-1369 -->

* Magento Open Source ne renvoie plus d’erreur lorsque vous tentez de changer rapidement d’affichage entre l’historique des commentaires et les retours dans la page Commande d’administration . Auparavant, Magento Open Source affichait cette erreur générique : `A technical problem with the server created an error`.

<!-- ACP2E-1374 -->

* Les utilisateurs administrateurs disposant de privilèges limités à un site Web peuvent désormais mettre à jour les attributs de produit spécifiques au site Web définis sur une `all stores view` étendue.

<!-- ACP2E-1648 -->

* Le widget de loupe se charge maintenant comme prévu sur la page du produit.

<!-- ACP2E-1216 -->

* Les options personnalisables multiligne sont désormais correctement rendues dans les documents PDF de facture, d’expédition et d’avoir. Auparavant, le texte multiligne était précédé d’un saut de page inattendu et, si le texte dépassait la page, le texte était tronqué.

<!-- AC-7402 -->

* Les utilisateurs administrateurs peuvent désormais ajouter une nouvelle adresse de client à partir de l’administration lorsque ce client a été créé pour un autre site web dont l’ID de magasin ne correspond pas à l’ID du site web. Auparavant, Magento Open Source affichait le message pop-up suivant : `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- ACP2E-1775 -->

* Les messages d’erreur associés à l’envoi de commentaires sur la page des détails de la commande sont désormais plus informatifs. Auparavant, lorsqu’un acheteur cliquait sur **[!UICONTROL Submit comment]** sans modifier le statut de la commande ni saisir de texte dans la zone de commentaire, Magento Open Source affichait le message suivant : `The comment is missing. Enter and try again`.

<!-- ACP2E-1659 -->

* L’icône de calendrier s’affiche désormais comme prévu dans les champs de période dans Admin **[!UICONTROL Marketing]** > **[!UICONTROL Cart Price Rules]** après la sélection d’une date pour un champ. Auparavant, après avoir sélectionné une date pour un champ, l’icône de calendrier n’était plus affichée sur les autres champs et le texte d’espace réservé Magento Open Source était affiché. [GitHub-36499](https://github.com/magento/magento2/issues/36499)

<!-- ACP2E-1717 -->

* Les formulaires d’enregistrement de clients qui comprennent des champs à sélection multiple se chargent désormais correctement. Auparavant, ce formulaire ne se chargeait pas lorsqu’il contenait des champs à sélection multiple, et l’erreur suivante était déclenchée : `report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- AC-7092 -->

* Cliquez sur une miniature vidéo en mode plein écran de la galerie de produits pour afficher la vidéo comme prévu. Auparavant, la vidéo ne s’affichait pas et la console du navigateur affichait une erreur JavaScript. [GitHub-36456](https://github.com/magento/magento2/issues/36456)

<!-- AC-7806 -->

* Ajout d’une variable à la ligne de copyright qui est automatiquement mise à jour chaque année. [GitHub-36776](https://github.com/magento/magento2/issues/36776)

<!-- AC-8441 -->

* Le curseur d’image de la page de produit fonctionne désormais comme prévu dans la vue mobile. Auparavant, seule la première image était affichée. [GitHub-37232](https://github.com/magento/magento2/issues/37232)

### Réécritures d’URL

<!-- ACP2E-2549 -->

* Les réécritures d’URL sont désormais générées en fonction de la configuration de visibilité au niveau du magasin dans les déploiements multi-magasin. Auparavant, les réécritures d’URL n’étaient pas générées pour les magasins autres que ceux par défaut lorsque la visibilité du produit était définie sur **non visible** dans la portée du magasin par défaut.

<!-- AC-10464 -->

* `Category::getUrl()` ne récupère plus de redirection 301. [GitHub-38152](https://github.com/magento/magento2/issues/38152)

<!-- ACP2E-2629 -->

* Magento Open Source ne génère plus de réécritures d’URL de produit pour les catégories racines et pour les produits définis pour **[!UICONTROL Not Visible Individually]** dans des configurations multi-magasin lors de la génération de réécritures d’URL manquantes pour les magasins personnalisés.

<!-- ACP2E-2481 -->

* Les balises d’URL canoniques reflètent désormais les modifications attendues après la mise à jour de la propriété Clé d’URL de catégorie. Auparavant, l’URL de catégorie obsolète était utilisée, ce qui déclenchait immédiatement la redirection vers la nouvelle URL.

<!-- AC-6728 -->

* Les réécritures d’URL de produit de catégorie sont désormais générées comme prévu pour toutes les vues de magasin lorsqu’un produit est ajouté à une catégorie. [GitHub-32910](https://github.com/magento/magento2/issues/32910)

<!-- ACP2E-1783 -->

* Magento Open Source ne renvoie plus d’erreur lorsque vous tentez de créer une redirection 301/302 pour une URL de produit lorsque l’option **Générer les réécritures d’URL de catégorie/produit** est activée. Lorsqu’un produit est créé et affecté à une catégorie, des réécritures d’URL automatisées sont créées : une pour l’URL directe et une pour le produit via le chemin d’accès à la catégorie. Lorsqu’une nouvelle réécriture d’URL de produit est créée, les corrélations entre le produit, la catégorie et le magasin sont vérifiées. Ce contrôle est désormais basé sur les propriétés d’entité corrélées (catégorie et produit). Auparavant, cette vérification était effectuée sur les réécritures d’URL préexistantes.

<!-- ACP2E-1737 -->

* Les réécritures d’URL de catégorie sont désormais générées pour toutes les vues de magasin lorsqu’une nouvelle catégorie est importée à partir d’un fichier CSV.

<!-- ACP2E-1700 -->

* Les configurations des suffixes d’URL de produit et de suffixes d’URL de catégorie correspondent désormais aux suffixes dans le `url_rewrite` tableau. Auparavant, les conditions de concurrence lors de la mise à jour des configurations de suffixes d’URL se produisaient et les suffixes d’URL configurés et le `url_rewrite` tableau ne correspondaient pas.

<!-- ACP2E-1703 -->

* Magento Open Source effectue désormais le rendu de l’arborescence des catégories à tous les niveaux lors de la création de réécritures d’URL de catégorie. Auparavant, seuls les trois premiers niveaux de catégories étaient affichés. [GitHub-36973](https://github.com/magento/magento2/issues/36973)

<!-- ACP2E-1737 -->

* Les réécritures d’URL de catégorie sont maintenant présentes dans le fichier CSV lors de l’import d’une nouvelle catégorie.

<!-- ACP2E-1668 -->

* Les pages CMS multi-magasins sans réécriture d’URL sont maintenant transférées comme prévu. Auparavant, les pages CMS multi-magasin demandées sans réécriture d’URL étaient redirigées vers la page d’accueil de la boutique, mais les pages CMS d’origine n’étaient pas redirigées.

### Framework d’API web

<!-- AC-6980 -->

* Magento Open Source n’affiche plus d’avertissement `Integration not secure` dans Admin **[!UICONTROL System]** > **[!UICONTROL Extensions]** > **[!UICONTROL Integrations]** lorsque les champs **[!UICONTROL Callback URL]** et **[!UICONTROL Identity link URL]** sont vides. [GitHub-36407](https://github.com/magento/magento2/issues/36407)

<!-- ACP2E-2483 -->

* Ajout des attributs d’extension `taxes`, `itemized_taxes` et `additional_itemized_taxes` à  `Magento\Sales\Api\Data\OrderInterface`. Ces attributs vous permettent d’enregistrer les taxes appliquées avec les appels REST de commande.

<!-- ACP2E-2610 -->

* L’API REST Prix de niveau prend désormais en charge les quantités décimales. Auparavant, cette API n’autorisait pas les quantités décimales, même lorsque le paramètre **[!UICONTROL Use Decimal Quantity]** était activé.

<!-- AC-8998 -->

* Le point d’entrée de l’`V1/orders/{id}/comments` REST ne modifie plus le statut d’une commande lors de la tentative d’ajout d’un commentaire au statut d’une commande en attente. Elle renvoie désormais une erreur informative. Auparavant, ce point d’entrée modifiait le statut de la commande lors de l’ajout d’un commentaire.

<!-- ACP2E-2275 -->

* Le point d’entrée `GET` et `POST V1/products/attributes` de l’API REST ne renvoie plus la même valeur pour l’attribut `is_filterable` pour les options `Filterable(with results)` et `Filterable(no results)` de l’option **[!UICONTROL Use in Layered Navigation]**. Auparavant, ce point d’entrée renvoyait la même valeur, car la propriété d’attribut `is_filterable` était de type `Boolean`, ce qui ne permettait pas de définir cette propriété sur `Filterable(no results)`. [GitHub-37979](https://github.com/magento/magento2/issues/37979)

<!-- AC-9117 -->

* Le champ `media_gallery_entries` manquant a été ajouté au point d’entrée de `V1/configurable-products/sku/children` REST. Auparavant, cette fonction ne contenait pas le code nécessaire pour stocker et afficher les `media_gallery_entries`. [GitHub-37607](https://github.com/magento/magento2/issues/37607)

<!-- ACP2E-1986 -->

* La méthode REST `V1/carts/mine/estimate-shipping-methods` valide désormais tous les niveaux de données de champ de payload et renvoie un code HTTP 400 pour les données non valides. Auparavant, seul le premier niveau de payload de l’API était validé, et si des données non valides étaient renvoyées dans des niveaux non validés de la payload, Magento Open Source renvoyait un code d’état 500.

<!-- ACP2E-2053 -->

* Les opérations d’API REST en bloc asynchrones pour mettre à jour les produits avec des prix de niveau et différents jeux d’attributs sont désormais terminées. Auparavant, les produits avec des jeux d’attributs différents ne pouvaient pas être mis à jour de cette manière et Magento Open Source affichait cette erreur : `The product was unable to be saved. Please try again`.

<!-- AC-7002 -->

* Le point d’entrée `POST /V1/products/tier-prices` renvoie désormais un message d’erreur plus informatif lorsqu’un nom de groupe de clients non valide est utilisé lors de la création du prix de niveau. Auparavant, Magento Open Source renvoyait une erreur de ce type : `Notice: Undefined index: XXXXX in ~/public_html/vendor/magento/module-catalog/Model/Product/Price/Validation/TierPriceValidator.php on line 474"`. [GitHub-36431](https://github.com/magento/magento2/issues/36431)

<!-- ACP2E-1776 -->

* Vous pouvez désormais exécuter une demande d’API asynchrone en bloc autorisée pour créer des clients avec un ID de groupe autre que celui par défaut. Auparavant, ces requêtes réinitialisaient l’ID de groupe à la valeur par défaut.

<!-- ACP2E-1543 -->

* Les clients créés à l’aide de l’API Bulk reçoivent désormais des e-mails d’enregistrement client dans la langue configurée dans le site Web qui leur est attribué. Auparavant, tous les e-mails étaient envoyés aux paramètres régionaux par défaut, et non aux paramètres régionaux du site Web auquel le client est affecté.

<!-- ACP2E-1339 AC-7577-->

* L’appel `POST V1/guest-carts` n’envoie plus de commandes d’invités lorsque **[!UICONTROL Allow Guest Checkout]** est désactivé.

<!-- ACP2E-1526 -->

* Magento Open Source renvoie désormais avec succès l’attribut `content` (code d’image base64) dans `GET V1/products/sku/media` réponses de l’API de média de produit. L’attribut `content` n’apparaissait pas auparavant dans la réponse.

## Configuration requise

Notre pile technologique est construite sur PHP et MySQL. Pour plus d’informations, consultez [Configuration requise](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html?lang=fr).

## Instructions d’installation et de mise à niveau

Vous pouvez installer Magento Open Source 2.4.7 à l’aide de [Composer](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html?lang=fr).
